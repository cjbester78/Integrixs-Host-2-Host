var Ka=Object.defineProperty;var $a=(s,t,r)=>t in s?Ka(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var De=(s,t,r)=>$a(s,typeof t!="symbol"?t+"":t,r);import{j as e,a as Rs,H as ve,P as ye,g as Va,B as za,E as Ba,d as Nt,b as qa,e as Ha,f as Ga,r as Wa,i as Ya,C as Qa,h as Ja,k as Xa,M as Za,l as bt}from"./reactflow-DSe82xZ2.js";import{b as er,r as y,a as Ie}from"./vendor-CkebN-nG.js";import{N as Ks,u as Oe,O as sr,a as $e,L as at,b as dt,c as tr,R as ar,d as oe,B as rr}from"./router-BHeSLID_.js";import{a as nr,u as se,b as me,c as Pe,Q as ir,d as lr}from"./query-P2lKDTSa.js";import{t as cr,c as or,a as Qs,L as dr,P as Me,A as ke,B as rt,D as Je,S as de,C as Fs,b as mt,d as Js,e as mr,M as xr,f as ur,g as $t,U as Ps,h as hr,i as fs,E as Ms,j as Ae,X as Ne,k as xt,l as pr,m as Xe,n as Ds,o as vs,p as ne,R as Ce,T as gr,F as pe,q as Gs,r as be,s as Ee,H as jr,K as Qe,u as fr,v as Ze,w as nt,x as ge,y as ut,z as Be,G as Le,I as vr,J as Us,N as qe,O as Te,Q as zs,V as wt,W as Os,Y as rs,Z as St,_ as Ct,$ as yr,a0 as Et,a1 as Nr,a2 as Ue,a3 as br,a4 as Vt,a5 as es,a6 as wr,a7 as Ye,a8 as Tt,a9 as it,aa as kt,ab as Sr,ac as he,ad as Cr,ae as ws,af as ds,ag as Er,ah as Tr,ai as kr,aj as Ar,ak as Fr,al as Pr,am as Dr,an as Ir,ao as Lr,ap as Rr,aq as zt}from"./utils-BAPvyct0.js";import{c as Bt,u as ht,a as Ve,C as W}from"./forms-BWU-AKHq.js";import{C as Mr,S as Ur}from"./websocket-DDMhnY3t.js";import{S as Or,a as qt,b as Ht,P as _r,C as Gt,I as Wt,c as Yt,d as Qt,R as Jt,L as Xt,e as Zt,f as Kr,T as $r,g as ea,O as sa,h as Vr,i as ta,j as zr,k as aa,D as ra,l as Br,m as qr,n as na,o as Hr,p as ia,q as la,r as Gr,s as ca,V as Wr,t as oa,u as da,v as Yr,w as Qr,x as ma,y as Jr,z as Xr,A as xa,B as Zr,E as ua,F as ha,G as pa,H as en,J as ga,K as sn,M as tn,N as pt,Q as an,U as ja,W as At,X as rn,Y as nn,Z as fa,_ as ln,$ as cn,a0 as on,a1 as dn,a2 as mn,a3 as xn}from"./ui-Dtb3gGlJ.js";import"./charts-CItJE7zn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var lt={},Ft=er;lt.createRoot=Ft.createRoot,lt.hydrateRoot=Ft.hydrateRoot;const un={};function hn(s,t){let r;try{r=s()}catch{return}return{getItem:a=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),h=(i=r.getItem(a))!=null?i:null;return h instanceof Promise?h.then(o):o(h)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const Is=s=>t=>{try{const r=s(t);return r instanceof Promise?r:{then(n){return Is(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Is(n)(r)}}}},pn=(s,t)=>(r,n,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,E)=>({...E,...S}),...t},o=!1;const h=new Set,l=new Set;let j;try{j=i.getStorage()}catch{}if(!j)return s((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...S)},n,a);const m=Is(i.serialize),p=()=>{const S=i.partialize({...n()});let E;const x=m({state:S,version:i.version}).then(A=>j.setItem(i.name,A)).catch(A=>{E=A});if(E)throw E;return x},d=a.setState;a.setState=(S,E)=>{d(S,E),p()};const C=s((...S)=>{r(...S),p()},n,a);let g;const u=()=>{var S;if(!j)return;o=!1,h.forEach(x=>x(n()));const E=((S=i.onRehydrateStorage)==null?void 0:S.call(i,n()))||void 0;return Is(j.getItem.bind(j))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var A;return g=i.merge(x,(A=n())!=null?A:C),r(g,!0),p()}).then(()=>{E==null||E(g,void 0),o=!0,l.forEach(x=>x(g))}).catch(x=>{E==null||E(void 0,x)})};return a.persist={setOptions:S=>{i={...i,...S},S.getStorage&&(j=S.getStorage())},clearStorage:()=>{j==null||j.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>u(),hasHydrated:()=>o,onHydrate:S=>(h.add(S),()=>{h.delete(S)}),onFinishHydration:S=>(l.add(S),()=>{l.delete(S)})},u(),g||C},gn=(s,t)=>(r,n,a)=>{let i={storage:hn(()=>localStorage),partialize:u=>u,version:0,merge:(u,S)=>({...S,...u}),...t},o=!1;const h=new Set,l=new Set;let j=i.storage;if(!j)return s((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...u)},n,a);const m=()=>{const u=i.partialize({...n()});return j.setItem(i.name,{state:u,version:i.version})},p=a.setState;a.setState=(u,S)=>{p(u,S),m()};const d=s((...u)=>{r(...u),m()},n,a);a.getInitialState=()=>d;let C;const g=()=>{var u,S;if(!j)return;o=!1,h.forEach(x=>{var A;return x((A=n())!=null?A:d)});const E=((S=i.onRehydrateStorage)==null?void 0:S.call(i,(u=n())!=null?u:d))||void 0;return Is(j.getItem.bind(j))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var A;const[c,F]=x;if(C=i.merge(F,(A=n())!=null?A:d),r(C,!0),c)return m()}).then(()=>{E==null||E(C,void 0),C=n(),o=!0,l.forEach(x=>x(C))}).catch(x=>{E==null||E(void 0,x)})};return a.persist={setOptions:u=>{i={...i,...u},u.storage&&(j=u.storage)},clearStorage:()=>{j==null||j.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:u=>(h.add(u),()=>{h.delete(u)}),onFinishHydration:u=>(l.add(u),()=>{l.delete(u)})},i.skipHydration||g(),C||d},jn=(s,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((un?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),pn(s,t)):gn(s,t),fn=jn,vn={persistLogin:!1,sessionTimeout:24*60*60*1e3,heartbeatInterval:5*60*1e3};class yn{constructor(t={}){De(this,"config");De(this,"heartbeatTimer");De(this,"sessionTimeoutTimer");De(this,"isVerifying",!1);this.config={...vn,...t},this.setupSessionManagement()}setupSessionManagement(){window.addEventListener("beforeunload",this.handleBeforeUnload.bind(this)),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),this.isLoggedIn()&&this.startHeartbeat()}handleBeforeUnload(t){console.log("[SessionManager] beforeunload triggered, persistLogin:",this.config.persistLogin)}handleVisibilityChange(){document.hidden?this.stopHeartbeat():this.isLoggedIn()&&this.startHeartbeat()}setToken(t,r,n=!1){console.log("[SessionManager] setToken called with persistLogin:",n),this.config.persistLogin=n,n?(console.log("[SessionManager] Storing in localStorage (persistent)"),localStorage.setItem("h2h_token",t),localStorage.setItem("h2h_user",JSON.stringify(r)),localStorage.setItem("h2h_persist_login","true"),sessionStorage.removeItem("h2h_token"),sessionStorage.removeItem("h2h_user")):(console.log("[SessionManager] Storing in sessionStorage (temporary)"),sessionStorage.setItem("h2h_token",t),sessionStorage.setItem("h2h_user",JSON.stringify(r)),localStorage.removeItem("h2h_token"),localStorage.removeItem("h2h_user"),localStorage.removeItem("h2h_persist_login")),this.startHeartbeat(),this.startSessionTimeout()}getToken(){return sessionStorage.getItem("h2h_token")||localStorage.getItem("h2h_token")}getUser(){const t=sessionStorage.getItem("h2h_user")||localStorage.getItem("h2h_user");return t?JSON.parse(t):null}isLoggedIn(){return!!this.getToken()}isPersistentLogin(){return localStorage.getItem("h2h_persist_login")==="true"}logout(){this.clearAllTokens(),this.stopHeartbeat(),this.stopSessionTimeout(),window.location.href="/login"}clearTokens(){this.clearAllTokens(),this.stopHeartbeat(),this.stopSessionTimeout()}forceLogout(t="Session expired"){console.warn("Force logout:",t),this.logout()}clearAllTokens(){sessionStorage.removeItem("h2h_token"),sessionStorage.removeItem("h2h_user"),localStorage.removeItem("h2h_token"),localStorage.removeItem("h2h_user"),localStorage.removeItem("h2h_persist_login")}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=window.setInterval(()=>{this.isVerifying||this.performHeartbeat()},this.config.heartbeatInterval)}stopHeartbeat(){this.heartbeatTimer&&(window.clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0)}startSessionTimeout(){this.stopSessionTimeout(),this.sessionTimeoutTimer=window.setTimeout(()=>{this.forceLogout("Session timeout")},this.config.sessionTimeout)}stopSessionTimeout(){this.sessionTimeoutTimer&&(window.clearTimeout(this.sessionTimeoutTimer),this.sessionTimeoutTimer=void 0)}async performHeartbeat(){if(!this.isVerifying){this.isVerifying=!0;try{const t=this.getToken();if(!t){this.forceLogout("No token found");return}const r=await fetch("/api/auth/verify",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok){r.status===401&&this.forceLogout("Invalid token");return}this.startSessionTimeout()}catch(t){console.warn("Heartbeat failed:",t)}finally{this.isVerifying=!1}}}refreshSession(){this.isLoggedIn()&&this.startSessionTimeout()}}const Se=new yn,Nn=["mousedown","mousemove","keypress","scroll","touchstart"];let Pt=Date.now();Nn.forEach(s=>{document.addEventListener(s,()=>{const t=Date.now();t-Pt>6e4&&Se.refreshSession(),Pt=t},!0)});class bn{constructor(t){De(this,"client",null);De(this,"subscriptions",new Map);De(this,"isConnected",!1);De(this,"reconnectAttempts",0);De(this,"maxReconnectAttempts",5);De(this,"reconnectInterval",5e3);De(this,"reconnectTimer");this.baseUrl=t,this.baseUrl=t||this.getWebSocketUrl()}getWebSocketUrl(){return`${window.location.protocol}//${window.location.host}/ws`}getAuthToken(){return sessionStorage.getItem("h2h_token")||localStorage.getItem("h2h_token")}connect(){return this.isConnected?Promise.resolve():new Promise((t,r)=>{const n=this.getAuthToken();if(!n){r(new Error("No authentication token available"));return}const a={webSocketFactory:()=>new Ur(this.baseUrl),connectHeaders:{Authorization:`Bearer ${n}`},heartbeatIncoming:4e3,heartbeatOutgoing:4e3,reconnectDelay:this.reconnectInterval,logRawCommunication:!1,debug:()=>{},onConnect:i=>{console.log("[WebSocket] Connected successfully",i),this.isConnected=!0,this.reconnectAttempts=0,this.clearReconnectTimer(),this.resubscribeAll(),t()},onStompError:i=>{console.error("[WebSocket] STOMP error",i),this.isConnected=!1,r(new Error(`STOMP error: ${i.body}`))},onWebSocketClose:i=>{console.warn("[WebSocket] Connection closed",i),this.isConnected=!1,this.handleReconnect()},onDisconnect:i=>{console.log("[WebSocket] Disconnected",i),this.isConnected=!1},onWebSocketError:i=>{console.error("[WebSocket] Connection error",i),this.isConnected=!1,this.handleReconnect()}};this.client=new Mr(a),this.client.activate()})}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("[WebSocket] Maximum reconnection attempts reached");return}this.reconnectAttempts++,console.log(`[WebSocket] Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.reconnectTimer=setTimeout(()=>{this.connect().catch(t=>{console.error("[WebSocket] Reconnection failed",t)})},this.reconnectInterval*this.reconnectAttempts)}clearReconnectTimer(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=void 0)}resubscribeAll(){const t=Array.from(this.subscriptions.keys());for(const r of t)this.subscribeToTopic(r)}subscribeToTopic(t){if(!this.client||!this.isConnected){console.warn(`[WebSocket] Cannot subscribe to ${t}: not connected`);return}this.client.subscribe(t,r=>{try{const n=JSON.parse(r.body),a=this.subscriptions.get(t)||[];for(const i of a)try{i(n)}catch(o){console.error(`[WebSocket] Handler error for topic ${t}:`,o)}}catch(n){console.error(`[WebSocket] Failed to parse message on ${t}:`,n)}})}subscribe(t,r){return this.subscriptions.has(t)||this.subscriptions.set(t,[]),this.subscriptions.get(t).push(r),this.isConnected&&this.subscribeToTopic(t),()=>{const n=this.subscriptions.get(t);if(n){const a=n.indexOf(r);a>-1&&(n.splice(a,1),n.length===0&&this.subscriptions.delete(t))}}}subscribeToFlowExecutions(t){return this.subscribe("/topic/flow-executions",r=>{r.type==="FLOW_EXECUTION_UPDATE"&&t(r)})}subscribeToSpecificFlowExecutions(t,r){return this.subscribe(`/topic/flow/${t}/executions`,n=>{n.type==="FLOW_EXECUTION_UPDATE"&&r(n)})}subscribeToSpecificExecution(t,r){return this.subscribe(`/topic/execution/${t}`,n=>{(n.type==="FLOW_EXECUTION_UPDATE"||n.type==="FLOW_STEP_UPDATE")&&r(n)})}subscribeToExecutionSteps(t,r){return this.subscribe(`/topic/execution/${t}/steps`,n=>{n.type==="FLOW_STEP_UPDATE"&&r(n)})}subscribeToFlowDefinitionUpdates(t){return this.subscribe("/topic/flow-definitions",r=>{r.type==="FLOW_DEFINITION_UPDATE"&&t(r)})}subscribeToFlowValidation(t,r){return this.subscribe(`/topic/flow/${t}/validation`,n=>{n.type==="FLOW_VALIDATION_RESULT"&&r(n)})}subscribeToSystemHealth(t){return this.subscribe("/topic/system-health",r=>{r.type==="SYSTEM_HEALTH_UPDATE"&&t(r)})}disconnect(){this.clearReconnectTimer(),this.isConnected=!1,this.subscriptions.clear(),this.client&&(this.client.deactivate(),this.client=null),console.log("[WebSocket] Disconnected and cleaned up")}isConnectionActive(){var t;return this.isConnected&&((t=this.client)==null?void 0:t.connected)===!0}getConnectionStatus(){return this.client?this.isConnected&&this.client.connected?"connected":this.reconnectAttempts>0?"reconnecting":this.client.active?"connecting":"disconnected":"disconnected"}}let bs=null;function wn(){return bs||(bs=new bn),bs}function va(){return wn().connect()}function Ss(){bs&&(bs.disconnect(),bs=null)}const Sn=()=>{try{const s=localStorage.getItem("h2h_persist_login")==="true",t=Se.getToken(),r=Se.getUser();let n=!1;if(t)try{const i=JSON.parse(atob(t.split(".")[1])),o=Date.now()/1e3;n=i.exp>o}catch{}return{user:r,token:t,isAuthenticated:!!(t&&r&&n),persistLogin:s,hasInitialized:!1,isLoading:!1}}catch(s){return console.warn("Failed to initialize auth state from storage:",s),{user:null,token:null,isAuthenticated:!1,persistLogin:!1,hasInitialized:!1,isLoading:!0}}},ns=Bt()(fn((s,t)=>({...Sn(),setAuth:(r,n,a=!1)=>{s({user:r,token:n,isAuthenticated:!0,isLoading:!1,hasInitialized:!0,persistLogin:a}),Se.setToken(n,r,a),va().catch(i=>{console.warn("[Auth Store] Failed to initialize WebSocket:",i)})},clearAuth:()=>{s({user:null,token:null,isAuthenticated:!1,isLoading:!1,hasInitialized:!0,persistLogin:!1}),Ss()},setLoading:r=>{s({isLoading:r})},setInitialized:r=>{s({hasInitialized:r,isLoading:!1})},updateUser:r=>{s({user:r});const n=t().token;n&&Se.setToken(n,r,t().persistLogin)},setPersistLogin:r=>{s({persistLogin:r})}}),{name:"h2h-auth",partialize:s=>({persistLogin:s.persistLogin})})),Cn=()=>window.location.origin,En=Cn(),k=nr.create({baseURL:En,timeout:3e4,headers:{"Content-Type":"application/json"}});k.interceptors.request.use(s=>{const t=sessionStorage.getItem("h2h_token")||localStorage.getItem("h2h_token");return t&&(s.headers.Authorization=`Bearer ${t}`),s});k.interceptors.response.use(s=>s,s=>{var t,r,n;if(((t=s.response)==null?void 0:t.status)===401){const a=((r=s.config)==null?void 0:r.url)||"";console.warn("[API] 401 response received:",{url:a,method:(n=s.config)==null?void 0:n.method})}return Promise.reject(s)});const gt={login:async s=>(await k.post("/api/auth/login",s)).data,refreshToken:async s=>(await k.post("/api/auth/refresh",{refreshToken:s})).data,verifyToken:async()=>(await k.get("/api/auth/verify")).data,logout:async()=>(await k.post("/api/auth/logout")).data},js={getCurrentUser:async()=>{var t;const s=await k.get("/api/users/me");return((t=s.data)==null?void 0:t.data)||s.data},getAllUsers:async()=>{var t;return((t=(await k.get("/api/users")).data)==null?void 0:t.data)||[]},createUser:async s=>(await k.post("/api/users",s)).data,updateUser:async(s,t)=>(await k.put(`/api/users/${s}`,t)).data,deleteUser:async s=>(await k.delete(`/api/users/${s}`)).data,changePassword:async(s,t,r)=>(await k.put(`/api/users/${s}/password`,{currentPassword:t,newPassword:r})).data},tt={getSystemHealth:async()=>(await k.get("/api/dashboard/health")).data,getAdapterStatistics:async()=>(await k.get("/api/dashboard/adapter-stats")).data,getRecentExecutions:async(s=10)=>(await k.get(`/api/dashboard/recent-executions?limit=${s}`)).data},ct={getDashboardIntervals:async()=>(await k.get("/api/configuration/dashboard/intervals")).data,getAllConfigurations:async()=>(await k.get("/api/configuration/all")).data,getConfigurationsByCategory:async s=>(await k.get(`/api/configuration/category/${s}`)).data,updateConfigurationValue:async(s,t)=>(await k.put(`/api/configuration/key/${s}/value`,{value:t})).data,resetConfigurationToDefault:async s=>(await k.put(`/api/configuration/key/${s}/reset`)).data,getConfigurationMetadata:async()=>(await k.get("/api/configuration/metadata")).data,getConfigurationStatistics:async()=>(await k.get("/api/configuration/statistics")).data},$s={getAllAdapters:async()=>(await k.get("/api/adapters")).data,getAdaptersByPackage:async s=>(await k.get(`/api/adapters/package/${s}`)).data,getAdapter:async s=>(await k.get(`/api/adapters/${s}`)).data,createAdapter:async s=>(await k.post("/api/adapters",s)).data,updateAdapter:async(s,t)=>(await k.put(`/api/adapters/${s}`,t)).data,deleteAdapter:async s=>(await k.delete(`/api/adapters/${s}`)).data,testAdapter:async s=>(await k.post(`/api/adapters/${s}/test`)).data,executeAdapter:async s=>(await k.post(`/api/adapters/${s}/execute`)).data,startAdapter:async s=>(await k.post(`/api/adapters/${s}/start`)).data,stopAdapter:async s=>(await k.post(`/api/adapters/${s}/stop`)).data,getAdapterStatus:async s=>(await k.get(`/api/adapters/${s}/status`)).data,getAdapterLogs:async s=>{const t=new URLSearchParams;s!=null&&s.filter&&t.append("filter",s.filter),s!=null&&s.level&&s.level!=="all"&&t.append("level",s.level),s!=null&&s.adapterId&&t.append("adapterId",s.adapterId);const r=`/api/adapters/logs${t.toString()?`?${t.toString()}`:""}`;return(await k.get(r)).data},getAdapterExecutionHistory:async(s,t)=>{const r=new URLSearchParams;t!=null&&t.limit&&r.append("limit",t.limit.toString());const n=`/api/adapters/${s}/executions${r.toString()?`?${r.toString()}`:""}`;return(await k.get(n)).data}},Tn={getAllInterfaces:async()=>(await k.get("/api/interfaces")).data},ps={getAllKeys:async()=>(await k.get("/api/ssh-keys")).data.data||[],generateRSAKey:async s=>(await k.post("/api/ssh-keys/generate/rsa",s)).data,generateDSAKey:async s=>(await k.post("/api/ssh-keys/generate/dsa",s)).data,importKey:async s=>(await k.post("/api/ssh-keys/import",s)).data,downloadPrivateKey:async s=>(await k.get(`/api/ssh-keys/${s}/download/private`,{responseType:"blob"})).data,downloadPublicKey:async s=>(await k.get(`/api/ssh-keys/${s}/download/public`,{responseType:"blob"})).data,updateKey:async(s,t)=>(await k.put(`/api/ssh-keys/${s}`,t)).data,toggleKeyStatus:async(s,t)=>(await k.put(`/api/ssh-keys/${s}/status`,{enabled:t})).data,deleteKey:async s=>(await k.delete(`/api/ssh-keys/${s}`)).data},hs={getAllKeys:async()=>(await k.get("/api/admin/pgp-keys")).data,getKeyById:async s=>(await k.get(`/api/admin/pgp-keys/${s}`)).data,generateKey:async s=>(await k.post("/api/admin/pgp-keys/generate",s)).data,importKey:async s=>(await k.post("/api/admin/pgp-keys/import",s)).data,exportPublicKey:async s=>(await k.get(`/api/admin/pgp-keys/${s}/export/public`,{responseType:"text"})).data,exportPrivateKey:async s=>(await k.get(`/api/admin/pgp-keys/${s}/export/private`,{responseType:"text"})).data,revokeKey:async(s,t)=>(await k.post(`/api/admin/pgp-keys/${s}/revoke`,{reason:t})).data,deleteKey:async s=>(await k.delete(`/api/admin/pgp-keys/${s}`)).data,getExpiredKeys:async()=>(await k.get("/api/admin/pgp-keys/expired")).data},ot={getAllFlows:async()=>(await k.get("/api/flows")).data,getFlowsByPackage:async s=>(await k.get(`/api/flows/package/${s}`)).data,getFlowById:async s=>(await k.get(`/api/flows/${s}`)).data,createFlow:async s=>(await k.post("/api/flows",s)).data,updateFlow:async(s,t)=>{var r,n;try{return(await k.put(`/api/flows/${s}`,t)).data}catch(a){if(console.error("❌ Frontend: Flow update failed:",a),(n=(r=a.response)==null?void 0:r.data)!=null&&n.message){const i=a.response.data.message;if(i.includes("deployed"))throw new Error(i)}throw a}},deleteFlow:async s=>(await k.delete(`/api/flows/${s}`)).data,executeFlow:async s=>(await k.post(`/api/flows/${s}/execute`)).data,exportFlow:async s=>(await k.get(`/api/flows/${s}/export`)).data,importFlow:async s=>(await k.post("/api/flows/import",s)).data,getStatistics:async()=>(await k.get("/api/flows/statistics")).data,validateFlow:async s=>{var t;try{return(await k.post(`/api/flows/${s}/validate`)).data}catch(r){throw console.error("❌ Frontend: Flow validation failed:",r),console.error("❌ Frontend: Validation error response:",(t=r.response)==null?void 0:t.data),r}},setFlowActive:async(s,t)=>(await k.put(`/api/flows/${s}/active?active=${t}`)).data,deployFlow:async s=>{var t,r;try{return(await k.post(`/api/flows/${s}/deploy`)).data}catch(n){throw console.error("❌ Frontend: Flow deployment failed:",n),console.error("❌ Frontend: Error response:",(t=n.response)==null?void 0:t.data),console.error("❌ Frontend: Error status:",(r=n.response)==null?void 0:r.status),n}},undeployFlow:async s=>(await k.post(`/api/flows/${s}/undeploy`)).data,getFlowDeploymentStatus:async s=>(await k.get(`/api/flows/${s}/deployment`)).data,validateFlowDeployment:async s=>(await k.post(`/api/flows/${s}/validate-deployment`)).data},Ws={getAllExecutions:async s=>{const t=new URLSearchParams;s!=null&&s.page&&t.append("page",s.page.toString()),s!=null&&s.size&&t.append("size",s.size.toString()),s!=null&&s.status&&t.append("status",s.status),s!=null&&s.flowId&&t.append("flowId",s.flowId),s!=null&&s.dateFrom&&t.append("dateFrom",s.dateFrom),s!=null&&s.dateTo&&t.append("dateTo",s.dateTo);const r=`/api/executions${t.toString()?`?${t.toString()}`:""}`;return(await k.get(r)).data},getExecutionById:async s=>(await k.get(`/api/executions/${s}`)).data,getExecutionSteps:async s=>(await k.get(`/api/executions/${s}/steps`)).data,retryExecution:async s=>(await k.post(`/api/executions/${s}/retry`)).data,cancelExecution:async s=>(await k.post(`/api/executions/${s}/cancel`)).data,getRunningExecutions:async()=>(await k.get("/api/executions/running")).data,getFailedExecutions:async()=>(await k.get("/api/executions/failed")).data,getExecutionStatistics:async()=>(await k.get("/api/executions/statistics")).data,getExecutionPerformance:async()=>(await k.get("/api/executions/performance")).data,getExecutionsByFlow:async(s,t)=>{const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.size&&r.append("size",t.size.toString()),t!=null&&t.status&&r.append("status",t.status);const n=`/api/flows/${s}/executions${r.toString()?`?${r.toString()}`:""}`;return(await k.get(n)).data},getExecutionLogs:async(s,t)=>{const r=new URLSearchParams;t!=null&&t.filter&&r.append("filter",t.filter),t!=null&&t.level&&t.level!=="all"&&r.append("level",t.level);const n=`/api/executions/${s}/logs${r.toString()?`?${r.toString()}`:""}`;return(await k.get(n)).data}},Dt={getRecentLogs:async s=>{const t=new URLSearchParams;s!=null&&s.limit&&t.append("limit",s.limit.toString()),s!=null&&s.level&&s.level!=="ALL"&&t.append("level",s.level),s!=null&&s.category&&s.category!=="ALL"&&t.append("category",s.category),s!=null&&s.search&&t.append("search",s.search);const r=`/api/transaction-logs/recent${t.toString()?`?${t.toString()}`:""}`;return(await k.get(r)).data},exportLogs:async s=>{const t=new URLSearchParams;s!=null&&s.limit&&t.append("limit",s.limit.toString()),s!=null&&s.level&&s.level!=="ALL"&&t.append("level",s.level),s!=null&&s.category&&s.category!=="ALL"&&t.append("category",s.category),s!=null&&s.format&&t.append("format",s.format);const r=`/api/transaction-logs/export${t.toString()?`?${t.toString()}`:""}`;return(await k.get(r,{responseType:"blob"})).data}},Bs={getCurrentEnvironment:async()=>(await k.get("/api/system/environment")).data,updateEnvironment:async s=>(await k.put("/api/system/environment",s)).data,getEnvironmentTypes:async()=>(await k.get("/api/system/environment/types")).data,checkPermission:async s=>(await k.get(`/api/system/environment/permissions/${s}`)).data},kn={getRecentLogs:async s=>{const t=new URLSearchParams;s!=null&&s.limit&&t.append("limit",s.limit.toString()),s!=null&&s.level&&s.level!=="ALL"&&t.append("level",s.level),s!=null&&s.search&&t.append("search",s.search),(s==null?void 0:s.page)!==void 0&&t.append("page",s.page.toString()),s!=null&&s.size&&t.append("size",s.size.toString());const r=`/api/logs/system${t.toString()?`?${t.toString()}`:""}`;return(await k.get(r)).data},exportLogs:async s=>{const t=new URLSearchParams;s!=null&&s.limit&&t.append("limit",s.limit.toString()),s!=null&&s.level&&s.level!=="ALL"&&t.append("level",s.level),s!=null&&s.category&&s.category!=="ALL"&&t.append("category",s.category),s!=null&&s.format&&t.append("format",s.format);const r=`/api/logs/system/export${t.toString()?`?${t.toString()}`:""}`;return(await k.get(r,{responseType:"blob"})).data}},An=s=>{try{const t=JSON.parse(atob(s.split(".")[1])),r=Date.now()/1e3;return t.exp>r}catch(t){return console.warn("[JWT] Failed to parse token:",t),!1}},Fn=()=>{const{setAuth:s,setInitialized:t,hasInitialized:r}=ns();y.useEffect(()=>{if(r)return;(async()=>{var a;try{const i=Se.getToken(),o=Se.getUser();if(!i||!o){t(!0);return}const h=Se.getUser();if(h&&i){const l=Se.isPersistentLogin();s(h,i,l)}if(!An(i)){Se.clearTokens(),t(!0),Ss();return}try{const l=await gt.verifyToken();if(!l||!l.valid){Se.clearTokens(),t(!0),Ss();return}}catch(l){if(((a=l==null?void 0:l.response)==null?void 0:a.status)===401){Se.clearTokens(),t(!0),Ss();return}console.warn("[useAuthInit] Backend verification failed (non-blocking):",l)}if(!h){const l=Se.isPersistentLogin();s(o,i,l)}try{await va()}catch(l){console.warn("[useAuthInit] WebSocket failed:",l)}t(!0)}catch(i){console.error("[useAuthInit] Initialization failed:",i),t(!0),Ss()}})()},[s,t,r])};function U(...s){return cr(or(s))}const Pn=Qs("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),w=y.forwardRef(({className:s,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?Or:"button";return e.jsx(o,{className:U(Pn({variant:t,size:r,className:s})),ref:i,...a})});w.displayName="Button";const ya=y.createContext(void 0),Dn=({children:s})=>{const[t,r]=y.useState(!1),n=()=>r(a=>!a);return e.jsx(ya.Provider,{value:{collapsed:t,setCollapsed:r,toggle:n},children:s})},Na=()=>{const s=y.useContext(ya);if(!s)throw new Error("useSidebar must be used within a SidebarProvider");return s},In=[{name:"Dashboard",href:"/dashboard",icon:dr,section:"main"},{name:"Package Library",href:"/packages",icon:Me,adminOnly:!0,section:"integration"},{name:"Adapter Monitoring",href:"/adapter-monitoring",icon:ke,section:"monitoring"},{name:"Flow Monitoring",href:"/flow-monitoring",icon:rt,section:"monitoring"},{name:"Administration",href:"/admin",icon:Je,adminOnly:!0,section:"system"},{name:"Settings",href:"/settings",icon:de,section:"system"}],Ln=()=>{const{collapsed:s,toggle:t}=Na(),{user:r}=ns(),n=(r==null?void 0:r.role)==="ADMINISTRATOR",a=In.filter(i=>!i.adminOnly||n);return e.jsx("div",{className:U("h-full min-h-full bg-card/80 backdrop-blur-md border-r border-border transition-all duration-300 ease-in-out",s?"w-16":"w-64"),children:e.jsxs("div",{className:"flex flex-col h-full min-h-full",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsx(w,{variant:"ghost",size:"sm",onClick:t,className:"ml-auto flex transition-all duration-300 hover:scale-110 hover:bg-accent/50",children:s?e.jsx(Fs,{className:"h-4 w-4 transition-transform duration-300"}):e.jsx(mt,{className:"h-4 w-4 transition-transform duration-300"})})}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[!s&&e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Main"}),a.filter(i=>i.section==="main").map(i=>e.jsxs(Ks,{to:i.href,className:({isActive:o})=>U("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 group","hover:bg-primary hover:text-primary-foreground hover:scale-[1.02] hover:shadow-soft",o?"bg-primary text-primary-foreground shadow-elegant":"text-muted-foreground"),children:[e.jsx(i.icon,{className:U("h-4 w-4 transition-all duration-300 group-hover:scale-110",!s&&"mr-3")}),!s&&e.jsx("span",{className:"transition-all duration-300",children:i.name})]},i.name)),!s&&a.some(i=>i.section==="integration")&&e.jsx("div",{className:"px-3 py-2 mt-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Integration"}),a.filter(i=>i.section==="integration").map(i=>e.jsxs(Ks,{to:i.href,className:({isActive:o})=>U("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 group","hover:bg-primary hover:text-primary-foreground hover:scale-[1.02] hover:shadow-soft",o?"bg-primary text-primary-foreground shadow-elegant":"text-muted-foreground"),children:[e.jsx(i.icon,{className:U("h-4 w-4 transition-all duration-300 group-hover:scale-110",!s&&"mr-3")}),!s&&e.jsx("span",{className:"transition-all duration-300",children:i.name})]},i.name)),!s&&a.some(i=>i.section==="monitoring")&&e.jsx("div",{className:"px-3 py-2 mt-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Monitoring"}),a.filter(i=>i.section==="monitoring").map(i=>e.jsxs(Ks,{to:i.href,className:({isActive:o})=>U("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 group","hover:bg-primary hover:text-primary-foreground hover:scale-[1.02] hover:shadow-soft",o?"bg-primary text-primary-foreground shadow-elegant":"text-muted-foreground"),children:[e.jsx(i.icon,{className:U("h-4 w-4 transition-all duration-300 group-hover:scale-110",!s&&"mr-3")}),!s&&e.jsx("span",{className:"transition-all duration-300",children:i.name})]},i.name)),!s&&a.some(i=>i.section==="system")&&e.jsx("div",{className:"px-3 py-2 mt-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"System"}),a.filter(i=>i.section==="system").map(i=>e.jsxs(Ks,{to:i.href,className:({isActive:o})=>U("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 group","hover:bg-primary hover:text-primary-foreground hover:scale-[1.02] hover:shadow-soft",o?"bg-primary text-primary-foreground shadow-elegant":"text-muted-foreground"),children:[e.jsx(i.icon,{className:U("h-4 w-4 transition-all duration-300 group-hover:scale-110",!s&&"mr-3")}),!s&&e.jsx("span",{className:"transition-all duration-300",children:i.name})]},i.name))]}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsx("div",{className:U("text-xs text-muted-foreground",s?"text-center":"space-y-1"),children:!s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Version 1.0.0"}),e.jsx("div",{children:"© 2024 Integrix Host 2 Host"})]})})})]})})},Rn=Bt((s,t)=>({sidebarOpen:!0,notifications:[],globalLoading:!1,modals:{},toggleSidebar:()=>{s(r=>({sidebarOpen:!r.sidebarOpen}))},setSidebarOpen:r=>{s({sidebarOpen:r})},addNotification:r=>{const n=Math.random().toString(36).substr(2,9),a={...r,id:n,timestamp:new Date,duration:r.duration||5e3};s(i=>({notifications:[a,...i.notifications].slice(0,10)})),(a.duration??4e3)>0&&setTimeout(()=>{t().removeNotification(n)},a.duration??4e3)},removeNotification:r=>{s(n=>({notifications:n.notifications.filter(a=>a.id!==r)}))},clearNotifications:()=>{s({notifications:[]})},setGlobalLoading:r=>{s({globalLoading:r})},openModal:r=>{s(n=>({modals:{...n.modals,[r]:!0}}))},closeModal:r=>{s(n=>({modals:{...n.modals,[r]:!1}}))},toggleModal:r=>{s(n=>({modals:{...n.modals,[r]:!n.modals[r]}}))}})),He=()=>{const{addNotification:s,removeNotification:t,clearNotifications:r}=Rn();return{success:(n,a,i)=>s({type:"success",title:n,message:a,duration:i}),error:(n,a,i)=>s({type:"error",title:n,message:a,duration:i}),warning:(n,a,i)=>s({type:"warning",title:n,message:a,duration:i}),info:(n,a,i)=>s({type:"info",title:n,message:a,duration:i}),remove:t,clear:r}},Mn=Qs("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ue({className:s,variant:t,...r}){return e.jsx("div",{className:U(Mn({variant:t}),s),...r})}const Un=Kr,On=$r,_n=y.forwardRef(({className:s,inset:t,children:r,...n},a)=>e.jsxs(qt,{ref:a,className:U("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...n,children:[r,e.jsx(Fs,{className:"ml-auto h-4 w-4"})]}));_n.displayName=qt.displayName;const Kn=y.forwardRef(({className:s,...t},r)=>e.jsx(Ht,{ref:r,className:U("z-50 min-w-[8rem] overflow-hidden rounded-md border border-border bg-card p-1 text-card-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Kn.displayName=Ht.displayName;const ba=y.forwardRef(({className:s,sideOffset:t=4,...r},n)=>e.jsx(_r,{children:e.jsx(Gt,{ref:n,sideOffset:t,className:U("z-50 min-w-[8rem] overflow-hidden rounded-md border border-border bg-card p-1 text-card-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));ba.displayName=Gt.displayName;const qs=y.forwardRef(({className:s,inset:t,...r},n)=>e.jsx(Wt,{ref:n,className:U("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...r}));qs.displayName=Wt.displayName;const $n=y.forwardRef(({className:s,children:t,checked:r,...n},a)=>e.jsxs(Yt,{ref:a,className:U("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Qt,{children:e.jsx(Js,{className:"h-4 w-4"})})}),t]}));$n.displayName=Yt.displayName;const Vn=y.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(Jt,{ref:n,className:U("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Qt,{children:e.jsx(mr,{className:"h-2 w-2 fill-current"})})}),t]}));Vn.displayName=Jt.displayName;const zn=y.forwardRef(({className:s,inset:t,...r},n)=>e.jsx(Xt,{ref:n,className:U("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...r}));zn.displayName=Xt.displayName;const wa=y.forwardRef(({className:s,...t},r)=>e.jsx(Zt,{ref:r,className:U("-mx-1 my-1 h-px bg-muted",s),...t}));wa.displayName=Zt.displayName;const Bn=()=>{const{isAuthenticated:s}=ns();return se({queryKey:["environment"],queryFn:async()=>(await Bs.getCurrentEnvironment()).data,enabled:s,refetchInterval:3e4,staleTime:1e4,retry:(t,r)=>{var n,a;return((n=r==null?void 0:r.response)==null?void 0:n.status)===401||((a=r==null?void 0:r.response)==null?void 0:a.status)===403?!1:t<3}})},qn={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},Hn=s=>{switch((s==null?void 0:s.toUpperCase())||"DEVELOPMENT"){case"DEVELOPMENT":return{id:"H2H-DEV",name:"Development",color:"#22c55e",className:"bg-green-100 text-green-800 border-green-200"};case"QUALITY_ASSURANCE":return{id:"H2H-QAS",name:"Quality Assurance",color:"#8b5cf6",className:"bg-purple-100 text-purple-800 border-purple-200"};case"PRODUCTION":return{id:"H2H-PRD",name:"Production",color:"#ef4444",className:"bg-red-100 text-red-800 border-red-200"};default:return{id:"H2H-UNK",name:"Unknown",color:"#6b7280",className:"bg-gray-100 text-gray-800 border-gray-200"}}},Gn=({size:s="md",className:t,showName:r=!1})=>{const{data:n,isLoading:a}=Bn();if(a||!n)return e.jsxs("div",{className:"animate-pulse bg-gray-200 rounded-md h-6 w-16 inline-flex items-center justify-center",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full mr-1"}),e.jsx("div",{className:"w-8 h-4 bg-gray-300 rounded"})]});const i=Hn(n.type);return e.jsxs(ue,{className:U(i.className,qn[s],"inline-flex items-center gap-1.5 transition-all duration-200 font-mono font-bold",t),title:`Environment: ${n.displayName} (${n.type})`,children:[e.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:i.color,filter:"brightness(1.2)"}}),e.jsx("span",{className:"font-mono font-bold tracking-wide",children:i.id}),r&&e.jsx("span",{className:"font-sans font-normal ml-0.5",children:i.name})]})},Wn=()=>{const s=Oe(),{user:t,clearAuth:r}=ns(),{success:n,error:a}=He(),i=me({mutationFn:gt.logout,onSuccess:()=>{Se.clearTokens(),r(),n("Logged out","Successfully logged out"),s("/login",{replace:!0})},onError:()=>{Se.clearTokens(),r(),a("Logout Error","There was an issue logging out, but you have been signed out locally"),s("/login",{replace:!0})}}),o=()=>{i.mutate()};return e.jsx("header",{className:"h-16 border-b border-border bg-card/80 backdrop-blur-md transition-all duration-300",children:e.jsxs("div",{className:"flex h-full items-center justify-between px-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(w,{variant:"ghost",size:"icon",className:"md:hidden","aria-label":"Toggle sidebar",children:e.jsx(xr,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center",children:e.jsx(ur,{className:"h-4 w-4 text-primary-foreground"})}),e.jsx("h1",{className:"text-xl font-semibold app-name-gradient",children:"Integrixs Host 2 Host"}),e.jsx(Gn,{size:"sm"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(w,{variant:"ghost",size:"sm",className:"relative transition-all duration-300 hover:scale-110 hover:bg-accent/50",children:[e.jsx($t,{className:"h-4 w-4"}),e.jsx(ue,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0 text-xs animate-pulse",children:"0"})]}),e.jsxs(Un,{children:[e.jsx(On,{asChild:!0,children:e.jsxs(w,{variant:"ghost",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]})]})}),e.jsxs(ba,{align:"end",className:"w-56",children:[e.jsxs(qs,{children:[e.jsx(Ps,{className:"mr-2 h-4 w-4"}),"Profile"]}),e.jsxs(qs,{children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Settings"]}),e.jsx(wa,{}),e.jsxs(qs,{onClick:o,disabled:i.isPending,className:"text-destructive",children:[e.jsx(hr,{className:"mr-2 h-4 w-4"}),i.isPending?"Logging out...":"Logout"]})]})]})]})]})})},Yn=()=>e.jsx(Dn,{children:e.jsxs("div",{className:"h-screen w-full bg-background flex flex-col overflow-hidden",children:[e.jsx(Wn,{}),e.jsxs("div",{className:"flex flex-1 w-full overflow-hidden",children:[e.jsx(Ln,{}),e.jsx("div",{className:"flex-1 flex flex-col min-w-0 w-full max-w-none overflow-hidden",children:e.jsx("main",{className:"flex-1 overflow-auto p-6 w-full",children:e.jsx(sr,{})})})]})]})}),Qn=({children:s,roles:t})=>{const{isAuthenticated:r,user:n,isLoading:a,hasInitialized:i}=ns();return console.log("[ProtectedRoute] render",{isAuthenticated:r,isLoading:a,hasInitialized:i,userRole:n==null?void 0:n.role}),a||!i?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Verifying authentication..."})]})}):r?t&&n&&!t.includes(n.role)?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):e.jsx(e.Fragment,{children:s}):(console.log("[ProtectedRoute] Authentication verification complete - not authenticated, redirecting to login"),e.jsx($e,{to:"/login",replace:!0}))},D=y.forwardRef(({className:s,type:t,...r},n)=>e.jsx("input",{type:t,className:U("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...r}));D.displayName="Input";const Jn=Qs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),N=y.forwardRef(({className:s,...t},r)=>e.jsx(ea,{ref:r,className:U(Jn(),s),...t}));N.displayName=ea.displayName;const I=y.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:U("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));I.displayName="Card";const Y=y.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:U("flex flex-col space-y-1.5 p-6",s),...t}));Y.displayName="CardHeader";const J=y.forwardRef(({className:s,...t},r)=>e.jsx("h3",{ref:r,className:U("text-2xl font-semibold leading-none tracking-tight",s),...t}));J.displayName="CardTitle";const ze=y.forwardRef(({className:s,...t},r)=>e.jsx("p",{ref:r,className:U("text-sm text-muted-foreground",s),...t}));ze.displayName="CardDescription";const L=y.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:U("p-6 pt-0",s),...t}));L.displayName="CardContent";const Xn=y.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:U("flex items-center p-6 pt-0",s),...t}));Xn.displayName="CardFooter";const Zn=()=>{var d,C,g;const s=Oe(),[t,r]=Ie.useState(!1),{setAuth:n,isAuthenticated:a,hasInitialized:i}=ns(),{error:o}=He(),{register:h,handleSubmit:l,formState:{errors:j}}=ht({defaultValues:{username:"",password:"",rememberMe:!1}}),m=me({mutationFn:gt.login,onSuccess:(u,S)=>{var E,x;if(u.accessToken&&u.username){const A=JSON.parse(atob(u.accessToken.split(".")[1])),c={id:A.sub,username:u.username,firstName:((E=u.fullName)==null?void 0:E.split(" ")[0])||u.username,lastName:((x=u.fullName)==null?void 0:x.split(" ").slice(1).join(" "))||"",email:A.email||`${u.username}@integrixs.com`,role:u.role,enabled:A.enabled||!0,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};n(c,u.accessToken,S.rememberMe)}else o("Login Failed","Invalid response from server")},onError:u=>{var E,x;const S=((x=(E=u.response)==null?void 0:E.data)==null?void 0:x.message)||"Login failed. Please check your credentials.";o("Login Failed",S)}}),p=u=>{m.mutate({username:u.username,password:u.password,rememberMe:u.rememberMe})};return y.useEffect(()=>{i&&a&&s("/dashboard",{replace:!0})},[i,a,s]),i?a?null:e.jsx("div",{className:"min-h-screen app-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2 app-name-gradient",children:"Integrixs Host 2 Host"}),e.jsx("p",{className:"text-muted-foreground",children:"Secure Host-to-Host File Transfer System"})]}),e.jsxs(I,{className:"app-card shadow-xl border",children:[e.jsxs(Y,{className:"space-y-1",children:[e.jsx(J,{className:"text-2xl text-center text-foreground",children:"Welcome back"}),e.jsx(ze,{className:"text-center text-muted-foreground",children:"Enter your credentials to access the system"})]}),e.jsx(L,{children:e.jsxs("form",{onSubmit:l(p),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"username",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(D,{id:"username",type:"text",placeholder:"Enter your username",className:U("pl-10 bg-input border-border text-foreground",j.username&&"border-destructive focus-visible:ring-destructive"),...h("username",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"}})}),j.username&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:j.username.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(D,{id:"password",type:t?"text":"password",placeholder:"Enter your password",className:U("pl-10 pr-10 bg-input border-border text-foreground",j.password&&"border-destructive focus-visible:ring-destructive"),...h("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",onClick:()=>r(!t),children:t?e.jsx(Ms,{className:"h-4 w-4"}):e.jsx(Ae,{className:"h-4 w-4"})}),j.password&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:j.password.message})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"rememberMe",className:"rounded border-border text-primary focus:ring-primary focus:ring-offset-0",...h("rememberMe")}),e.jsx(N,{htmlFor:"rememberMe",className:"text-sm text-muted-foreground cursor-pointer",children:"Keep me signed in"})]}),e.jsx(w,{type:"submit",className:"w-full btn-primary",disabled:m.isPending,children:m.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):"Sign in"}),m.isError&&e.jsx("div",{className:"text-center text-sm text-destructive bg-destructive/10 border border-destructive/20 p-3 rounded-md",children:((g=(C=(d=m.error)==null?void 0:d.response)==null?void 0:C.data)==null?void 0:g.message)||"Login failed. Please try again."})]})})]}),e.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"© 2024 Integrix Host 2 Host System"})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})},ms=Br,ei=qr,si=Vr,Sa=Ie.forwardRef(({className:s,...t},r)=>e.jsx(sa,{ref:r,className:U("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));Sa.displayName=sa.displayName;const ss=Ie.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(si,{children:[e.jsx(Sa,{}),e.jsxs(ta,{ref:n,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[t,e.jsxs(zr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ss.displayName=ta.displayName;const ts=({className:s,...t})=>e.jsx("div",{className:U("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});ts.displayName="DialogHeader";const Xs=({className:s,...t})=>e.jsx("div",{className:U("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Xs.displayName="DialogFooter";const as=Ie.forwardRef(({className:s,...t},r)=>e.jsx(aa,{ref:r,className:U("text-lg font-semibold leading-none tracking-tight",s),...t}));as.displayName=aa.displayName;const Ls=Ie.forwardRef(({className:s,...t},r)=>e.jsx(ra,{ref:r,className:U("text-sm text-muted-foreground",s),...t}));Ls.displayName=ra.displayName;const V=Jr,z=Xr,K=y.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(na,{ref:n,className:U("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(Hr,{asChild:!0,children:e.jsx(xt,{className:"h-4 w-4 opacity-50"})})]}));K.displayName=na.displayName;const Ca=y.forwardRef(({className:s,...t},r)=>e.jsx(ia,{ref:r,className:U("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(pr,{className:"h-4 w-4"})}));Ca.displayName=ia.displayName;const Ea=y.forwardRef(({className:s,...t},r)=>e.jsx(la,{ref:r,className:U("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(xt,{className:"h-4 w-4"})}));Ea.displayName=la.displayName;const $=y.forwardRef(({className:s,children:t,position:r="popper",...n},a)=>e.jsx(Gr,{children:e.jsxs(ca,{ref:a,className:U("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-border bg-card text-card-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...n,children:[e.jsx(Ca,{}),e.jsx(Wr,{className:U("p-1 bg-card",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Ea,{})]})}));$.displayName=ca.displayName;const ti=y.forwardRef(({className:s,...t},r)=>e.jsx(oa,{ref:r,className:U("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));ti.displayName=oa.displayName;const v=y.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(da,{ref:n,className:U("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Yr,{children:e.jsx(Js,{className:"h-4 w-4"})})}),e.jsx(Qr,{children:t})]}));v.displayName=da.displayName;const ai=y.forwardRef(({className:s,...t},r)=>e.jsx(ma,{ref:r,className:U("-mx-1 my-1 h-px bg-muted",s),...t}));ai.displayName=ma.displayName;const ri=({open:s,onOpenChange:t})=>{var p,d,C;const[r,n]=y.useState(""),a=Pe(),{data:i,isLoading:o}=se({queryKey:["flows"],queryFn:ot.getAllFlows,enabled:s}),h=(i==null?void 0:i.data)||[],l=me({mutationFn:g=>ot.executeFlow(g),onSuccess:()=>{a.invalidateQueries({queryKey:["dashboard"]}),t(!1),n("")},onError:g=>{console.error("Failed to execute flow:",g)}}),j=()=>{r&&l.mutate(r)},m=Array.isArray(h)?h.filter(g=>g.active===!0&&g.deployed===!0&&g.deploymentStatus==="DEPLOYED"):[];return e.jsx(ms,{open:s,onOpenChange:t,children:e.jsxs(ss,{className:"sm:max-w-md",children:[e.jsx(ts,{children:e.jsxs(as,{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Manually Execute Flow"})]})}),e.jsx("div",{className:"space-y-4 pt-4",children:o?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ds,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading flows..."})]})}):m.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(vs,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No active flows available"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Create and activate flows to enable manual execution"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Select Flow to Execute"}),e.jsxs(V,{value:r,onValueChange:n,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Choose a flow..."})}),e.jsx($,{children:m.map(g=>e.jsx(v,{value:g.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:g.name}),g.deploymentStatus==="DEPLOYED"&&e.jsx(ne,{className:"h-4 w-4 text-success ml-2"})]})},g.id))})]})]}),r&&e.jsx("div",{className:"bg-secondary rounded-lg p-3",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-muted-foreground",children:"Selected Flow:"}),e.jsx("p",{className:"font-medium text-foreground",children:(p=m.find(g=>g.id===r))==null?void 0:p.name}),((d=m.find(g=>g.id===r))==null?void 0:d.description)&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(C=m.find(g=>g.id===r))==null?void 0:C.description})]})}),l.error&&e.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vs,{className:"h-4 w-4 text-destructive"}),e.jsxs("span",{className:"text-sm text-destructive",children:["Failed to execute flow: ",l.error.message||"Unknown error"]})]})}),l.isSuccess&&e.jsx("div",{className:"bg-success/10 border border-success/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"h-4 w-4 text-success"}),e.jsx("span",{className:"text-sm text-success",children:"Flow executed successfully!"})]})})]})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(w,{variant:"outline",onClick:()=>{t(!1),n(""),l.reset()},children:"Cancel"}),e.jsxs(w,{onClick:j,disabled:!r||l.isPending||o,className:"flex items-center space-x-2",children:[l.isPending?e.jsx(Ds,{className:"h-4 w-4 animate-spin"}):e.jsx(Xe,{className:"h-4 w-4"}),e.jsx("span",{children:l.isPending?"Executing...":"Execute"})]})]})]})})},ni=()=>{var p;const[s,t]=y.useState(!1),{data:r}=se({queryKey:["configuration","dashboard-intervals"],queryFn:ct.getDashboardIntervals,staleTime:5*60*1e3}),n=(r==null?void 0:r.intervals)||{"dashboard.refresh.health_interval":3e4,"dashboard.refresh.adapter_stats_interval":6e4,"dashboard.refresh.recent_executions_interval":6e4},{data:a,isLoading:i}=se({queryKey:["dashboard","health"],queryFn:tt.getSystemHealth,refetchInterval:n["dashboard.refresh.health_interval"]}),{data:o,isLoading:h}=se({queryKey:["dashboard","adapter-stats"],queryFn:tt.getAdapterStatistics,refetchInterval:n["dashboard.refresh.adapter_stats_interval"]}),{data:l,isLoading:j}=se({queryKey:["dashboard","recent-executions"],queryFn:()=>tt.getRecentExecutions(10),refetchInterval:n["dashboard.refresh.recent_executions_interval"]});return i||h||j?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading dashboard..."})]})})}):e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Integrixs Host 2 Host Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor your bank file transfer operations and system health"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${(a==null?void 0:a.status)==="UP"?"bg-green-500 animate-glow":"bg-red-500"}`}),e.jsx("span",{className:`text-sm font-medium ${(a==null?void 0:a.status)==="UP"?"text-green-500":"text-red-500"}`,children:(a==null?void 0:a.status)==="UP"?"Up":"Down"})]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"app-card rounded-lg p-6 border hover-scale animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"System Status"}),e.jsx("p",{className:`text-2xl font-bold ${(a==null?void 0:a.status)==="UP"?"text-green-500":"text-red-500"}`,children:(a==null?void 0:a.status)==="UP"?"Up":"Down"})]}),e.jsx(ke,{className:`h-8 w-8 ${(a==null?void 0:a.status)==="UP"?"text-green-500":"text-red-500"}`})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Uptime: ",(a==null?void 0:a.uptime)||"0%"]})})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border hover-scale animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Operations Today"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:(o==null?void 0:o.operationsToday)||0})]}),e.jsx(gr,{className:"h-8 w-8 text-primary"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:(o==null?void 0:o.operationsTrend)||"No trend data"})})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border hover-scale animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Files Processed"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:(o==null?void 0:o.filesProcessed)||0})]}),e.jsx(pe,{className:"h-8 w-8 text-info"})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Last hour: ",(o==null?void 0:o.filesLastHour)||0," files"]})})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border hover-scale animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsx("p",{className:`text-2xl font-bold ${((o==null?void 0:o.successRate)||0)>=95?"text-success":((o==null?void 0:o.successRate)||0)>=85?"text-warning":"text-destructive"}`,children:o!=null&&o.successRate?`${o.successRate}%`:"0%"})]}),e.jsx(ne,{className:`h-8 w-8 ${((o==null?void 0:o.successRate)||0)>=95?"text-success":((o==null?void 0:o.successRate)||0)>=85?"text-warning":"text-destructive"}`})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:[(o==null?void 0:o.errorsToday)||0," errors today"]})})]})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Recent Operations"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(l==null?void 0:l.length)||0," operations"]})]}),l&&l.length>0?e.jsx("div",{className:"space-y-3",children:l.map((d,C)=>{const g=S=>{switch(S.toUpperCase()){case"SUCCESS":return e.jsx(ne,{className:"h-5 w-5 text-success"});case"FAILED":return e.jsx(Ee,{className:"h-5 w-5 text-destructive"});case"IN_PROGRESS":case"RUNNING":return e.jsx(be,{className:"h-5 w-5 text-warning animate-pulse"});default:return e.jsx(be,{className:"h-5 w-5 text-muted-foreground"})}},u=S=>{const E=new Date,x=new Date(S),A=E.getTime()-x.getTime(),c=Math.floor(A/6e4);if(c<1)return"Just now";if(c<60)return`${c} min ago`;const F=Math.floor(c/60);return F<24?`${F}h ago`:`${Math.floor(F/24)}d ago`};return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-secondary",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[g(d.status),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground",children:[d.adapterName||"Unknown"," - ",d.operation||"Operation"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.message||`${d.filesProcessed||0} files processed`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-foreground",children:d.startTime?new Date(d.startTime).toLocaleTimeString():"--:--"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:d.startTime?u(d.startTime):"Unknown"})]})]},d.id||C)})}):e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No recent operations"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 app-card rounded-lg p-6 border animate-fade-in",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Active Adapters"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:((p=o==null?void 0:o.adapters)==null?void 0:p.map((d,C)=>e.jsxs("div",{className:"bg-secondary rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${d.status==="ACTIVE"?"bg-success animate-glow":d.status==="ERROR"?"bg-destructive":"bg-warning"}`}),e.jsx("h3",{className:"font-medium text-foreground",children:d.name})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${d.status==="ACTIVE"?"bg-success/20 text-success":d.status==="ERROR"?"bg-destructive/20 text-destructive":"bg-warning/20 text-warning"}`,children:d.status})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"text-foreground",children:d.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Run:"}),e.jsx("span",{className:"text-foreground",children:d.lastRun?new Date(d.lastRun).toLocaleString():"Never"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Files Today:"}),e.jsx("span",{className:"text-foreground",children:d.filesToday||0})]})]})]},d.id||C)))||e.jsx("div",{className:"md:col-span-2 flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Gs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No adapters configured"}),e.jsx(w,{variant:"outline",size:"sm",className:"mt-2",children:"Configure Adapters"})]})})})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border animate-fade-in",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(w,{className:"w-full btn-primary justify-start",size:"lg",onClick:()=>t(!0),children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Manually Execute Flow"]}),e.jsx(w,{variant:"outline",className:"w-full justify-start",size:"lg",asChild:!0,children:e.jsxs(at,{to:"/admin?tab=logs",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"View System Logs"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-border",children:[e.jsx("h3",{className:"font-medium text-foreground mb-3",children:"System Info"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Version:"}),e.jsx("span",{className:"text-foreground",children:"v1.0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Java:"}),e.jsx("span",{className:"text-foreground",children:(a==null?void 0:a.javaVersion)||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Memory:"}),e.jsx("span",{className:"text-foreground",children:(a==null?void 0:a.memoryUsage)||"0%"})]})]})]})]})]}),e.jsx(ri,{open:s,onOpenChange:t})]})},ii=()=>{const s=Oe(),{success:t,error:r}=He(),n=Pe(),[a,i]=y.useState({name:"",description:"",keyType:"RSA",keySize:2048}),o=me({mutationFn:async m=>{console.log("Generating SSH key with data:",m);const p=m.keyType==="RSA"?await ps.generateRSAKey(m):await ps.generateDSAKey(m);return console.log("SSH key generation result:",p),p},onSuccess:m=>{console.log("SSH key generated successfully:",m),t("SSH Key Generated","SSH key pair created successfully"),n.invalidateQueries({queryKey:["ssh-keys"]}),s("/ssh-keys")},onError:m=>{var p,d;console.error("SSH key generation failed:",m),console.error("Error response:",m.response),r("Generation Failed",((d=(p=m.response)==null?void 0:p.data)==null?void 0:d.message)||m.message||"Failed to generate SSH key")}}),h=m=>{m.preventDefault(),o.mutate(a)},l=()=>a.keyType==="RSA"?a.keySize>=4096?{level:"High",color:"text-green-500"}:a.keySize>=3072?{level:"Strong",color:"text-green-400"}:{level:"Standard",color:"text-blue-400"}:{level:a.keySize>=2048?"Standard":"Basic",color:"text-yellow-400"},j=a.name.trim()!==""&&a.description.trim()!=="";return e.jsxs("div",{className:"content-spacing",children:[e.jsxs("nav",{className:"flex items-center space-x-2 text-sm mb-6",children:[e.jsx(at,{to:"/dashboard",className:"text-muted-foreground hover:text-foreground transition-colors flex items-center",children:e.jsx(jr,{className:"h-4 w-4"})}),e.jsx(Fs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(at,{to:"/ssh-keys",className:"text-muted-foreground hover:text-foreground transition-colors",children:"SSH Keys"}),e.jsx(Fs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground font-medium",children:"Generate New Key"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Generate SSH Key Pair"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new SSH key pair for secure SFTP connections"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(I,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(J,{className:"text-foreground flex items-center space-x-2",children:[e.jsx(Qe,{className:"h-5 w-5"}),e.jsx("span",{children:"Key Configuration"})]})}),e.jsx(L,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"name",children:"Key Name"}),e.jsx(D,{id:"name",value:a.name,onChange:m=>i(p=>({...p,name:m.target.value})),placeholder:"e.g., production-sftp-key",className:"bg-input border-border text-foreground",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A unique name to identify this key"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description"}),e.jsx(D,{id:"description",value:a.description,onChange:m=>i(p=>({...p,description:m.target.value})),placeholder:"e.g., Key for production SFTP server",className:"bg-input border-border text-foreground",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A brief description of what this key is used for"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"keyType",children:"Key Type"}),e.jsxs("select",{id:"keyType",value:a.keyType,onChange:m=>i(p=>({...p,keyType:m.target.value,keySize:m.target.value==="RSA"?2048:1024})),className:"w-full px-3 py-2 bg-input border border-border rounded-md text-foreground",children:[e.jsx("option",{value:"RSA",children:"RSA (Recommended)"}),e.jsx("option",{value:"DSA",children:"DSA"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"RSA is recommended for better compatibility"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"keySize",children:"Key Size"}),e.jsx("select",{id:"keySize",value:a.keySize,onChange:m=>i(p=>({...p,keySize:parseInt(m.target.value)})),className:"w-full px-3 py-2 bg-input border border-border rounded-md text-foreground",children:a.keyType==="RSA"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:2048,children:"2048 bits (Recommended)"}),e.jsx("option",{value:3072,children:"3072 bits"}),e.jsx("option",{value:4096,children:"4096 bits (High Security)"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:1024,children:"1024 bits (Standard)"}),e.jsx("option",{value:2048,children:"2048 bits"})]})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Larger keys are more secure but slower"})]})]}),e.jsxs("div",{className:"bg-secondary/50 rounded-lg p-4 border border-border",children:[e.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Security Notice"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The private key will be stored securely on the server. You can download it after generation for backup purposes. Keep your private key secure and never share it."})]}),e.jsxs("div",{className:"flex items-center space-x-4 pt-4 border-t border-border",children:[e.jsx(w,{type:"submit",className:"btn-primary",disabled:o.isPending||!j,children:o.isPending?"Generating...":"Generate Key Pair"}),e.jsx(w,{type:"button",variant:"outline",onClick:()=>s("/ssh-keys"),children:"Cancel"})]})]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(I,{className:"app-card border sticky top-6",children:[e.jsx(Y,{children:e.jsxs(J,{className:"text-foreground flex items-center space-x-2",children:[e.jsx(fr,{className:"h-5 w-5"}),e.jsx("span",{children:"Key Preview"})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Key Name"}),e.jsx("p",{className:"text-foreground font-medium",children:a.name||e.jsx("span",{className:"text-muted-foreground italic",children:"Not specified"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Description"}),e.jsx("p",{className:"text-foreground text-sm",children:a.description||e.jsx("span",{className:"text-muted-foreground italic",children:"Not specified"})})]}),e.jsxs("div",{className:"border-t border-border pt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"Algorithm"}),e.jsx("span",{className:"text-foreground font-medium",children:a.keyType})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"Key Size"}),e.jsxs("span",{className:"text-foreground font-medium",children:[a.keySize," bits"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"Security"}),e.jsx("span",{className:`font-medium ${l().color}`,children:l().level})]})]}),e.jsxs("div",{className:"border-t border-border pt-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-3",children:"Will Generate"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(ne,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-foreground",children:"Public Key (.pub)"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(ne,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-foreground",children:"Private Key"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(ne,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-foreground",children:"Fingerprint"})]})]})]}),e.jsx("div",{className:"bg-secondary/50 rounded-lg p-3 border border-border",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Est. generation time: ",a.keySize>=4096?"5-10":a.keySize>=3072?"3-5":"1-3"," seconds"]})]})}),j&&e.jsx("div",{className:"bg-green-500/10 rounded-lg p-3 border border-green-500/20",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-500 font-medium",children:"Ready to generate"})]})})]})]})})]})]})},li=()=>{const{success:s,error:t}=He(),r=Pe(),n=Oe(),[a,i]=y.useState("all"),[o,h]=y.useState("all"),[l,j]=y.useState(null),[m,p]=y.useState(new Set),[d,C]=y.useState(new Set),{data:g,isLoading:u,refetch:S}=se({queryKey:["adapters-monitoring"],queryFn:()=>$s.getAllAdapters(),refetchInterval:5e3}),{data:E}=se({queryKey:["adapter-execution-history",l],queryFn:()=>l?$s.getAdapterExecutionHistory(l,{limit:5}):null,enabled:!!l,refetchInterval:5e3}),x=(g==null?void 0:g.data)||[],A=E==null?void 0:E.data,c=me({mutationFn:T=>$s.startAdapter(T),onMutate:async T=>{await r.cancelQueries({queryKey:["adapters-monitoring"]}),p(O=>new Set(O).add(T));const M=r.getQueryData(["adapters-monitoring"]);return r.setQueryData(["adapters-monitoring"],O=>{if(!O)return O;const q={...O},ee=Array.isArray(O.data)?O.data:[];return q.data=ee.map(te=>te.id===T?{...te,status:"STARTING"}:te),q}),{previous:M,adapterId:T}},onSuccess:()=>{s("Adapter Started","Adapter started successfully")},onError:(T,M,O)=>{var q,ee;O!=null&&O.previous&&r.setQueryData(["adapters-monitoring"],O.previous),t("Start Failed",((ee=(q=T.response)==null?void 0:q.data)==null?void 0:ee.message)||"Failed to start adapter")},onSettled:(T,M,O)=>{p(q=>{const ee=new Set(q);return ee.delete(O),ee}),r.invalidateQueries({queryKey:["adapters-monitoring"]})}}),F=me({mutationFn:T=>$s.stopAdapter(T),onMutate:async T=>{await r.cancelQueries({queryKey:["adapters-monitoring"]}),C(O=>new Set(O).add(T));const M=r.getQueryData(["adapters-monitoring"]);return r.setQueryData(["adapters-monitoring"],O=>{if(!O)return O;const q={...O},ee=Array.isArray(O.data)?O.data:[];return q.data=ee.map(te=>te.id===T?{...te,status:"STOPPING"}:te),q}),{previous:M,adapterId:T}},onSuccess:()=>{s("Adapter Stopped","Adapter stopped successfully")},onError:(T,M,O)=>{var q,ee;O!=null&&O.previous&&r.setQueryData(["adapters-monitoring"],O.previous),t("Stop Failed",((ee=(q=T.response)==null?void 0:q.data)==null?void 0:ee.message)||"Failed to stop adapter")},onSettled:(T,M,O)=>{C(q=>{const ee=new Set(q);return ee.delete(O),ee}),r.invalidateQueries({queryKey:["adapters-monitoring"]})}}),f=(T,M)=>M>0?"bg-red-500":T==="STARTED"?"bg-green-500":"bg-gray-400",b=x.filter(T=>{const M=a==="all"||T.status===a,O=o==="all"||T.adapterType===o;return M&&O});return u?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading adapter monitoring..."})]})})}):e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Adapter Monitoring"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and control adapter status, performance, and logs"})]}),e.jsxs(w,{variant:"outline",onClick:()=>S(),children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Adapters"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:x.length})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Started"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:x.filter(T=>T.status==="STARTED").length})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(nt,{className:"h-8 w-8 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stopped"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:x.filter(T=>T.status==="STOPPED").length})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ge,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Errors"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:x.filter(T=>{var M;return(((M=T.configuration)==null?void 0:M.errorCount)||0)>0}).length})]})]})})})]}),e.jsxs(I,{className:"app-card border mb-6",children:[e.jsx(Y,{children:e.jsx(J,{className:"text-foreground",children:"Adapter Filters"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsxs(V,{value:a,onValueChange:i,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"all",children:"All Statuses"}),e.jsx(v,{value:"STARTED",children:"Started"}),e.jsx(v,{value:"STOPPED",children:"Stopped"}),e.jsx(v,{value:"STARTING",children:"Starting"}),e.jsx(v,{value:"STOPPING",children:"Stopping"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),e.jsxs(V,{value:o,onValueChange:h,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"all",children:"All Types"}),e.jsx(v,{value:"FILE",children:"File"}),e.jsx(v,{value:"SFTP",children:"SFTP"}),e.jsx(v,{value:"EMAIL",children:"Email"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Search"}),e.jsx(D,{placeholder:"Search adapters...",value:"",onChange:()=>{}})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8",children:b.map(T=>{var M,O,q,ee;return e.jsxs(I,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-border"}),e.jsx("div",{className:U("h-3 w-3 rounded-full",f(T.status,((M=T.configuration)==null?void 0:M.errorCount)||0))}),e.jsxs("div",{children:[e.jsx(J,{className:"text-lg text-foreground",children:T.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.adapterType," • ",T.direction]})]})]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Executions:"}),e.jsx("span",{className:"ml-2 text-foreground",children:((O=T.configuration)==null?void 0:O.executionCount)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Run:"}),e.jsx("span",{className:"ml-2 text-foreground",children:(q=T.configuration)!=null&&q.lastExecution?new Date(T.configuration.lastExecution).toLocaleString():"Never"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Active:"}),e.jsx("span",{className:"ml-2 text-foreground",children:T.active?"Yes":"No"})]})]}),((ee=T.configuration)==null?void 0:ee.lastError)&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-700 mb-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Last Error"})]}),e.jsx("p",{className:"text-sm text-red-600",children:T.configuration.lastError})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-1",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>c.mutate(T.id),disabled:m.has(T.id)||T.status==="STARTED"||T.status==="STARTING",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),"Start"]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>F.mutate(T.id),disabled:d.has(T.id)||m.has(T.id)||T.status==="STOPPED"||T.status==="STOPPING",children:[e.jsx(nt,{className:"h-4 w-4 mr-1"}),"Stop"]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>j(l===T.id?null:T.id),className:l===T.id?"bg-primary/10 border-primary":"",children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),"Logs"]})]}),l===T.id&&A&&e.jsxs("div",{className:"mt-4 p-4 bg-secondary/20 border border-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(rt,{className:"h-4 w-4 text-primary"}),e.jsx("h4",{className:"font-medium text-foreground",children:"Recent Executions"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",A.recentExecutionsShown," of ",A.totalExecutions,")"]})]}),A.executions&&A.executions.length>0?e.jsx("div",{className:"space-y-2",children:A.executions.map(te=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded border hover:bg-secondary/30 transition-colors cursor-pointer",onClick:()=>n(`/execution-logs/${te.executionId}`),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:te.statusIcon}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-mono text-sm text-primary hover:underline",children:te.messageId}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[te.flowName," • ",te.startedAt?new Date(te.startedAt).toLocaleString():"Unknown"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:te.statusText}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-muted-foreground",children:te.duration}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-muted-foreground",children:te.filesText})]})]},te.executionId))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(be,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent executions found"})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>n(`/flow-monitoring?adapterId=${T.id}`),children:[e.jsx(Ae,{className:"h-4 w-4 mr-1"}),"View All Executions"]})})]})]})]},T.id)})})]})},ci=()=>{var E;const s=Oe(),{success:t,error:r}=He(),n=Pe(),[a,i]=y.useState("all"),[o,h]=y.useState("all"),{data:l,isLoading:j,refetch:m}=se({queryKey:["flow-executions",a,o],queryFn:()=>Ws.getAllExecutions({status:a==="all"?void 0:a,flowId:o==="all"?void 0:o,size:50}),refetchInterval:5e3}),{data:p}=se({queryKey:["flows-for-monitoring"],queryFn:()=>ot.getAllFlows()}),d=((E=l==null?void 0:l.data)==null?void 0:E.executions)||[],C=(p==null?void 0:p.data)||[],g=me({mutationFn:x=>Ws.retryExecution(x),onSuccess:()=>{t("Execution Restarted","Flow execution has been restarted successfully"),n.invalidateQueries({queryKey:["flow-executions"]})},onError:x=>{var A,c;r("Restart Failed",((c=(A=x.response)==null?void 0:A.data)==null?void 0:c.message)||"Failed to restart execution")}}),u=x=>{switch(x){case"COMPLETED":return e.jsx(ne,{className:"h-4 w-4 text-green-500"});case"FAILED":return e.jsx(ge,{className:"h-4 w-4 text-red-500"});case"RUNNING":case"RETRY_PENDING":return e.jsx(be,{className:"h-4 w-4 text-blue-500 animate-spin"});case"CANCELLED":return e.jsx(ge,{className:"h-4 w-4 text-gray-500"});case"TIMEOUT":return e.jsx(Ee,{className:"h-4 w-4 text-red-500"});case"PENDING":return e.jsx(be,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Ee,{className:"h-4 w-4 text-yellow-500"})}},S=x=>{switch(x){case"COMPLETED":return"bg-green-100 text-green-700";case"FAILED":return"bg-red-100 text-red-700";case"RUNNING":case"RETRY_PENDING":return"bg-blue-100 text-blue-700";case"CANCELLED":return"bg-gray-100 text-gray-700";case"TIMEOUT":return"bg-red-100 text-red-700";case"PENDING":return"bg-yellow-100 text-yellow-700";default:return"bg-yellow-100 text-yellow-700"}};return j?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading flow monitoring..."})]})})}):e.jsxs("div",{className:"content-spacing h-screen flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Flow Monitoring"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor flow executions, logs, and restart failed flows"})]}),e.jsxs(w,{variant:"outline",onClick:()=>m(),children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx("div",{className:"flex-1 flex flex-col space-y-6",children:e.jsxs("div",{className:"flex-1 flex flex-col space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 flex-shrink-0",children:[e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Executions"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:d.length})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ge,{className:"h-6 w-6 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Failed"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:d.filter(x=>x.status==="FAILED"||x.status==="TIMEOUT").length})]})]})})})]}),e.jsxs(I,{className:"app-card border flex-shrink-0",children:[e.jsx(Y,{children:e.jsx(J,{className:"text-sm text-foreground",children:"Filters"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs(V,{value:a,onValueChange:i,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"all",children:"All Statuses"}),e.jsx(v,{value:"PENDING",children:"Pending"}),e.jsx(v,{value:"RUNNING",children:"Running"}),e.jsx(v,{value:"COMPLETED",children:"Completed"}),e.jsx(v,{value:"FAILED",children:"Failed"}),e.jsx(v,{value:"CANCELLED",children:"Cancelled"}),e.jsx(v,{value:"TIMEOUT",children:"Timeout"}),e.jsx(v,{value:"RETRY_PENDING",children:"Retry Pending"})]})]}),e.jsxs(V,{value:o,onValueChange:h,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"all",children:"All Flows"}),C.map(x=>e.jsx(v,{value:x.id,children:x.name},x.id))]})]})]})})]}),e.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto",children:d.map(x=>e.jsx(I,{className:"app-card border transition-all hover:shadow-md",children:e.jsxs(L,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[u(x.status),e.jsx("span",{className:"font-medium text-foreground",children:x.flowName})]}),e.jsx("span",{className:U("text-xs px-2 py-1 rounded",S(x.status)),children:x.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:["Started: ",new Date(x.startedAt).toLocaleString()]}),x.triggerType&&e.jsxs("span",{children:["• Trigger: ",x.triggerType]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Files: ",x.filesProcessed||0]}),e.jsxs("span",{children:["Size: ",x.bytesProcessed||"0 B"]}),x.duration&&e.jsxs("span",{children:["Duration: ",x.duration]}),x.isRetry&&e.jsx("span",{className:"text-orange-600",children:"• Retry"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:A=>{A.stopPropagation(),s(`/execution-logs/${x.id}`)},children:[e.jsx(Ae,{className:"h-3 w-3 mr-1"}),"View Logs"]}),x.status==="FAILED"&&e.jsxs(w,{variant:"outline",size:"sm",onClick:A=>{A.stopPropagation(),g.mutate(x.id)},disabled:g.isPending,children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),g.isPending?"Retrying...":"Retry"]})]})]})]})},x.id))})]})})]})},oi=()=>{const{executionId:s}=dt(),t=Oe(),[r,n]=y.useState(""),[a,i]=y.useState("all"),[o,h]=y.useState(!0),{data:l}=se({queryKey:["execution-details",s],queryFn:()=>s?Ws.getExecutionById(s):null,enabled:!!s}),{data:j,isLoading:m,refetch:p}=se({queryKey:["execution-logs",s,r,a],queryFn:()=>s?Ws.getExecutionLogs(s,{filter:r||void 0,level:a!=="all"?a:void 0}):null,enabled:!!s,refetchInterval:o?3e3:!1}),d=l==null?void 0:l.data,g=((j==null?void 0:j.data)||[]).filter(c=>["INFO","WARN","ERROR"].includes(c.level)),u=c=>{switch(c){case"ERROR":return e.jsx(ge,{className:"h-4 w-4 text-red-500"});case"WARN":return e.jsx(Ee,{className:"h-4 w-4 text-yellow-500"});case"INFO":return e.jsx(qe,{className:"h-4 w-4 text-blue-500"});case"DEBUG":return e.jsx(Ae,{className:"h-4 w-4 text-gray-500"});default:return e.jsx(vs,{className:"h-4 w-4 text-gray-500"})}},S=c=>"bg-slate-950/50 text-slate-400 border-slate-800/50",E=c=>{const F=new Date(c);return F.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})+"."+F.getMilliseconds().toString().padStart(3,"0")},x=()=>{const c=g.map(M=>`"${E(M.timestamp)}","${M.level}","${M.category}","${M.message.replace(/"/g,'""')}"`).join(`
`),F=`Timestamp,Level,Category,Message
`,f=new Blob([F+c],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a"),T=URL.createObjectURL(f);b.setAttribute("href",T),b.setAttribute("download",`execution-logs-${s}-${new Date().toISOString().split("T")[0]}.csv`),b.style.visibility="hidden",document.body.appendChild(b),b.click(),document.body.removeChild(b)},A=()=>{n(""),i("all")};return s?e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>t("/flow-monitoring"),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Back to Flow Monitoring"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Execution Logs"}),e.jsxs("p",{className:"text-muted-foreground",children:["Detailed step-by-step logs for execution: ",s==null?void 0:s.substring(0,8)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>h(!o),className:o?"bg-primary/10 border-primary":"",children:[e.jsx(Ce,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Auto Refresh"]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>p(),children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:x,disabled:g.length===0,children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),d&&e.jsxs(I,{className:"app-card border mb-6",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center space-x-2",children:[e.jsx(be,{className:"h-5 w-5"}),e.jsx("span",{children:"Execution Summary"})]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Flow:"}),e.jsx("span",{className:"ml-2 text-foreground font-medium",children:d.flowName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:"ml-2",children:e.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded text-xs ${d.status==="COMPLETED"?"bg-green-100 text-green-700":d.status==="FAILED"?"bg-red-100 text-red-700":d.status==="RUNNING"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:[d.status==="COMPLETED"&&e.jsx(ne,{className:"h-3 w-3"}),d.status==="FAILED"&&e.jsx(ge,{className:"h-3 w-3"}),d.status==="RUNNING"&&e.jsx(be,{className:"h-3 w-3"}),e.jsx("span",{children:d.status})]})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsx("span",{className:"ml-2 text-foreground",children:d.duration||"In progress"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Started:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(d.startedAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Trigger:"}),e.jsx("span",{className:"ml-2 text-foreground",children:d.triggerType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Files Processed:"}),e.jsx("span",{className:"ml-2 text-foreground",children:d.filesProcessed||0})]})]})})]}),e.jsxs(I,{className:"app-card border mb-6",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center space-x-2",children:[e.jsx(vr,{className:"h-5 w-5"}),e.jsx("span",{children:"Log Filters"})]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Search Message"}),e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search log messages...",value:r,onChange:c=>n(c.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Log Level"}),e.jsxs(V,{value:a,onValueChange:i,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"all",children:"All Levels"}),e.jsx(v,{value:"ERROR",children:"Error"}),e.jsx(v,{value:"WARN",children:"Warning"}),e.jsx(v,{value:"INFO",children:"Information"}),e.jsx(v,{value:"DEBUG",children:"Debug"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(w,{variant:"outline",onClick:A,className:"w-full",children:"Clear Filters"})})]}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:["Showing ",g.length," log entries (INFO, WARN, ERROR only)",r&&e.jsxs("span",{children:[' • Filtered by: "',r,'"']}),a!=="all"&&e.jsxs("span",{children:[" • Level: ",a]})]})]})]}),e.jsxs(I,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-5 w-5"}),e.jsx("span",{children:"Detailed Execution Logs"})]}),e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:o&&"Auto-refreshing every 3 seconds"})]})}),e.jsx(L,{children:m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading logs..."})]})}):g.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Logs Found"}),e.jsx("p",{className:"text-muted-foreground",children:r||a!=="all"?"No logs match your current filters":"No detailed logs available for this execution"})]})}):e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:g.map((c,F)=>e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-lg border ${S(c.level)}`,children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u(c.level)}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx("span",{className:"font-mono text-foreground",children:E(c.timestamp)}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${S(c.level)}`,children:c.level}),e.jsx("span",{className:"text-muted-foreground",children:c.category})]}),c.executionTimeMs&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[c.executionTimeMs,"ms"]})]}),e.jsx("div",{className:"text-sm text-foreground",children:e.jsx("p",{className:"whitespace-pre-wrap break-words",children:c.message})}),(c.adapterName||c.flowName||c.loggerName||c.threadName)&&e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground",children:[c.adapterName&&e.jsxs("span",{children:["Adapter: ",c.adapterName]}),c.flowName&&e.jsxs("span",{children:["Flow: ",c.flowName]}),c.loggerName&&e.jsxs("span",{children:["Logger: ",c.loggerName.split(".").pop()]}),c.threadName&&e.jsxs("span",{children:["Thread: ",c.threadName]})]}),c.exceptionClass&&e.jsxs("div",{className:"mt-2 p-3 bg-red-950/30 border border-red-800/50 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-400 mb-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:c.exceptionClass})]}),c.exceptionMessage&&e.jsx("p",{className:"text-sm text-red-300 mb-2",children:c.exceptionMessage}),c.stackTrace&&e.jsxs("details",{className:"text-xs",children:[e.jsx("summary",{className:"cursor-pointer text-red-400 hover:text-red-300",children:"Show Stack Trace"}),e.jsx("pre",{className:"mt-2 text-red-300 whitespace-pre-wrap overflow-x-auto",children:c.stackTrace})]})]}),c.mdcData&&Object.keys(c.mdcData).length>0&&e.jsxs("details",{className:"text-xs",children:[e.jsxs("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:["Context Data (",Object.keys(c.mdcData).length," items)"]}),e.jsx("div",{className:"mt-2 p-2 bg-secondary/20 rounded",children:Object.entries(c.mdcData).map(([f,b])=>e.jsxs("div",{className:"flex",children:[e.jsxs("span",{className:"font-medium text-muted-foreground w-24",children:[f,":"]}),e.jsx("span",{className:"text-foreground",children:b})]},f))})]}),(c.requestMethod||c.requestUri)&&e.jsx("div",{className:"text-xs text-muted-foreground",children:c.requestMethod&&c.requestUri&&e.jsxs("span",{children:[c.requestMethod," ",c.requestUri]})})]})]},`${c.id}-${F}`))})})]})]}):e.jsx("div",{className:"content-spacing",children:e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ee,{className:"h-16 w-16 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Invalid Execution"}),e.jsx("p",{className:"text-muted-foreground",children:"No execution ID provided"})]})})})})},Zs=()=>{const{user:s}=ns(),t=a=>s?(Array.isArray(a)?a:[a]).includes(s.role):!1;return{hasRole:t,isAdmin:()=>t("ADMINISTRATOR"),isViewer:()=>t("VIEWER"),currentRole:s==null?void 0:s.role}},It=()=>{const{isAdmin:s}=Zs(),{success:t,error:r}=He(),n=Pe(),{user:a}=ns(),[i,o]=y.useState(!1),[h,l]=y.useState(0),[j,m]=y.useState({}),[p,d]=y.useState(null),{data:C,isLoading:g}=se({queryKey:["users"],queryFn:js.getAllUsers}),u=(C||[]).filter(f=>f.role!=="INTEGRATOR"),S=me({mutationFn:js.createUser,onSuccess:()=>{t("User Created","User account created successfully"),n.invalidateQueries({queryKey:["users"]}),o(!1)},onError:f=>{var b,T;r("Creation Failed",((T=(b=f.response)==null?void 0:b.data)==null?void 0:T.message)||"Failed to create user")}}),E=me({mutationFn:({id:f,data:b})=>js.updateUser(f,b),onSuccess:()=>{t("User Updated","User account updated successfully"),n.invalidateQueries({queryKey:["users"]}),d(null)},onError:f=>{var b,T;r("Update Failed",((T=(b=f.response)==null?void 0:b.data)==null?void 0:T.message)||"Failed to update user")}}),x=me({mutationFn:js.deleteUser,onSuccess:()=>{t("User Deleted","User account deleted successfully"),n.invalidateQueries({queryKey:["users"]})},onError:f=>{var b,T;r("Deletion Failed",((T=(b=f.response)==null?void 0:b.data)==null?void 0:T.message)||"Failed to delete user")}}),A=f=>f==="ADMINISTRATOR"?e.jsx(wt,{className:"h-4 w-4 text-warning"}):e.jsx(Ze,{className:"h-4 w-4 text-info"}),c=f=>f==="ADMINISTRATOR"?"bg-warning/20 text-warning":"bg-info/20 text-info",F=()=>s;return s?g?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading users..."})]})})}):e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"User Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage system users, roles, and permissions"})]}),e.jsxs(w,{className:"btn-primary",onClick:()=>{l(f=>f+1),o(!0)},children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create User"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(zs,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:u.length||0})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(wt,{className:"h-8 w-8 text-warning"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Administrators"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:u.filter(f=>f.role==="ADMINISTRATOR").length||0})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{className:"h-8 w-8 text-success"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:u.filter(f=>f.enabled).length||0})]})]})})})]}),i&&e.jsxs(I,{className:"app-card border mb-6",children:[e.jsx(Y,{children:e.jsxs(J,{className:"text-foreground flex items-center space-x-2",children:[e.jsx(zs,{className:"h-5 w-5"}),e.jsx("span",{children:"Create New User"})]})}),e.jsx(L,{children:e.jsx(di,{onSubmit:f=>S.mutate(f),onCancel:()=>o(!1),isLoading:S.isPending},h)})]}),u&&u.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6",children:u.map(f=>e.jsxs(I,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[A(f.role),(a==null?void 0:a.id)===f.id&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-primary rounded-full border-2 border-background"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"text-lg text-foreground",children:f.username}),(a==null?void 0:a.id)===f.id&&e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-primary/20 text-primary",children:"You"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${c(f.role)}`,children:f.role}),e.jsx("div",{className:`w-3 h-3 rounded-full ${f.enabled?"bg-success animate-glow":"bg-muted-foreground"}`}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${f.enabled?"bg-success/20 text-success":"bg-muted/20 text-muted-foreground"}`,children:f.enabled?"Active":"Inactive"})]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(f.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Login:"}),e.jsx("span",{className:"ml-2 text-foreground",children:f.lastLogin?new Date(f.lastLogin).toLocaleDateString():"Never"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Failed Attempts:"}),e.jsx("span",{className:"ml-2 text-foreground",children:f.failedLoginAttempts})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:`ml-2 ${f.enabled?"text-success":"text-muted-foreground"}`,children:f.enabled?"Active":"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"User ID:"}),e.jsx("div",{className:"mt-1 font-mono text-xs bg-secondary p-2 rounded",children:f.id})]}),e.jsx("div",{className:"flex items-center space-x-2 pt-4 border-t border-border",children:F()&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>d(f.id),children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),"Edit User"]}),(a==null?void 0:a.id)!==f.id&&e.jsx(w,{variant:"outline",size:"sm",onClick:()=>E.mutate({id:f.id,data:{...f,enabled:!f.enabled}}),disabled:E.isPending,children:f.enabled?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Activate"]})}),(a==null?void 0:a.id)!==f.id&&e.jsxs(w,{variant:"outline",size:"sm",className:"text-destructive",onClick:()=>x.mutate(f.id),disabled:x.isPending,children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"Delete"]}),(a==null?void 0:a.id)===f.id&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"You cannot deactivate or delete your own account"})]})})]})})]},f.id))}):e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Users Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first user account to get started"}),e.jsxs(w,{className:"btn-primary",onClick:()=>{l(f=>f+1),o(!0)},children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create First User"]})]})})})]}):e.jsx("div",{className:"content-spacing",children:e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ze,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:"Administrator privileges required to manage users"})]})})})})},di=({onSubmit:s,onCancel:t,isLoading:r})=>{const[n,a]=y.useState({username:"",email:"",password:"",role:"VIEWER",enabled:!0}),[i,o]=y.useState(!1),h=l=>{l.preventDefault(),s(n)};return e.jsxs("form",{onSubmit:h,className:"space-y-4",autoComplete:"off",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"username",children:"Username"}),e.jsx(D,{id:"username",value:n.username,onChange:l=>a(j=>({...j,username:l.target.value})),placeholder:"e.g., john.doe",className:"bg-input border-border text-foreground",autoComplete:"off",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"email",children:"Email"}),e.jsx(D,{id:"email",type:"email",value:n.email,onChange:l=>a(j=>({...j,email:l.target.value})),placeholder:"e.g., john.doe@company.com",className:"bg-input border-border text-foreground",autoComplete:"off",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{id:"password",type:i?"text":"password",value:n.password,onChange:l=>a(j=>({...j,password:l.target.value})),placeholder:"Enter password",className:"bg-input border-border text-foreground pr-10",autoComplete:"new-password",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-3 text-muted-foreground",children:i?e.jsx(Ms,{className:"h-4 w-4"}):e.jsx(Ae,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"role",children:"Role"}),e.jsxs(V,{value:n.role,onValueChange:l=>a(j=>({...j,role:l})),children:[e.jsx(K,{className:"w-full",children:e.jsx(z,{placeholder:"Select role"})}),e.jsxs($,{children:[e.jsx(v,{value:"VIEWER",children:"Viewer (Read-only access)"}),e.jsx(v,{value:"ADMINISTRATOR",children:"Administrator (Full access)"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"enabled",checked:n.enabled,onChange:l=>a(j=>({...j,enabled:l.target.checked})),className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"}),e.jsx(N,{htmlFor:"enabled",children:"Enable user account"})]}),e.jsxs("div",{className:"flex items-center space-x-4 pt-4",children:[e.jsx(w,{type:"submit",className:"btn-primary",disabled:r,children:r?"Creating...":"Create User"}),e.jsx(w,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})},mi=()=>{const s=Oe(),{isAdmin:t}=Zs(),{success:r,error:n}=He(),a=Pe(),[i,o]=y.useState({}),{data:h,isLoading:l}=se({queryKey:["ssh-keys"],queryFn:ps.getAllKeys}),j=me({mutationFn:({id:u,enabled:S})=>ps.toggleKeyStatus(u,S),onSuccess:()=>{r("Status Updated","SSH key status changed successfully"),a.invalidateQueries({queryKey:["ssh-keys"]})},onError:u=>{var S,E;n("Status Change Failed",((E=(S=u.response)==null?void 0:S.data)==null?void 0:E.message)||"Failed to change key status")}}),m=me({mutationFn:ps.deleteKey,onSuccess:()=>{r("Key Deleted","SSH key deleted successfully"),a.invalidateQueries({queryKey:["ssh-keys"]})},onError:u=>{var S,E;n("Deletion Failed",((E=(S=u.response)==null?void 0:S.data)==null?void 0:E.message)||"Failed to delete SSH key")}}),p=async(u,S)=>{var E,x;try{const A=await ps.downloadPrivateKey(u),c=window.URL.createObjectURL(A),F=document.createElement("a");F.href=c,F.download=`${S}_private_key`,document.body.appendChild(F),F.click(),document.body.removeChild(F),window.URL.revokeObjectURL(c),r("Download Complete","Private key downloaded successfully")}catch(A){n("Download Failed",((x=(E=A.response)==null?void 0:E.data)==null?void 0:x.message)||"Failed to download private key")}},d=async(u,S)=>{var E,x;try{const A=await ps.downloadPublicKey(u),c=window.URL.createObjectURL(A),F=document.createElement("a");F.href=c,F.download=`${S}_public_key.pub`,document.body.appendChild(F),F.click(),document.body.removeChild(F),window.URL.revokeObjectURL(c),r("Download Complete","Public key downloaded successfully")}catch(A){n("Download Failed",((x=(E=A.response)==null?void 0:E.data)==null?void 0:x.message)||"Failed to download public key")}},C=u=>{navigator.clipboard.writeText(u).then(()=>{r("Copied","Public key copied to clipboard")}).catch(()=>{n("Copy Failed","Failed to copy public key to clipboard")})},g=u=>{o(S=>({...S,[u]:!S[u]}))};return l?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading SSH keys..."})]})})}):e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"SSH Key Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate and manage SSH keys for secure SFTP connections"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[h&&h.length>0&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.filter(u=>u.enabled).length," of ",h.length," keys active"]}),t()&&e.jsxs(w,{className:"btn-primary",onClick:()=>s("/ssh-keys/create"),children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Generate New Key"]})]})]}),h&&h.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Keys"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:h.length})]}),e.jsx(Qe,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Valid & Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-500",children:h.filter(u=>u.enabled).length})]}),e.jsx(St,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Disabled"}),e.jsx("p",{className:"text-2xl font-bold text-muted-foreground",children:h.filter(u=>!u.enabled).length})]}),e.jsx(Ct,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:h.map(u=>e.jsxs(I,{className:`app-card border ${u.enabled?"border-l-4 border-l-green-500":"border-l-4 border-l-muted-foreground"}`,children:[e.jsx(Y,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${u.enabled?"bg-green-500/10":"bg-muted/20"}`,children:e.jsx(Qe,{className:`h-5 w-5 ${u.enabled?"text-green-500":"text-muted-foreground"}`})}),e.jsxs("div",{children:[e.jsx(J,{className:"text-lg text-foreground",children:u.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.description})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("div",{className:`flex items-center space-x-2 px-3 py-1.5 rounded-full ${u.enabled?"bg-green-500/10 border border-green-500/20":"bg-muted/20 border border-border"}`,children:u.enabled?e.jsxs(e.Fragment,{children:[e.jsx(St,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-green-500",children:"Valid"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Disabled"})]})})})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsxs("span",{className:"ml-2 text-foreground font-medium",children:[u.keyType," ",u.keySize]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(u.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Expires:"}),e.jsx("span",{className:`ml-2 font-medium ${new Date(u.expiresAt)<new Date?"text-red-500":new Date(u.expiresAt)<new Date(Date.now()+30*24*60*60*1e3)?"text-yellow-500":"text-foreground"}`,children:new Date(u.expiresAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:`ml-2 font-medium ${new Date(u.expiresAt)<new Date?"text-red-500":"text-green-500"}`,children:new Date(u.expiresAt)<new Date?"Expired":"Valid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Fingerprint:"}),e.jsx("div",{className:"mt-1 font-mono text-xs bg-secondary p-2 rounded",children:u.fingerprint})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Public Key:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{variant:"outline",size:"sm",onClick:()=>C(u.publicKey),children:e.jsx(yr,{className:"h-4 w-4"})}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>g(u.id),children:i[u.id]?e.jsx(Ms,{className:"h-4 w-4"}):e.jsx(Ae,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"mt-1 font-mono text-xs bg-secondary p-2 rounded break-all",children:i[u.id]?u.publicKey:`${u.publicKey.substring(0,50)}...`})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2 pt-4 border-t border-border",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>d(u.id,u.name),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Download Public"]}),t()&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>p(u.id,u.name),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Download Private"]}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>j.mutate({id:u.id,enabled:!u.enabled}),disabled:j.isPending,className:u.enabled?"":"text-green-500 hover:text-green-600",children:u.enabled?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Disable"]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Enable"]})}),e.jsxs(w,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>m.mutate(u.id),disabled:m.isPending,children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})]},u.id))})]}):e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qe,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No SSH Keys"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Generate your first SSH key pair for secure SFTP connections"}),t()&&e.jsxs(w,{className:"btn-primary",onClick:()=>s("/ssh-keys/create"),children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Generate SSH Key"]})]})})})]})},Fe=y.forwardRef(({className:s,...t},r)=>e.jsx(xa,{className:U("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:r,children:e.jsx(Zr,{className:U("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Fe.displayName=xa.displayName;const xi=Qs("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ts=y.forwardRef(({className:s,variant:t,...r},n)=>e.jsx("div",{ref:n,role:"alert",className:U(xi({variant:t}),s),...r}));Ts.displayName="Alert";const ui=y.forwardRef(({className:s,...t},r)=>e.jsx("h5",{ref:r,className:U("mb-1 font-medium leading-none tracking-tight",s),...t}));ui.displayName="AlertTitle";const ks=y.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:U("text-sm [&_p]:leading-relaxed",s),...t}));ks.displayName="AlertDescription";const Lt=s=>{switch(s){case"DEVELOPMENT":return{color:"text-info",bgColor:"bg-blue-100 border-blue-200",badgeClass:"bg-blue-600 text-white border-blue-600",label:"Development"};case"QUALITY_ASSURANCE":return{color:"text-warning",bgColor:"bg-yellow-100 border-yellow-200",badgeClass:"bg-purple-600 text-white border-purple-600",label:"Quality Assurance"};case"PRODUCTION":return{color:"text-destructive",bgColor:"bg-red-100 border-red-200",badgeClass:"bg-red-600 text-white border-red-600",label:"Production"};default:return{color:"text-muted-foreground",bgColor:"bg-gray-100 border-gray-200",badgeClass:"bg-gray-600 text-white border-gray-600",label:"Unknown"}}},hi=()=>{const{success:s,error:t}=He(),r=Pe(),[n,a]=y.useState(""),[i,o]=y.useState(!0),[h,l]=y.useState(""),[j,m]=y.useState(!1),{data:p,isLoading:d}=se({queryKey:["environment-config"],queryFn:()=>(console.log("🔧 Fetching current environment..."),Bs.getCurrentEnvironment())}),{data:C,isLoading:g}=se({queryKey:["environment-types"],queryFn:()=>(console.log("🔧 Fetching environment types..."),Bs.getEnvironmentTypes())}),u=p==null?void 0:p.data,S=(C==null?void 0:C.data)||[],E=me({mutationFn:Bs.updateEnvironment,onSuccess:()=>{s("Environment Updated","Environment configuration updated successfully"),r.invalidateQueries({queryKey:["environment-config"]}),m(!1)},onError:f=>{var b,T;t("Update Failed",((T=(b=f.response)==null?void 0:b.data)==null?void 0:T.message)||"Failed to update environment configuration")}});y.useEffect(()=>{u&&(a(u.type),o(u.enforceRestrictions),l(u.restrictionMessage),m(!1))},[u]),y.useEffect(()=>{if(!u)return;const f=n!==u.type,b=i!==u.enforceRestrictions,T=h!==u.restrictionMessage;m(f||b||T)},[n,i,h,u]);const x=()=>{E.mutate({type:n,enforceRestrictions:i,restrictionMessage:h})},A=()=>{u&&(a(u.type),o(u.enforceRestrictions),l(u.restrictionMessage),m(!1))};if(d||g)return e.jsxs(I,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5"}),e.jsx(J,{children:"Environment Configuration"})]})}),e.jsx(L,{children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Ce,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]});const c=Lt(n),F=i?n==="DEVELOPMENT"?[]:["Flow Creation","Adapter Creation"]:[];return e.jsxs(I,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5"}),"Environment Configuration"]}),e.jsx(ze,{children:"Configure the system environment type and restrictions"})]}),e.jsx(ue,{className:c.badgeClass,children:c.label})]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"environment-type",children:"Environment Type"}),e.jsxs(V,{value:n,onValueChange:a,children:[e.jsx(K,{id:"environment-type",children:e.jsx(z,{placeholder:"Select environment type"})}),e.jsx($,{children:S.map(f=>e.jsx(v,{value:f.name,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Lt(f.name).bgColor}`}),f.displayName]})},f.name))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(N,{htmlFor:"enforce-restrictions",children:"Enforce Environment Restrictions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable environment-based feature restrictions"})]}),e.jsx(Fe,{id:"enforce-restrictions",checked:i,onCheckedChange:o})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"restriction-message",children:"Custom Restriction Message"}),e.jsx(D,{id:"restriction-message",value:h,onChange:f=>l(f.target.value),placeholder:"This action is not allowed in %s environment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use %s as placeholder for environment name"})]}),i&&F.length>0&&e.jsxs(Ts,{className:c.bgColor,children:[e.jsx(vs,{className:"h-4 w-4"}),e.jsxs(ks,{children:[e.jsx("strong",{children:"Environment Restrictions Active:"})," The following features are restricted in ",c.label," environment: ",F.join(", ")]})]}),u&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{children:"Current Environment Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(u.permissions).map(([f,b])=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[b?e.jsx(Nr,{className:"h-4 w-4 text-green-600"}):e.jsx(vs,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:b?"text-green-700":"text-red-700",children:f.replace(/([A-Z])/g," $1").replace(/^./,T=>T.toUpperCase())})]},f))})]}),j&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"You have unsaved changes"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{variant:"outline",onClick:A,disabled:E.isPending,children:"Cancel"}),e.jsx(w,{onClick:x,disabled:E.isPending,children:E.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})]})]})},pi={DASHBOARD:br,SECURITY:Ze,NOTIFICATIONS:vs,FILE_PROCESSING:pe,SYSTEM:de,LOGGING:ke,ADAPTER:Je,GENERAL:de},gi={DASHBOARD:"text-blue-500",SECURITY:"text-red-500",NOTIFICATIONS:"text-yellow-500",FILE_PROCESSING:"text-green-500",SYSTEM:"text-purple-500",LOGGING:"text-orange-500",ADAPTER:"text-cyan-500",GENERAL:"text-gray-500"},ji=()=>{const{success:s,error:t}=He(),r=Pe(),[n,a]=y.useState(""),[i,o]=y.useState("ALL"),[h,l]=y.useState(null),[j,m]=y.useState({}),{data:p,isLoading:d}=se({queryKey:["system-configurations"],queryFn:ct.getAllConfigurations}),C=(p==null?void 0:p.configurations)||[],g=me({mutationFn:({id:b,data:T})=>ct.updateConfigurationValue(b,T.configValue),onSuccess:()=>{s("Configuration Updated","System configuration updated successfully"),r.invalidateQueries({queryKey:["system-configurations"]}),l(null),m({})},onError:b=>{var T,M;t("Update Failed",((M=(T=b.response)==null?void 0:T.data)==null?void 0:M.message)||"Failed to update configuration")}}),u=b=>{b.readonly||(l(b.id),m({[b.id]:b.configValue}))},S=b=>{const T=j[b];T!==void 0&&g.mutate({id:b,data:{configValue:T}})},E=()=>{l(null),m({})},x=b=>{b.defaultValue&&!b.readonly&&g.mutate({id:b.id,data:{configValue:b.defaultValue}})},A=C.filter(b=>{var O;const T=b.configKey.toLowerCase().includes(n.toLowerCase())||((O=b.description)==null?void 0:O.toLowerCase().includes(n.toLowerCase())),M=i==="ALL"||b.category===i;return T&&M}),c=["ALL",...Array.from(new Set(C.map(b=>b.category)))],F=b=>A.filter(T=>b==="ALL"||T.category===b),f=b=>{const T=h===b.id,M=T?j[b.id]:b.configValue;return b.encrypted&&!T?e.jsx("span",{className:"text-muted-foreground",children:"••••••••"}):T?b.configType==="BOOLEAN"?e.jsxs(V,{value:M,onValueChange:O=>m(q=>({...q,[b.id]:O})),children:[e.jsx(K,{className:"w-full",children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"true",children:"True"}),e.jsx(v,{value:"false",children:"False"})]})]}):b.configKey==="system.timezone.default"?e.jsxs(V,{value:M,onValueChange:O=>m(q=>({...q,[b.id]:O})),children:[e.jsx(K,{className:"w-full",children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"UTC-12:00",children:"UTC-12:00 (Baker Island)"}),e.jsx(v,{value:"UTC-11:00",children:"UTC-11:00 (Samoa)"}),e.jsx(v,{value:"UTC-10:00",children:"UTC-10:00 (Hawaii)"}),e.jsx(v,{value:"UTC-09:00",children:"UTC-09:00 (Alaska)"}),e.jsx(v,{value:"UTC-08:00",children:"UTC-08:00 (Pacific Time)"}),e.jsx(v,{value:"UTC-07:00",children:"UTC-07:00 (Mountain Time)"}),e.jsx(v,{value:"UTC-06:00",children:"UTC-06:00 (Central Time)"}),e.jsx(v,{value:"UTC-05:00",children:"UTC-05:00 (Eastern Time)"}),e.jsx(v,{value:"UTC-04:00",children:"UTC-04:00 (Atlantic Time)"}),e.jsx(v,{value:"UTC-03:30",children:"UTC-03:30 (Newfoundland)"}),e.jsx(v,{value:"UTC-03:00",children:"UTC-03:00 (Brazil, Argentina)"}),e.jsx(v,{value:"UTC-02:00",children:"UTC-02:00 (Mid-Atlantic)"}),e.jsx(v,{value:"UTC-01:00",children:"UTC-01:00 (Azores)"}),e.jsx(v,{value:"UTC+00:00",children:"UTC+00:00 (Greenwich Mean Time)"}),e.jsx(v,{value:"UTC+01:00",children:"UTC+01:00 (Central European Time)"}),e.jsx(v,{value:"UTC+02:00",children:"UTC+02:00 (South Africa, Eastern Europe)"}),e.jsx(v,{value:"UTC+03:00",children:"UTC+03:00 (Russia, East Africa)"}),e.jsx(v,{value:"UTC+03:30",children:"UTC+03:30 (Iran)"}),e.jsx(v,{value:"UTC+04:00",children:"UTC+04:00 (Gulf States, Russia)"}),e.jsx(v,{value:"UTC+04:30",children:"UTC+04:30 (Afghanistan)"}),e.jsx(v,{value:"UTC+05:00",children:"UTC+05:00 (Pakistan, Kazakhstan)"}),e.jsx(v,{value:"UTC+05:30",children:"UTC+05:30 (India, Sri Lanka)"}),e.jsx(v,{value:"UTC+05:45",children:"UTC+05:45 (Nepal)"}),e.jsx(v,{value:"UTC+06:00",children:"UTC+06:00 (Bangladesh, Central Asia)"}),e.jsx(v,{value:"UTC+06:30",children:"UTC+06:30 (Myanmar)"}),e.jsx(v,{value:"UTC+07:00",children:"UTC+07:00 (Thailand, Vietnam)"}),e.jsx(v,{value:"UTC+08:00",children:"UTC+08:00 (China, Singapore)"}),e.jsx(v,{value:"UTC+08:30",children:"UTC+08:30 (North Korea)"}),e.jsx(v,{value:"UTC+09:00",children:"UTC+09:00 (Japan, Korea)"}),e.jsx(v,{value:"UTC+09:30",children:"UTC+09:30 (Australia Central)"}),e.jsx(v,{value:"UTC+10:00",children:"UTC+10:00 (Australia Eastern)"}),e.jsx(v,{value:"UTC+10:30",children:"UTC+10:30 (Lord Howe Island)"}),e.jsx(v,{value:"UTC+11:00",children:"UTC+11:00 (Solomon Islands)"}),e.jsx(v,{value:"UTC+12:00",children:"UTC+12:00 (New Zealand)"}),e.jsx(v,{value:"UTC+12:45",children:"UTC+12:45 (Chatham Islands)"}),e.jsx(v,{value:"UTC+13:00",children:"UTC+13:00 (Samoa, Tonga)"}),e.jsx(v,{value:"UTC+14:00",children:"UTC+14:00 (Line Islands)"})]})]}):e.jsx(D,{type:b.configType==="INTEGER"?"number":"text",value:M,onChange:O=>m(q=>({...q,[b.id]:O.target.value})),className:"font-mono text-sm",onKeyDown:O=>{O.key==="Enter"?S(b.id):O.key==="Escape"&&E()}}):b.configType==="BOOLEAN"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:U("w-3 h-3 rounded-full",M==="true"?"bg-success":"bg-muted-foreground")}),e.jsx("span",{className:U("font-mono text-sm",M==="true"?"text-success":"text-muted-foreground"),children:M==="true"?"Enabled":"Disabled"})]}):e.jsx("div",{className:"font-mono text-sm bg-secondary/50 px-2 py-1 rounded",children:M})};return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading configurations..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"System Configuration"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage runtime system settings and parameters"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"h-5 w-5 text-primary"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[C.length," configurations"]})]})]}),e.jsx(hi,{}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),e.jsx(D,{placeholder:"Search configurations...",value:n,onChange:b=>a(b.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(V,{value:i,onValueChange:o,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"All Categories"})}),e.jsx($,{children:c.map(b=>e.jsx(v,{value:b,children:b==="ALL"?"All Categories":b.replace("_"," ")},b))})]})})]})})}),c.filter(b=>b!=="ALL").map(b=>{const T=F(b);if(T.length===0)return null;const M=pi[b]||de,O=gi[b]||"text-muted-foreground";return e.jsxs(I,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center space-x-2",children:[e.jsx(M,{className:U("h-5 w-5",O)}),e.jsx("span",{children:b.replace("_"," ")}),e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",T.length," settings)"]})]})}),e.jsx(L,{className:"space-y-4",children:T.map(q=>e.jsxs("div",{className:"border border-border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"font-mono text-sm text-primary",children:q.configKey}),q.readonly&&e.jsx("span",{className:"text-xs px-2 py-1 bg-muted/50 text-muted-foreground rounded",children:"Read Only"}),q.encrypted&&e.jsx("span",{className:"text-xs px-2 py-1 bg-warning/20 text-warning rounded",children:"Encrypted"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:q.description}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Type: ",q.configType]}),q.defaultValue&&e.jsxs("span",{children:["• Default: ",q.defaultValue]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:h===q.id?e.jsxs(e.Fragment,{children:[e.jsx(w,{size:"sm",onClick:()=>S(q.id),disabled:g.isPending,children:e.jsx(Ue,{className:"h-4 w-4"})}),e.jsx(w,{size:"sm",variant:"outline",onClick:E,children:e.jsx(Ne,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[!q.readonly&&e.jsx(w,{size:"sm",variant:"outline",onClick:()=>u(q),children:e.jsx(Os,{className:"h-4 w-4"})}),q.defaultValue&&q.configValue!==q.defaultValue&&!q.readonly&&e.jsx(w,{size:"sm",variant:"outline",onClick:()=>x(q),title:"Reset to default",children:e.jsx(ut,{className:"h-4 w-4"})})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{className:"text-sm",children:"Current Value:"}),f(q)]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last updated: ",new Date(q.updatedAt).toLocaleString()]})]},q.id))})]},b)}),A.length===0&&e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(de,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Configurations Found"}),e.jsx("p",{className:"text-muted-foreground",children:"No system configurations match your search criteria"})]})})})]})},fi={TRACE:Vt,DEBUG:qe,INFO:qe,WARN:Ee,ERROR:ge},vi={TRACE:"text-slate-500",DEBUG:"text-blue-500",INFO:"text-green-500",WARN:"text-yellow-500",ERROR:"text-red-500"},yi={SYSTEM:de,ADAPTER_EXECUTION:ke,FLOW_EXECUTION:ke,AUTHENTICATION:Ze,DATABASE:Je,SCHEDULER:be,API:ke},Ni={SYSTEM:"text-purple-500",ADAPTER_EXECUTION:"text-blue-500",FLOW_EXECUTION:"text-green-500",AUTHENTICATION:"text-red-500",DATABASE:"text-yellow-500",SCHEDULER:"text-orange-500",API:"text-indigo-500"},Rt=()=>{const[s,t]=y.useState(""),[r,n]=y.useState("ALL"),[a,i]=y.useState("ALL"),[o,h]=y.useState(0),[l,j]=y.useState(50),[m,p]=y.useState(null),{data:d,isLoading:C,refetch:g}=se({queryKey:["system-logs",r,a,s,o,l],queryFn:()=>kn.getRecentLogs({level:a!=="ALL"?a:void 0,search:s||void 0,limit:l}),refetchInterval:3e4}),u=d||[],S=Math.ceil(u.length/l)||0,E=u.length||0,x=async()=>{try{console.log("Export functionality would be implemented here")}catch(f){console.error("Export failed:",f)}},A=f=>new Date(f).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),c=f=>{const b=fi[f]||qe,T=vi[f]||"text-muted-foreground";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{className:U("h-4 w-4",T)}),e.jsx("span",{className:U("text-xs font-medium px-2 py-1 rounded",f==="ERROR"&&"bg-red-100 text-red-700",f==="WARN"&&"bg-yellow-100 text-yellow-700",f==="INFO"&&"bg-green-100 text-green-700",f==="DEBUG"&&"bg-blue-100 text-blue-700",f==="TRACE"&&"bg-slate-100 text-slate-700"),children:f})]})},F=f=>{const b=yi[f]||de,T=Ni[f]||"text-muted-foreground";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{className:U("h-4 w-4",T)}),e.jsx("span",{className:"text-xs px-2 py-1 bg-secondary rounded",children:f.replace("_"," ")})]})};return C?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading logs..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"System Logs"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor application logs with category filtering"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(w,{variant:"outline",onClick:()=>g(),children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(w,{variant:"outline",onClick:x,children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),e.jsx(D,{placeholder:"Search logs by message, logger name, or correlation ID...",value:s,onChange:f=>t(f.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full lg:w-48",children:e.jsxs(V,{value:r,onValueChange:n,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"All Categories"})}),e.jsxs($,{children:[e.jsx(v,{value:"ALL",children:"All Categories"}),e.jsx(v,{value:"ADAPTER_EXECUTION",children:"Adapter Execution"}),e.jsx(v,{value:"FLOW_EXECUTION",children:"Flow Execution"}),e.jsx(v,{value:"AUTHENTICATION",children:"Authentication"}),e.jsx(v,{value:"DATABASE",children:"Database"}),e.jsx(v,{value:"API",children:"API"}),e.jsx(v,{value:"SCHEDULER",children:"Scheduler"}),e.jsx(v,{value:"SYSTEM",children:"System"})]})]})}),e.jsx("div",{className:"w-full lg:w-36",children:e.jsxs(V,{value:a,onValueChange:i,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"All Levels"})}),e.jsxs($,{children:[e.jsx(v,{value:"ALL",children:"All Levels"}),e.jsx(v,{value:"ERROR",children:"Error"}),e.jsx(v,{value:"WARN",children:"Warning"}),e.jsx(v,{value:"INFO",children:"Info"}),e.jsx(v,{value:"DEBUG",children:"Debug"}),e.jsx(v,{value:"TRACE",children:"Trace"})]})]})}),e.jsx("div",{className:"w-full lg:w-24",children:e.jsxs(V,{value:l.toString(),onValueChange:f=>j(parseInt(f)),children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"25",children:"25"}),e.jsx(v,{value:"50",children:"50"}),e.jsx(v,{value:"100",children:"100"}),e.jsx(v,{value:"200",children:"200"})]})]})})]})})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Showing ",u.length," of ",E," logs",r!=="ALL"&&` in ${r} category`,a!=="ALL"&&` at ${a} level`]}),e.jsxs("span",{children:["Page ",o+1," of ",S]})]}),u.length>0?e.jsx("div",{className:"space-y-2",children:u.map(f=>e.jsx(I,{className:"app-card border hover:border-primary/30 transition-all duration-200",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2 min-w-0",children:[e.jsx("div",{className:"text-xs font-mono text-muted-foreground",children:A(f.timestamp)}),c(f.logLevel)]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[F(f.logCategory),e.jsx("span",{className:"text-xs font-mono text-muted-foreground truncate",children:f.loggerName}),f.threadName&&e.jsx("span",{className:"text-xs px-2 py-1 bg-muted rounded",children:f.threadName})]}),(f.stackTrace||f.correlationId||f.adapterId||f.flowId)&&e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>p(m===f.id?null:f.id),children:m===f.id?"Less":"More"})]}),e.jsx("div",{className:"text-sm text-foreground",children:f.formattedMessage||f.message}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[f.correlationId&&e.jsxs("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded",children:["ID: ",f.correlationId]}),f.adapterName&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:["Adapter: ",f.adapterName]}),f.flowName&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:["Flow: ",f.flowName]}),f.requestMethod&&f.requestUri&&e.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded",children:[f.requestMethod," ",f.requestUri]}),f.remoteAddress&&e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded",children:["IP: ",f.remoteAddress]})]}),m===f.id&&e.jsxs("div",{className:"mt-4 space-y-3 border-t border-border pt-3",children:[f.exceptionClass&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Exception:"}),e.jsxs("div",{className:"mt-1 font-mono text-sm bg-red-50 text-red-800 p-2 rounded",children:[f.exceptionClass,": ",f.exceptionMessage]})]}),f.stackTrace&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Stack Trace:"}),e.jsx("pre",{className:"mt-1 font-mono text-xs bg-secondary/50 p-3 rounded overflow-x-auto max-h-48",children:f.stackTrace})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Application:"}),e.jsx("span",{className:"ml-2 text-foreground",children:f.applicationName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Environment:"}),e.jsx("span",{className:"ml-2 text-foreground",children:f.environment})]}),f.userId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"User ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:f.userId})]}),f.executionId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Execution ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:f.executionId})]})]})]})]})]})})},f.id))}):e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pe,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Logs Found"}),e.jsx("p",{className:"text-muted-foreground",children:"No system logs match your current filter criteria"})]})})}),S>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{variant:"outline",onClick:()=>h(Math.max(0,o-1)),disabled:o===0,children:"Previous"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",o+1," of ",S]}),e.jsx(w,{variant:"outline",onClick:()=>h(Math.min(S-1,o+1)),disabled:o===S-1,children:"Next"})]})]})},bi={TRACE:Vt,DEBUG:qe,INFO:qe,WARN:Ee,ERROR:ge,FATAL:ge},wi={TRACE:"text-slate-500",DEBUG:"text-blue-500",INFO:"text-green-500",WARN:"text-yellow-500",ERROR:"text-red-500",FATAL:"text-red-700"},Si={AUTHENTICATION:Ze,FILE_PROCESSING:pe,ADAPTER_EXECUTION:ke,FLOW_EXECUTION:ke,SYSTEM_OPERATION:de,USER_MANAGEMENT:Ps,CONFIGURATION_CHANGE:de,SECURITY:Ze},Ci={AUTHENTICATION:"text-red-500",FILE_PROCESSING:"text-blue-500",ADAPTER_EXECUTION:"text-green-500",FLOW_EXECUTION:"text-purple-500",SYSTEM_OPERATION:"text-orange-500",USER_MANAGEMENT:"text-indigo-500",CONFIGURATION_CHANGE:"text-yellow-600",SECURITY:"text-red-600"},Ei=()=>{const[s,t]=y.useState(""),[r,n]=y.useState("ALL"),[a,i]=y.useState("ALL"),[o,h]=y.useState(50),[l,j]=y.useState(null),{data:m,isLoading:p,refetch:d}=se({queryKey:["transaction-logs",r,a,s,o],queryFn:()=>Dt.getRecentLogs({level:a!=="ALL"?a:void 0,category:r!=="ALL"?r:void 0,search:s||void 0,limit:o}),refetchInterval:3e4}),C=m||[],g=async()=>{try{await Dt.exportLogs({level:a!=="ALL"?a:void 0,category:r!=="ALL"?r:void 0,limit:1e3,format:"csv"})}catch(x){console.error("Export failed:",x)}},u=x=>new Date(x).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),S=x=>{const A=bi[x]||qe,c=wi[x]||"text-muted-foreground";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(A,{className:U("h-4 w-4",c)}),e.jsx("span",{className:U("text-xs font-medium px-2 py-1 rounded",x==="ERROR"&&"bg-red-100 text-red-700",x==="FATAL"&&"bg-red-100 text-red-700",x==="WARN"&&"bg-yellow-100 text-yellow-700",x==="INFO"&&"bg-green-100 text-green-700",x==="DEBUG"&&"bg-blue-100 text-blue-700",x==="TRACE"&&"bg-slate-100 text-slate-700"),children:x})]})},E=x=>{const A=Si[x]||de,c=Ci[x]||"text-muted-foreground";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(A,{className:U("h-4 w-4",c)}),e.jsx("span",{className:"text-xs px-2 py-1 bg-secondary rounded",children:x.replace(/_/g," ")})]})};return p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading transaction logs..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Transactional Logs"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor business transactions, authentication, and file processing events"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(w,{variant:"outline",onClick:()=>d(),children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(w,{variant:"outline",onClick:g,children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),e.jsx(D,{placeholder:"Search logs by message, username, or correlation ID...",value:s,onChange:x=>t(x.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full lg:w-48",children:e.jsxs(V,{value:r,onValueChange:n,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"All Categories"})}),e.jsxs($,{children:[e.jsx(v,{value:"ALL",children:"All Categories"}),e.jsx(v,{value:"AUTHENTICATION",children:"Authentication"}),e.jsx(v,{value:"FILE_PROCESSING",children:"File Processing"}),e.jsx(v,{value:"ADAPTER_EXECUTION",children:"Adapter Execution"}),e.jsx(v,{value:"FLOW_EXECUTION",children:"Flow Execution"}),e.jsx(v,{value:"SYSTEM_OPERATION",children:"System Operation"}),e.jsx(v,{value:"USER_MANAGEMENT",children:"User Management"}),e.jsx(v,{value:"CONFIGURATION_CHANGE",children:"Configuration Change"}),e.jsx(v,{value:"SECURITY",children:"Security"})]})]})}),e.jsx("div",{className:"w-full lg:w-36",children:e.jsxs(V,{value:a,onValueChange:i,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"All Levels"})}),e.jsxs($,{children:[e.jsx(v,{value:"ALL",children:"All Levels"}),e.jsx(v,{value:"ERROR",children:"Error"}),e.jsx(v,{value:"WARN",children:"Warning"}),e.jsx(v,{value:"INFO",children:"Info"}),e.jsx(v,{value:"DEBUG",children:"Debug"}),e.jsx(v,{value:"TRACE",children:"Trace"})]})]})}),e.jsx("div",{className:"w-full lg:w-24",children:e.jsxs(V,{value:o.toString(),onValueChange:x=>h(parseInt(x)),children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"25",children:"25"}),e.jsx(v,{value:"50",children:"50"}),e.jsx(v,{value:"100",children:"100"}),e.jsx(v,{value:"200",children:"200"})]})]})})]})})}),e.jsx("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:e.jsxs("span",{children:["Showing ",C.length," transaction logs",r!=="ALL"&&` in ${r} category`,a!=="ALL"&&` at ${a} level`]})}),C.length>0?e.jsx("div",{className:"space-y-2",children:C.map(x=>e.jsx(I,{className:"app-card border hover:border-primary/30 transition-all duration-200",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2 min-w-0",children:[e.jsx("div",{className:"text-xs font-mono text-muted-foreground",children:u(x.timestamp)}),S(x.level)]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[E(x.category),e.jsx("span",{className:"text-xs font-mono text-muted-foreground truncate",children:x.component}),e.jsx("span",{className:"text-xs px-2 py-1 bg-muted rounded",children:x.source})]}),(x.details||x.correlationId||x.adapterId||x.executionId||x.fileName)&&e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>j(l===x.id?null:x.id),children:l===x.id?"Less":"More"})]}),e.jsx("div",{className:"text-sm text-foreground",children:x.message}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[x.username&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:["User: ",x.username]}),x.correlationId&&e.jsxs("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded",children:["ID: ",x.correlationId]}),x.fileName&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:["File: ",x.fileName]}),x.ipAddress&&e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded",children:["IP: ",x.ipAddress]}),x.executionTimeMs&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded",children:[x.executionTimeMs,"ms"]})]}),l===x.id&&e.jsxs("div",{className:"mt-4 space-y-3 border-t border-border pt-3",children:[x.details&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Additional Details:"}),e.jsx("pre",{className:"mt-1 font-mono text-xs bg-secondary/50 p-3 rounded overflow-x-auto max-h-48",children:x.details})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[x.sessionId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Session ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:x.sessionId})]}),x.adapterId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Adapter ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:x.adapterId})]}),x.executionId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Execution ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:x.executionId})]}),x.userAgent&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"User Agent:"}),e.jsx("span",{className:"ml-2 text-foreground",children:x.userAgent})]})]})]})]})]})})},x.id))}):e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Transaction Logs Found"}),e.jsx("p",{className:"text-muted-foreground",children:"No transaction logs match your current filter criteria"})]})})})]})},Ti=[{id:"system",label:"System Logs",icon:ke,description:"Application logs, errors, and system events",adminOnly:!0},{id:"transactional",label:"Transactional Logs",icon:Je,description:"Transaction audit trails and business process logs"}],ki=()=>{var o;const{isAdmin:s}=Zs(),t=Ti.filter(h=>!h.adminOnly||s()),r=s()?"system":"transactional",[n,a]=y.useState(r),i=()=>{switch(n){case"system":return e.jsx(Rt,{});case"transactional":return e.jsx(Ei,{});default:return e.jsx(Rt,{})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(pe,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Logs"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor system and transactional logs for application insights and debugging"})]}),t.length>1&&e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex space-x-4 border-b border-border",children:t.map(h=>{const l=h.icon,j=n===h.id;return e.jsxs("button",{onClick:()=>a(h.id),className:U("flex items-center space-x-2 px-4 py-3 text-sm font-medium transition-colors border-b-2 -mb-px",j?"text-primary border-primary bg-primary/5":"text-muted-foreground border-transparent hover:text-foreground hover:border-border"),children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{children:h.label})]},h.id)})}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:(o=t.find(h=>h.id===n))==null?void 0:o.description})})]}),e.jsx("div",{className:"transition-all duration-300",children:i()})]})},Ai=()=>{const{success:s,error:t}=He(),r=Pe(),[n,a]=y.useState(!1),[i,o]=y.useState(!1),{data:h,isLoading:l}=se({queryKey:["pgp-keys"],queryFn:hs.getAllKeys}),j=(h==null?void 0:h.data)||[],m=me({mutationFn:hs.generateKey,onSuccess:()=>{s("PGP Key Generated","PGP key pair generated successfully"),r.invalidateQueries({queryKey:["pgp-keys"]}),a(!1)},onError:c=>{var F,f;t("Generation Failed",((f=(F=c.response)==null?void 0:F.data)==null?void 0:f.message)||"Failed to generate PGP key")}}),p=me({mutationFn:hs.importKey,onSuccess:()=>{s("PGP Key Imported","PGP key imported successfully"),r.invalidateQueries({queryKey:["pgp-keys"]}),o(!1)},onError:c=>{var F,f;t("Import Failed",((f=(F=c.response)==null?void 0:F.data)==null?void 0:f.message)||"Failed to import PGP key")}}),d=me({mutationFn:hs.deleteKey,onSuccess:()=>{s("PGP Key Deleted","PGP key deleted successfully"),r.invalidateQueries({queryKey:["pgp-keys"]})},onError:c=>{var F,f;t("Deletion Failed",((f=(F=c.response)==null?void 0:F.data)==null?void 0:f.message)||"Failed to delete PGP key")}}),C=me({mutationFn:({id:c,reason:F})=>hs.revokeKey(c,F),onSuccess:()=>{s("PGP Key Revoked","PGP key revoked successfully"),r.invalidateQueries({queryKey:["pgp-keys"]})},onError:c=>{var F,f;t("Revocation Failed",((f=(F=c.response)==null?void 0:F.data)==null?void 0:f.message)||"Failed to revoke PGP key")}}),g=async(c,F)=>{try{const f=await hs.exportPublicKey(c),b=new Blob([f],{type:"text/plain"}),T=window.URL.createObjectURL(b),M=document.createElement("a");M.href=T,M.download=`${F}-public.asc`,document.body.appendChild(M),M.click(),document.body.removeChild(M),window.URL.revokeObjectURL(T),s("Export Complete","Public key exported successfully")}catch{t("Export Failed","Failed to export public key")}},u=async(c,F)=>{try{const f=await hs.exportPrivateKey(c),b=new Blob([f],{type:"text/plain"}),T=window.URL.createObjectURL(b),M=document.createElement("a");M.href=T,M.download=`${F}-private.asc`,document.body.appendChild(M),M.click(),document.body.removeChild(M),window.URL.revokeObjectURL(T),s("Export Complete","Private key exported successfully")}catch{t("Export Failed","Failed to export private key")}},S=c=>c.revokedAt?e.jsx(ge,{className:"h-4 w-4 text-red-500"}):c.expiresAt&&new Date(c.expiresAt)<new Date?e.jsx(Ee,{className:"h-4 w-4 text-yellow-500"}):e.jsx(ne,{className:"h-4 w-4 text-green-500"}),E=c=>c.revokedAt?"Revoked":c.expiresAt&&new Date(c.expiresAt)<new Date?"Expired":"Valid",x=c=>{switch(c){case"RSA":return e.jsx(Qe,{className:"h-4 w-4 text-blue-500"});case"ECC":return e.jsx(Ze,{className:"h-4 w-4 text-green-500"});case"DSA":return e.jsx(fs,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(Qe,{className:"h-4 w-4 text-gray-500"})}},A=c=>!c||c.length!==40?c:c.replace(/(.{4})/g,"$1 ").trim();return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading PGP keys..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"PGP Key Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage PGP encryption keys for secure file transfers"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(w,{variant:"outline",onClick:()=>o(!0),children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Import Key"]}),e.jsxs(w,{className:"btn-primary",onClick:()=>a(!0),children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Generate Key"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Qe,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Keys"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:j.length})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valid Keys"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:j.filter(c=>!c.revokedAt&&(!c.expiresAt||new Date(c.expiresAt)>new Date)).length})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ee,{className:"h-8 w-8 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expired"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:j.filter(c=>!c.revokedAt&&c.expiresAt&&new Date(c.expiresAt)<new Date).length})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ge,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Revoked"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:j.filter(c=>c.revokedAt).length})]})]})})})]}),n&&e.jsx(Fi,{onSubmit:c=>m.mutate(c),onCancel:()=>a(!1),isLoading:m.isPending}),i&&e.jsx(Pi,{onSubmit:c=>p.mutate(c),onCancel:()=>o(!1),isLoading:p.isPending}),j.length>0?e.jsx("div",{className:"space-y-4",children:j.map(c=>e.jsxs(I,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[x(c.keyType),e.jsxs("div",{children:[e.jsx(J,{className:"text-lg text-foreground",children:c.keyName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.userId})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[S(c),e.jsx("span",{className:U("text-sm px-2 py-1 rounded",c.revokedAt&&"bg-red-100 text-red-700",!c.revokedAt&&c.expiresAt&&new Date(c.expiresAt)<new Date&&"bg-yellow-100 text-yellow-700",!c.revokedAt&&(!c.expiresAt||new Date(c.expiresAt)>new Date)&&"bg-green-100 text-green-700"),children:E(c)})]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsxs("span",{className:"ml-2 text-foreground",children:[c.keyType," ",c.keySize]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Algorithm:"}),e.jsx("span",{className:"ml-2 text-foreground",children:c.algorithm})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Key ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:c.keyId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Exports:"}),e.jsx("span",{className:"ml-2 text-foreground",children:c.exportedCount})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Usage:"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[c.canEncrypt&&e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:"Encrypt"}),c.canSign&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:"Sign"}),c.canCertify&&e.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded",children:"Certify"}),c.canAuthenticate&&e.jsx("span",{className:"text-xs px-2 py-1 bg-orange-100 text-orange-700 rounded",children:"Authenticate"})]})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-sm text-muted-foreground",children:"Fingerprint:"}),e.jsx("div",{className:"mt-1 font-mono text-sm bg-secondary/50 px-3 py-2 rounded",children:A(c.fingerprint)})]}),c.description&&e.jsxs("div",{children:[e.jsx(N,{className:"text-sm text-muted-foreground",children:"Description:"}),e.jsx("p",{className:"mt-1 text-sm text-foreground",children:c.description})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(c.createdAt).toLocaleDateString()})]}),c.expiresAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Expires:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(c.expiresAt).toLocaleDateString()})]}),c.lastUsedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Used:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(c.lastUsedAt).toLocaleDateString()})]})]}),c.importedFrom&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Imported from:"}),e.jsx("span",{className:"ml-2 text-foreground",children:c.importedFrom})]}),c.revokedAt&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-700 mb-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Key Revoked"})]}),e.jsxs("div",{className:"text-sm text-red-600",children:[e.jsxs("p",{children:["Revoked on: ",new Date(c.revokedAt).toLocaleString()]}),c.revocationReason&&e.jsxs("p",{children:["Reason: ",c.revocationReason]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4 border-t border-border",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>g(c.id,c.keyName),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Export Public"]}),c.privateKey&&e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>u(c.id,c.keyName),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Export Private"]}),!c.revokedAt&&e.jsxs(w,{variant:"outline",size:"sm",className:"text-yellow-600",onClick:()=>{const F=prompt("Enter revocation reason:");F&&C.mutate({id:c.id,reason:F})},children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Revoke"]}),e.jsxs(w,{variant:"outline",size:"sm",className:"text-red-600",onClick:()=>{window.confirm("Are you sure you want to delete this PGP key?")&&d.mutate(c.id)},children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},c.id))}):e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fs,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No PGP Keys Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Generate or import your first PGP key to get started"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs(w,{variant:"outline",onClick:()=>o(!0),children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Import Key"]}),e.jsxs(w,{className:"btn-primary",onClick:()=>a(!0),children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Generate Key"]})]})]})})})]})},Fi=({onSubmit:s,onCancel:t,isLoading:r})=>{const[n,a]=y.useState({keyName:"",userId:"",passphrase:"",keyType:"RSA",keySize:2048,expiresAt:"",description:""}),[i,o]=y.useState(!1),h=l=>{l.preventDefault(),s(n)};return e.jsxs(I,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(J,{className:"text-foreground flex items-center space-x-2",children:[e.jsx(Qe,{className:"h-5 w-5"}),e.jsx("span",{children:"Generate PGP Key Pair"})]})}),e.jsx(L,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"keyName",children:"Key Name"}),e.jsx(D,{id:"keyName",value:n.keyName,onChange:l=>a(j=>({...j,keyName:l.target.value})),placeholder:"e.g., Production Encryption Key",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"userId",children:"User ID (Email)"}),e.jsx(D,{id:"userId",type:"email",value:n.userId,onChange:l=>a(j=>({...j,userId:l.target.value})),placeholder:"e.g., admin@company.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"keyType",children:"Key Type"}),e.jsxs(V,{value:n.keyType,onValueChange:l=>a(j=>({...j,keyType:l})),children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"RSA",children:"RSA (Recommended)"}),e.jsx(v,{value:"ECC",disabled:!0,children:"ECC (Coming Soon)"}),e.jsx(v,{value:"DSA",disabled:!0,children:"DSA (Coming Soon)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"keySize",children:"Key Size (bits)"}),e.jsxs(V,{value:n.keySize.toString(),onValueChange:l=>a(j=>({...j,keySize:parseInt(l)})),children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"2048",children:"2048 (Standard)"}),e.jsx(v,{value:"3072",children:"3072 (High Security)"}),e.jsx(v,{value:"4096",children:"4096 (Maximum Security)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"passphrase",children:"Passphrase"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{id:"passphrase",type:i?"text":"password",value:n.passphrase,onChange:l=>a(j=>({...j,passphrase:l.target.value})),placeholder:"Enter secure passphrase",className:"pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-3 text-muted-foreground",children:i?e.jsx(Ms,{className:"h-4 w-4"}):e.jsx(Ae,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"expiresAt",children:"Expiry Date (Optional)"}),e.jsx(D,{id:"expiresAt",type:"datetime-local",value:n.expiresAt,onChange:l=>a(j=>({...j,expiresAt:l.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(D,{id:"description",value:n.description,onChange:l=>a(j=>({...j,description:l.target.value})),placeholder:"e.g., Used for encrypting payment files"})]}),e.jsxs("div",{className:"flex items-center space-x-4 pt-4",children:[e.jsx(w,{type:"submit",className:"btn-primary",disabled:r,children:r?"Generating...":"Generate Key Pair"}),e.jsx(w,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},Pi=({onSubmit:s,onCancel:t,isLoading:r})=>{const[n,a]=y.useState({keyName:"",armoredKey:"",description:""}),i=h=>{h.preventDefault(),s(n)},o=h=>{var j;const l=(j=h.target.files)==null?void 0:j[0];if(l){const m=new FileReader;m.onload=p=>{var C;const d=(C=p.target)==null?void 0:C.result;a(g=>({...g,armoredKey:d}))},m.readAsText(l)}};return e.jsxs(I,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(J,{className:"text-foreground flex items-center space-x-2",children:[e.jsx(es,{className:"h-5 w-5"}),e.jsx("span",{children:"Import PGP Key"})]})}),e.jsx(L,{children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"importKeyName",children:"Key Name"}),e.jsx(D,{id:"importKeyName",value:n.keyName,onChange:h=>a(l=>({...l,keyName:h.target.value})),placeholder:"e.g., Customer Public Key",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"keyFile",children:"Import from File (Optional)"}),e.jsx(D,{id:"keyFile",type:"file",accept:".asc,.gpg,.pgp",onChange:o})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"armoredKey",children:"ASCII Armored Key"}),e.jsx("textarea",{id:"armoredKey",value:n.armoredKey,onChange:h=>a(l=>({...l,armoredKey:h.target.value})),placeholder:"Paste ASCII armored PGP key here...",className:"w-full h-32 px-3 py-2 border border-border rounded-md bg-background text-foreground font-mono text-sm",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"importDescription",children:"Description (Optional)"}),e.jsx(D,{id:"importDescription",value:n.description,onChange:h=>a(l=>({...l,description:h.target.value})),placeholder:"e.g., Customer XYZ public key for file encryption"})]}),e.jsxs("div",{className:"flex items-center space-x-4 pt-4",children:[e.jsx(w,{type:"submit",className:"btn-primary",disabled:r,children:r?"Importing...":"Import Key"}),e.jsx(w,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},Di={success:{icon:ne,className:"text-success"},error:{icon:ge,className:"text-destructive"},warning:{icon:Ee,className:"text-warning"},info:{icon:qe,className:"text-info"}},Ii={success:"Success",error:"Error",warning:"Warning",info:"Information"},et=({open:s,onOpenChange:t,type:r,title:n,message:a})=>{const{icon:i,className:o}=Di[r],h=n||Ii[r];return e.jsx(ms,{open:s,onOpenChange:t,children:e.jsxs(ss,{className:"max-w-md",children:[e.jsx(ts,{className:"pb-0",children:e.jsxs(as,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(i,{className:`h-5 w-5 ${o}`}),e.jsx("span",{children:h})]})}),e.jsx("div",{className:"py-4",children:e.jsx("p",{className:"text-foreground leading-relaxed whitespace-pre-wrap",children:a})}),e.jsx(Xs,{children:e.jsx(w,{onClick:()=>t(!1),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-2 font-medium",children:"OK"})})]})})},Mt=[{value:"LOG_FILES",label:"Log Files",description:"Manages log file archiving and deletion",icon:pe},{value:"SYSTEM_LOGS",label:"System Logs",description:"Manages system_logs table cleanup",icon:Je},{value:"TRANSACTION_LOGS",label:"Transaction Logs",description:"Manages transaction_logs table cleanup",icon:Je},{value:"SCHEDULE",label:"Schedule",description:"Defines when retention cleanup should run",icon:be}];function Li(){const[s,t]=y.useState([]),[r,n]=y.useState(null),[a,i]=y.useState(!0),[o,h]=y.useState(!1),[l,j]=y.useState(null),[m,p]=y.useState({dataType:"",name:"",description:"",retentionDays:30,archiveDays:90,scheduleCron:"0 0 2 * * ?",executorClass:"",enabled:!0}),[d,C]=y.useState([]),[g,u]=y.useState([]),[S,E]=y.useState({open:!1,type:"info",message:""}),x=(P,ae,xe)=>{E({open:!0,type:P,title:xe,message:ae})},A=({title:P,description:ae,variant:xe})=>{x(xe==="destructive"?"error":"success",ae,P)};y.useEffect(()=>{c(),F(),f(),b()},[]);const c=async()=>{var P,ae,xe;try{const _=((xe=(ae=(P=(await k.get("/api/admin/data-retention")).data)==null?void 0:P.data)==null?void 0:ae.statistics)==null?void 0:xe.configurations)||[];t(_)}catch(je){console.error("Error loading configurations:",je),A({variant:"destructive",title:"Error",description:"Failed to load retention configurations"})}finally{i(!1)}},F=async()=>{try{const P=await k.get("/api/admin/data-retention/status");n(P.data)}catch(P){console.error("Error loading status:",P)}},f=async()=>{try{const P=await k.get("/api/admin/data-retention/defaults");C(P.data)}catch(P){console.error("Error loading default configurations:",P)}},b=async()=>{var P,ae,xe;try{const _=((xe=(ae=(P=(await k.get("/api/admin/data-retention/available-jobs")).data)==null?void 0:P.data)==null?void 0:ae.statistics)==null?void 0:xe.availableJobs)||[];u(_)}catch(je){console.error("Error loading available jobs:",je)}},T=()=>{const P=d.find(ae=>ae.dataType==="SCHEDULE");p({dataType:"",name:"",description:"",retentionDays:(P==null?void 0:P.retentionDays)||30,archiveDays:(P==null?void 0:P.archiveDays)||90,scheduleCron:(P==null?void 0:P.scheduleCron)||"0 0 2 * * ?",executorClass:"",enabled:!0})},M=async()=>{try{await k.post("/api/admin/data-retention",m),await c(),h(!1),T(),A({title:"Success",description:"Retention configuration created successfully"})}catch{A({variant:"destructive",title:"Error",description:"Failed to create configuration"})}},O=async()=>{if(l)try{await k.put(`/api/admin/data-retention/${l.id}`,l),await c(),j(null),A({title:"Success",description:"Configuration updated successfully"})}catch{A({variant:"destructive",title:"Error",description:"Failed to update configuration"})}},q=async P=>{try{await k.delete(`/api/admin/data-retention/${P}`),await c(),A({title:"Success",description:"Configuration deleted successfully"})}catch{A({variant:"destructive",title:"Error",description:"Failed to delete configuration"})}},ee=async P=>{try{await k.patch(`/api/admin/data-retention/${P}/toggle`),await c(),A({title:"Success",description:"Configuration toggled successfully"})}catch{A({variant:"destructive",title:"Error",description:"Failed to toggle configuration"})}},te=async()=>{try{await k.post("/api/admin/data-retention/execute"),A({title:"Success",description:"Data retention execution started"}),setTimeout(F,2e3)}catch{A({variant:"destructive",title:"Error",description:"Failed to execute retention"})}},_e=P=>typeof P!="string"?e.jsx(be,{className:"h-4 w-4 text-gray-500"}):P.includes("Completed")?e.jsx(ne,{className:"h-4 w-4 text-green-500"}):P.includes("Failed")?e.jsx(ge,{className:"h-4 w-4 text-red-500"}):P.includes("Progress")?e.jsx(Ee,{className:"h-4 w-4 text-yellow-500"}):e.jsx(be,{className:"h-4 w-4 text-gray-500"}),Ke=P=>P?new Date(P).toLocaleString():"Never";return a?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Data Retention Management"}),e.jsx("p",{className:"text-gray-600",children:"Configure automated cleanup policies for log files and database tables"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{onClick:te,variant:"outline",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Execute Now"]}),e.jsxs(ms,{open:o,onOpenChange:h,children:[e.jsx(ei,{asChild:!0,children:e.jsxs(w,{children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Add Configuration"]})}),e.jsxs(ss,{className:"max-w-md",children:[e.jsxs(ts,{children:[e.jsx(as,{children:"Create Retention Configuration"}),e.jsx(Ls,{children:"Add a new data retention policy"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Data Type"}),e.jsxs(V,{value:m.dataType,onValueChange:P=>p({...m,dataType:P}),children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select data type"})}),e.jsx($,{children:Mt.map(P=>e.jsx(v,{value:P.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P.icon,{className:"h-4 w-4"}),e.jsx("span",{children:P.label})]})},P.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Name"}),e.jsx(D,{value:m.name,onChange:P=>p({...m,name:P.target.value}),placeholder:"Configuration name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Description"}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:m.description,onChange:P=>p({...m,description:P.target.value}),placeholder:"Description",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Executor Job"}),e.jsxs(V,{value:m.executorClass,onValueChange:P=>p({...m,executorClass:P}),children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select which job will execute this policy"})}),e.jsx($,{children:Array.isArray(g)&&g.map(P=>e.jsx(v,{value:P.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:P.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:P.description})]})},P.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Retention Days"}),e.jsx(D,{type:"number",value:m.retentionDays,onChange:P=>p({...m,retentionDays:parseInt(P.target.value)}),min:"1"})]}),m.dataType==="LOG_FILES"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Archive Days"}),e.jsx(D,{type:"number",value:m.archiveDays,onChange:P=>p({...m,archiveDays:parseInt(P.target.value)}),min:"1"})]}),m.dataType==="SCHEDULE"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Cron Expression"}),e.jsx(D,{value:m.scheduleCron,onChange:P=>p({...m,scheduleCron:P.target.value}),placeholder:"0 0 2 * * ?"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{checked:m.enabled,onCheckedChange:P=>p({...m,enabled:P})}),e.jsx(N,{children:"Enabled"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(w,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(w,{onClick:M,children:"Create"})]})]})]})]})]}),r&&e.jsxs(I,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[_e((r==null?void 0:r.status)||"Unknown"),"Execution Status"]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Last Execution"}),e.jsx("div",{className:"font-medium",children:Ke(r.lastExecution)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("div",{className:"font-medium",children:r.status})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Files Processed"}),e.jsx("div",{className:"font-medium",children:r.filesProcessed})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"DB Records Deleted"}),e.jsx("div",{className:"font-medium",children:r.databaseRecordsDeleted})]})]}),r.nextExecution&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Next Scheduled Execution"}),e.jsx("div",{className:"font-medium",children:Ke(r.nextExecution)})]})]})]}),e.jsx("div",{className:"grid gap-4",children:Array.isArray(s)&&s.map(P=>{const ae=Mt.find(je=>je.value===P.dataType),xe=(ae==null?void 0:ae.icon)||pe;return e.jsx(I,{className:P.enabled?"":"opacity-50",children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(xe,{className:"h-5 w-5 mt-1 text-gray-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:P.name}),e.jsx(ue,{variant:P.enabled?"default":"secondary",children:P.enabled?"Enabled":"Disabled"}),e.jsx(ue,{variant:"outline",children:ae==null?void 0:ae.label})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:P.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Retention:"})," ",P.retentionDays," days"]}),P.archiveDays&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Archive:"})," ",P.archiveDays," days"]}),P.scheduleCron&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Schedule:"})," ",P.scheduleCron]})]}),P.lastExecution&&e.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Last run: ",Ke(P.lastExecution)," - ",P.lastExecutionStatus,P.lastItemsProcessed!==void 0&&e.jsxs("span",{children:[" (",P.lastItemsProcessed," items)"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{checked:P.enabled,onCheckedChange:()=>ee(P.id)}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>j(P),children:e.jsx(Os,{className:"h-4 w-4"})}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this retention configuration? This action cannot be undone.")&&q(P.id)},children:e.jsx(rs,{className:"h-4 w-4"})})]})]})})},P.id)})}),(!Array.isArray(s)||s.length===0)&&e.jsx(I,{children:e.jsxs(L,{className:"text-center py-8",children:[e.jsx(pe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Retention Configurations"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first data retention policy"}),e.jsxs(w,{onClick:()=>h(!0),children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Configuration"]})]})}),l&&e.jsx(ms,{open:!!l,onOpenChange:()=>j(null),children:e.jsxs(ss,{className:"max-w-md",children:[e.jsxs(ts,{children:[e.jsx(as,{children:"Edit Configuration"}),e.jsx(Ls,{children:"Update the retention configuration settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Name"}),e.jsx(D,{value:l.name,onChange:P=>j({...l,name:P.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Description"}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:l.description,onChange:P=>j({...l,description:P.target.value}),rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Executor Job"}),e.jsxs(V,{value:l.executorClass,onValueChange:P=>j({...l,executorClass:P}),children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select which job will execute this policy"})}),e.jsx($,{children:Array.isArray(g)&&g.map(P=>e.jsx(v,{value:P.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:P.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:P.description})]})},P.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Retention Days"}),e.jsx(D,{type:"number",value:l.retentionDays,onChange:P=>j({...l,retentionDays:parseInt(P.target.value)}),min:"1"})]}),l.dataType==="LOG_FILES"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Archive Days"}),e.jsx(D,{type:"number",value:l.archiveDays||0,onChange:P=>j({...l,archiveDays:parseInt(P.target.value)}),min:"1"})]}),l.dataType==="SCHEDULE"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Cron Expression"}),e.jsx(D,{value:l.scheduleCron||"",onChange:P=>j({...l,scheduleCron:P.target.value}),placeholder:"0 0 2 * * ?"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{checked:l.enabled,onCheckedChange:P=>j({...l,enabled:P})}),e.jsx(N,{children:"Enabled"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(w,{variant:"outline",onClick:()=>j(null),children:"Cancel"}),e.jsx(w,{onClick:O,children:"Save Changes"})]})]})}),e.jsx(et,{open:S.open,onOpenChange:P=>E(ae=>({...ae,open:P})),type:S.type,title:S.title,message:S.message})]})}const Ri=[{id:"users",label:"Users",icon:zs,description:"Manage user accounts, roles, and permissions",adminOnly:!0},{id:"ssh-keys",label:"SSH Keys",icon:Qe,description:"Generate and manage SSH key pairs for SFTP adapters",adminOnly:!0},{id:"pgp-keys",label:"PGP Keys",icon:fs,description:"Manage PGP encryption keys for secure file transfers",adminOnly:!0},{id:"system-config",label:"System Configuration",icon:de,description:"Configure system settings, logging, and performance parameters",adminOnly:!0},{id:"logs",label:"Logs",icon:pe,description:"View and manage system and transactional logs"},{id:"data-retention",label:"Data Retention",icon:be,description:"Configure automated cleanup policies for logs and database tables",adminOnly:!0}],Mi=()=>{const{isAdmin:s}=Zs(),{user:t}=ns(),[r,n]=tr(),a=Ri.filter(m=>!m.adminOnly||s()),i=s()?"users":"logs",[o,h]=y.useState(i);y.useEffect(()=>{const m=r.get("tab");m&&a.some(p=>p.id===m)?h(m):s()||(h("logs"),n({tab:"logs"}))},[r,a,s]);const l=m=>{h(m),n({tab:m})};if(!t)return e.jsx("div",{className:"content-spacing",children:e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ze,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:"Authentication required to access this section"})]})})})});const j=()=>{switch(o){case"users":return e.jsx(It,{});case"ssh-keys":return e.jsx(mi,{});case"pgp-keys":return e.jsx(Ai,{});case"system-config":return e.jsx(ji,{});case"logs":return e.jsx(ki,{});case"data-retention":return e.jsx(Li,{});default:return e.jsx(It,{})}};return e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Je,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:s()?"System Administration":"System Logs"})]}),e.jsx("p",{className:"text-muted-foreground",children:s()?"Centralized administration for users, security, configuration, and monitoring":"Monitor system and transactional logs for application insights and debugging"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:`grid gap-4 ${a.length===1?"grid-cols-1 max-w-md":a.length<=3?"grid-cols-1 md:grid-cols-3":"grid-cols-2 md:grid-cols-6"}`,children:a.map(m=>{const p=m.icon,d=o===m.id;return e.jsxs("button",{onClick:()=>l(m.id),className:U("text-left p-4 rounded-lg border transition-all duration-300 hover:scale-[1.02]","flex flex-col space-y-2 min-h-[120px]",d?"bg-primary/10 border-primary text-primary shadow-elegant":"bg-card border-border hover:bg-accent/50 hover:border-primary/30"),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{className:U("h-5 w-5 transition-colors",d?"text-primary":"text-muted-foreground")}),e.jsx("span",{className:U("font-medium transition-colors",d?"text-primary":"text-foreground"),children:m.label})]}),e.jsx("p",{className:U("text-xs leading-relaxed transition-colors",d?"text-primary/80":"text-muted-foreground"),children:m.description})]},m.id)})})}),e.jsx("div",{className:"transition-all duration-300",children:j()})]})},Ui=en,Ta=y.forwardRef(({className:s,...t},r)=>e.jsx(ua,{ref:r,className:U("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));Ta.displayName=ua.displayName;const Cs=y.forwardRef(({className:s,...t},r)=>e.jsx(ha,{ref:r,className:U("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));Cs.displayName=ha.displayName;const Es=y.forwardRef(({className:s,...t},r)=>e.jsx(pa,{ref:r,className:U("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Es.displayName=pa.displayName;const As=Ie.forwardRef(({className:s,orientation:t="horizontal",decorative:r=!0,...n},a)=>e.jsx(ga,{ref:a,decorative:r,orientation:t,className:U("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n}));As.displayName=ga.displayName;const Oi=()=>{const[s,t]=y.useState("profile"),[r,n]=y.useState(!1),[a,i]=y.useState(null),[o,h]=y.useState(!0),[l,j]=y.useState(null),[m,p]=y.useState({theme:"light",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY",timeFormat:"12h",emailNotifications:!0,soundAlerts:!0,compactMode:!1}),[d,C]=y.useState({fullName:"",email:""}),[g,u]=y.useState({currentPassword:"",newPassword:"",confirmPassword:""});y.useEffect(()=>{S(),E()},[]);const S=async()=>{try{const b=await js.getCurrentUser();b!=null&&b.user&&(i(b.user),C({fullName:b.user.fullName||"",email:b.user.email||""}))}catch{A("error","Failed to load user profile")}finally{h(!1)}},E=()=>{const b=localStorage.getItem("h2h_user_preferences");if(b)try{const T=JSON.parse(b);p(M=>({...M,...T})),x(T.theme||"light")}catch{console.warn("Failed to parse saved preferences")}else x("light")},x=b=>{const T=document.documentElement;if(b==="system"){const M=window.matchMedia("(prefers-color-scheme: dark)").matches;T.classList.toggle("dark",M)}else b==="dark"?T.classList.add("dark"):T.classList.remove("dark")},A=(b,T)=>{j({type:b,message:T}),setTimeout(()=>j(null),5e3)},c=async()=>{var b,T;if(a!=null&&a.id)try{n(!0),await js.updateUser(a.id,{fullName:d.fullName,email:d.email}),A("success","Profile updated successfully"),await S()}catch(M){const O=((T=(b=M==null?void 0:M.response)==null?void 0:b.data)==null?void 0:T.error)||"Failed to update profile";A("error",O)}finally{n(!1)}},F=async()=>{try{n(!0),localStorage.setItem("h2h_user_preferences",JSON.stringify(m)),x(m.theme),A("success","Preferences saved successfully")}catch{A("error","Failed to save preferences")}finally{n(!1)}},f=async()=>{var b,T;if(a!=null&&a.id){if(g.newPassword!==g.confirmPassword){A("error","New passwords do not match");return}if(g.newPassword.length<8){A("error","Password must be at least 8 characters long");return}try{n(!0),await js.changePassword(a.id,g.currentPassword,g.newPassword),A("success","Password changed successfully"),u({currentPassword:"",newPassword:"",confirmPassword:""})}catch(M){const O=((T=(b=M==null?void 0:M.response)==null?void 0:b.data)==null?void 0:T.error)||"Failed to change password";A("error",O)}finally{n(!1)}}};return o?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ce,{className:"h-8 w-8 animate-spin"})})}):e.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(de,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"User Settings"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your profile and personal preferences"})]}),l&&e.jsxs(Ts,{className:`mb-6 ${l.type==="error"?"border-red-500 bg-red-50":"border-green-500 bg-green-50"}`,children:[l.type==="success"?e.jsx(Js,{className:"h-4 w-4 text-green-600"}):e.jsx(Ne,{className:"h-4 w-4 text-red-600"}),e.jsx(ks,{className:l.type==="error"?"text-red-700":"text-green-700",children:l.message})]}),e.jsxs(Ui,{value:s,onValueChange:t,className:"space-y-6",children:[e.jsxs(Ta,{className:"grid grid-cols-4 w-full max-w-2xl",children:[e.jsxs(Cs,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Profile"]}),e.jsxs(Cs,{value:"preferences",className:"flex items-center gap-2",children:[e.jsx(wr,{className:"h-4 w-4"}),"Preferences"]}),e.jsxs(Cs,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx($t,{className:"h-4 w-4"}),"Notifications"]}),e.jsxs(Cs,{value:"security",className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Security"]})]}),e.jsx(Es,{value:"profile",className:"space-y-6",children:e.jsxs(I,{children:[e.jsxs(Y,{children:[e.jsx(J,{children:"Profile Information"}),e.jsx(ze,{children:"Update your personal information and contact details"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs(Ts,{children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsxs(ks,{children:["Username: ",e.jsx("strong",{children:a==null?void 0:a.username})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"fullName",children:"Full Name"}),e.jsx(D,{id:"fullName",value:d.fullName,onChange:b=>C({...d,fullName:b.target.value}),placeholder:"Enter full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"email",children:"Email"}),e.jsx(D,{id:"email",type:"email",value:d.email,onChange:b=>C({...d,email:b.target.value}),placeholder:"Enter email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"role",children:"Role"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{variant:(a==null?void 0:a.role)==="ADMINISTRATOR"?"default":"secondary",children:a==null?void 0:a.role}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"(role cannot be changed)"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(w,{onClick:c,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Save Profile"]})})})]})]})}),e.jsx(Es,{value:"preferences",className:"space-y-6",children:e.jsxs(I,{children:[e.jsxs(Y,{children:[e.jsx(J,{children:"Display Preferences"}),e.jsx(ze,{children:"Customize how the application looks and behaves for you"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"theme",children:"Theme"}),e.jsxs(V,{value:m.theme,onValueChange:b=>{p({...m,theme:b}),x(b)},children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"light",children:"Light"}),e.jsx(v,{value:"dark",children:"Dark"}),e.jsx(v,{value:"system",children:"System"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"language",children:"Language"}),e.jsxs(V,{value:m.language,onValueChange:b=>p({...m,language:b}),children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"en",children:"English"}),e.jsx(v,{value:"es",children:"Spanish"}),e.jsx(v,{value:"fr",children:"French"}),e.jsx(v,{value:"de",children:"German"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"dateFormat",children:"Date Format"}),e.jsxs(V,{value:m.dateFormat,onValueChange:b=>p({...m,dateFormat:b}),children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx(v,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx(v,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"timeFormat",children:"Time Format"}),e.jsxs(V,{value:m.timeFormat,onValueChange:b=>p({...m,timeFormat:b}),children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"12h",children:"12 Hour"}),e.jsx(v,{value:"24h",children:"24 Hour"})]})]})]})]}),e.jsx(As,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Interface Options"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(N,{htmlFor:"compactMode",children:"Compact View"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use a more condensed layout"})]}),e.jsx(Fe,{id:"compactMode",checked:m.compactMode,onCheckedChange:b=>p({...m,compactMode:b})})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(w,{onClick:F,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})})]})]})}),e.jsx(Es,{value:"notifications",className:"space-y-6",children:e.jsxs(I,{children:[e.jsxs(Y,{children:[e.jsx(J,{children:"Notification Preferences"}),e.jsx(ze,{children:"Choose how you want to be notified about important events"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs(Ts,{children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx(ks,{children:"These settings control personal notifications for file transfer operations and system events."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(N,{htmlFor:"emailNotifications",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),e.jsx(Fe,{id:"emailNotifications",checked:m.emailNotifications,onCheckedChange:b=>p({...m,emailNotifications:b})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(N,{htmlFor:"soundAlerts",children:"Sound Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Play sounds for important events"})]}),e.jsx(Fe,{id:"soundAlerts",checked:m.soundAlerts,onCheckedChange:b=>p({...m,soundAlerts:b})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(w,{onClick:F,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})})]})]})}),e.jsxs(Es,{value:"security",className:"space-y-6",children:[e.jsxs(I,{children:[e.jsxs(Y,{children:[e.jsx(J,{children:"Change Password"}),e.jsx(ze,{children:"Update your account password"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(D,{id:"currentPassword",type:"password",value:g.currentPassword,onChange:b=>u({...g,currentPassword:b.target.value}),placeholder:"Enter current password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"newPassword",children:"New Password"}),e.jsx(D,{id:"newPassword",type:"password",value:g.newPassword,onChange:b=>u({...g,newPassword:b.target.value}),placeholder:"Enter new password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(D,{id:"confirmPassword",type:"password",value:g.confirmPassword,onChange:b=>u({...g,confirmPassword:b.target.value}),placeholder:"Confirm new password"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(w,{onClick:f,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"h-4 w-4 mr-2 animate-spin"}),"Changing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Change Password"]})})})]})]}),e.jsxs(I,{children:[e.jsxs(Y,{children:[e.jsx(J,{children:"Active Sessions"}),e.jsx(ze,{children:"Manage your active login sessions"})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Current Session"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx(be,{className:"h-3 w-3 inline mr-1"}),"Last active: Just now"]})]}),e.jsx(ue,{variant:"secondary",children:"Active"})]})})})]})]})]})]})};var Ys=(s=>(s.ACTIVE="ACTIVE",s))(Ys||{}),Hs=(s=>(s.INTEGRATION="INTEGRATION",s.UTILITY="UTILITY",s.TEMPLATE="TEMPLATE",s.CUSTOM="CUSTOM",s))(Hs||{});const _i=({packageItem:s,onSelect:t,isSelected:r,onToggleSelect:n,onEdit:a,onArchive:i,onDelete:o,onExport:h})=>{const l={icon:ne,variant:"default",label:"Active"},j=l.icon,m=d=>{d.target.closest("[data-action]")||d.target.closest("button")||t(s)},p=d=>{d.stopPropagation(),n(d.target.checked)};return e.jsxs(I,{className:U("group relative cursor-pointer transition-all duration-200 hover:shadow-md","border border-border hover:border-primary/50 flex flex-col",r&&"ring-2 ring-primary ring-opacity-50 bg-primary/5"),onClick:m,children:[e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("input",{type:"checkbox",checked:r,onChange:p,className:"rounded border-gray-300 focus:ring-primary","data-action":"select"})}),e.jsx(Y,{className:"pb-3 pt-10",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:s.name}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs(ue,{variant:l.variant,className:"text-xs",children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),l.label]})})]})]})}),e.jsxs(L,{className:"space-y-4 flex-1 flex flex-col",children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.adapterCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Adapters"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.flowCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Flows"})]})]})]}),s.totalActiveAssetCount>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-muted-foreground",children:[s.totalActiveAssetCount," active asset",s.totalActiveAssetCount!==1?"s":""]})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.slice(0,3).map(d=>e.jsx(ue,{variant:"secondary",className:"text-xs px-2 py-0.5",children:d},d)),s.tags.length>3&&e.jsxs(ue,{variant:"secondary",className:"text-xs px-2 py-0.5",children:["+",s.tags.length-3]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-3",children:[e.jsxs("div",{children:["v",s.version]}),e.jsx("div",{children:s.updatedAt?`Updated ${Tt(new Date(s.updatedAt),{addSuffix:!0})}`:`Created ${Tt(new Date(s.createdAt),{addSuffix:!0})}`})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:d=>{d.stopPropagation(),t(s)},children:[e.jsx(Ae,{className:"h-3 w-3 mr-1"}),"View Details"]}),a&&e.jsxs(w,{variant:"outline",size:"sm",onClick:d=>{d.stopPropagation(),a(s)},children:[e.jsx(Os,{className:"h-3 w-3 mr-1"}),"Edit"]}),h&&e.jsxs(w,{variant:"outline",size:"sm",onClick:d=>{d.stopPropagation(),h(s)},children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Export"]}),o&&e.jsxs(w,{variant:"outline",size:"sm",onClick:d=>{d.stopPropagation(),o(s)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(rs,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})]})]})},ka=({open:s,onOpenChange:t,title:r="Confirm Action",message:n,confirmLabel:a="OK",cancelLabel:i="Cancel",variant:o="default",onConfirm:h})=>{const l=()=>{h(),t(!1)};return e.jsx(ms,{open:s,onOpenChange:t,children:e.jsxs(ss,{className:"max-w-lg",children:[e.jsx(ts,{children:e.jsx(as,{className:"text-xl font-semibold",children:r})}),e.jsx("div",{className:"py-2",children:e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:n})}),e.jsxs(Xs,{className:"flex gap-2 sm:justify-end",children:[e.jsx(w,{variant:"outline",onClick:()=>t(!1),className:"px-6",children:i}),e.jsx(w,{variant:o,onClick:l,className:"px-6",children:a})]})]})})};var st="Checkbox",[Ki]=sn(st),[$i,jt]=Ki(st);function Vi(s){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:h,onCheckedChange:l,required:j,value:m="on",internal_do_not_use_render:p}=s,[d,C]=an({prop:r,defaultProp:a??!1,onChange:l,caller:st}),[g,u]=y.useState(null),[S,E]=y.useState(null),x=y.useRef(!1),A=g?!!o||!!g.closest("form"):!0,c={checked:d,disabled:i,setChecked:C,control:g,setControl:u,name:h,form:o,value:m,hasConsumerStoppedPropagationRef:x,required:j,defaultChecked:os(a)?!1:a,isFormControl:A,bubbleInput:S,setBubbleInput:E};return e.jsx($i,{scope:t,...c,children:zi(p)?p(c):n})}var Aa="CheckboxTrigger",Fa=y.forwardRef(({__scopeCheckbox:s,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:h,checked:l,required:j,setControl:m,setChecked:p,hasConsumerStoppedPropagationRef:d,isFormControl:C,bubbleInput:g}=jt(Aa,s),u=ja(a,m),S=y.useRef(l);return y.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const x=()=>p(S.current);return E.addEventListener("reset",x),()=>E.removeEventListener("reset",x)}},[i,p]),e.jsx(pt.button,{type:"button",role:"checkbox","aria-checked":os(l)?"mixed":l,"aria-required":j,"data-state":Ra(l),"data-disabled":h?"":void 0,disabled:h,value:o,...n,ref:u,onKeyDown:At(t,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:At(r,E=>{p(x=>os(x)?!0:!x),g&&C&&(d.current=E.isPropagationStopped(),d.current||E.stopPropagation())})})});Fa.displayName=Aa;var ft=y.forwardRef((s,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:h,value:l,onCheckedChange:j,form:m,...p}=s;return e.jsx(Vi,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:h,required:o,onCheckedChange:j,name:n,form:m,value:l,internal_do_not_use_render:({isFormControl:d})=>e.jsxs(e.Fragment,{children:[e.jsx(Fa,{...p,ref:t,__scopeCheckbox:r}),d&&e.jsx(La,{__scopeCheckbox:r})]})})});ft.displayName=st;var Pa="CheckboxIndicator",Da=y.forwardRef((s,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=s,i=jt(Pa,r);return e.jsx(tn,{present:n||os(i.checked)||i.checked===!0,children:e.jsx(pt.span,{"data-state":Ra(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...s.style}})})});Da.displayName=Pa;var Ia="CheckboxBubbleInput",La=y.forwardRef(({__scopeCheckbox:s,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:h,disabled:l,name:j,value:m,form:p,bubbleInput:d,setBubbleInput:C}=jt(Ia,s),g=ja(r,C),u=rn(i),S=nn(n);y.useEffect(()=>{const x=d;if(!x)return;const A=window.HTMLInputElement.prototype,F=Object.getOwnPropertyDescriptor(A,"checked").set,f=!a.current;if(u!==i&&F){const b=new Event("click",{bubbles:f});x.indeterminate=os(i),F.call(x,os(i)?!1:i),x.dispatchEvent(b)}},[d,u,i,a]);const E=y.useRef(os(i)?!1:i);return e.jsx(pt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??E.current,required:h,disabled:l,name:j,value:m,form:p,...t,tabIndex:-1,ref:g,style:{...t.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});La.displayName=Ia;function zi(s){return typeof s=="function"}function os(s){return s==="indeterminate"}function Ra(s){return os(s)?"indeterminate":s?"checked":"unchecked"}const Ma=y.forwardRef(({className:s,...t},r)=>e.jsx(ft,{ref:r,className:U("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(Da,{className:U("flex items-center justify-center text-current"),children:e.jsx(Js,{className:"h-4 w-4"})})}));Ma.displayName=ft.displayName;const Bi=({open:s,onOpenChange:t,packageId:r,packageName:n})=>{const[a,i]=y.useState(new Set),[o,h]=y.useState(!1),{data:l,isLoading:j}=se({queryKey:["package-container",r],queryFn:async()=>{var x;const E=await k.get(`/api/packages/${r}/container`);return((x=E.data)==null?void 0:x.data)||E.data},enabled:s&&!!r}),{data:m}=se({queryKey:["package-flows-export",r],queryFn:async()=>{var x;const E=await k.get(`/api/flows/package/${r}`);return((x=E.data)==null?void 0:x.data)||E.data||[]},enabled:s&&!!r}),{data:p}=se({queryKey:["package-adapters-export",r],queryFn:async()=>{var x;const E=await k.get(`/api/adapters/package/${r}`);return((x=E.data)==null?void 0:x.data)||E.data||[]},enabled:s&&!!r}),d=Array.isArray(m)?m:[];y.useEffect(()=>{s&&i(new Set)},[s]);const C=E=>{i(x=>{const A=new Set(x);return A.has(E)?A.delete(E):A.add(E),A})},g=()=>{i(new Set(d.map(E=>E.id)))},u=()=>{i(new Set)},S=async()=>{var E,x,A;if(a.size!==0){h(!0);try{const c=await k.post(`/api/packages/${r}/export`,{selectedFlowIds:Array.from(a)}),F=((E=c.data)==null?void 0:E.data)||c.data,f=JSON.stringify(F,null,2),b=new Blob([f],{type:"application/json"}),T=URL.createObjectURL(b),M=document.createElement("a");M.href=T,M.download=`${n}_export_encrypted_${new Date().toISOString().split("T")[0]}.h2hpkg`,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(T),t(!1)}catch(c){console.error("Failed to export package:",c),alert("Failed to export package: "+(((A=(x=c.response)==null?void 0:x.data)==null?void 0:A.message)||c.message))}finally{h(!1)}}};return e.jsx(ms,{open:s,onOpenChange:t,children:e.jsxs(ss,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsxs(ts,{children:[e.jsxs(as,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5 text-primary"}),"Export Package: ",n]}),e.jsx(Ls,{children:"Select which flows you want to export. The relevant adapters for each flow will be included automatically."})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:j?e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx(Ds,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(it,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No flows available to export"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-3 border-b",children:[e.jsxs("div",{className:"text-sm font-medium",children:[a.size," of ",d.length," flow",d.length!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:g,disabled:a.size===d.length,children:"Select All"}),e.jsx(w,{variant:"ghost",size:"sm",onClick:u,disabled:a.size===0,children:"Deselect All"})]})]}),e.jsx("div",{className:"space-y-2",children:d.map(E=>{const x=a.has(E.id);return e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors hover:bg-accent ${x?"bg-accent border-primary":""}`,onClick:()=>C(E.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ma,{checked:x,onCheckedChange:()=>C(E.id),onClick:A=>A.stopPropagation()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:E.name}),E.active&&e.jsx(ue,{variant:"outline",className:"text-xs",children:"Active"})]}),E.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:E.description})]})]})},E.id)})})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a.size>0&&e.jsxs("span",{children:["Exporting ",a.size," flow",a.size!==1?"s":""," with their adapters"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{variant:"outline",onClick:()=>t(!1),disabled:o,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsx(w,{onClick:S,disabled:a.size===0||o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(Ds,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Export Selected"]})})]})]})]})})},qi=({open:s,onOpenChange:t,onImportSuccess:r})=>{const[n,a]=y.useState(null),[i,o]=y.useState(!1),[h,l]=y.useState(null),j=g=>{var S;const u=(S=g.target.files)==null?void 0:S[0];u&&(a(u),l(null))},m=g=>{var S;g.preventDefault();const u=(S=g.dataTransfer.files)==null?void 0:S[0];u&&(u.name.endsWith(".h2hpkg")||u.name.endsWith(".json"))&&(a(u),l(null))},p=g=>{g.preventDefault()},d=async()=>{var g,u,S;if(n){o(!0),l(null);try{const E=await n.text(),x=JSON.parse(E),A=await k.post("/api/packages/import",x),c=((g=A.data)==null?void 0:g.data)||A.data;l({success:!0,message:"Package imported successfully!",details:c}),setTimeout(()=>{r(),t(!1),a(null),l(null)},2e3)}catch(E){console.error("Failed to import package:",E),l({success:!1,message:((S=(u=E.response)==null?void 0:u.data)==null?void 0:S.message)||E.message||"Failed to import package"})}finally{o(!1)}}},C=()=>{i||(a(null),l(null),t(!1))};return e.jsx(ms,{open:s,onOpenChange:C,children:e.jsxs(ss,{className:"max-w-lg",children:[e.jsxs(ts,{children:[e.jsxs(as,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5 text-primary"}),"Import Package"]}),e.jsx(Ls,{children:"Upload an encrypted package file (.h2hpkg) to import flows and adapters."})]}),e.jsxs("div",{className:"space-y-4",children:[!n&&!h&&e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-primary transition-colors",onDrop:m,onDragOver:p,onClick:()=>{var g;return(g=document.getElementById("file-input"))==null?void 0:g.click()},children:[e.jsx(it,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop your package file here, or click to browse"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports .h2hpkg and .json files"}),e.jsx("input",{id:"file-input",type:"file",accept:".h2hpkg,.json",onChange:j,className:"hidden"})]}),n&&!h&&e.jsx("div",{className:"border border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(it,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:n.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.size/1024).toFixed(2)," KB"]})]})]}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>a(null),disabled:i,children:e.jsx(Ne,{className:"h-4 w-4"})})]})}),h&&e.jsx("div",{className:`border rounded-lg p-4 ${h.success?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[h.success?e.jsx(ne,{className:"h-5 w-5 text-green-600 mt-0.5"}):e.jsx(Ee,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium text-sm ${h.success?"text-green-800":"text-red-800"}`,children:h.message}),h.success&&h.details&&e.jsxs("div",{className:"mt-2 text-xs text-green-700 space-y-1",children:[e.jsxs("p",{children:["• Package: ",h.details.packageName]}),e.jsxs("p",{children:["• Adapters imported: ",h.details.adaptersImported]}),e.jsxs("p",{children:["• Flows imported: ",h.details.flowsImported]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsxs(w,{variant:"outline",onClick:C,disabled:i,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsx(w,{onClick:d,disabled:!n||i||(h==null?void 0:h.success)===!0,children:i?e.jsxs(e.Fragment,{children:[e.jsx(Ds,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Import Package"]})})]})]})]})})},Hi=()=>{var je;const s=Oe(),[t,r]=y.useState(""),[n,a]=y.useState("ALL"),[i,o]=y.useState("ALL"),[h,l]=y.useState("grid"),[j,m]=y.useState(new Set),[p,d]=y.useState({open:!1,title:"",message:"",onConfirm:()=>{}}),[C,g]=y.useState({open:!1,packageId:"",packageName:""}),[u,S]=y.useState({open:!1}),{data:E,isLoading:x,error:A,refetch:c}=se({queryKey:["packages",t,n,i],queryFn:async()=>{const _={searchTerm:t||void 0,packageTypes:n!=="ALL"?[n]:void 0,statuses:i!=="ALL"?[i]:void 0,sortBy:"updatedAt",sortOrder:"desc"};return(await k.get("/api/packages/search",{params:_})).data}}),F=((je=E==null?void 0:E.data)==null?void 0:je.packages)||(E==null?void 0:E.packages)||[],f=_=>{s(`/packages/${_.id}`)},b=(_,re)=>{const fe=new Set(j);re?fe.add(_):fe.delete(_),m(fe)},T=()=>{s("/packages/create")},M=()=>{S({open:!0})},O=()=>{he.success("Package imported successfully"),c()},q=()=>{r(""),a("ALL"),o("ALL")},ee=_=>{g({open:!0,packageId:_.id,packageName:_.name})},te=()=>{g({open:!1,packageId:"",packageName:""}),he.success("Package exported successfully")},_e=async()=>{if(!(j.size===0||!window.confirm(`Are you sure you want to archive ${j.size} package${j.size!==1?"s":""}? This will change their status to ARCHIVED.`)))try{const re=F.filter(fe=>j.has(fe.id)).map(fe=>fe.name).join(", ");he.success(`Archived packages: ${re}`),m(new Set),c()}catch{he.error("Failed to archive packages")}},Ke=_=>{s(`/packages/${_.id}/edit`)},P=async _=>{d({open:!0,title:"Delete Package",message:`Are you sure you want to delete the package "${_.name}"? This action cannot be undone and will permanently remove the package and all its associated adapters and flows.`,confirmLabel:"Delete Package",onConfirm:async()=>{var re,fe,xs,ys;try{await k.delete(`/api/packages/${_.id}`),he.success(`Package "${_.name}" deleted successfully`),c()}catch(us){const Ns=((fe=(re=us.response)==null?void 0:re.data)==null?void 0:fe.message)||((ys=(xs=us.response)==null?void 0:xs.data)==null?void 0:ys.error)||us.message||"Failed to delete package";he.error(Ns)}}})},ae=F.filter(_=>_.status===Ys.ACTIVE),xe=Object.values(Hs).reduce((_,re)=>(_[re]=F.filter(fe=>fe.packageType===re).length,_),{});return x?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Package Library"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(_=>e.jsxs(I,{className:"animate-pulse",children:[e.jsxs(Y,{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})]},_))})]}):A?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Package Library"})}),e.jsx(I,{className:"border-red-200 bg-red-50",children:e.jsxs(L,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Me,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Failed to load packages"}),e.jsx("div",{className:"text-sm text-red-500",children:A instanceof Error?A.message:"Unknown error"})]})]}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>c(),className:"mt-4",children:"Try Again"})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Package Library"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage integration packages and their components"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{variant:"outline",onClick:M,children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Import Package"]}),e.jsxs(w,{onClick:T,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"New Package"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(I,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:F.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Packages"})]}),e.jsx(Me,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(I,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:ae.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Packages"})]}),e.jsx("div",{className:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 bg-white rounded-full"})})]})})}),e.jsx(I,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:F.reduce((_,re)=>_+re.totalAssetCount,0)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Assets"})]}),e.jsx(kt,{className:"h-8 w-8 text-purple-500"})]})})}),e.jsx(I,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:F.reduce((_,re)=>_+re.totalActiveAssetCount,0)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Assets"})]}),e.jsx("div",{className:"h-8 w-8 rounded bg-green-100 flex items-center justify-center",children:e.jsx("div",{className:"h-4 w-4 text-green-600",children:"⚡"})})]})})})]}),e.jsx(I,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(D,{placeholder:"Search packages...",value:t,onChange:_=>r(_.target.value),className:"pl-10"})]})}),e.jsxs("select",{value:n,onChange:_=>a(_.target.value),className:"px-3 py-2 border rounded-md text-sm",children:[e.jsx("option",{value:"ALL",children:"All Types"}),Object.values(Hs).map(_=>e.jsx("option",{value:_,children:_},_))]}),e.jsxs("select",{value:i,onChange:_=>o(_.target.value),className:"px-3 py-2 border rounded-md text-sm",children:[e.jsx("option",{value:"ALL",children:"All Statuses"}),Object.values(Ys).map(_=>e.jsx("option",{value:_,children:_},_))]}),e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(w,{variant:h==="grid"?"default":"ghost",size:"sm",onClick:()=>l("grid"),className:"rounded-r-none",children:e.jsx(kt,{className:"h-4 w-4"})}),e.jsx(w,{variant:h==="list"?"default":"ghost",size:"sm",onClick:()=>l("list"),className:"rounded-l-none",children:e.jsx(Sr,{className:"h-4 w-4"})})]}),(t||n!=="ALL"||i!=="ALL")&&e.jsx(w,{variant:"outline",onClick:q,size:"sm",children:"Clear"})]})})}),Object.values(Hs).some(_=>xe[_]>0)&&e.jsxs(I,{children:[e.jsx(Y,{children:e.jsx(J,{className:"text-base",children:"Package Distribution"})}),e.jsx(L,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(xe).map(([_,re])=>re>0&&e.jsxs(ue,{variant:"outline",className:"px-3 py-1",children:[_,": ",re]},_))})})]}),F.length===0?e.jsx(I,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Me,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-medium mb-2",children:"No packages found"}),e.jsx("div",{className:"text-muted-foreground mb-4",children:t||n!=="ALL"||i!=="ALL"?"Try adjusting your search criteria":"Create your first package to get started"}),e.jsxs(w,{onClick:T,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Package"]})]})})}):e.jsx("div",{className:h==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:F.map(_=>e.jsx(_i,{packageItem:_,onSelect:f,isSelected:j.has(_.id),onToggleSelect:re=>b(_.id,re),onEdit:Ke,onDelete:P,onExport:ee},_.id))}),j.size>0&&e.jsx(I,{className:"border-blue-200 bg-blue-50",children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-blue-700",children:[j.size," package",j.size!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{variant:"outline",size:"sm",onClick:_e,children:"Archive Selected"}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>m(new Set),children:"Clear Selection"})]})]})})}),e.jsx(ka,{open:p.open,onOpenChange:_=>d(re=>({...re,open:_})),title:p.title,message:p.message,confirmLabel:p.confirmLabel||"Delete",variant:"destructive",onConfirm:p.onConfirm}),e.jsx(Bi,{open:C.open,onOpenChange:_=>{_||te()},packageId:C.packageId,packageName:C.packageName}),e.jsx(qi,{open:u.open,onOpenChange:_=>S({open:_}),onImportSuccess:O})]})},vt=Ie.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:U("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t}));vt.displayName="Textarea";const Gi=()=>{const s=Oe(),[t,r]=y.useState(!1),[n,a]=y.useState({name:"",description:"",version:"1.0.0"}),[i,o]=y.useState({open:!1,type:"info",message:""}),h=(m,p,d)=>{o({open:!0,type:m,title:d,message:p})},l=async m=>{var p,d;if(m.preventDefault(),!n.name){h("warning","Please fill in the package name.","Validation Error");return}r(!0);try{const C={name:n.name.trim(),description:n.description.trim(),version:n.version.trim()},g=await k.post("/api/packages",C);(g.status===201||g.status===200)&&s("/packages")}catch(C){console.error("Failed to create package:",C),h("error",((d=(p=C.response)==null?void 0:p.data)==null?void 0:d.message)||C.message,"Failed to Create Package")}finally{r(!1)}},j=()=>{s("/packages")};return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(w,{variant:"ghost",onClick:j,className:"mb-4 p-0 h-auto text-muted-foreground hover:text-foreground",children:[e.jsx(mt,{className:"h-4 w-4 mr-1"}),"Back to Package Library"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Create New Integration Package"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new integration package to organize your adapters and flows"})]})]})]}),e.jsx("form",{onSubmit:l,children:e.jsxs(I,{children:[e.jsxs(Y,{children:[e.jsx(J,{children:"Integration Package Information"}),e.jsx(ze,{children:"Define the basic properties of your integration package"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"name",children:"Package Name *"}),e.jsx(D,{id:"name",value:n.name,onChange:m=>a(p=>({...p,name:m.target.value})),placeholder:"Enter package name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description"}),e.jsx(vt,{id:"description",value:n.description,onChange:m=>a(p=>({...p,description:m.target.value})),placeholder:"Describe the purpose of this package",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"version",children:"Version"}),e.jsx(D,{id:"version",value:n.version,onChange:m=>a(p=>({...p,version:m.target.value})),placeholder:"1.0.0"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsxs(w,{type:"button",variant:"outline",onClick:j,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsx(w,{type:"submit",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-current border-t-transparent rounded-full"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Create Package"]})})]})]})]})}),e.jsx(et,{open:i.open,onOpenChange:m=>o(p=>({...p,open:m})),type:i.type,title:i.title,message:i.message})]})},Wi=()=>{const s=Oe(),{id:t}=dt(),[r,n]=y.useState(!1),[a,i]=y.useState({name:"",description:"",version:"1.0.0"}),[o,h]=y.useState({open:!1,type:"info",message:""}),{data:l,isLoading:j}=se({queryKey:["package",t],queryFn:async()=>{var g;const C=await k.get(`/api/packages/${t}`);return((g=C.data)==null?void 0:g.data)||C.data},enabled:!!t});y.useEffect(()=>{l&&i({name:l.name||"",description:l.description||"",version:l.version||"1.0.0"})},[l]);const m=(C,g,u)=>{h({open:!0,type:C,title:u,message:g})},p=async C=>{var g,u;if(C.preventDefault(),!a.name){m("warning","Please fill in the package name.","Validation Error");return}n(!0);try{const S={name:a.name.trim(),description:a.description.trim(),version:a.version.trim(),status:l.status};(await k.put(`/api/packages/${t}`,S)).status===200&&(m("success","Package updated successfully","Success"),setTimeout(()=>{s("/packages")},1500))}catch(S){console.error("Failed to update package:",S),m("error",((u=(g=S.response)==null?void 0:g.data)==null?void 0:u.message)||S.message,"Failed to Update Package")}finally{n(!1)}},d=()=>{s("/packages")};return j?e.jsx("div",{className:"container mx-auto p-6 max-w-4xl",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading package..."})]})})}):e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(w,{variant:"ghost",onClick:d,className:"mb-4 p-0 h-auto text-muted-foreground hover:text-foreground",children:[e.jsx(mt,{className:"h-4 w-4 mr-1"}),"Back to Package Library"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Edit Integration Package"}),e.jsx("p",{className:"text-muted-foreground",children:"Update the details of your integration package"})]})]})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs(I,{children:[e.jsxs(Y,{children:[e.jsx(J,{children:"Integration Package Information"}),e.jsx(ze,{children:"Update the basic properties of your integration package"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"name",className:"required",children:"Package Name"}),e.jsx(D,{id:"name",placeholder:"e.g., Customer Integration Package",value:a.name,onChange:C=>i({...a,name:C.target.value}),disabled:r,required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"A unique, descriptive name for your integration package"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description"}),e.jsx(vt,{id:"description",placeholder:"Describe the purpose and contents of this package...",value:a.description,onChange:C=>i({...a,description:C.target.value}),disabled:r,rows:4}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide context about what this package contains and its purpose"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"version",children:"Version"}),e.jsx(D,{id:"version",placeholder:"1.0.0",value:a.version,onChange:C=>i({...a,version:C.target.value}),disabled:r}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Semantic version for tracking package changes"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsxs(w,{type:"button",variant:"outline",onClick:d,disabled:r,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsx(w,{type:"submit",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-background border-t-transparent rounded-full animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Update Package"]})})]})]}),e.jsx(et,{open:o.open,onOpenChange:C=>h(g=>({...g,open:C})),type:o.type,title:o.title,message:o.message})]})},Yi=({open:s,onOpenChange:t,testResult:r})=>{var h;const n=((h=r==null?void 0:r.data)==null?void 0:h.data)||(r==null?void 0:r.data);if(!n)return null;const a={...n,success:n.success??n.testSuccess??!1},i=({success:l})=>l?e.jsx(ne,{className:"h-4 w-4 text-success"}):e.jsx(Ee,{className:"h-4 w-4 text-destructive"}),o=({success:l,successText:j="Success",failText:m="Failed"})=>e.jsx("span",{className:l?"text-success":"text-destructive",children:l?j:m});return e.jsx(ms,{open:s,onOpenChange:t,children:e.jsxs(ss,{className:"max-w-2xl",children:[e.jsx(ts,{className:"pb-0",children:e.jsx(as,{className:"flex items-center space-x-2 text-lg",children:a.success?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-5 w-5 text-success"}),e.jsx("span",{children:"Test Successful"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"h-5 w-5 text-destructive"}),e.jsx("span",{children:"Test Failed"})]})})}),e.jsxs("div",{className:"space-y-6 py-4",children:[!a.success&&a.error&&e.jsx("div",{className:"text-foreground leading-relaxed",children:a.error}),a.success&&a.testResult&&e.jsx("div",{className:"text-foreground leading-relaxed",children:a.testResult}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Connection Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3",children:[a.host&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Host: "}),e.jsxs("span",{className:"text-foreground font-medium",children:[a.host,":",a.port||22]})]}),a.username&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Username: "}),e.jsx("span",{className:"text-foreground font-medium",children:a.username})]})]}),a.homeDirectory&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Home Directory: "}),e.jsx("span",{className:"text-foreground font-medium",children:a.homeDirectory}),a.homeDirectoryAccessible&&e.jsx("span",{className:"ml-2 text-success",children:"(Accessible)"})]}),a.remoteDirectory&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Target Directory: "}),e.jsx("span",{className:"text-foreground font-medium",children:a.remoteDirectory})]})]})]}),a.testType==="SFTP_CONNECTION"&&e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Connection Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Connection:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{success:a.connectionEstablished||!1}),e.jsx(o,{success:a.connectionEstablished||!1})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"SFTP Channel:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{success:a.sftpChannelOpened||!1}),e.jsx(o,{success:a.sftpChannelOpened||!1,successText:"Opened",failText:"Failed"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Directory Access:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{success:a.directoryAccessible||!1}),e.jsx(o,{success:a.directoryAccessible||!1,successText:"Accessible",failText:"Failed"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Permissions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Read:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{success:a.readPermission||!1}),e.jsx(o,{success:a.readPermission||!1,successText:"Allowed",failText:"Denied"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Write:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{success:a.writePermission||!1}),e.jsx(o,{success:a.writePermission||!1,successText:"Allowed",failText:"Denied"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Delete:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{success:a.deletePermission||!1}),e.jsx(o,{success:a.deletePermission||!1,successText:"Allowed",failText:"Denied"})]})]})]})]})]}),a.testType==="SFTP_CONNECTION"&&a.fileCount!==void 0&&e.jsx("div",{className:"text-foreground",children:e.jsxs("strong",{children:["Files in directory: ",a.fileCount," files found"]})}),a.testType==="EMAIL_CONNECTION"&&e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.smtpHost&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"SMTP Host:"}),e.jsx("span",{className:"ml-2 text-foreground font-medium",children:a.smtpHost})]}),a.smtpPort&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"SMTP Port:"}),e.jsx("span",{className:"ml-2 text-foreground font-medium",children:a.smtpPort})]}),a.smtpConnectionEstablished!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Connection:"}),e.jsx("span",{className:`ml-2 ${a.smtpConnectionEstablished?"text-success":"text-destructive"}`,children:a.smtpConnectionEstablished?"Established":"Failed"})]})]})]}),e.jsx(Xs,{children:e.jsx(w,{onClick:()=>t(!1),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-2 font-medium",children:"OK"})})]})})},Qi=({onNavigate:s,activeSection:t,className:r})=>{const n=[{id:"overview",name:"Dashboard",icon:Ae},{id:"adapters",name:"Adapters",icon:Cr},{id:"flows",name:"Flows",icon:Ye}];return e.jsx("div",{className:U("h-full bg-card border-r border-border w-56 flex-shrink-0",r),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(pe,{className:"h-4 w-4 text-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("h2",{className:"text-sm font-medium",children:"Package Workspace"})})]})}),e.jsx("nav",{className:"flex-1 p-3 space-y-1",children:n.map(a=>{const i=t===a.id;return e.jsxs(w,{variant:i?"secondary":"ghost",className:U("w-full justify-start gap-3 h-10",i&&"bg-primary/10 text-primary"),onClick:()=>s(a.id),children:[e.jsx(a.icon,{className:"h-4 w-4"}),a.name]},a.id)})})]})})},Ji=({pkg:s,adapters:t,flows:r})=>{const n=t.length,a=r.length,i=t.filter(h=>h.active&&h.status==="STARTED").length,o=r.filter(h=>h.deployed).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(I,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:n}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Adapters"})]}),e.jsx(Gs,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(I,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:a}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Flows"})]}),e.jsx(Ye,{className:"h-8 w-8 text-purple-500"})]})})}),e.jsx(I,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Adapters"})]}),e.jsx(ne,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(I,{children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Deployed Flows"})]}),e.jsx(ke,{className:"h-8 w-8 text-green-500"})]})})})]}),e.jsxs(I,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),"Package Information"]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),e.jsx("div",{className:"font-medium",children:s.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Version"}),e.jsxs("div",{className:"font-medium",children:["v",s.version]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),e.jsx("div",{children:new Date(s.createdAt).toLocaleDateString()})]})]}),s.description&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("div",{className:"text-sm mt-1",children:s.description})]})]})]}),e.jsxs(I,{children:[e.jsx(Y,{children:e.jsx(J,{children:"Quick Actions"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent cursor-pointer transition-colors",children:[e.jsx(Gs,{className:"h-6 w-6 text-blue-500 mb-2"}),e.jsx("div",{className:"font-medium",children:"Add Adapter"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Configure a new adapter"})]}),e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent cursor-pointer transition-colors",children:[e.jsx(Ye,{className:"h-6 w-6 text-purple-500 mb-2"}),e.jsx("div",{className:"font-medium",children:"Create Flow"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Design a new integration flow"})]}),e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent cursor-pointer transition-colors",children:[e.jsx(ke,{className:"h-6 w-6 text-green-500 mb-2"}),e.jsx("div",{className:"font-medium",children:"View Monitoring"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Check execution status"})]}),e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent cursor-pointer transition-colors",children:[e.jsx(vs,{className:"h-6 w-6 text-orange-500 mb-2"}),e.jsx("div",{className:"font-medium",children:"View Logs"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Check recent activity"})]})]})})]})]})},Xi=({packageId:s,adapters:t,onAddAdapter:r,onViewAdapter:n,onEditAdapter:a,onDeleteAdapter:i,onTestAdapter:o})=>{const h=d=>{switch(d){case"FILE":return e.jsx(pe,{className:"h-5 w-5"});case"SFTP":return e.jsx(ws,{className:"h-5 w-5"});case"EMAIL":return e.jsx(ds,{className:"h-5 w-5"});default:return e.jsx(de,{className:"h-5 w-5"})}},l=d=>d.adapterType||d.type,j=t.filter(d=>l(d)==="FILE").length,m=t.filter(d=>l(d)==="SFTP").length,p=t.filter(d=>l(d)==="EMAIL").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Adapter Configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure and manage your file transfer adapters"})]}),e.jsxs(w,{size:"sm",onClick:r,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Adapter"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"app-card rounded-lg p-6 border",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(pe,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"File Adapters"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Local file system operations"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-foreground",children:j})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(ws,{className:"h-8 w-8 text-info"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"SFTP Adapters"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Secure file transfer protocol"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-foreground",children:m})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(ds,{className:"h-8 w-8 text-success"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Email Adapters"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email-based file transfer"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-foreground",children:p})]})]}),t.length===0?e.jsxs("div",{className:"app-card rounded-lg p-12 border text-center",children:[e.jsx(de,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No Adapters Configured"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Get started by creating your first adapter interface"}),e.jsxs(w,{onClick:r,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Your First Adapter"]})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(d=>e.jsxs(I,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[h(l(d)),e.jsxs("div",{children:[e.jsx(J,{className:"text-lg text-foreground",children:d.name}),d.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:d.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${d.active?"bg-success animate-glow":"bg-muted-foreground"}`}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${d.active?"bg-success/20 text-success":"bg-muted/20 text-muted-foreground"}`,children:d.active?"Active":"Inactive"})]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"ml-2 text-foreground",children:l(d)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Direction:"}),e.jsx("span",{className:"ml-2 text-foreground",children:d.direction})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(d),children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>a==null?void 0:a(d),children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Configure"]}),l(d)!=="FILE"&&e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>o==null?void 0:o(d),children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Test"]}),e.jsx(w,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:()=>i==null?void 0:i(d),children:e.jsx(rs,{className:"h-4 w-4"})})]})]})})]},d.id))})]})},Zi=({packageId:s,flows:t,onAddFlow:r,onEditFlow:n,onDeleteFlow:a,onActivateFlow:i,onDeployFlow:o,onUndeployFlow:h,onViewFlow:l,onExportFlow:j,onImportFlow:m})=>{const p=y.useRef(null),d=()=>{var c;(c=p.current)==null||c.click()},C=c=>{var f;const F=(f=c.target.files)==null?void 0:f[0];F&&m&&m(F),c.target.value=""},g=t.length,u=t.filter(c=>c.active).length,S=t.reduce((c,F)=>c+(F.totalExecutions||F.executionCount||0),0),E=t.length>0?t.reduce((c,F)=>c+(F.averageExecutionTimeMs||0),0)/t.length:0,x=c=>{if(c<1e3)return`${Math.round(c)}ms`;if(c<6e4)return`${(c/1e3).toFixed(1)}s`;const F=Math.floor(c/6e4),f=Math.floor(c%6e4/1e3);return`${F}m ${f}s`},A=(c,F)=>F===0?100:Math.round(c/F*100);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("input",{type:"file",ref:p,onChange:C,accept:".json",className:"hidden"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Visual Flow Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage visual integration flows with drag-and-drop components"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:d,children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Import Flow"]}),e.jsxs(w,{size:"sm",onClick:r,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Flow"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ye,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Flows"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:g})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{className:"h-8 w-8 text-success"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Enabled Flows"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:u})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ne,{className:"h-8 w-8 text-info"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Executions"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:S})]})]})})}),e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(be,{className:"h-8 w-8 text-warning"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Execution Time"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:x(E)})]})]})})})]}),t.length===0?e.jsx(I,{className:"app-card border",children:e.jsx(L,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ye,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Visual Flows"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first visual integration flow using our drag-and-drop builder"}),e.jsxs(w,{onClick:r,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Flow"]})]})})}):e.jsx("div",{className:"space-y-6",children:t.map(c=>{var q,ee,te,_e;const F=((ee=(q=c.flowDefinition)==null?void 0:q.nodes)==null?void 0:ee.length)||0,f=((_e=(te=c.flowDefinition)==null?void 0:te.edges)==null?void 0:_e.length)||0,b=A(c.successfulExecutions||0,c.totalExecutions||0),T=c.totalExecutions||c.executionCount||0,M=c.successfulExecutions||0,O=c.failedExecutions||0;return e.jsxs(I,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ye,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsxs(J,{className:"text-lg text-foreground",children:[c.name,c.flowVersion&&e.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["v",c.flowVersion]})]}),c.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:c.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Type: ",c.flowType||"STANDARD"]}),c.updatedAt&&e.jsxs("span",{children:["Updated: ",new Date(c.updatedAt).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${c.active?"bg-success/20 text-success":"bg-muted/20 text-muted-foreground"}`,children:c.active?"Active":"Inactive"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${c.deployed?"bg-info/20 text-info":"bg-warning/20 text-warning"}`,children:c.deployed?"Deployed":"Not Deployed"}),e.jsx("div",{className:`w-3 h-3 rounded-full ${c.active?"bg-success animate-glow":"bg-muted-foreground"}`})]})]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-secondary rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Nodes:"}),e.jsx("span",{className:"ml-1 text-foreground font-medium",children:F})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Er,{className:"h-4 w-4 text-info"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Connections:"}),e.jsx("span",{className:"ml-1 text-foreground font-medium",children:f})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"h-4 w-4 text-success"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Success Rate:"}),e.jsxs("span",{className:"ml-1 text-success font-medium",children:[b,"%"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{className:"h-4 w-4 text-warning"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg Time:"}),e.jsx("span",{className:"ml-1 text-foreground font-medium",children:x(c.averageExecutionTimeMs||0)})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Executions:"}),e.jsx("span",{className:"ml-2 text-foreground font-medium",children:T})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Successful:"}),e.jsx("span",{className:"ml-2 text-success font-medium",children:M})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Failed:"}),e.jsx("span",{className:"ml-2 text-destructive font-medium",children:O})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"ml-2 text-foreground",children:c.createdAt?new Date(c.createdAt).toLocaleDateString():"-"})]})]}),e.jsx("div",{className:"flex items-center justify-end pt-4 border-t border-border",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>n==null?void 0:n(c),disabled:c.deployed,className:c.deployed?"opacity-50 cursor-not-allowed":"",title:c.deployed?"Flow must be undeployed before editing":"",children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Edit Visual Flow"]}),c.originalFlowId&&!c.active&&e.jsxs(w,{variant:"outline",size:"sm",className:"text-success hover:bg-success/10 hover:text-success",onClick:()=>i==null?void 0:i(c),children:[e.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Activate"]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>l==null?void 0:l(c),children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>j==null?void 0:j(c),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Export"]}),c.deployed?e.jsxs(w,{variant:"outline",size:"sm",className:"text-warning hover:bg-warning/10 hover:text-warning",onClick:()=>h==null?void 0:h(c),children:[e.jsx(nt,{className:"h-4 w-4 mr-2"}),"Undeploy"]}):e.jsxs(w,{variant:"outline",size:"sm",className:"text-info hover:bg-info/10 hover:text-info",onClick:()=>o==null?void 0:o(c),disabled:!c.active,children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Deploy"]}),e.jsxs(w,{variant:"outline",size:"sm",className:`text-destructive hover:bg-destructive/10 hover:text-destructive ${c.deployed?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!c.deployed&&(a==null?void 0:a(c)),disabled:c.deployed,title:c.deployed?"Flow must be undeployed before deleting":"",children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})]})})]},c.id)})})]})},el=({direction:s,control:t,register:r,errors:n})=>{var j,m;const a=Ve({control:t,name:"configuration.archiveFaultySourceFiles",defaultValue:!1}),i=Ve({control:t,name:"configuration.postProcessAction",defaultValue:"ARCHIVE"}),o=Ve({control:t,name:"configuration.outputFilenameMode",defaultValue:"UseOriginal"}),h=Ve({control:t,name:"configuration.scheduleMode",defaultValue:"OnTime"}),l=Ve({control:t,name:"configuration.scheduleType",defaultValue:"Daily"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium mb-4",children:[s==="SENDER"?"Source":"Target"," Configuration"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s==="SENDER"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"sourceDirectory",children:"Source Directory *"}),e.jsx(D,{id:"sourceDirectory",...r("configuration.sourceDirectory",{required:!0}),placeholder:"/data/input"}),((j=n==null?void 0:n.configuration)==null?void 0:j.sourceDirectory)&&e.jsx("span",{className:"text-sm text-destructive",children:"Source directory is required"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"filePattern",children:"File Name Mask"}),e.jsx(D,{id:"filePattern",...r("configuration.filePattern"),placeholder:"*.xml",defaultValue:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"exclusionMask",children:"Exclusion Mask"}),e.jsx(D,{id:"exclusionMask",...r("configuration.exclusionMask"),placeholder:"*.tmp"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"targetDirectory",children:"Target Directory *"}),e.jsx(D,{id:"targetDirectory",...r("configuration.targetDirectory",{required:!0}),placeholder:"/data/output"}),((m=n==null?void 0:n.configuration)==null?void 0:m.targetDirectory)&&e.jsx("span",{className:"text-sm text-destructive",children:"Target directory is required"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(W,{name:"configuration.createTargetDirectory",control:t,render:({field:p})=>e.jsx("input",{type:"checkbox",id:"createTargetDirectory",checked:!!p.value,onChange:p.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:"createTargetDirectory",children:"Create Target Directory"})]})]})})]}),s==="SENDER"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Processing Parameters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"retryInterval",children:"Retry Interval (secs)"}),e.jsx(D,{id:"retryInterval",type:"number",...r("configuration.retryInterval"),placeholder:"60",defaultValue:"60",min:"1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"emptyFileHandling",children:"Empty File Handling"}),e.jsx(W,{name:"configuration.emptyFileHandling",control:t,defaultValue:"Do Not Create Message",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select handling"})}),e.jsxs($,{children:[e.jsx(v,{value:"Do Not Create Message",children:"Do Not Create Message"}),e.jsx(v,{value:"Process Empty Files",children:"Process Empty Files"}),e.jsx(v,{value:"Skip Empty Files",children:"Skip Empty Files"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"postProcessAction",children:"Post Process Action"}),e.jsx(W,{name:"configuration.postProcessAction",control:t,defaultValue:"ARCHIVE",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select post process action"})}),e.jsxs($,{children:[e.jsx(v,{value:"ARCHIVE",children:"Archive"}),e.jsx(v,{value:"KEEP_AND_MARK",children:"Keep File and Mark as Processed"}),e.jsx(v,{value:"KEEP_AND_REPROCESS",children:"Keep File and Process Again"}),e.jsx(v,{value:"DELETE",children:"Delete File"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"fileType",children:"File Type"}),e.jsx(W,{name:"configuration.fileType",control:t,defaultValue:"Binary",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select file type"})}),e.jsxs($,{children:[e.jsx(v,{value:"Binary",children:"Binary"}),e.jsx(v,{value:"Text",children:"Text"})]})]})})]})]})]}),s==="RECEIVER"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"File Output Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"outputFilenameMode",children:"Output Filename Mode"}),e.jsx(W,{name:"configuration.outputFilenameMode",control:t,defaultValue:"UseOriginal",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select filename mode"})}),e.jsxs($,{children:[e.jsx(v,{value:"UseOriginal",children:"Use Original Filename"}),e.jsx(v,{value:"AddTimestamp",children:"Add Timestamp to Filename"}),e.jsx(v,{value:"Custom",children:"Custom Filename Pattern"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"fileType",children:"File Type"}),e.jsx(W,{name:"configuration.fileType",control:t,defaultValue:"Binary",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select file type"})}),e.jsxs($,{children:[e.jsx(v,{value:"Binary",children:"Binary"}),e.jsx(v,{value:"Text",children:"Text"})]})]})})]})]}),o==="Custom"&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(N,{htmlFor:"customFilenamePattern",children:"Custom Filename Pattern"}),e.jsx(D,{id:"customFilenamePattern",...r("configuration.customFilenamePattern"),placeholder:"{original_name}_{timestamp}.{extension}"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Available variables: ","{original_name}",", ","{timestamp}",", ","{date}",", ","{extension}"]})]})]}),s==="SENDER"&&i==="ARCHIVE"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Archive Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"archiveDirectory",children:"Archive Directory"}),e.jsx(D,{id:"archiveDirectory",...r("configuration.archiveDirectory"),placeholder:"/data/archive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"archiveFileNaming",children:"Archive File Naming"}),e.jsx(W,{name:"configuration.archiveFileNaming",control:t,defaultValue:"Original",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select naming"})}),e.jsxs($,{children:[e.jsx(v,{value:"Original",children:"Keep Original Name"}),e.jsx(v,{value:"Timestamp",children:"Add Timestamp"}),e.jsx(v,{value:"Counter",children:"Add Counter"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:"configuration.createArchiveDirectory",control:t,render:({field:p})=>e.jsx("input",{type:"checkbox",id:"createArchiveDirectory",checked:!!p.value,onChange:p.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:"createArchiveDirectory",children:"Create Archive Directory if it doesn't exist"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:"configuration.compressArchive",control:t,render:({field:p})=>e.jsx("input",{type:"checkbox",id:"compressArchive",checked:!!p.value,onChange:p.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:"compressArchive",children:"Compress archived files"})]})]})]}),s==="SENDER"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Error Handling"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:"configuration.archiveFaultySourceFiles",control:t,render:({field:p})=>e.jsx("input",{type:"checkbox",id:"archiveFaultySourceFiles",checked:!!p.value,onChange:p.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:"archiveFaultySourceFiles",children:"Archive Faulty Source Files"})]}),a&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"archiveErrorDirectory",children:"Directory for Archiving Files with Errors"}),e.jsx(D,{id:"archiveErrorDirectory",...r("configuration.archiveErrorDirectory"),placeholder:"/data/error"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:"configuration.processReadOnlyFiles",control:t,render:({field:p})=>e.jsx("input",{type:"checkbox",id:"processReadOnlyFiles",checked:!!p.value,onChange:p.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:"processReadOnlyFiles",children:"Process Read-Only Files"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"processingSequence",children:"Processing Sequence"}),e.jsx(W,{name:"configuration.processingSequence",control:t,defaultValue:"By Name",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select sequence"})}),e.jsxs($,{children:[e.jsx(v,{value:"By Name",children:"By Name"}),e.jsx(v,{value:"By Date",children:"By Date"})]})]})})]})]})]}),s==="RECEIVER"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"File Construction"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"fileConstructionMode",children:"File Construction Mode"}),e.jsx(W,{name:"configuration.fileConstructionMode",control:t,defaultValue:"Create",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select mode"})}),e.jsxs($,{children:[e.jsx(v,{value:"Add Time Stamp",children:"Add Time Stamp"}),e.jsx(v,{value:"Create",children:"Create"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"writeMode",children:"Write Mode"}),e.jsx(W,{name:"configuration.writeMode",control:t,defaultValue:"Directly",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select write mode"})}),e.jsxs($,{children:[e.jsx(v,{value:"Directly",children:"Directly"}),e.jsx(v,{value:"Create Temp File",children:"Create Temp File"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"emptyMessageHandling",children:"Empty Message Handling"}),e.jsx(W,{name:"configuration.emptyMessageHandling",control:t,defaultValue:"Write Empty File",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select handling"})}),e.jsxs($,{children:[e.jsx(v,{value:"Write Empty File",children:"Write Empty File"}),e.jsx(v,{value:"Skip Empty Messages",children:"Skip Empty Messages"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"maximumConcurrency",children:"Maximum Concurrency"}),e.jsx(D,{id:"maximumConcurrency",type:"number",...r("configuration.maximumConcurrency"),placeholder:"1",defaultValue:"1",min:"1",max:"10"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Advanced Parameters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"msecsToWaitBeforeModificationCheck",children:"Msecs to Wait Before Modification Check"}),e.jsx(D,{id:"msecsToWaitBeforeModificationCheck",type:"number",...r("configuration.msecsToWaitBeforeModificationCheck"),placeholder:"0",defaultValue:"0",min:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"maximumFileSize",children:"Maximum File Size (Bytes)"}),e.jsx(D,{id:"maximumFileSize",type:"number",...r("configuration.maximumFileSize"),placeholder:"0",defaultValue:"0",min:"0"})]})]})]}),s==="SENDER"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Scheduler Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"scheduleType",children:"Schedule Type"}),e.jsx(W,{name:"configuration.scheduleType",control:t,defaultValue:"Daily",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"Daily",children:"Daily"}),e.jsx(v,{value:"Weekly",children:"Weekly"}),e.jsx(v,{value:"Monthly",children:"Monthly"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"scheduleMode",children:"Schedule Mode"}),e.jsx(W,{name:"configuration.scheduleMode",control:t,defaultValue:"OnTime",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"OnTime",children:"On Time"}),e.jsx(v,{value:"Every",children:"Every Interval"})]})]})})]})]}),h==="OnTime"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"onTimeValue",children:"Execution Time"}),e.jsx(D,{id:"onTimeValue",type:"time",defaultValue:"20:27",...r("configuration.onTimeValue")})]}),h==="Every"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"everyInterval",children:"Every Interval"}),e.jsx(W,{name:"configuration.everyInterval",control:t,defaultValue:"1 min",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"1 min",children:"1 minute"}),e.jsx(v,{value:"5 min",children:"5 minutes"}),e.jsx(v,{value:"15 min",children:"15 minutes"}),e.jsx(v,{value:"30 min",children:"30 minutes"}),e.jsx(v,{value:"1 hour",children:"1 hour"}),e.jsx(v,{value:"2 hours",children:"2 hours"}),e.jsx(v,{value:"4 hours",children:"4 hours"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"everyStartTime",children:"Start Time"}),e.jsx(D,{id:"everyStartTime",type:"time",defaultValue:"00:00",...r("configuration.everyStartTime")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"everyEndTime",children:"End Time"}),e.jsx(D,{id:"everyEndTime",type:"time",defaultValue:"24:00",...r("configuration.everyEndTime")})]})]}),l==="Weekly"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Days of Week"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}].map(p=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:`configuration.weeklyDays.${p.key}`,control:t,defaultValue:!1,render:({field:d})=>e.jsx("input",{type:"checkbox",id:`weekly_${p.key}`,checked:!!d.value,onChange:d.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:`weekly_${p.key}`,className:"text-sm",children:p.label})]},p.key))})]}),l==="Monthly"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"monthlyDay",children:"Day of Month"}),e.jsx(W,{name:"configuration.monthlyDay",control:t,defaultValue:"1",render:({field:p})=>e.jsxs(V,{value:p.value,onValueChange:p.onChange,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[Array.from({length:31},(d,C)=>C+1).map(d=>e.jsx(v,{value:d.toString(),children:d},d)),e.jsx(v,{value:"last",children:"Last Day of Month"})]})]})})]})]})]})]})},sl=({direction:s,control:t,register:r,errors:n,sshKeysData:a=[]})=>{var m,p,d,C;const i=Ve({control:t,name:"configuration.scheduleMode",defaultValue:"OnTime"}),o=Ve({control:t,name:"configuration.scheduleType",defaultValue:"Daily"}),h=Ve({control:t,name:"configuration.authenticationType",defaultValue:"USERNAME_PASSWORD"}),l=Ve({control:t,name:"configuration.postProcessAction",defaultValue:"ARCHIVE"}),j=Ve({control:t,name:"configuration.outputFilenameMode",defaultValue:"UseOriginal"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Connection Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"host",children:"Host *"}),e.jsx(D,{id:"host",placeholder:"sftp.bank.com",...r("configuration.host",{required:"SFTP host is required"})}),((m=n.configuration)==null?void 0:m.host)&&e.jsx("p",{className:"text-sm text-destructive",children:n.configuration.host.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"port",children:"Port"}),e.jsx(D,{id:"port",type:"number",placeholder:"22",defaultValue:"22",...r("configuration.port")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"authenticationType",children:"Authentication Type"}),e.jsx(W,{name:"configuration.authenticationType",control:t,defaultValue:"USERNAME_PASSWORD",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select authentication type"})}),e.jsxs($,{children:[e.jsx(v,{value:"USERNAME_PASSWORD",children:"Username/Password"}),e.jsx(v,{value:"PUBLIC_KEY",children:"Public Key"}),e.jsx(v,{value:"DUAL",children:"Dual Authentication"})]})]})})]})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[(h==="USERNAME_PASSWORD"||h==="DUAL")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"username",children:"Username"}),e.jsx(D,{id:"username",placeholder:"Administrator",...r("configuration.username")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"password",children:"Password"}),e.jsx(D,{id:"password",type:"password",placeholder:"••••••••",...r("configuration.password")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"serverFingerprint",children:"Server Fingerprint"}),e.jsx(D,{id:"serverFingerprint",placeholder:"SHA256:AAAA... or MD5:aa:bb:cc...",...r("configuration.serverFingerprint")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: SSH server host key fingerprint for additional security verification"})]}),(h==="PUBLIC_KEY"||h==="DUAL")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"sshKeyId",children:"SSH Key"}),e.jsx(W,{name:"configuration.sshKeyId",control:t,render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select SSH Key"})}),e.jsx($,{children:a.length>0?a.map(u=>e.jsxs(v,{value:u.id,children:[u.name," (",u.keyType,")"]},u.id)):e.jsx(v,{value:"no-keys",disabled:!0,children:"No SSH keys available"})})]})})]})]})]}),s==="RECEIVER"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Remote Destination Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"targetDirectory",children:"Target Directory *"}),e.jsx(D,{id:"targetDirectory",placeholder:"/incoming/payments",...r("configuration.targetDirectory",{required:"Target directory is required"})}),((p=n.configuration)==null?void 0:p.targetDirectory)&&e.jsx("p",{className:"text-sm text-destructive",children:n.configuration.targetDirectory.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"remoteFilePermissions",children:"Remote File Permissions"}),e.jsx(D,{id:"remoteFilePermissions",placeholder:"644",...r("configuration.remoteFilePermissions")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:"configuration.createRemoteDirectory",control:t,render:({field:g})=>e.jsx("input",{type:"checkbox",id:"createRemoteDirectory",checked:!!g.value,onChange:g.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:"createRemoteDirectory",children:"Create Remote Directory"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:"configuration.useTemporaryFileName",control:t,render:({field:g})=>e.jsx("input",{type:"checkbox",id:"useTemporaryFileName",checked:!!g.value,onChange:g.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:"useTemporaryFileName",children:"Use Temporary File Name"})]})]}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx(N,{htmlFor:"temporaryFileSuffix",children:"Temporary File Suffix"}),e.jsx(D,{id:"temporaryFileSuffix",placeholder:".tmp",...r("configuration.temporaryFileSuffix")})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Output Filename Configuration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"outputFilenameMode",children:"Output Filename Mode"}),e.jsx(W,{name:"configuration.outputFilenameMode",control:t,defaultValue:"UseOriginal",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select filename mode"})}),e.jsxs($,{children:[e.jsx(v,{value:"UseOriginal",children:"Use Original Filename"}),e.jsx(v,{value:"AddTimestamp",children:"Add Timestamp to Filename"}),e.jsx(v,{value:"Custom",children:"Custom Filename Pattern"})]})]})})]}),j==="Custom"&&e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx(N,{htmlFor:"customFilenamePattern",children:"Custom Filename Pattern"}),e.jsx(D,{id:"customFilenamePattern",...r("configuration.customFilenamePattern"),placeholder:"{original_name}_{timestamp}.{extension}"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Available variables: ","{original_name}",", ","{timestamp}",", ","{date}",", ","{extension}"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Connection Properties"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"connectionTimeout",children:"Connection Timeout (ms)"}),e.jsx(D,{id:"connectionTimeout",type:"number",placeholder:"30000",defaultValue:"30000",...r("configuration.connectionTimeout")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"socketTimeout",children:"Socket Timeout (ms)"}),e.jsx(D,{id:"socketTimeout",type:"number",placeholder:"60000",defaultValue:"60000",...r("configuration.socketTimeout")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"keepAlive",children:"Keep Alive"}),e.jsx(W,{name:"configuration.keepAlive",control:t,render:({field:g})=>e.jsxs(V,{value:g.value?"true":"false",onValueChange:u=>g.onChange(u==="true"),children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select keep alive"})}),e.jsxs($,{children:[e.jsx(v,{value:"true",children:"Enabled"}),e.jsx(v,{value:"false",children:"Disabled"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"sessionTimeout",children:"Session Timeout (ms)"}),e.jsx(D,{id:"sessionTimeout",type:"number",placeholder:"60000",defaultValue:"60000",...r("configuration.sessionTimeout")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"channelTimeout",children:"Channel Timeout (ms)"}),e.jsx(D,{id:"channelTimeout",type:"number",placeholder:"30000",defaultValue:"30000",...r("configuration.channelTimeout")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"connectionPoolSize",children:"Connection Pool Size"}),e.jsx(D,{id:"connectionPoolSize",type:"number",placeholder:"5",defaultValue:"5",min:"1",max:"20",...r("configuration.connectionPoolSize")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"strictHostKeyChecking",children:"Strict Host Key Checking"}),e.jsx(W,{name:"configuration.strictHostKeyChecking",control:t,defaultValue:!1,render:({field:g})=>e.jsxs(V,{value:g.value?"true":"false",onValueChange:u=>g.onChange(u==="true"),children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select host key checking"})}),e.jsxs($,{children:[e.jsx(v,{value:"true",children:"Enabled"}),e.jsx(v,{value:"false",children:"Disabled"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"connectionMode",children:"Connection Mode"}),e.jsx(W,{name:"configuration.connectionMode",control:t,defaultValue:"Permanently",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select connection mode"})}),e.jsxs($,{children:[e.jsx(v,{value:"Permanently",children:"Permanently"}),e.jsx(v,{value:"Per File Transfer",children:"Per File Transfer"})]})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Transfer Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"maxRetryAttempts",children:"Max Retry Attempts"}),e.jsx(D,{id:"maxRetryAttempts",type:"number",placeholder:"3",defaultValue:"3",min:"1",max:"10",...r("configuration.maxRetryAttempts")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"retryDelayMs",children:"Retry Delay (ms)"}),e.jsx(D,{id:"retryDelayMs",type:"number",placeholder:"5000",defaultValue:"5000",...r("configuration.retryDelayMs")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"maxFileSize",children:"Max File Size (MB)"}),e.jsx(D,{id:"maxFileSize",type:"number",placeholder:"100",defaultValue:"100",...r("configuration.maxFileSize")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"transferBufferSize",children:"Transfer Buffer Size (KB)"}),e.jsx(D,{id:"transferBufferSize",type:"number",placeholder:"32",defaultValue:"32",...r("configuration.transferBufferSize")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"transferMode",children:"Transfer Mode"}),e.jsx(W,{name:"configuration.transferMode",control:t,defaultValue:"BINARY",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select transfer mode"})}),e.jsxs($,{children:[e.jsx(v,{value:"BINARY",children:"Binary"}),e.jsx(v,{value:"ASCII",children:"ASCII"}),e.jsx(v,{value:"AUTO",children:"Auto"})]})]})})]})]})]}),s==="SENDER"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Remote Pickup Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"sourceDirectory",children:"Source Directory *"}),e.jsx(D,{id:"sourceDirectory",placeholder:"/outgoing/statements",...r("configuration.sourceDirectory",{required:"Source directory is required"})}),((d=n.configuration)==null?void 0:d.sourceDirectory)&&e.jsx("p",{className:"text-sm text-destructive",children:n.configuration.sourceDirectory.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"filename",children:"Filename Pattern *"}),e.jsx(D,{id:"filename",placeholder:"*.csv",...r("configuration.filename",{required:"Filename pattern is required"})}),((C=n.configuration)==null?void 0:C.filename)&&e.jsx("p",{className:"text-sm text-destructive",children:n.configuration.filename.message})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(N,{htmlFor:"excludePattern",children:"Exclude Pattern"}),e.jsx(D,{id:"excludePattern",placeholder:"*.tmp,*.processing",...r("configuration.excludePattern")})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Scheduler Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"scheduleType",children:"Schedule Type"}),e.jsx(W,{name:"configuration.scheduleType",control:t,defaultValue:"Daily",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"Daily",children:"Daily"}),e.jsx(v,{value:"Weekly",children:"Weekly"}),e.jsx(v,{value:"Monthly",children:"Monthly"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"scheduleMode",children:"Schedule Mode"}),e.jsx(W,{name:"configuration.scheduleMode",control:t,defaultValue:"OnTime",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"OnTime",children:"On Time"}),e.jsx(v,{value:"Every",children:"Every Interval"})]})]})})]})]}),i==="OnTime"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"onTimeValue",children:"Execution Time"}),e.jsx(D,{id:"onTimeValue",type:"time",defaultValue:"20:27",...r("configuration.onTimeValue")})]}),i==="Every"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"everyInterval",children:"Every Interval"}),e.jsx(W,{name:"configuration.everyInterval",control:t,defaultValue:"1 min",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[e.jsx(v,{value:"1 min",children:"1 minute"}),e.jsx(v,{value:"5 min",children:"5 minutes"}),e.jsx(v,{value:"15 min",children:"15 minutes"}),e.jsx(v,{value:"30 min",children:"30 minutes"}),e.jsx(v,{value:"1 hour",children:"1 hour"}),e.jsx(v,{value:"2 hours",children:"2 hours"}),e.jsx(v,{value:"4 hours",children:"4 hours"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"everyStartTime",children:"Start Time"}),e.jsx(D,{id:"everyStartTime",type:"time",defaultValue:"00:00",...r("configuration.everyStartTime")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"everyEndTime",children:"End Time"}),e.jsx(D,{id:"everyEndTime",type:"time",defaultValue:"24:00",...r("configuration.everyEndTime")})]})]}),o==="Weekly"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Days of Week"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}].map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:`configuration.weeklyDays.${g.key}`,control:t,defaultValue:!1,render:({field:u})=>e.jsx("input",{type:"checkbox",id:`weekly_${g.key}`,checked:!!u.value,onChange:u.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:`weekly_${g.key}`,className:"text-sm",children:g.label})]},g.key))})]}),o==="Monthly"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"monthlyDay",children:"Day of Month"}),e.jsx(W,{name:"configuration.monthlyDay",control:t,defaultValue:"1",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{})}),e.jsxs($,{children:[Array.from({length:31},(u,S)=>S+1).map(u=>e.jsx(v,{value:u.toString(),children:u},u)),e.jsx(v,{value:"last",children:"Last Day of Month"})]})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Empty File Handling"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"emptyFileHandling",children:"Empty File Handling"}),e.jsx(W,{name:"configuration.emptyFileHandling",control:t,defaultValue:"Do Not Create Message",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select empty file handling"})}),e.jsxs($,{children:[e.jsx(v,{value:"Do Not Create Message",children:"Do Not Create Message"}),e.jsx(v,{value:"Process Empty Files",children:"Process Empty Files"}),e.jsx(v,{value:"Skip Empty Files",children:"Skip Empty Files"})]})]})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Post-Processing"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"postProcessAction",children:"Post Process Action"}),e.jsx(W,{name:"configuration.postProcessAction",control:t,defaultValue:"ARCHIVE",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select post process action"})}),e.jsxs($,{children:[e.jsx(v,{value:"ARCHIVE",children:"Archive"}),e.jsx(v,{value:"KEEP_AND_MARK",children:"Keep File and Mark as Processed"}),e.jsx(v,{value:"KEEP_AND_REPROCESS",children:"Keep File and Process Again"}),e.jsx(v,{value:"DELETE",children:"Delete File"})]})]})})]}),l==="ARCHIVE"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"archiveDirectory",children:"Archive Directory"}),e.jsx(D,{id:"archiveDirectory",placeholder:"/data/archive",...r("configuration.archiveDirectory")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:"configuration.archiveWithTimestamp",control:t,render:({field:g})=>e.jsx("input",{type:"checkbox",id:"archiveWithTimestamp",checked:!!g.value,onChange:g.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:"archiveWithTimestamp",children:"Archive with Timestamp"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"compressionType",children:"Compression Type"}),e.jsx(W,{name:"configuration.compressionType",control:t,defaultValue:"NONE",render:({field:g})=>e.jsxs(V,{value:g.value,onValueChange:g.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select compression"})}),e.jsxs($,{children:[e.jsx(v,{value:"NONE",children:"None"}),e.jsx(v,{value:"GZIP",children:"GZIP"}),e.jsx(v,{value:"ZIP",children:"ZIP"})]})]})})]})]})]}),l==="KEEP_AND_MARK"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"processedDirectory",children:"Processed Directory"}),e.jsx(D,{id:"processedDirectory",placeholder:"/data/processed",...r("configuration.processedDirectory")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"processedFileSuffix",children:"Processed File Suffix"}),e.jsx(D,{id:"processedFileSuffix",placeholder:".processed",...r("configuration.processedFileSuffix")})]})]}),l==="KEEP_AND_REPROCESS"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"reprocessingDelay",children:"Reprocessing Delay (ms)"}),e.jsx(D,{id:"reprocessingDelay",type:"number",placeholder:"3600000",...r("configuration.reprocessingDelay")})]}),l==="DELETE"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"deleteBackupDirectory",children:"Delete Backup Directory"}),e.jsx(D,{id:"deleteBackupDirectory",placeholder:"/data/deleted_backup",...r("configuration.deleteBackupDirectory")})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(W,{name:"configuration.confirmDelete",control:t,render:({field:g})=>e.jsx("input",{type:"checkbox",id:"confirmDelete",checked:!!g.value,onChange:g.onChange,className:"w-4 h-4"})}),e.jsx(N,{htmlFor:"confirmDelete",children:"Confirm Delete"})]})]})]})]})]})]})},tl=({direction:s,control:t,register:r,errors:n,setValue:a})=>{var i,o,h;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"SMTP Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"smtpHost",children:"SMTP Host *"}),e.jsx(D,{id:"smtpHost",placeholder:"smtp.gmail.com",...r("configuration.smtpHost",{required:"SMTP host is required"})}),((i=n.configuration)==null?void 0:i.smtpHost)&&e.jsx("p",{className:"text-sm text-destructive",children:n.configuration.smtpHost.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"smtpPort",children:"SMTP Port *"}),e.jsx(D,{id:"smtpPort",type:"number",placeholder:"587",...r("configuration.smtpPort",{required:"SMTP port is required"})}),((o=n.configuration)==null?void 0:o.smtpPort)&&e.jsx("p",{className:"text-sm text-destructive",children:n.configuration.smtpPort.message})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"SSL/TLS Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:"configuration.sslEnabled",control:t,render:({field:l})=>e.jsx(Fe,{id:"sslEnabled",checked:!!l.value,onCheckedChange:j=>{l.onChange(j),a("configuration.startTlsEnabled",!j)}})}),e.jsx(N,{htmlFor:"sslEnabled",children:"Enable SSL (Port 465)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use SSL for secure connection. Required for port 465."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{name:"configuration.startTlsEnabled",control:t,render:({field:l})=>e.jsx(Fe,{id:"startTlsEnabled",checked:!!l.value,onCheckedChange:j=>{l.onChange(j),a("configuration.sslEnabled",!j)}})}),e.jsx(N,{htmlFor:"startTlsEnabled",children:"Enable STARTTLS (Port 587)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use STARTTLS for secure connection. Typically used with port 587."})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"fromAddress",children:"From Address (Sender Email) *"}),e.jsx(D,{id:"fromAddress",placeholder:"noreply@company.com",...r("configuration.fromAddress",{required:"From address is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}})}),((h=n.configuration)==null?void 0:h.fromAddress)&&e.jsx("p",{className:"text-sm text-destructive",children:n.configuration.fromAddress.message})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Authentication"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"smtpUsername",children:"Email Username *"}),e.jsx(D,{id:"smtpUsername",placeholder:"notifications@company.com",...r("configuration.smtpUsername",{required:"Email username is required"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"smtpPassword",children:"Email Password *"}),e.jsx(D,{id:"smtpPassword",type:"password",placeholder:"Enter email password",...r("configuration.smtpPassword",{required:"Email password is required"})})]})]})]}),s==="RECEIVER"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"recipients",children:"Recipients (comma-separated) *"}),e.jsx(D,{id:"recipients",placeholder:"user1@example.com, user2@example.com",...r("configuration.recipients",{required:"Recipients are required for receiver email"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"subject",children:"Email Subject"}),e.jsx(D,{id:"subject",placeholder:"File Transfer Notification",...r("configuration.subject")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"body",children:"Email Body"}),e.jsx("textarea",{id:"body",placeholder:"Enter the email body text...",className:"flex min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...r("configuration.body")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Files will be attached directly from the flow execution context."})]})]})]})},Ua=({type:s,direction:t,control:r,register:n,errors:a,setValue:i,sshKeysData:o=[]})=>{switch(s){case"FILE":return e.jsx(el,{direction:t,control:r,register:n,errors:a});case"SFTP":return e.jsx(sl,{direction:t,control:r,register:n,errors:a,sshKeysData:o});case"EMAIL":return e.jsx(tl,{direction:t,control:r,register:n,errors:a,setValue:i});default:return null}},al=({packageId:s,onSuccess:t,onCancel:r})=>{const n=Pe(),[a,i]=y.useState("FILE"),{register:o,handleSubmit:h,control:l,watch:j,setValue:m,formState:{errors:p}}=ht({defaultValues:{name:"",description:"",type:"FILE",direction:"SENDER",active:!0,configuration:{}}}),d=j("type"),C=j("direction"),{data:g=[]}=se({queryKey:["ssh-keys"],queryFn:async()=>{var A;const x=await k.get("/api/ssh-keys");return((A=x.data)==null?void 0:A.data)||x.data||[]},staleTime:5*60*1e3}),u=me({mutationFn:async x=>{const A={adapter:{name:x.name,description:x.description,adapterType:x.type,direction:x.direction,active:x.active,configuration:x.configuration},packageId:s};return k.post("/api/adapters",A)},onSuccess:()=>{he.success("Adapter created successfully"),n.invalidateQueries({queryKey:["package-adapters",s]}),t()},onError:x=>{he.error(x.message||"Failed to create adapter")}}),S=x=>{u.mutate(x)},E=x=>{switch(x){case"FILE":return e.jsx(pe,{className:"h-5 w-5"});case"SFTP":return e.jsx(ws,{className:"h-5 w-5"});case"EMAIL":return e.jsx(ds,{className:"h-5 w-5"});default:return e.jsx(pe,{className:"h-5 w-5"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:r,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Create Adapter"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure a new adapter for this package"})]})]})}),e.jsxs("form",{onSubmit:h(S),className:"space-y-6",children:[e.jsxs(I,{children:[e.jsx(Y,{children:e.jsx(J,{children:"Basic Information"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"name",children:"Adapter Name *"}),e.jsx(D,{id:"name",placeholder:"Enter adapter name",...o("name",{required:"Adapter name is required",minLength:{value:3,message:"Name must be at least 3 characters"}})}),p.name&&e.jsx("p",{className:"text-sm text-destructive",children:p.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"type",children:"Adapter Type *"}),e.jsx(W,{name:"type",control:l,rules:{required:"Adapter type is required"},render:({field:x})=>e.jsxs(V,{value:x.value,onValueChange:A=>{x.onChange(A),i(A)},children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select adapter type"})}),e.jsxs($,{children:[e.jsx(v,{value:"FILE",children:"File Adapter"}),e.jsx(v,{value:"SFTP",children:"SFTP Adapter"}),e.jsx(v,{value:"EMAIL",children:"Email Adapter"})]})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description"}),e.jsx(D,{id:"description",placeholder:"Enter adapter description",...o("description")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"direction",children:"Direction *"}),e.jsx(W,{name:"direction",control:l,render:({field:x})=>e.jsxs(V,{value:x.value,onValueChange:x.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select direction"})}),e.jsxs($,{children:[e.jsx(v,{value:"SENDER",children:"Sender"}),e.jsx(v,{value:"RECEIVER",children:"Receiver"})]})]})})]}),e.jsx("div",{className:"flex items-center space-x-3 pt-8",children:e.jsx(W,{name:"active",control:l,render:({field:x})=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Fe,{id:"active",checked:!!x.value,onCheckedChange:x.onChange}),e.jsx(N,{htmlFor:"active",children:x.value?"Active":"Inactive"})]})})})]})]})]}),e.jsxs(I,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[E(d),e.jsxs("span",{children:[d," Configuration"]})]})}),e.jsx(L,{children:e.jsx(Ua,{type:d,direction:C,control:l,register:o,errors:p,setValue:m,sshKeysData:g})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(w,{type:"submit",disabled:u.isPending,children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),u.isPending?"Creating...":"Create Adapter"]}),e.jsx(w,{type:"button",variant:"outline",onClick:r,children:"Cancel"})]})]})]})};function rl(s,t,r){const n={},a=i=>{s[i]!==void 0&&s[i]!==""&&s[i]!==null&&(n[i]=s[i])};return t==="FILE"?r==="SENDER"?(a("sourceDirectory"),a("filePattern"),a("exclusionMask"),a("retryInterval"),a("emptyFileHandling"),a("postProcessAction"),a("fileType"),s.postProcessAction==="ARCHIVE"&&(a("archiveDirectory"),a("archiveFileNaming"),a("createArchiveDirectory"),a("compressArchive")),a("archiveFaultySourceFiles"),s.archiveFaultySourceFiles&&a("archiveErrorDirectory"),a("processReadOnlyFiles"),a("processingSequence"),a("msecsToWaitBeforeModificationCheck"),a("maximumFileSize"),a("scheduleType"),a("scheduleMode"),s.scheduleMode==="OnTime"?a("onTimeValue"):s.scheduleMode==="Every"&&(a("everyInterval"),a("everyStartTime"),a("everyEndTime")),s.scheduleType==="Weekly"?a("weeklyDays"):s.scheduleType==="Monthly"&&a("monthlyDay")):(a("targetDirectory"),a("createTargetDirectory"),a("outputFilenameMode"),a("fileType"),s.outputFilenameMode==="Custom"&&a("customFilenamePattern"),a("fileConstructionMode"),a("writeMode"),a("emptyMessageHandling"),a("maximumConcurrency"),a("msecsToWaitBeforeModificationCheck"),a("maximumFileSize")):t==="SFTP"?(a("host"),a("port"),a("username"),a("authenticationType"),(s.authenticationType==="USERNAME_PASSWORD"||s.authenticationType==="DUAL")&&a("password"),(s.authenticationType==="SSH_KEY"||s.authenticationType==="DUAL")&&(a("sshKeyName"),a("sshKeyId"),a("sshKeyPassphrase")),a("strictHostKeyChecking"),a("serverFingerprint"),r==="SENDER"?(a("sourceDirectory"),a("filePattern"),a("postProcessAction"),s.postProcessAction==="ARCHIVE"&&(a("archiveDirectory"),a("archiveWithTimestamp"),a("compressionType")),s.postProcessAction==="KEEP_AND_MARK"&&(a("processedDirectory"),a("processedFileSuffix")),s.postProcessAction==="KEEP_AND_REPROCESS"&&a("reprocessingDelay"),s.postProcessAction==="DELETE"&&(a("confirmDelete"),a("deleteBackupDirectory")),a("scheduleType"),a("scheduleMode"),s.scheduleMode==="OnTime"?a("onTimeValue"):s.scheduleMode==="Every"&&(a("everyInterval"),a("everyStartTime"),a("everyEndTime")),s.scheduleType==="Weekly"?a("weeklyDays"):s.scheduleType==="Monthly"&&a("monthlyDay")):(a("targetDirectory"),a("remoteFilePermissions"),a("createRemoteDirectory"),a("useTemporaryFileName"),a("temporaryFileSuffix"),a("outputFilenameMode"),s.outputFilenameMode==="Custom"&&a("customFilenamePattern"))):t==="EMAIL"&&(a("smtpHost"),a("smtpPort"),a("smtpUsername"),a("smtpPassword"),a("useTls"),a("fromAddress"),r==="RECEIVER"&&(a("recipients"),a("subject"),a("bodyTemplate"),a("attachmentFilename"))),n}const nl=({packageId:s,adapterId:t,onSuccess:r,onCancel:n})=>{const a=Pe(),[i,o]=y.useState("FILE"),{register:h,handleSubmit:l,control:j,watch:m,setValue:p,reset:d,formState:{errors:C}}=ht({defaultValues:{name:"",description:"",type:"FILE",direction:"SENDER",active:!0,configuration:{}}}),g=m("type"),u=m("direction"),{data:S,isLoading:E}=se({queryKey:["adapter",t],queryFn:async()=>{var b;const f=await k.get(`/api/adapters/${t}`);return((b=f.data)==null?void 0:b.data)||f.data},enabled:!!t}),{data:x=[]}=se({queryKey:["ssh-keys"],queryFn:async()=>{var b;const f=await k.get("/api/ssh-keys");return((b=f.data)==null?void 0:b.data)||f.data||[]},staleTime:5*60*1e3});y.useEffect(()=>{S&&(d({name:S.name||"",description:S.description||"",type:S.type||S.adapterType||"FILE",direction:S.direction||"SENDER",active:S.active??!0,configuration:S.configuration||{}}),o(S.type||S.adapterType||"FILE"))},[S,d]);const A=me({mutationFn:async f=>{const b={adapter:{name:f.name,description:f.description,adapterType:f.type,direction:f.direction,active:f.active,configuration:f.configuration},packageId:s};return k.put(`/api/adapters/${t}`,b)},onSuccess:()=>{he.success("Adapter updated successfully"),a.invalidateQueries({queryKey:["package-adapters",s]}),a.invalidateQueries({queryKey:["adapter",t]}),r()},onError:f=>{he.error(f.message||"Failed to update adapter")}}),c=f=>{const b=rl(f.configuration,f.type,f.direction);A.mutate({...f,configuration:b})},F=f=>{switch(f){case"FILE":return e.jsx(pe,{className:"h-5 w-5"});case"SFTP":return e.jsx(ws,{className:"h-5 w-5"});case"EMAIL":return e.jsx(ds,{className:"h-5 w-5"});default:return e.jsx(pe,{className:"h-5 w-5"})}};return E?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading adapter..."})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:n,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Edit Adapter"}),e.jsx("p",{className:"text-muted-foreground",children:"Modify adapter configuration"})]})]}),e.jsxs("form",{onSubmit:l(c),className:"space-y-4",children:[e.jsxs(I,{children:[e.jsx(Y,{children:e.jsx(J,{children:"Basic Information"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"name",children:"Adapter Name *"}),e.jsx(D,{id:"name",placeholder:"Enter adapter name",...h("name",{required:"Adapter name is required",minLength:{value:3,message:"Name must be at least 3 characters"}})}),C.name&&e.jsx("p",{className:"text-sm text-destructive",children:C.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"type",children:"Adapter Type *"}),e.jsx(W,{name:"type",control:j,rules:{required:"Adapter type is required"},render:({field:f})=>e.jsxs(V,{value:f.value,onValueChange:b=>{f.onChange(b),o(b)},children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select adapter type"})}),e.jsxs($,{children:[e.jsx(v,{value:"FILE",children:"File Adapter"}),e.jsx(v,{value:"SFTP",children:"SFTP Adapter"}),e.jsx(v,{value:"EMAIL",children:"Email Adapter"})]})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description"}),e.jsx(D,{id:"description",placeholder:"Enter adapter description",...h("description")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"direction",children:"Direction *"}),e.jsx(W,{name:"direction",control:j,render:({field:f})=>e.jsxs(V,{value:f.value,onValueChange:f.onChange,children:[e.jsx(K,{children:e.jsx(z,{placeholder:"Select direction"})}),e.jsxs($,{children:[e.jsx(v,{value:"SENDER",children:"Sender"}),e.jsx(v,{value:"RECEIVER",children:"Receiver"})]})]})})]}),e.jsx("div",{className:"flex items-center space-x-3 pt-8",children:e.jsx(W,{name:"active",control:j,render:({field:f})=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Fe,{id:"active",checked:!!f.value,onCheckedChange:f.onChange}),e.jsx(N,{htmlFor:"active",children:f.value?"Active":"Inactive"})]})})})]})]})]}),e.jsxs(I,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[F(g),e.jsxs("span",{children:[g," Configuration"]})]})}),e.jsx(L,{children:e.jsx(Ua,{type:g,direction:u,control:j,register:h,errors:C,setValue:p,sshKeysData:x})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(w,{type:"submit",disabled:A.isPending,children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),A.isPending?"Saving...":"Save Changes"]}),e.jsx(w,{type:"button",variant:"outline",onClick:n,children:"Cancel"})]})]})]})},R=({label:s,value:t,type:r="text"})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:s}),e.jsx(D,{value:r==="password"&&t?"••••••••":(t==null?void 0:t.toString())||"-",readOnly:!0,className:"bg-muted cursor-default"})]}),Re=({label:s,checked:t})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:!!t,disabled:!0,className:"w-4 h-4 cursor-default"}),e.jsx(N,{className:"text-muted-foreground",children:s})]}),Ut=({label:s,checked:t,description:r})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{checked:!!t,disabled:!0,className:"cursor-default"}),e.jsx(N,{className:"text-muted-foreground",children:s})]}),r&&e.jsx("p",{className:"text-xs text-muted-foreground",children:r})]}),il=({packageId:s,adapterId:t,onEdit:r,onDelete:n,onBack:a})=>{const{data:i,isLoading:o}=se({queryKey:["adapter",t],queryFn:async()=>{var g;const C=await k.get(`/api/adapters/${t}`);return((g=C.data)==null?void 0:g.data)||C.data},enabled:!!t}),h=C=>{switch(C){case"FILE":return e.jsx(pe,{className:"h-5 w-5"});case"SFTP":return e.jsx(ws,{className:"h-5 w-5"});case"EMAIL":return e.jsx(ds,{className:"h-5 w-5"});default:return e.jsx(pe,{className:"h-5 w-5"})}},l=(C,g)=>{if(!g)return e.jsx(ue,{variant:"outline",children:"Disabled"});switch(C){case"STARTED":return e.jsx(ue,{variant:"default",className:"bg-green-500",children:"Running"});case"STOPPED":return e.jsx(ue,{variant:"secondary",children:"Stopped"});case"ERROR":return e.jsx(ue,{variant:"destructive",children:"Error"});default:return e.jsx(ue,{variant:"secondary",children:C})}},j=C=>e.jsx(ue,{variant:"outline",className:C==="SENDER"?"bg-amber-100 text-amber-800":"bg-cyan-100 text-cyan-800",children:C==="SENDER"?"Sender":"Receiver"});if(o)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading adapter..."})]})});if(!i)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:"Adapter not found"}),e.jsx(w,{variant:"outline",onClick:a,className:"mt-4",children:"Go Back"})]});const m=i.type||i.adapterType||"FILE",p=i.direction||"SENDER",d=i.configuration||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:a,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:i.name}),e.jsx("p",{className:"text-muted-foreground",children:i.description||"View adapter configuration"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:r,children:[e.jsx(kr,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(w,{variant:"outline",size:"sm",className:"text-destructive",onClick:n,children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[l(i.status,i.active),e.jsx(ue,{variant:"outline",children:m}),j(p)]}),e.jsxs(I,{children:[e.jsx(Y,{children:e.jsx(J,{children:"Basic Information"})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Adapter Name",value:i.name}),e.jsx(R,{label:"Adapter Type",value:m==="FILE"?"File Adapter":m==="SFTP"?"SFTP Adapter":"Email Adapter"})]}),e.jsx(R,{label:"Description",value:i.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Direction",value:p==="SENDER"?"Sender":"Receiver"}),e.jsxs("div",{className:"flex items-center space-x-3 pt-8",children:[e.jsx(Fe,{checked:!!i.active,disabled:!0,className:"cursor-default"}),e.jsx(N,{className:"text-muted-foreground",children:i.active?"Active":"Inactive"})]})]})]})]}),e.jsxs(I,{children:[e.jsx(Y,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[h(m),e.jsxs("span",{children:[m," Configuration"]})]})}),e.jsxs(L,{children:[m==="FILE"&&e.jsx(ll,{direction:p,config:d}),m==="SFTP"&&e.jsx(cl,{direction:p,config:d}),m==="EMAIL"&&e.jsx(ol,{direction:p,config:d})]})]}),e.jsxs(I,{children:[e.jsx(Y,{children:e.jsx(J,{children:"Metadata"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Created"}),e.jsx("div",{className:"font-medium",children:i.createdAt?new Date(i.createdAt).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("div",{className:"font-medium",children:i.updatedAt?new Date(i.updatedAt).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Adapter ID"}),e.jsx("div",{className:"font-mono text-xs",children:i.id})]})]})})]})]})},ll=({direction:s,config:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium mb-4",children:[s==="SENDER"?"Source":"Target"," Configuration"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s==="SENDER"?e.jsxs(e.Fragment,{children:[e.jsx(R,{label:"Source Directory",value:t.sourceDirectory}),e.jsx(R,{label:"File Name Mask",value:t.filePattern||"*"}),e.jsx(R,{label:"Exclusion Mask",value:t.exclusionMask})]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{label:"Target Directory",value:t.targetDirectory}),e.jsx(Re,{label:"Create Target Directory",checked:t.createTargetDirectory})]})})]}),s==="SENDER"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Processing Parameters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Retry Interval (secs)",value:t.retryInterval||"60"}),e.jsx(R,{label:"Empty File Handling",value:t.emptyFileHandling||"Do Not Create Message"}),e.jsx(R,{label:"Post Process Action",value:t.postProcessAction||"ARCHIVE"}),e.jsx(R,{label:"File Type",value:t.fileType||"Binary"})]})]}),s==="RECEIVER"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"File Output Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Output Filename Mode",value:t.outputFilenameMode||"UseOriginal"}),e.jsx(R,{label:"File Type",value:t.fileType||"Binary"})]}),t.outputFilenameMode==="Custom"&&e.jsx("div",{className:"mt-4",children:e.jsx(R,{label:"Custom Filename Pattern",value:t.customFilenamePattern})})]}),s==="SENDER"&&t.postProcessAction==="ARCHIVE"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Archive Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Archive Directory",value:t.archiveDirectory}),e.jsx(R,{label:"Archive File Naming",value:t.archiveFileNaming||"Original"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx(Re,{label:"Create Archive Directory if it doesn't exist",checked:t.createArchiveDirectory}),e.jsx(Re,{label:"Compress archived files",checked:t.compressArchive})]})]}),s==="SENDER"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Error Handling"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Re,{label:"Archive Faulty Source Files",checked:t.archiveFaultySourceFiles}),t.archiveFaultySourceFiles&&e.jsx(R,{label:"Directory for Archiving Files with Errors",value:t.archiveErrorDirectory}),e.jsx(Re,{label:"Process Read-Only Files",checked:t.processReadOnlyFiles}),e.jsx(R,{label:"Processing Sequence",value:t.processingSequence||"By Name"})]})]}),s==="RECEIVER"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"File Construction"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"File Construction Mode",value:t.fileConstructionMode||"Create"}),e.jsx(R,{label:"Write Mode",value:t.writeMode||"Directly"}),e.jsx(R,{label:"Empty Message Handling",value:t.emptyMessageHandling||"Write Empty File"}),e.jsx(R,{label:"Maximum Concurrency",value:t.maximumConcurrency||"1"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Advanced Parameters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Msecs to Wait Before Modification Check",value:t.msecsToWaitBeforeModificationCheck||"0"}),e.jsx(R,{label:"Maximum File Size (Bytes)",value:t.maximumFileSize||"0"})]})]}),s==="SENDER"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Scheduler Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Schedule Type",value:t.scheduleType||"Daily"}),e.jsx(R,{label:"Schedule Mode",value:t.scheduleMode==="Every"?"Every Interval":"On Time"})]}),t.scheduleMode==="OnTime"&&e.jsx("div",{className:"mt-4",children:e.jsx(R,{label:"Execution Time",value:t.onTimeValue||"20:27"})}),t.scheduleMode==="Every"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsx(R,{label:"Every Interval",value:t.everyInterval||"1 min"}),e.jsx(R,{label:"Start Time",value:t.everyStartTime||"00:00"}),e.jsx(R,{label:"End Time",value:t.everyEndTime||"24:00"})]}),t.scheduleType==="Weekly"&&t.weeklyDays&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(N,{children:"Days of Week"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(r=>{var n;return e.jsx(Re,{label:r.charAt(0).toUpperCase()+r.slice(1),checked:(n=t.weeklyDays)==null?void 0:n[r]},r)})})]}),t.scheduleType==="Monthly"&&e.jsx("div",{className:"mt-4",children:e.jsx(R,{label:"Day of Month",value:t.monthlyDay||"1"})})]})]}),cl=({direction:s,config:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Connection Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(R,{label:"Host",value:t.host}),e.jsx(R,{label:"Port",value:t.port||"22"}),e.jsx(R,{label:"Authentication Type",value:t.authenticationType==="USERNAME_PASSWORD"?"Username/Password":t.authenticationType==="PUBLIC_KEY"?"Public Key":t.authenticationType==="DUAL"?"Dual Authentication":t.authenticationType})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[(t.authenticationType==="USERNAME_PASSWORD"||t.authenticationType==="DUAL")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Username",value:t.username}),e.jsx(R,{label:"Password",value:t.password,type:"password"})]}),e.jsx(R,{label:"Server Fingerprint",value:t.serverFingerprint}),(t.authenticationType==="PUBLIC_KEY"||t.authenticationType==="DUAL")&&e.jsx(R,{label:"SSH Key",value:t.sshKeyId||"Not selected"})]})]}),s==="RECEIVER"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Remote Destination Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Target Directory",value:t.targetDirectory}),e.jsx(R,{label:"Remote File Permissions",value:t.remoteFilePermissions||"644"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx(Re,{label:"Create Remote Directory",checked:t.createRemoteDirectory}),e.jsx(Re,{label:"Use Temporary File Name",checked:t.useTemporaryFileName})]}),e.jsx("div",{className:"mt-4",children:e.jsx(R,{label:"Temporary File Suffix",value:t.temporaryFileSuffix||".tmp"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Output Filename Configuration"}),e.jsx(R,{label:"Output Filename Mode",value:t.outputFilenameMode||"UseOriginal"}),t.outputFilenameMode==="Custom"&&e.jsx("div",{className:"mt-4",children:e.jsx(R,{label:"Custom Filename Pattern",value:t.customFilenamePattern})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Connection Properties"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(R,{label:"Connection Timeout (ms)",value:t.connectionTimeout||"30000"}),e.jsx(R,{label:"Socket Timeout (ms)",value:t.socketTimeout||"60000"}),e.jsx(R,{label:"Keep Alive",value:t.keepAlive?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsx(R,{label:"Session Timeout (ms)",value:t.sessionTimeout||"60000"}),e.jsx(R,{label:"Channel Timeout (ms)",value:t.channelTimeout||"30000"}),e.jsx(R,{label:"Connection Pool Size",value:t.connectionPoolSize||"5"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx(R,{label:"Strict Host Key Checking",value:t.strictHostKeyChecking?"Enabled":"Disabled"}),e.jsx(R,{label:"Connection Mode",value:t.connectionMode||"Permanently"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Transfer Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(R,{label:"Max Retry Attempts",value:t.maxRetryAttempts||"3"}),e.jsx(R,{label:"Retry Delay (ms)",value:t.retryDelayMs||"5000"}),e.jsx(R,{label:"Max File Size (MB)",value:t.maxFileSize||"100"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx(R,{label:"Transfer Buffer Size (KB)",value:t.transferBufferSize||"32"}),e.jsx(R,{label:"Transfer Mode",value:t.transferMode||"BINARY"})]})]}),s==="SENDER"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Remote Pickup Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Source Directory",value:t.sourceDirectory}),e.jsx(R,{label:"Filename Pattern",value:t.filename})]}),e.jsx("div",{className:"mt-4",children:e.jsx(R,{label:"Exclude Pattern",value:t.excludePattern})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Scheduler Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Schedule Type",value:t.scheduleType||"Daily"}),e.jsx(R,{label:"Schedule Mode",value:t.scheduleMode==="Every"?"Every Interval":"On Time"})]}),t.scheduleMode==="OnTime"&&e.jsx("div",{className:"mt-4",children:e.jsx(R,{label:"Execution Time",value:t.onTimeValue||"20:27"})}),t.scheduleMode==="Every"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsx(R,{label:"Every Interval",value:t.everyInterval||"1 min"}),e.jsx(R,{label:"Start Time",value:t.everyStartTime||"00:00"}),e.jsx(R,{label:"End Time",value:t.everyEndTime||"24:00"})]}),t.scheduleType==="Weekly"&&t.weeklyDays&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(N,{children:"Days of Week"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(r=>{var n;return e.jsx(Re,{label:r.charAt(0).toUpperCase()+r.slice(1),checked:(n=t.weeklyDays)==null?void 0:n[r]},r)})})]}),t.scheduleType==="Monthly"&&e.jsx("div",{className:"mt-4",children:e.jsx(R,{label:"Day of Month",value:t.monthlyDay||"1"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Empty File Handling"}),e.jsx(R,{label:"Empty File Handling",value:t.emptyFileHandling||"Do Not Create Message"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Post-Processing"}),e.jsx(R,{label:"Post Process Action",value:t.postProcessAction==="ARCHIVE"?"Archive":t.postProcessAction==="KEEP_AND_MARK"?"Keep File and Mark as Processed":t.postProcessAction==="KEEP_AND_REPROCESS"?"Keep File and Process Again":t.postProcessAction==="DELETE"?"Delete File":t.postProcessAction||"Archive"}),t.postProcessAction==="ARCHIVE"&&e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(R,{label:"Archive Directory",value:t.archiveDirectory}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Re,{label:"Archive with Timestamp",checked:t.archiveWithTimestamp}),e.jsx(R,{label:"Compression Type",value:t.compressionType||"NONE"})]})]}),t.postProcessAction==="KEEP_AND_MARK"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx(R,{label:"Processed Directory",value:t.processedDirectory}),e.jsx(R,{label:"Processed File Suffix",value:t.processedFileSuffix})]}),t.postProcessAction==="KEEP_AND_REPROCESS"&&e.jsx("div",{className:"mt-4",children:e.jsx(R,{label:"Reprocessing Delay (ms)",value:t.reprocessingDelay})}),t.postProcessAction==="DELETE"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx(R,{label:"Delete Backup Directory",value:t.deleteBackupDirectory}),e.jsx(Re,{label:"Confirm Delete",checked:t.confirmDelete})]})]})]})]}),ol=({direction:s,config:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"SMTP Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"SMTP Host",value:t.smtpHost}),e.jsx(R,{label:"SMTP Port",value:t.smtpPort})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"SSL/TLS Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Ut,{label:"Enable SSL (Port 465)",checked:t.sslEnabled,description:"Use SSL for secure connection. Required for port 465."}),e.jsx(Ut,{label:"Enable STARTTLS (Port 587)",checked:t.startTlsEnabled,description:"Use STARTTLS for secure connection. Typically used with port 587."})]})]}),e.jsx(R,{label:"From Address (Sender Email)",value:t.fromAddress}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-4",children:"Authentication"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(R,{label:"Email Username",value:t.smtpUsername}),e.jsx(R,{label:"Email Password",value:t.smtpPassword,type:"password"})]})]}),s==="RECEIVER"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(R,{label:"Recipients (comma-separated)",value:t.recipients}),e.jsx(R,{label:"Email Subject",value:t.subject}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Email Body"}),e.jsx("div",{className:"min-h-[120px] w-full rounded-md border border-input bg-muted px-3 py-2 text-sm",children:t.body||"-"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Files will be attached directly from the flow execution context."})]})]})]}),dl=({className:s})=>e.jsx("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",children:e.jsx("path",{d:"M2,21L23,12L2,3V10L17,12L2,14V21Z"})}),ml=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"1"}),e.jsx("polyline",{points:"3,5 12,13 21,5"})]}),xl=({className:s})=>e.jsx("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",children:e.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z"})}),ul=({id:s,data:t,selected:r})=>{const{setNodes:n,setEdges:a}=Rs(),i=t||{label:"Adapter"},h=i.direction==="SENDER"?ml:i.direction==="RECEIVER"?dl:xl,l=()=>{n(p=>p.filter(d=>d.id!==s)),a(p=>p.filter(d=>d.source!==s&&d.target!==s))},j=()=>r?"border-blue-400 shadow-lg shadow-blue-500/30":i.direction==="SENDER"?"border-green-500 hover:border-green-400":i.direction==="RECEIVER"?"border-orange-500 hover:border-orange-400":"border-slate-500 hover:border-slate-400",m=()=>i.direction==="SENDER"?"text-green-400":i.direction==="RECEIVER"?"text-orange-400":"text-blue-400";return e.jsxs("div",{className:"flex flex-col items-center relative",children:[i.showDeleteButton&&e.jsx(w,{variant:"ghost",size:"sm",onClick:l,className:"absolute -top-3 -right-3 h-5 w-5 p-0 bg-red-500 text-white rounded-full shadow-md hover:bg-red-600 z-10",title:"Delete node",children:e.jsx(Ne,{className:"h-3 w-3"})}),e.jsxs("div",{className:`relative min-w-28 h-14 rounded-lg bg-slate-800 border-2 flex items-center justify-center px-3 transition-all ${j()}`,children:[e.jsx("div",{className:"absolute top-1 left-1",children:e.jsx(h,{className:`w-4 h-4 ${m()}`})}),e.jsx("span",{className:"text-xs font-medium text-slate-200 text-center leading-tight pt-2",children:i.label||"Adapter"})]}),e.jsx("div",{className:"mt-1 text-[10px] text-slate-500",children:i.adapterType&&i.adapterType!==null?`${i.adapterType} ${i.direction}`:`${i.direction} (Select instance)`}),i.direction==="SENDER"&&e.jsx(ve,{type:"source",position:ye.Right,className:"w-2 h-2 bg-green-500 border border-slate-800",style:{right:"-4px",top:"28px"}}),i.direction==="RECEIVER"&&e.jsx(ve,{type:"target",position:ye.Left,className:"w-2 h-2 bg-orange-500 border border-slate-800",style:{left:"-4px",top:"28px"}}),!i.direction&&e.jsxs(e.Fragment,{children:[e.jsx(ve,{type:"target",position:ye.Left,className:"w-2 h-2 bg-slate-400 border border-slate-800",style:{left:"-4px",top:"28px"}}),e.jsx(ve,{type:"source",position:ye.Right,className:"w-2 h-2 bg-slate-400 border border-slate-800",style:{right:"-4px",top:"28px"}})]})]})},hl=({className:s})=>e.jsx("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",children:e.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z"})}),pl=({className:s})=>e.jsx("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",children:e.jsx("path",{d:"M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z"})}),gl=({id:s,data:t,selected:r})=>{const{setNodes:n,setEdges:a}=Rs(),i=t||{label:"Service Task"},o=()=>{n(j=>j.filter(m=>m.id!==s)),a(j=>j.filter(m=>m.source!==s&&m.target!==s))},h=i.utilityType==="CUSTOM_SCRIPT",l=()=>i.utilityType?i.utilityType.replace(/_/g," ").toLowerCase().split(" ").map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" "):"";return e.jsxs("div",{className:"flex flex-col items-center relative",children:[i.showDeleteButton&&e.jsx(w,{variant:"ghost",size:"sm",onClick:o,className:"absolute -top-3 -right-3 h-5 w-5 p-0 bg-red-500 text-white rounded-full shadow-md hover:bg-red-600 z-10",title:"Delete node",children:e.jsx(Ne,{className:"h-3 w-3"})}),e.jsxs("div",{className:`relative min-w-28 h-14 rounded-lg bg-slate-800 border-2 flex items-center justify-center px-3 transition-all ${r?"border-amber-400 shadow-lg shadow-amber-500/30":"border-slate-500 hover:border-slate-400"}`,children:[e.jsx("div",{className:"absolute top-1 left-1",children:h?e.jsx(pl,{className:"w-4 h-4 text-amber-400"}):e.jsx(hl,{className:"w-4 h-4 text-amber-400"})}),e.jsx("span",{className:"text-xs font-medium text-slate-200 text-center leading-tight pt-2",children:i.label||l()||"Service Task"}),e.jsx(ve,{type:"target",position:ye.Left,className:"w-2 h-2 bg-slate-400 border border-slate-800",style:{left:"-4px",top:"50%",transform:"translateY(-50%)"}}),e.jsx(ve,{type:"source",position:ye.Right,className:"w-2 h-2 bg-slate-400 border border-slate-800",style:{right:"-4px",top:"50%",transform:"translateY(-50%)"}})]})]})},jl=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"none",stroke:"currentColor",strokeWidth:"3",children:[e.jsx("line",{x1:"7",y1:"7",x2:"17",y2:"17"}),e.jsx("line",{x1:"17",y1:"7",x2:"7",y2:"17"})]}),fl=({id:s,data:t,selected:r})=>{const{setNodes:n,setEdges:a}=Rs(),i=t||{label:"Gateway"},o=()=>{n(h=>h.filter(l=>l.id!==s)),a(h=>h.filter(l=>l.source!==s&&l.target!==s))};return e.jsxs("div",{className:"flex flex-col items-center relative",children:[i.showDeleteButton&&e.jsx(w,{variant:"ghost",size:"sm",onClick:o,className:"absolute -top-3 right-0 h-5 w-5 p-0 bg-red-500 text-white rounded-full shadow-md hover:bg-red-600 z-10",title:"Delete node",children:e.jsx(Ne,{className:"h-3 w-3"})}),e.jsx("div",{className:`w-11 h-11 bg-slate-800 border-2 flex items-center justify-center transition-all rotate-45 ${r?"border-amber-400 shadow-lg shadow-amber-500/30":"border-amber-500 hover:border-amber-400"}`,children:e.jsx(jl,{className:"w-5 h-5 text-amber-400 -rotate-45"})}),e.jsx("div",{className:"mt-3 text-xs font-medium text-slate-400 text-center max-w-20",children:i.label||"Gateway"}),e.jsx(ve,{type:"target",position:ye.Left,className:"w-2 h-2 bg-amber-500 border border-slate-800",style:{left:"-2px",top:"22px"}}),e.jsx(ve,{type:"source",position:ye.Right,id:"yes",className:"w-2 h-2 bg-green-500 border border-slate-800",style:{right:"-2px",top:"22px"}}),e.jsx(ve,{type:"source",position:ye.Bottom,id:"no",className:"w-2 h-2 bg-red-500 border border-slate-800",style:{bottom:"14px",left:"50%",transform:"translateX(-50%)"}})]})},vl=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"1"}),e.jsx("polyline",{points:"3,5 12,13 21,5"})]}),yl=({data:s,selected:t})=>{const r=s||{label:"Start"};return e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ve,{type:"target",position:ye.Left,className:"w-2 h-2 bg-green-500 border border-slate-800",style:{left:"-4px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("div",{className:`w-12 h-12 rounded-full bg-slate-800 border flex items-center justify-center transition-all ${t?"border-2 border-green-400 shadow-lg shadow-green-500/30":"border-green-500 hover:border-green-400"}`,children:e.jsx(vl,{className:"w-5 h-5 text-green-400"})}),e.jsx(ve,{type:"source",position:ye.Right,className:"w-2 h-2 bg-green-500 border border-slate-800",style:{right:"-4px",top:"50%",transform:"translateY(-50%)"}})]}),e.jsx("div",{className:"mt-2 text-xs font-medium text-slate-400",children:r.label||"Start"})]})},Nl=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",stroke:"currentColor",strokeWidth:"0.5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"1"}),e.jsx("polyline",{points:"3,5 12,13 21,5",fill:"none",strokeWidth:"1.5"})]}),bl=({data:s,selected:t})=>{const r=s||{label:"End"};return e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ve,{type:"target",position:ye.Left,className:"w-2 h-2 bg-red-500 border border-slate-800",style:{left:"-4px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("div",{className:`w-12 h-12 rounded-full bg-slate-800 border-[3px] flex items-center justify-center transition-all ${t?"border-red-400 shadow-lg shadow-red-500/30":"border-red-500 hover:border-red-400"}`,children:e.jsx(Nl,{className:"w-5 h-5 text-red-400"})}),e.jsx(ve,{type:"source",position:ye.Right,className:"w-2 h-2 bg-red-500 border border-slate-800",style:{right:"-4px",top:"50%",transform:"translateY(-50%)"}})]}),e.jsx("div",{className:"mt-2 text-xs font-medium text-slate-400",children:r.label||"End"})]})},wl=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"none",stroke:"currentColor",strokeWidth:"3",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Sl=({id:s,data:t,selected:r})=>{const{setNodes:n,setEdges:a}=Rs(),i=t||{label:"Parallel",parallelPaths:2},o=()=>{n(j=>j.filter(m=>m.id!==s)),a(j=>j.filter(m=>m.source!==s&&m.target!==s))},l=(()=>{const j=[],m=i.parallelPaths||2;if(m<=2)j.push({id:"out-1",top:"16px"},{id:"out-2",top:"28px"});else for(let p=0;p<m;p++){const d=10+p*12;j.push({id:`out-${p+1}`,top:`${d}px`})}return j.slice(0,m)})();return e.jsxs("div",{className:"flex flex-col items-center relative",children:[i.showDeleteButton&&e.jsx(w,{variant:"ghost",size:"sm",onClick:o,className:"absolute -top-3 right-0 h-5 w-5 p-0 bg-red-500 text-white rounded-full shadow-md hover:bg-red-600 z-10",title:"Delete node",children:e.jsx(Ne,{className:"h-3 w-3"})}),e.jsx("div",{className:`w-11 h-11 bg-slate-800 border-2 flex items-center justify-center transition-all rotate-45 ${r?"border-green-400 shadow-lg shadow-green-500/30":"border-green-500 hover:border-green-400"}`,children:e.jsx(wl,{className:"w-5 h-5 text-green-400 -rotate-45"})}),e.jsx("div",{className:"mt-3 text-xs font-medium text-slate-400 text-center",children:i.label||"Parallel"}),e.jsx(ve,{type:"target",position:ye.Left,className:"w-2 h-2 bg-green-500 border border-slate-800",style:{left:"-2px",top:"22px"}}),l.map((j,m)=>e.jsx(ve,{type:"source",position:ye.Right,id:j.id,className:"w-2 h-2 bg-green-500 border border-slate-800",style:{right:"-2px",top:j.top}},j.id))]})},Cl=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",stroke:"currentColor",strokeWidth:"0.5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"1"}),e.jsx("polyline",{points:"3,5 12,13 21,5",fill:"none",strokeWidth:"1.5"})]}),El=({data:s,selected:t})=>{const r=s||{label:"Message End"};return e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ve,{type:"target",position:ye.Left,className:"w-2 h-2 bg-blue-500 border border-slate-800",style:{left:"-4px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("div",{className:`w-12 h-12 rounded-full bg-slate-800 border-[3px] flex items-center justify-center transition-all ${t?"border-blue-400 shadow-lg shadow-blue-500/30":"border-blue-500 hover:border-blue-400"}`,children:e.jsx(Cl,{className:"w-5 h-5 text-blue-400"})}),e.jsx(ve,{type:"source",position:ye.Right,className:"w-2 h-2 bg-blue-500 border border-slate-800",style:{right:"-4px",top:"50%",transform:"translateY(-50%)"}})]}),e.jsx("div",{className:"mt-2 text-xs font-medium text-slate-400 text-center max-w-20",children:r.label||"Message End"})]})},Tl=({id:s,sourceX:t,sourceY:r,targetX:n,targetY:a,sourcePosition:i,targetPosition:o,data:h,selected:l,markerEnd:j})=>{const{setEdges:m}=Rs(),p=h||{},[d,C]=Ie.useState(!1),g=()=>{m(c=>c.filter(F=>F.id!==s))},[u,S,E]=Va({sourceX:t,sourceY:r,sourcePosition:i,targetX:n,targetY:a,targetPosition:o}),x=()=>{switch(p.condition){case"true":return"hsl(142, 76%, 36%)";case"false":return"hsl(0, 84%, 60%)";default:return"hsl(217, 91%, 60%)"}},A=()=>l?3:2;return e.jsxs(e.Fragment,{children:[e.jsx(za,{path:u,markerEnd:j,style:{stroke:x(),strokeWidth:A(),strokeDasharray:"none"},onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1)}),e.jsx(Ba,{children:e.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${S}px,${E}px)`,pointerEvents:"all"},className:"nodrag nopan",children:e.jsx("div",{className:"flex items-center",children:(l||d)&&e.jsx("button",{onClick:g,className:`w-6 h-6 bg-destructive text-white rounded-full flex items-center justify-center hover:bg-destructive/80 transition-all shadow-md z-10 ${l?"opacity-100 scale-110":"opacity-90 hover:opacity-100 hover:scale-105"}`,title:"Delete connection",children:e.jsx(Ne,{className:"h-3 w-3"})})})})})]})},kl=ln,ls=cn,cs=on,We=Ie.forwardRef(({className:s,sideOffset:t=4,...r},n)=>e.jsx(fa,{ref:n,sideOffset:t,className:U("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r}));We.displayName=fa.displayName;const Al=({onSave:s,onExecute:t,onClear:r,onDelete:n,onExport:a,onImport:i,onToggleNodeSidebar:o,onAutoLayout:h,isNodeSidebarVisible:l=!1,readOnly:j=!1,canExecute:m=!0,canSave:p=!0,canDelete:d=!0,isExecuting:C=!1,isSaving:g=!1,className:u=""})=>e.jsx(kl,{children:e.jsxs("div",{className:`flex items-center space-x-2 p-3 bg-background border-b ${u}`,children:[!j&&e.jsxs(e.Fragment,{children:[e.jsxs(ls,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(w,{variant:"default",size:"sm",onClick:s,disabled:!p||g,className:"space-x-2",children:[e.jsx(Ue,{className:`h-4 w-4 ${g?"animate-pulse":""}`}),e.jsx("span",{children:g?"Saving...":"Save"})]})}),e.jsx(We,{children:e.jsx("p",{children:g?"Saving flow to database...":"Save flow configuration"})})]}),e.jsxs(ls,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(w,{variant:"outline",size:"sm",onClick:t,disabled:!m||C,className:"space-x-2",children:[e.jsx(Xe,{className:`h-4 w-4 ${C?"animate-pulse":""}`}),e.jsx("span",{children:C?"Executing...":"Execute"})]})}),e.jsx(We,{children:e.jsx("p",{children:"Execute flow with current configuration"})})]}),e.jsx(As,{orientation:"vertical",className:"h-6"})]}),e.jsxs(ls,{children:[e.jsx(cs,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",onClick:o,children:l?e.jsx(Ms,{className:"h-4 w-4"}):e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsx(We,{children:e.jsxs("p",{children:[l?"Hide":"Show"," node panel"]})})]}),!j&&e.jsxs(ls,{children:[e.jsx(cs,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",onClick:h,children:e.jsx(Ar,{className:"h-4 w-4"})})}),e.jsx(We,{children:e.jsx("p",{children:"Auto-arrange flow layout"})})]}),e.jsx(As,{orientation:"vertical",className:"h-6"}),e.jsxs(ls,{children:[e.jsx(cs,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(Le,{className:"h-4 w-4"})})}),e.jsx(We,{children:e.jsx("p",{children:"Export flow"})})]}),!j&&e.jsxs(ls,{children:[e.jsx(cs,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(es,{className:"h-4 w-4"})})}),e.jsx(We,{children:e.jsx("p",{children:"Import flow"})})]}),e.jsx(As,{orientation:"vertical",className:"h-6"}),!j&&e.jsxs(e.Fragment,{children:[e.jsxs(ls,{children:[e.jsx(cs,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(ut,{className:"h-4 w-4"})})}),e.jsx(We,{children:e.jsx("p",{children:"Clear canvas"})})]}),e.jsxs(ls,{children:[e.jsx(cs,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",onClick:n,disabled:!d,className:"text-destructive hover:text-destructive",children:e.jsx(rs,{className:"h-4 w-4"})})}),e.jsx(We,{children:e.jsx("p",{children:"Delete flow"})})]})]})]})}),Fl=dn,Pl=mn,Dl=xn,Il=({onNodeAdd:s,className:t=""})=>{const[r,n]=y.useState(["adapters","gateways","utilities"]),a=[{id:"sender-adapter",type:"adapter",label:"Sender Adapter",icon:Le,category:"adapters",description:"Configure sender adapter type (File, SFTP)",data:{label:"Sender Adapter",adapterType:null,direction:"SENDER",availableTypes:["FILE","SFTP"]}},{id:"receiver-adapter",type:"adapter",label:"Receiver Adapter",icon:es,category:"adapters",description:"Configure receiver adapter type (File, SFTP, Email)",data:{label:"Receiver Adapter",adapterType:null,direction:"RECEIVER",availableTypes:["FILE","SFTP","EMAIL"]}},{id:"start-node",type:"start",label:"Start Event",icon:Xe,category:"events",description:"BPMN message start event",data:{label:"Start",eventType:"message"}},{id:"end-node",type:"end",label:"End Event",icon:ne,category:"events",description:"BPMN message end event",data:{label:"End",eventType:"message"}},{id:"message-end-node",type:"messageEnd",label:"Message End",icon:ds,category:"events",description:"Throw message end event",data:{label:"Message End",eventType:"MESSAGE_END",messagePayload:""}},{id:"decision-node",type:"decision",label:"Exclusive Gateway",icon:Fr,category:"gateways",description:"BPMN XOR gateway - conditional branching",data:{label:"Gateway",conditionType:"ALWAYS_TRUE",condition:"true"}},{id:"parallel-split-node",type:"parallelSplit",label:"Parallel Gateway",icon:Pr,category:"gateways",description:"BPMN AND gateway - parallel execution",data:{label:"Parallel",parallelPaths:2}},{id:"pgp-encrypt",type:"utility",label:"PGP Encrypt",icon:fs,category:"utilities",description:"Encrypt files with PGP",data:{label:"PGP Encrypt",utilityType:"PGP_ENCRYPT",configuration:{algorithm:"RSA-4096"}}},{id:"pgp-decrypt",type:"utility",label:"PGP Decrypt",icon:Dr,category:"utilities",description:"Decrypt files with PGP",data:{label:"PGP Decrypt",utilityType:"PGP_DECRYPT",configuration:{algorithm:"RSA-4096"}}},{id:"unzip-extract",type:"utility",label:"Unzip",icon:Ir,category:"utilities",description:"Extract files from ZIP archives",data:{label:"Unzip",utilityType:"ZIP_EXTRACT",configuration:{extractToDirectory:"",preserveStructure:!0}}}],i=[{id:"adapters",label:"Adapters",color:"bg-blue-500/20 text-blue-400"},{id:"events",label:"Events",color:"bg-green-500/20 text-green-400"},{id:"gateways",label:"Gateways",color:"bg-amber-500/20 text-amber-400"},{id:"utilities",label:"Service Tasks",color:"bg-purple-500/20 text-purple-400"}],o=j=>{n(m=>m.includes(j)?m.filter(p=>p!==j):[...m,j])},h=(j,m)=>{j.dataTransfer.setData("application/reactflow",JSON.stringify({nodeType:m.type,nodeData:m.data})),j.dataTransfer.effectAllowed="move"},l=j=>{s&&s(j.type,j.data)};return e.jsxs("div",{className:`w-80 bg-slate-900 border-r border-slate-700 flex flex-col ${t}`,children:[e.jsxs("div",{className:"p-4 border-b border-slate-700",children:[e.jsx("h3",{className:"font-semibold text-lg text-slate-100",children:"BPMN Elements"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Drag nodes to the canvas or click to add"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:i.map(j=>{const m=a.filter(d=>d.category===j.id),p=r.includes(j.id);return e.jsx(I,{className:"bg-slate-800 border-slate-700",children:e.jsxs(Fl,{open:p,onOpenChange:()=>o(j.id),children:[e.jsx(Pl,{asChild:!0,children:e.jsx(Y,{className:"py-2 px-3 cursor-pointer hover:bg-slate-700/50 transition-colors",children:e.jsxs(J,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ue,{variant:"secondary",className:j.color,children:m.length}),e.jsx("span",{className:"text-slate-200",children:j.label})]}),p?e.jsx(xt,{className:"h-4 w-4 text-slate-400"}):e.jsx(Fs,{className:"h-4 w-4 text-slate-400"})]})})}),e.jsx(Dl,{children:e.jsx(L,{className:"pt-0 px-2 pb-2 space-y-1",children:m.map(d=>{const C=d.icon;return e.jsx("div",{draggable:!0,onDragStart:g=>h(g,d),className:"group p-2 border border-slate-600 rounded-lg cursor-grab active:cursor-grabbing hover:bg-slate-700/50 hover:border-slate-500 transition-all",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-7 h-7 bg-slate-700 rounded flex items-center justify-center flex-shrink-0",children:e.jsx(C,{className:"h-4 w-4 text-slate-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-xs text-slate-200 truncate",children:d.label}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>l(d),className:"opacity-0 group-hover:opacity-100 transition-opacity h-5 w-5 p-0 text-slate-400 hover:text-slate-200",children:e.jsx(Te,{className:"h-3 w-3"})})]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5 leading-tight",children:d.description})]})]})},d.id)})})})]})},j.id)})}),e.jsx("div",{className:"p-3 border-t border-slate-700 bg-slate-800/50",children:e.jsx("p",{className:"text-[10px] text-slate-500 text-center",children:"Drag nodes to canvas or click + to add"})})]})},Ll=({selectedNode:s,onNodeUpdate:t,onClose:r,className:n=""})=>{const[a,i]=y.useState({}),{data:o}=se({queryKey:["interfaces"],queryFn:Tn.getAllInterfaces}),h=(o==null?void 0:o.data)||[];y.useEffect(()=>{s&&i({label:s.data.label||"",adapterType:s.data.adapterType||null,direction:s.data.direction||"",adapterId:s.data.adapterId||"",configuration:s.data.configuration||{},inboundAdapter:s.data.inboundAdapter||"",...s.data})},[s]);const l=()=>{s&&(t(s.id,a),r())},j=(g,u)=>{i(S=>({...S,[g]:u}))},m=()=>{if((s==null?void 0:s.type)==="start")return de;if((s==null?void 0:s.type)==="end")return de;if((s==null?void 0:s.type)==="messageEnd")return ds;if((s==null?void 0:s.type)==="decision")return de;if((s==null?void 0:s.type)==="utility")return de;switch(a.adapterType){case"FILE":return a.direction==="SENDER"?Lr:Rr;case"SFTP":return ws;case"EMAIL":return ds;default:return de}},p=()=>a.direction?h.filter(g=>{const u=g.direction===a.direction;return a.adapterType&&a.adapterType!=="null"?u&&g.adapterType===a.adapterType:u}):[];if(!s)return e.jsx("div",{className:`w-80 bg-background border-l flex flex-col ${n}`,children:e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Properties"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a node to configure its properties"})]})});const d=m(),C=p();return e.jsxs("div",{className:`w-80 bg-background border-l flex flex-col ${n}`,children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-lg flex items-center justify-center",children:e.jsx(d,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Node Properties"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.type==="start"?"Start Process Configuration":s.type==="end"?"End Process Configuration":s.type==="messageEnd"?"Message End Configuration":s.type==="adapter"?"Adapter Configuration":"Node Configuration"})]})]}),e.jsx(w,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(Ne,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs(I,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(J,{className:"text-sm",children:"Basic Properties"})}),e.jsxs(L,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"node-label",children:"Label"}),e.jsx(D,{id:"node-label",value:a.label||"",onChange:g=>j("label",g.target.value),placeholder:"Enter node label",className:"text-sm"})]}),s.type==="start"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Node Type"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-muted/20 p-2 rounded",children:"Start Event - System node that initiates the flow process"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a system node and cannot be configured. Use adapter nodes to connect external systems."})]}),s.type==="end"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Node Type"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-muted/20 p-2 rounded",children:"End Event - System node that terminates the flow process"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a system node and cannot be configured. Use adapter nodes to connect external systems."})]}),s.type==="messageEnd"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Node Type"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-muted/20 p-2 rounded",children:"Message End Event - System node for message-based flow termination"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a system node and cannot be configured. Use adapter nodes to connect external systems."})]}),s.type==="adapter"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Adapter Type"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-muted/20 p-2 rounded",children:a.adapterType&&a.adapterType!==null&&a.adapterType!==""?`${a.adapterType} ${a.direction}`:`${a.direction} (Select adapter instance to set type)`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"adapter-instance",children:"Adapter Instance"}),e.jsxs(V,{value:a.adapterId||"",onValueChange:g=>{const u=h.find(E=>E.id===g),S={adapterId:g,...u&&{label:u.name,adapterType:u.adapterType,configuration:u.configuration}};i(E=>({...E,...S})),s&&t(s.id,S)},children:[e.jsx(K,{className:"w-full",children:e.jsx(z,{placeholder:"Select adapter instance"})}),e.jsx($,{children:C.map(g=>e.jsxs(v,{value:g.id,children:[g.name," - ",g.adapterType]},g.id))})]}),C.length===0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["No ",a.direction," adapters available. Create one in Adapter Configuration first."]})]})]})]})]}),a.configuration&&Object.keys(a.configuration).length>0&&e.jsxs(I,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(J,{className:"text-sm",children:"Configuration Summary"})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-2 text-sm overflow-hidden",children:[a.adapterType==="FILE"&&e.jsxs(e.Fragment,{children:[a.configuration.sourceDirectory&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Source:"}),e.jsx("span",{className:"font-mono text-xs truncate",title:a.configuration.sourceDirectory,children:a.configuration.sourceDirectory})]}),a.configuration.targetDirectory&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Target:"}),e.jsx("span",{className:"font-mono text-xs truncate",title:a.configuration.targetDirectory,children:a.configuration.targetDirectory})]}),a.configuration.filePattern&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Pattern:"}),e.jsx("span",{className:"font-mono text-xs truncate",children:a.configuration.filePattern})]})]}),a.adapterType==="SFTP"&&e.jsxs(e.Fragment,{children:[a.configuration.host&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Host:"}),e.jsxs("span",{className:"font-mono text-xs truncate",children:[a.configuration.host,":",a.configuration.port]})]}),a.configuration.remoteDirectory&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remote Dir:"}),e.jsx("span",{className:"font-mono text-xs truncate",title:a.configuration.remoteDirectory,children:a.configuration.remoteDirectory})]})]}),a.adapterType==="EMAIL"&&e.jsxs(e.Fragment,{children:[a.configuration.smtpHost&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"SMTP:"}),e.jsxs("span",{className:"font-mono text-xs truncate",children:[a.configuration.smtpHost,":",a.configuration.smtpPort]})]}),a.configuration.recipients&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Recipients:"}),e.jsx("span",{className:"font-mono text-xs truncate",title:Array.isArray(a.configuration.recipients)?a.configuration.recipients.join(", "):String(a.configuration.recipients),children:Array.isArray(a.configuration.recipients)?a.configuration.recipients.join(", "):String(a.configuration.recipients)})]})]})]})})]}),s.type==="decision"&&e.jsxs(I,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(J,{className:"text-sm",children:"Decision Logic"})}),e.jsxs(L,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"condition-type",children:"Condition Type"}),e.jsxs(V,{value:a.conditionType||"ALWAYS_TRUE",onValueChange:g=>j("conditionType",g),children:[e.jsx(K,{className:"w-full",children:e.jsx(z,{placeholder:"Select condition type"})}),e.jsxs($,{children:[e.jsx(v,{value:"ALWAYS_TRUE",children:"Always True"}),e.jsx(v,{value:"FILE_EXISTS",children:"File Exists"}),e.jsx(v,{value:"FILE_SIZE",children:"File Size Check"}),e.jsx(v,{value:"CUSTOM",children:"Custom Expression"})]})]})]}),a.conditionType==="CUSTOM"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"condition",children:"Condition Expression"}),e.jsx(D,{id:"condition",value:a.condition||"",onChange:g=>j("condition",g.target.value),placeholder:"Enter condition expression",className:"text-sm font-mono"})]})]})]}),s.type==="utility"&&e.jsxs(I,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(J,{className:"text-sm",children:"Utility Configuration"})}),e.jsx(L,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Utility Type"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-muted/20 p-2 rounded",children:a.utilityType})]})})]})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(w,{onClick:l,size:"sm",className:"flex-1",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Save Changes"]}),e.jsx(w,{variant:"outline",onClick:r,size:"sm",children:"Cancel"})]})})]})},Rl={direction:"LR",nodeWidth:180,nodeHeight:80,rankSeparation:120,nodeSeparation:80},Ml={start:{width:120,height:60},end:{width:120,height:60},messageEnd:{width:140,height:60},adapter:{width:200,height:100},utility:{width:160,height:80},decision:{width:140,height:80},parallelSplit:{width:160,height:80}};function Oa(s,t,r={}){const n={...Rl,...r},a=new Nt.graphlib.Graph;return a.setDefaultEdgeLabel(()=>({})),a.setGraph({rankdir:n.direction,ranksep:n.rankSeparation,nodesep:n.nodeSeparation,marginx:40,marginy:40}),s.forEach(o=>{const h=Ml[o.type||"default"]||{width:n.nodeWidth,height:n.nodeHeight};a.setNode(o.id,{width:h.width,height:h.height})}),t.forEach(o=>{a.setEdge(o.source,o.target)}),Nt.layout(a),{nodes:s.map(o=>{const h=a.node(o.id);return{...o,position:{x:h.x-h.width/2,y:h.y-h.height/2},data:{...o.data,computedWidth:h.width,computedHeight:h.height}}}),edges:t}}function Ot(s,t){return Oa(s,t,{direction:"LR",rankSeparation:120,nodeSeparation:80})}function Ul(s,t){return Oa(s,t,{direction:"LR",nodeWidth:140,nodeHeight:60,rankSeparation:80,nodeSeparation:40})}function Ol(s,t){const r=s.length,n=t.length;return r<=6&&n<=r+2?Ot(s,t):r>10?Ul(s,t):Ot(s,t)}const _l={start:yl,end:bl,messageEnd:El,adapter:ul,utility:gl,decision:fl,parallelSplit:Sl},Kl={flow:Tl},_t=[{id:"start-event-1",type:"start",position:{x:100,y:120},data:{label:"Start",eventType:"message",inboundAdapter:"",showDeleteButton:!1}},{id:"end-event-1",type:"end",position:{x:400,y:120},data:{label:"End",eventType:"message",adapterType:"end-process",adapterId:"",showDeleteButton:!1}}],gs="#3b82f6",$l="#60a5fa",Kt=[{id:"flow-start-to-end",source:"start-event-1",target:"end-event-1",type:"flow",markerEnd:{type:"arrowclosed",color:gs},style:{stroke:gs,strokeWidth:1.5}}],yt=({flowData:s,onFlowChange:t,onSave:r,onExecute:n,readOnly:a=!1,className:i="",isSaving:o=!1})=>{var Ns,_s;const[h,l,j]=qa((Ns=s==null?void 0:s.nodes)!=null&&Ns.length?s.nodes:_t),[m,p,d]=Ha((_s=s==null?void 0:s.edges)!=null&&_s.length?s.edges:Kt),[C,g]=y.useState(null),[u,S]=y.useState(null),[E,x]=y.useState(!1),[A,c]=y.useState(!1),[F,f]=y.useState(null),b=y.useRef(null),[T,M]=y.useState(null),O=y.useCallback(H=>{var we,is,B,Q;const G=h.find(ie=>ie.id===H.source),Z=h.find(ie=>ie.id===H.target);return!G||!Z||H.source===H.target?!1:G.type==="adapter"&&((we=G.data)==null?void 0:we.direction)==="SENDER"?Z.type==="start":G.type==="start"?Z.type==="utility"||Z.type==="decision"||Z.type==="parallelSplit"||Z.type==="end"||Z.type==="messageEnd":G.type==="end"?Z.type==="adapter"&&((is=Z.data)==null?void 0:is.direction)==="RECEIVER":G.type==="messageEnd"?Z.type==="adapter"&&((B=Z.data)==null?void 0:B.direction)==="RECEIVER":G.type==="utility"||G.type==="decision"||G.type==="parallelSplit"?Z.type==="utility"||Z.type==="decision"||Z.type==="parallelSplit"||Z.type==="end"||Z.type==="messageEnd":!(G.type==="adapter"&&((Q=G.data)==null?void 0:Q.direction)==="RECEIVER")},[h]),q=y.useCallback(H=>{if(O(H)){const G={...H,type:"flow",markerEnd:{type:"arrowclosed",color:gs},style:{stroke:gs,strokeWidth:2,strokeDasharray:"none"}};p(Z=>Ga(G,Z))}},[p,O]),ee=y.useCallback((H,G)=>{O(G)&&p(Z=>Wa(H,G,Z))},[p,O]),te=y.useCallback((H,G)=>{a||(["start","end","messageEnd"].includes(G.type||"")?(g(null),S(null),c(!1),f(null)):(g(G),S(null),c(!0),x(!1),f(G.id),setTimeout(()=>f(null),3e3)))},[a]),_e=y.useCallback((H,G)=>{a||(S(G),g(null),f(null),c(!1),x(!1))},[a]),Ke=y.useCallback(()=>{a||(g(null),S(null),f(null),c(!1))},[a]),P=y.useCallback(H=>{H.preventDefault(),H.dataTransfer.dropEffect="move"},[]),ae=y.useCallback(H=>{if(H.preventDefault(),!!T)try{const G=JSON.parse(H.dataTransfer.getData("application/reactflow")),Z=T.screenToFlowPosition({x:H.clientX,y:H.clientY}),we={id:`${G.nodeType}-${Date.now()}`,type:G.nodeType,position:Z,data:G.nodeData};l(is=>is.concat(we))}catch(G){console.error("Error parsing dropped node data:",G)}},[l,T]),xe=y.useCallback(()=>{if(C){if(["start","end","messageEnd"].includes(C.type||"")){console.warn("System nodes cannot be deleted");return}l(G=>G.filter(Z=>Z.id!==C.id)),p(G=>G.filter(Z=>Z.source!==C.id&&Z.target!==C.id)),g(null)}else u&&(p(H=>H.filter(G=>G.id!==u.id)),S(null))},[C,u,l,p]),je=y.useCallback(()=>{l(_t),p(Kt),g(null)},[l,p]),_=y.useCallback(()=>{const H={id:(s==null?void 0:s.id)||`flow-${Date.now()}`,name:(s==null?void 0:s.name)||"Untitled Flow",description:(s==null?void 0:s.description)||"",nodes:h,edges:m,active:(s==null?void 0:s.active)||!0};r==null||r(H),t==null||t(H)},[s,h,m,r,t]),re=y.useCallback(()=>{const H={id:(s==null?void 0:s.id)||`flow-${Date.now()}`,name:(s==null?void 0:s.name)||"Untitled Flow",description:(s==null?void 0:s.description)||"",nodes:h,edges:m,active:(s==null?void 0:s.active)||!0};n==null||n(H)},[s,h,m,n]),fe=y.useCallback((H,G)=>{const Z={x:250,y:200},we={id:`${H}-${Date.now()}`,type:H,position:Z,data:G};l(is=>is.concat(we))},[l]),xs=y.useCallback((H,G)=>{l(Z=>Z.map(we=>we.id===H?{...we,data:{...we.data,...G}}:we)),g(null),c(!1)},[l]),ys=y.useCallback(()=>{const{nodes:H,edges:G}=Ol(h,m);l(H),p(G)},[h,m,l,p]),us=y.useCallback(()=>{g(null),c(!1)},[]);return Ie.useEffect(()=>{const H=G=>{!a&&G.key==="Delete"&&(C||u)&&(G.preventDefault(),xe())};return window.addEventListener("keydown",H),()=>{window.removeEventListener("keydown",H)}},[C,u,xe,a]),Ie.useEffect(()=>{if(t){const H={id:(s==null?void 0:s.id)||`flow-${Date.now()}`,name:(s==null?void 0:s.name)||"Untitled Flow",description:(s==null?void 0:s.description)||"",nodes:h,edges:m,active:(s==null?void 0:s.active)||!0};t(H)}},[h,m,s,t]),e.jsxs("div",{className:`flex h-full ${i}`,children:[!a&&E&&e.jsx(Il,{onNodeAdd:fe}),!a&&A&&e.jsx(Ll,{selectedNode:C,onNodeUpdate:xs,onClose:us}),e.jsx("div",{className:"flex-1 relative",ref:b,children:e.jsxs(Ya,{nodes:h.map(H=>({...H,data:{...H.data,showDeleteButton:F===H.id}})),edges:m.map(H=>{var G,Z;return{...H,style:{...H.style,stroke:(u==null?void 0:u.id)===H.id?$l:((G=H.style)==null?void 0:G.stroke)||gs,strokeWidth:(u==null?void 0:u.id)===H.id?3:((Z=H.style)==null?void 0:Z.strokeWidth)||2}}}),onNodesChange:j,onEdgesChange:d,onConnect:q,onReconnect:ee,isValidConnection:O,onNodeClick:te,onEdgeClick:_e,onPaneClick:Ke,onDrop:ae,onDragOver:P,onInit:M,nodeTypes:_l,edgeTypes:Kl,connectionMode:Qa.Strict,fitView:!0,fitViewOptions:{padding:.4,includeHiddenNodes:!1,minZoom:.8,maxZoom:1.5},defaultViewport:{x:0,y:0,zoom:1},className:"bg-slate-900",snapToGrid:!0,snapGrid:[20,20],deleteKeyCode:"Delete",multiSelectionKeyCode:"Control",defaultEdgeOptions:{type:"flow",markerEnd:{type:"arrowclosed",color:gs},style:{stroke:gs,strokeWidth:1.5,strokeDasharray:"none"}},children:[e.jsx(Ja,{color:"#334155",gap:20,size:1}),e.jsx(Xa,{className:"bg-slate-800 border border-slate-700 rounded shadow-lg [&>button]:bg-slate-800 [&>button]:border-slate-700 [&>button]:text-slate-300 [&>button:hover]:bg-slate-700"}),e.jsx(Za,{className:"bg-slate-800 border border-slate-700 rounded shadow-lg",nodeColor:H=>{switch(H.type){case"start":return"#1e293b";case"end":return"#1e293b";case"messageEnd":return"#1e293b";case"adapter":return"#1e293b";case"utility":return"#1e293b";case"decision":return"#1e293b";case"parallelSplit":return"#1e293b";default:return"#1e293b"}}}),!a&&e.jsx(bt,{position:"top-left",children:e.jsx(Al,{onSave:_,onExecute:re,onClear:je,onDelete:xe,onAutoLayout:ys,onToggleNodeSidebar:()=>{x(!E),E||(c(!1),g(null))},isNodeSidebarVisible:E,canSave:!0,canExecute:h.length>0,canDelete:!!C||!!u,isSaving:o})}),e.jsx(bt,{position:"top-right",className:"bg-card border border-border rounded-md p-2",children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("div",{className:"font-medium text-foreground",children:(s==null?void 0:s.name)||"Untitled Flow"}),(s==null?void 0:s.description)&&e.jsx("div",{className:"text-muted-foreground text-xs",children:s.description}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[h.length," nodes, ",m.length," connections"]})]})})]})})]})},Vl=({packageId:s,onSuccess:t,onCancel:r})=>{const n=Pe(),[a,i]=y.useState(""),[o,h]=y.useState(""),[l,j]=y.useState(!1),[m,p]=y.useState({id:`flow-${Date.now()}`,name:"",description:"",nodes:[],edges:[],active:!0}),d=me({mutationFn:async S=>k.post("/api/flows",S),onSuccess:()=>{he.success("Flow created successfully"),n.invalidateQueries({queryKey:["package-flows",s]}),t()},onError:S=>{var x,A;const E=((A=(x=S.response)==null?void 0:x.data)==null?void 0:A.message)||S.message||"Failed to create flow";he.error(E)}}),C=S=>{p(S)},g=async S=>{if(!a.trim()){he.error("Flow Name is required");return}j(!0);try{const E={flow:{name:a.trim(),description:o.trim(),flowDefinition:{nodes:S.nodes,edges:S.edges},active:S.active},packageId:s};await d.mutateAsync(E)}finally{j(!1)}},u=async S=>{he.error("Please save the flow before executing")};return e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"border-b bg-background relative z-10 shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:r,className:"space-x-2",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Flows"})]}),e.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Create Visual Flow"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(w,{variant:"outline",size:"sm",onClick:r,className:"space-x-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Cancel"})]})})]}),e.jsx("div",{className:"px-4 py-4 bg-muted/50 border-t border-border",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-2xl",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-foreground block mb-1",children:["Flow Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a,onChange:S=>i(S.target.value),placeholder:"Enter flow name",required:!0,className:`w-full px-3 py-2 border rounded-md text-foreground placeholder:text-muted-foreground ${a.trim()?"border-input":"border-red-500"} bg-background focus:outline-none focus:ring-2 focus:ring-ring`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground block mb-1",children:"Description"}),e.jsx("input",{type:"text",value:o,onChange:S=>h(S.target.value),placeholder:"Enter description",className:"w-full px-3 py-2 border border-input rounded-md text-foreground placeholder:text-muted-foreground bg-background focus:outline-none focus:ring-2 focus:ring-ring"})]})]})})]}),e.jsx("div",{className:"flex-1 min-h-0 relative",children:e.jsx(yt,{flowData:m,onFlowChange:C,onSave:g,onExecute:u,readOnly:!1,className:"h-full"})}),l&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Saving flow..."})]})})]})},zl=({packageId:s,flowId:t,onSuccess:r,onCancel:n})=>{const a=Pe(),[i,o]=y.useState(""),[h,l]=y.useState(""),[j,m]=y.useState(!1),[p,d]=y.useState(!1),[C,g]=y.useState(null),{data:u,isLoading:S}=se({queryKey:["flow",t],queryFn:async()=>{var f;const F=await k.get(`/api/flows/${t}`);return((f=F.data)==null?void 0:f.data)||F.data},enabled:!!t});y.useEffect(()=>{var F,f;u&&(g({id:u.id,name:u.name,description:u.description||"",nodes:((F=u.flowDefinition)==null?void 0:F.nodes)||[],edges:((f=u.flowDefinition)==null?void 0:f.edges)||[],active:u.active}),o(u.name||""),l(u.description||""))},[u]);const E=me({mutationFn:async F=>k.put(`/api/flows/${t}`,F),onSuccess:()=>{he.success("Flow updated successfully"),a.invalidateQueries({queryKey:["package-flows",s]}),a.invalidateQueries({queryKey:["flow",t]}),r()},onError:F=>{var b,T;const f=((T=(b=F.response)==null?void 0:b.data)==null?void 0:T.message)||F.message||"Failed to update flow";he.error(f)}}),x=F=>{g(F)},A=async F=>{if(!i.trim()){he.error("Flow Name is required");return}m(!0);try{const f={flow:{name:i.trim(),description:h.trim(),flowDefinition:{nodes:F.nodes,edges:F.edges},active:F.active},packageId:s};await E.mutateAsync(f)}finally{m(!1)}},c=async F=>{var f,b;d(!0);try{await k.post(`/api/flows/${t}/execute`),he.success("Flow execution started")}catch(T){const M=((b=(f=T.response)==null?void 0:f.data)==null?void 0:b.message)||"Failed to execute flow";he.error(M)}finally{d(!1)}};return S?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading flow..."})]})}):e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"border-b bg-background relative z-10 shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:n,className:"space-x-2",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Flows"})]}),e.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Edit Visual Flow"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(w,{variant:"outline",size:"sm",onClick:n,className:"space-x-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Cancel"})]})})]}),e.jsx("div",{className:"px-4 py-4 bg-muted/50 border-t border-border",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-2xl",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-foreground block mb-1",children:["Flow Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i,onChange:F=>o(F.target.value),placeholder:"Enter flow name",required:!0,className:`w-full px-3 py-2 border rounded-md text-foreground placeholder:text-muted-foreground ${i.trim()?"border-input":"border-red-500"} bg-background focus:outline-none focus:ring-2 focus:ring-ring`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground block mb-1",children:"Description"}),e.jsx("input",{type:"text",value:h,onChange:F=>l(F.target.value),placeholder:"Enter description",className:"w-full px-3 py-2 border border-input rounded-md text-foreground placeholder:text-muted-foreground bg-background focus:outline-none focus:ring-2 focus:ring-ring"})]})]})})]}),e.jsx("div",{className:"flex-1 min-h-0 relative",children:C&&e.jsx(yt,{flowData:C,onFlowChange:x,onSave:A,onExecute:c,readOnly:!1,className:"h-full"})}),(j||p)&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:j?"Saving flow...":"Executing flow..."})]})})]})},Bl=({packageId:s,flowId:t,onEdit:r,onBack:n})=>{const[a,i]=y.useState(""),[o,h]=y.useState(""),[l,j]=y.useState(null),{data:m,isLoading:p}=se({queryKey:["flow",t],queryFn:async()=>{var C;const d=await k.get(`/api/flows/${t}`);return((C=d.data)==null?void 0:C.data)||d.data},enabled:!!t});return y.useEffect(()=>{var d,C;m&&(j({id:m.id,name:m.name,description:m.description||"",nodes:((d=m.flowDefinition)==null?void 0:d.nodes)||[],edges:((C=m.flowDefinition)==null?void 0:C.edges)||[],active:m.active}),i(m.name||""),h(m.description||""))},[m]),p?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading flow..."})]})}):m?e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"border-b bg-background relative z-10 shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:n,className:"space-x-2",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Flows"})]}),e.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"View Visual Flow"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!m.deployed&&e.jsxs(w,{variant:"outline",size:"sm",onClick:r,className:"space-x-2",children:[e.jsx(Os,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit Flow"})]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:n,className:"space-x-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Close"})]})]})]}),e.jsx("div",{className:"px-4 py-4 bg-muted/50 border-t border-border",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-2xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground block mb-1",children:"Flow Name"}),e.jsx("input",{type:"text",value:a,readOnly:!0,className:"w-full px-3 py-2 border border-input rounded-md text-foreground bg-muted/50 cursor-default"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground block mb-1",children:"Description"}),e.jsx("input",{type:"text",value:o,readOnly:!0,className:"w-full px-3 py-2 border border-input rounded-md text-foreground bg-muted/50 cursor-default"})]})]})})]}),e.jsx("div",{className:"flex-1 min-h-0 relative",children:l&&e.jsx(yt,{flowData:l,onFlowChange:()=>{},onSave:()=>{},onExecute:()=>{},readOnly:!0,className:"h-full"})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:"Flow not found"}),e.jsx(w,{variant:"outline",onClick:n,className:"mt-4",children:"Go Back"})]})},ql=()=>{const{id:s}=dt(),t=Oe(),r=Pe(),[n,a]=y.useState("overview"),[i,o]=y.useState("list"),[h,l]=y.useState(null),[j,m]=y.useState(!1),[p,d]=y.useState(null),[C,g]=y.useState({open:!1,type:"info",message:""}),[u,S]=y.useState({open:!1,title:"",message:"",onConfirm:()=>{}}),{setCollapsed:E}=Na(),x=(B,Q,ie)=>{g({open:!0,type:B,title:ie,message:Q})};y.useEffect(()=>(E(!0),()=>E(!1)),[E]);const{data:A,isLoading:c,error:F}=se({queryKey:["package",s],queryFn:async()=>{var Q;const B=await k.get(`/api/packages/${s}`);return((Q=B.data)==null?void 0:Q.data)||B.data},enabled:!!s}),{data:f}=se({queryKey:["package-adapters",s],queryFn:async()=>{var Q;const B=await k.get(`/api/adapters/package/${s}`);return((Q=B.data)==null?void 0:Q.data)||B.data||[]},enabled:!!s}),{data:b}=se({queryKey:["package-flows",s],queryFn:async()=>{var Q;const B=await k.get(`/api/flows/package/${s}`);return((Q=B.data)==null?void 0:Q.data)||B.data||[]},enabled:!!s}),T=A,M=Array.isArray(f)?f:[],O=Array.isArray(b)?b:[],q=B=>{a(B),o("list"),l(null)};if(c)return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(w,{variant:"ghost",size:"sm",onClick:()=>t("/packages"),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Back to Packages"]})}),e.jsx(I,{className:"animate-pulse",children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})})]});if(F||!T)return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(w,{variant:"ghost",size:"sm",onClick:()=>t("/packages"),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Back to Packages"]})}),e.jsx(I,{className:"border-red-200 bg-red-50",children:e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Me,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-medium text-red-600 mb-2",children:"Package not found"}),e.jsx("div",{className:"text-muted-foreground mb-4",children:"The package you're looking for doesn't exist or has been deleted."}),e.jsx(w,{onClick:()=>t("/packages"),children:"Return to Package Library"})]})})})]});const ee=async()=>{await r.invalidateQueries({queryKey:["package",s]}),await r.invalidateQueries({queryKey:["package-adapters",s]}),await r.invalidateQueries({queryKey:["package-flows",s]})},te=()=>{a("adapters"),o("create"),l(null)},_e=B=>{a("adapters"),o("view"),l(B.id)},Ke=B=>{a("adapters"),o("edit"),l(B.id)},P=async B=>{S({open:!0,title:"Delete Adapter",message:`Are you sure you want to delete the adapter "${B.name}"? This action cannot be undone and will permanently remove the adapter configuration.`,confirmLabel:"Delete Adapter",onConfirm:async()=>{try{await k.delete(`/api/adapters/${B.id}`),await ee(),o("list"),l(null),x("success",`Adapter "${B.name}" deleted successfully`)}catch(Q){console.error("Error deleting adapter:",Q),x("error","Failed to delete adapter")}}})},ae=async B=>{var Q,ie;try{const ce=await k.post(`/api/adapters/${B.id}/test`);d(ce),m(!0)}catch(ce){d({data:{success:!1,error:((ie=(Q=ce.response)==null?void 0:Q.data)==null?void 0:ie.message)||ce.message||"Unknown error"}}),m(!0)}},xe=()=>{ee(),o("list"),l(null)},je=()=>{o("list"),l(null)},_=()=>{a("flows"),o("create"),l(null)},re=B=>{a("flows"),o("view"),l(B.id)},fe=B=>{a("flows"),o("edit"),l(B.id)},xs=async B=>{S({open:!0,title:"Delete Flow",message:`Are you sure you want to delete the flow "${B.name}"? This action cannot be undone and will permanently remove the flow configuration.`,confirmLabel:"Delete Flow",onConfirm:async()=>{var Q,ie,ce,le;try{await k.delete(`/api/flows/${B.id}`),await ee(),o("list"),l(null),x("success",`Flow "${B.name}" deleted successfully`)}catch(X){console.error("Error deleting flow:",X);const Ge=((ie=(Q=X.response)==null?void 0:Q.data)==null?void 0:ie.message)||((le=(ce=X.response)==null?void 0:ce.data)==null?void 0:le.error)||X.message||"Failed to delete flow";x("error",Ge)}}})},ys=async B=>{var Q,ie,ce,le;try{await k.put(`/api/flows/${B.id}/active?active=true`),await ee(),x("success",`Flow "${B.name}" has been activated successfully`)}catch(X){console.error("Error activating flow:",X);const Ge=((ie=(Q=X.response)==null?void 0:Q.data)==null?void 0:ie.message)||((le=(ce=X.response)==null?void 0:ce.data)==null?void 0:le.error)||X.message||"Failed to activate flow";x("error",Ge)}},us=async B=>{var Q,ie,ce;try{const le=await k.post(`/api/flows/${B.id}/deploy`),X=((Q=le.data)==null?void 0:Q.data)||le.data;if((X==null?void 0:X.status)==="SUCCESS")await ee(),x("success",`Flow "${B.name}" has been deployed successfully.`);else{let Ge=(X==null?void 0:X.message)||"Unknown error";X!=null&&X.validationErrors&&Array.isArray(X.validationErrors)&&X.validationErrors.length>0?Ge+=`:
• `+X.validationErrors.join(`
• `):X!=null&&X.errors&&Array.isArray(X.errors)&&X.errors.length>0&&(Ge+=`:
• `+X.errors.join(`
• `)),x("error",Ge,"Failed to Deploy Flow")}}catch(le){console.error("Error deploying flow:",le),x("error",((ce=(ie=le.response)==null?void 0:ie.data)==null?void 0:ce.message)||le.message||"Unknown error","Failed to Deploy Flow")}},Ns=async B=>{var Q,ie,ce;try{const le=await k.post(`/api/flows/${B.id}/undeploy`),X=((Q=le.data)==null?void 0:Q.data)||le.data;if((X==null?void 0:X.status)==="SUCCESS")await ee(),x("success",`Flow "${B.name}" has been undeployed.`);else{const Ge=(X==null?void 0:X.message)||"Unknown error";x("error",Ge,"Failed to Undeploy Flow")}}catch(le){console.error("Error undeploying flow:",le),x("error",((ce=(ie=le.response)==null?void 0:ie.data)==null?void 0:ce.message)||le.message||"Unknown error","Failed to Undeploy Flow")}},_s=B=>{t(`/flows/${B}/designer`)},H=async B=>{try{const Q=await k.get(`/api/flows/${B.id}/export`),ie=JSON.stringify(Q.data,null,2),ce=new Blob([ie],{type:"application/json"}),le=URL.createObjectURL(ce),X=document.createElement("a");X.href=le,X.download=`${B.name||"flow"}_export.json`,X.click(),URL.revokeObjectURL(le)}catch(Q){console.error("Error exporting flow:",Q),x("error","Failed to export flow. Please try again.")}},G=async B=>{var Q,ie;try{const ce=await B.text(),le=JSON.parse(ce);le.packageId=s,await k.post("/api/flows/import",le),await ee(),x("success","Flow has been imported successfully.")}catch(ce){console.error("Error importing flow:",ce),x("error",((ie=(Q=ce.response)==null?void 0:Q.data)==null?void 0:ie.message)||ce.message||"Unknown error","Failed to Import Flow")}},Z=()=>{ee(),o("list"),l(null)},we=()=>{o("list"),l(null)},is=()=>{if(n==="adapters")switch(i){case"create":return e.jsx(al,{packageId:s,onSuccess:xe,onCancel:je});case"edit":return h?e.jsx(nl,{packageId:s,adapterId:h,onSuccess:xe,onCancel:je}):null;case"view":return h?e.jsx(il,{packageId:s,adapterId:h,onEdit:()=>Ke({id:h}),onDelete:()=>{const B=M.find(Q=>Q.id===h);B&&P(B)},onBack:je}):null;default:return e.jsx(Xi,{packageId:s,adapters:M,onAddAdapter:te,onViewAdapter:_e,onEditAdapter:Ke,onDeleteAdapter:P,onTestAdapter:ae})}if(n==="flows")switch(i){case"create":return e.jsx(Vl,{packageId:s,onSuccess:Z,onCancel:we});case"edit":return h?e.jsx(zl,{packageId:s,flowId:h,onSuccess:Z,onCancel:we}):null;case"view":return h?e.jsx(Bl,{packageId:s,flowId:h,onEdit:()=>fe({id:h}),onDelete:()=>{const B=O.find(Q=>Q.id===h);B&&xs(B)},onBack:we,onOpenDesigner:()=>_s(h)}):null;default:return e.jsx(Zi,{packageId:s,flows:O,onAddFlow:_,onViewFlow:re,onEditFlow:fe,onDeleteFlow:xs,onActivateFlow:ys,onDeployFlow:us,onUndeployFlow:Ns,onExportFlow:H,onImportFlow:G})}return e.jsx(Ji,{pkg:T,adapters:M,flows:O})};return e.jsxs("div",{className:"flex h-full -m-6",children:[e.jsx(Qi,{packageId:s,onNavigate:q,activeSection:n}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:()=>t("/packages"),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-xl font-bold",children:T.name})]}),T.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:T.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{variant:"outline",size:"sm",onClick:ee,children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(w,{variant:"outline",size:"sm",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Settings"]})]})]}),e.jsx("div",{className:"p-6 flex-1 overflow-y-auto",children:is()})]}),e.jsx(Yi,{open:j,onOpenChange:m,testResult:p}),e.jsx(et,{open:C.open,onOpenChange:B=>g(Q=>({...Q,open:B})),type:C.type,title:C.title,message:C.message}),e.jsx(ka,{open:u.open,onOpenChange:B=>S(Q=>({...Q,open:B})),title:u.title,message:u.message,confirmLabel:u.confirmLabel||"Delete",variant:"destructive",onConfirm:u.onConfirm})]})},_a={packages:[],currentPackage:null,currentPackageContainer:null,workspaceState:{selectedAssets:new Set,activeTab:"overview",isLoading:!1,error:void 0},libraryState:{searchCriteria:{searchTerm:"",packageTypes:[],statuses:[Ys.ACTIVE],tags:[],sortBy:"updatedAt",sortOrder:"desc",limit:20,offset:0},selectedPackages:new Set,viewMode:"grid",isCreating:!1,showCreateModal:!1},isLoading:!1,error:null,totalCount:0,hasNextPage:!1,hasPreviousPage:!1},Hl=(s,t)=>{var r,n,a,i;switch(t.type){case"SET_LOADING":return{...s,isLoading:t.payload};case"SET_ERROR":return{...s,error:t.payload,isLoading:!1};case"SET_PACKAGES":return{...s,packages:t.payload.packages,totalCount:t.payload.totalCount,hasNextPage:t.payload.hasNextPage,hasPreviousPage:t.payload.hasPreviousPage,isLoading:!1,error:null};case"ADD_PACKAGE":return{...s,packages:[t.payload,...s.packages],totalCount:s.totalCount+1};case"UPDATE_PACKAGE":{const o=s.packages.map(h=>h.id===t.payload.id?t.payload:h);return{...s,packages:o,currentPackage:((r=s.currentPackage)==null?void 0:r.id)===t.payload.id?{...s.currentPackage,...t.payload}:s.currentPackage}}case"REMOVE_PACKAGE":{const o=s.packages.filter(h=>h.id!==t.payload);return{...s,packages:o,totalCount:Math.max(0,s.totalCount-1),currentPackage:((n=s.currentPackage)==null?void 0:n.id)===t.payload?null:s.currentPackage,currentPackageContainer:((a=s.currentPackageContainer)==null?void 0:a.packageInfo.id)===t.payload?null:s.currentPackageContainer}}case"SET_CURRENT_PACKAGE":return{...s,currentPackage:t.payload,workspaceState:{...s.workspaceState,currentPackageId:(i=t.payload)==null?void 0:i.id}};case"SET_CURRENT_PACKAGE_CONTAINER":return{...s,currentPackageContainer:t.payload};case"UPDATE_WORKSPACE_STATE":return{...s,workspaceState:{...s.workspaceState,...t.payload}};case"UPDATE_LIBRARY_STATE":return{...s,libraryState:{...s.libraryState,...t.payload}};case"SELECT_ASSET":{const o=new Set(s.workspaceState.selectedAssets);return o.add(t.payload),{...s,workspaceState:{...s.workspaceState,selectedAssets:o}}}case"DESELECT_ASSET":{const o=new Set(s.workspaceState.selectedAssets);return o.delete(t.payload),{...s,workspaceState:{...s.workspaceState,selectedAssets:o}}}case"CLEAR_SELECTED_ASSETS":return{...s,workspaceState:{...s.workspaceState,selectedAssets:new Set}};case"SELECT_PACKAGE":{const o=new Set(s.libraryState.selectedPackages);return o.add(t.payload),{...s,libraryState:{...s.libraryState,selectedPackages:o}}}case"DESELECT_PACKAGE":{const o=new Set(s.libraryState.selectedPackages);return o.delete(t.payload),{...s,libraryState:{...s.libraryState,selectedPackages:o}}}case"CLEAR_SELECTED_PACKAGES":return{...s,libraryState:{...s.libraryState,selectedPackages:new Set}};case"UPDATE_SEARCH_CRITERIA":return{...s,libraryState:{...s.libraryState,searchCriteria:{...s.libraryState.searchCriteria,...t.payload}}};case"SET_ACTIVE_TAB":return{...s,workspaceState:{...s.workspaceState,activeTab:t.payload}};case"SET_VIEW_MODE":return{...s,libraryState:{...s.libraryState,viewMode:t.payload}};case"SET_CREATE_MODAL":return{...s,libraryState:{...s.libraryState,showCreateModal:t.payload}};case"RESET_STATE":return _a;default:return s}},Gl=y.createContext(void 0),Vs=({children:s})=>{var p;const[t,r]=y.useReducer(Hl,_a),n=t.libraryState.selectedPackages.size,a=t.workspaceState.selectedAssets.size,i=n>0,o=a>0,h=!!t.currentPackage,l=((p=t.currentPackage)==null?void 0:p.id)||null,j={setLoading:y.useCallback(d=>{r({type:"SET_LOADING",payload:d})},[]),setError:y.useCallback(d=>{r({type:"SET_ERROR",payload:d})},[]),setPackages:y.useCallback((d,C,g,u)=>{r({type:"SET_PACKAGES",payload:{packages:d,totalCount:C,hasNextPage:g,hasPreviousPage:u}})},[]),addPackage:y.useCallback(d=>{r({type:"ADD_PACKAGE",payload:d})},[]),updatePackage:y.useCallback(d=>{r({type:"UPDATE_PACKAGE",payload:d})},[]),removePackage:y.useCallback(d=>{r({type:"REMOVE_PACKAGE",payload:d})},[]),setCurrentPackage:y.useCallback(d=>{r({type:"SET_CURRENT_PACKAGE",payload:d})},[]),setCurrentPackageContainer:y.useCallback(d=>{r({type:"SET_CURRENT_PACKAGE_CONTAINER",payload:d})},[]),updateWorkspaceState:y.useCallback(d=>{r({type:"UPDATE_WORKSPACE_STATE",payload:d})},[]),updateLibraryState:y.useCallback(d=>{r({type:"UPDATE_LIBRARY_STATE",payload:d})},[]),selectAsset:y.useCallback(d=>{r({type:"SELECT_ASSET",payload:d})},[]),deselectAsset:y.useCallback(d=>{r({type:"DESELECT_ASSET",payload:d})},[]),clearSelectedAssets:y.useCallback(()=>{r({type:"CLEAR_SELECTED_ASSETS"})},[]),selectPackage:y.useCallback(d=>{r({type:"SELECT_PACKAGE",payload:d})},[]),deselectPackage:y.useCallback(d=>{r({type:"DESELECT_PACKAGE",payload:d})},[]),clearSelectedPackages:y.useCallback(()=>{r({type:"CLEAR_SELECTED_PACKAGES"})},[]),updateSearchCriteria:y.useCallback(d=>{r({type:"UPDATE_SEARCH_CRITERIA",payload:d})},[]),setActiveTab:y.useCallback(d=>{r({type:"SET_ACTIVE_TAB",payload:d})},[]),setViewMode:y.useCallback(d=>{r({type:"SET_VIEW_MODE",payload:d})},[]),setCreateModal:y.useCallback(d=>{r({type:"SET_CREATE_MODAL",payload:d})},[]),resetState:y.useCallback(()=>{r({type:"RESET_STATE"})},[])},m={state:t,dispatch:r,selectedPackageCount:n,selectedAssetCount:a,hasSelectedPackages:i,hasSelectedAssets:o,isWorkspaceActive:h,currentPackageId:l,actions:j};return e.jsx(Gl.Provider,{value:m,children:s})},Wl=()=>{const s=localStorage.getItem("h2h_user_preferences");let t="light";if(s)try{t=JSON.parse(s).theme||"light"}catch{console.warn("Failed to parse saved preferences for theme")}const r=document.documentElement;if(t==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;r.classList.toggle("dark",n)}else t==="dark"?r.classList.add("dark"):r.classList.remove("dark")};function Yl(){return Fn(),y.useEffect(()=>{Wl()},[]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs(ar,{children:[e.jsx(oe,{path:"/login",element:e.jsx(Zn,{})}),e.jsxs(oe,{path:"/",element:e.jsx(Qn,{children:e.jsx(Yn,{})}),children:[e.jsx(oe,{index:!0,element:e.jsx($e,{to:"/dashboard",replace:!0})}),e.jsx(oe,{path:"dashboard",element:e.jsx(ni,{})}),e.jsx(oe,{path:"packages",element:e.jsx(Vs,{children:e.jsx(Hi,{})})}),e.jsx(oe,{path:"packages/create",element:e.jsx(Vs,{children:e.jsx(Gi,{})})}),e.jsx(oe,{path:"packages/:id/edit",element:e.jsx(Vs,{children:e.jsx(Wi,{})})}),e.jsx(oe,{path:"packages/:id",element:e.jsx(Vs,{children:e.jsx(ql,{})})}),e.jsx(oe,{path:"admin",element:e.jsx(Mi,{})}),e.jsx(oe,{path:"ssh-keys",element:e.jsx($e,{to:"/admin",replace:!0})}),e.jsx(oe,{path:"ssh-keys/create",element:e.jsx(ii,{})}),e.jsx(oe,{path:"users",element:e.jsx($e,{to:"/admin",replace:!0})}),e.jsx(oe,{path:"adapter-monitoring",element:e.jsx(li,{})}),e.jsx(oe,{path:"flow-monitoring",element:e.jsx(ci,{})}),e.jsx(oe,{path:"execution-logs/:executionId",element:e.jsx(oi,{})}),e.jsx(oe,{path:"settings",element:e.jsx(Oi,{})}),e.jsx(oe,{path:"monitoring",element:e.jsx($e,{to:"/adapter-monitoring",replace:!0})}),e.jsx(oe,{path:"executions",element:e.jsx($e,{to:"/flow-monitoring",replace:!0})}),e.jsx(oe,{path:"execution-monitoring",element:e.jsx($e,{to:"/flow-monitoring",replace:!0})}),e.jsx(oe,{path:"performance",element:e.jsx($e,{to:"/dashboard",replace:!0})}),e.jsx(oe,{path:"logs",element:e.jsx($e,{to:"/admin",replace:!0})})]}),e.jsx(oe,{path:"*",element:e.jsx($e,{to:"/dashboard",replace:!0})})]}),e.jsx(zt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(215, 25%, 10%)",color:"hsl(210, 40%, 98%)"},success:{style:{background:"hsl(142, 76%, 36%)",color:"hsl(210, 40%, 98%)"}},error:{style:{background:"hsl(0, 84%, 60%)",color:"hsl(210, 40%, 98%)"}}}}),!1]})}const Ql=new ir({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e4}}});lt.createRoot(document.getElementById("root")).render(e.jsx(Ie.StrictMode,{children:e.jsx(lr,{client:Ql,children:e.jsxs(rr,{children:[e.jsx(Yl,{}),e.jsx(zt,{position:"top-right"})]})})}));
//# sourceMappingURL=index-CZqJ9yBt.js.map
