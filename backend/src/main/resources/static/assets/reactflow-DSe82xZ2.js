import{r as T,g as ia,a as Vl,b as Hl}from"./vendor-CkebN-nG.js";import{i as Bl,a as Gi,b as jl,c as Yi,d as Gl,e as Yl,f as jt,g as An,r as oa,h as Wl,j as li,k as Ue,l as sa,m as fi,n as Xl,o as Ul,p as aa,q as ua,s as ca,t as di,u as hi,v as pi,w as Kl,x as Zl,y as Ql,z as Jl,A as ef,B as tf,C as gi,D as nf,E as cn,F as rf,G as of,H as mi,I as sf,J as af,K as la,L as fa,M as da,N as ha,O as pa,P as ln,Q as ga,R as uf,S as cf,T as lf,U as ff,V as df,W as hf,X as pf,Y as gf,Z as ma,_ as va,$ as mf,a0 as vf,a1 as yf,a2 as wf,a3 as xf,a4 as _f,a5 as bf,a6 as Ef,a7 as Sf,a8 as Nf,a9 as Cf,aa as kf,ab as If,ac as Mf,ad as Af,ae as Pf}from"./charts-CItJE7zn.js";var ya={exports:{}},fn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=T,Lf=Symbol.for("react.element"),Rf=Symbol.for("react.fragment"),Tf=Object.prototype.hasOwnProperty,Df=$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qf={key:!0,ref:!0,__self:!0,__source:!0};function wa(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Tf.call(t,r)&&!qf.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Lf,type:e,key:o,ref:s,props:i,_owner:Df.current}}fn.Fragment=Rf;fn.jsx=wa;fn.jsxs=wa;ya.exports=fn;var L=ya.exports;const zf={},Wi=e=>{let t;const n=new Set,r=(c,l)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=l??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(p=>p(t,h))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>f,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(zf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,i,u);return u},Of=e=>e?Wi(e):Wi;var xa={exports:{}},_a={},ba={exports:{}},Ea={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nt=T;function Ff(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vf=typeof Object.is=="function"?Object.is:Ff,Hf=nt.useState,Bf=nt.useEffect,jf=nt.useLayoutEffect,Gf=nt.useDebugValue;function Yf(e,t){var n=t(),r=Hf({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return jf(function(){i.value=n,i.getSnapshot=t,Pn(i)&&o({inst:i})},[e,n,t]),Bf(function(){return Pn(i)&&o({inst:i}),e(function(){Pn(i)&&o({inst:i})})},[e]),Gf(n),n}function Pn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vf(e,n)}catch{return!0}}function Wf(e,t){return t()}var Xf=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Wf:Yf;Ea.useSyncExternalStore=nt.useSyncExternalStore!==void 0?nt.useSyncExternalStore:Xf;ba.exports=Ea;var Uf=ba.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dn=T,Kf=Uf;function Zf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qf=typeof Object.is=="function"?Object.is:Zf,Jf=Kf.useSyncExternalStore,ed=dn.useRef,td=dn.useEffect,nd=dn.useMemo,rd=dn.useDebugValue;_a.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=ed(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=nd(function(){function u(h){if(!f){if(f=!0,c=h,h=r(h),i!==void 0&&s.hasValue){var p=s.value;if(i(p,h))return l=p}return l=h}if(p=l,Qf(c,h))return p;var g=r(h);return i!==void 0&&i(p,g)?(c=h,p):(c=h,l=g)}var f=!1,c,l,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Jf(e,o[0],o[1]);return td(function(){s.hasValue=!0,s.value=a},[a]),rd(a),a};xa.exports=_a;var id=xa.exports;const od=ia(id);function ce(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ce(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var sd={value:()=>{}};function hn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Gt(n)}function Gt(e){this._=e}function ad(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Gt.prototype=hn.prototype={constructor:Gt,on:function(e,t){var n=this._,r=ad(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=ud(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Xi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Xi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function ud(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Xi(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=sd,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Kr="http://www.w3.org/1999/xhtml";const Ui={svg:"http://www.w3.org/2000/svg",xhtml:Kr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ui.hasOwnProperty(t)?{space:Ui[t],local:e}:e}function cd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Kr&&t.documentElement.namespaceURI===Kr?t.createElement(e):t.createElementNS(n,e)}}function ld(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Sa(e){var t=pn(e);return(t.local?ld:cd)(t)}function fd(){}function vi(e){return e==null?fd:function(){return this.querySelector(e)}}function dd(e){typeof e!="function"&&(e=vi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,f,c=0;c<s;++c)(u=o[c])&&(f=e.call(u,u.__data__,c,o))&&("__data__"in u&&(f.__data__=u.__data__),a[c]=f);return new pe(r,this._parents)}function hd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function pd(){return[]}function Na(e){return e==null?pd:function(){return this.querySelectorAll(e)}}function gd(e){return function(){return hd(e.apply(this,arguments))}}function md(e){typeof e=="function"?e=gd(e):e=Na(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,f=0;f<a;++f)(u=s[f])&&(r.push(e.call(u,u.__data__,f,s)),i.push(u));return new pe(r,i)}function Ca(e){return function(){return this.matches(e)}}function ka(e){return function(t){return t.matches(e)}}var vd=Array.prototype.find;function yd(e){return function(){return vd.call(this.children,e)}}function wd(){return this.firstElementChild}function xd(e){return this.select(e==null?wd:yd(typeof e=="function"?e:ka(e)))}var _d=Array.prototype.filter;function bd(){return Array.from(this.children)}function Ed(e){return function(){return _d.call(this.children,e)}}function Sd(e){return this.selectAll(e==null?bd:Ed(typeof e=="function"?e:ka(e)))}function Nd(e){typeof e!="function"&&(e=Ca(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,f=0;f<s;++f)(u=o[f])&&e.call(u,u.__data__,f,o)&&a.push(u);return new pe(r,this._parents)}function Ia(e){return new Array(e.length)}function Cd(){return new pe(this._enter||this._groups.map(Ia),this._parents)}function Ut(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ut.prototype={constructor:Ut,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function kd(e){return function(){return e}}function Id(e,t,n,r,i,o){for(var s=0,a,u=t.length,f=o.length;s<f;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Ut(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function Md(e,t,n,r,i,o,s){var a,u,f=new Map,c=t.length,l=o.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=s.call(u,u.__data__,a,t)+"",f.has(h)?i[a]=u:f.set(h,u));for(a=0;a<l;++a)h=s.call(e,o[a],a,o)+"",(u=f.get(h))?(r[a]=u,u.__data__=o[a],f.delete(h)):n[a]=new Ut(e,o[a]);for(a=0;a<c;++a)(u=t[a])&&f.get(d[a])===u&&(i[a]=u)}function Ad(e){return e.__data__}function Pd(e,t){if(!arguments.length)return Array.from(this,Ad);var n=t?Md:Id,r=this._parents,i=this._groups;typeof e!="function"&&(e=kd(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),f=0;f<o;++f){var c=r[f],l=i[f],d=l.length,h=$d(e.call(c,c&&c.__data__,f,r)),p=h.length,g=a[f]=new Array(p),y=s[f]=new Array(p),v=u[f]=new Array(d);n(c,l,g,y,v,h,t);for(var _=0,m=0,w,N;_<p;++_)if(w=g[_]){for(_>=m&&(m=_+1);!(N=y[m])&&++m<p;);w._next=N||null}}return s=new pe(s,r),s._enter=a,s._exit=u,s}function $d(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ld(){return new pe(this._exit||this._groups.map(Ia),this._parents)}function Rd(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Td(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var f=n[u],c=r[u],l=f.length,d=a[u]=new Array(l),h,p=0;p<l;++p)(h=f[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new pe(a,this._parents)}function Dd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function qd(e){e||(e=zd);function t(l,d){return l&&d?e(l.__data__,d.__data__):!l-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),f,c=0;c<a;++c)(f=s[c])&&(u[c]=f);u.sort(t)}return new pe(i,this._parents).order()}function zd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Od(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Fd(){return Array.from(this)}function Vd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Hd(){let e=0;for(const t of this)++e;return e}function Bd(){return!this.node()}function jd(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function Gd(e){return function(){this.removeAttribute(e)}}function Yd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wd(e,t){return function(){this.setAttribute(e,t)}}function Xd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ud(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Kd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Zd(e,t){var n=pn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Yd:Gd:typeof t=="function"?n.local?Kd:Ud:n.local?Xd:Wd)(n,t))}function Ma(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Qd(e){return function(){this.style.removeProperty(e)}}function Jd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function eh(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function th(e,t,n){return arguments.length>1?this.each((t==null?Qd:typeof t=="function"?eh:Jd)(e,t,n??"")):rt(this.node(),e)}function rt(e,t){return e.style.getPropertyValue(t)||Ma(e).getComputedStyle(e,null).getPropertyValue(t)}function nh(e){return function(){delete this[e]}}function rh(e,t){return function(){this[e]=t}}function ih(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function oh(e,t){return arguments.length>1?this.each((t==null?nh:typeof t=="function"?ih:rh)(e,t)):this.node()[e]}function Aa(e){return e.trim().split(/^|\s+/)}function yi(e){return e.classList||new Pa(e)}function Pa(e){this._node=e,this._names=Aa(e.getAttribute("class")||"")}Pa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function $a(e,t){for(var n=yi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function La(e,t){for(var n=yi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function sh(e){return function(){$a(this,e)}}function ah(e){return function(){La(this,e)}}function uh(e,t){return function(){(t.apply(this,arguments)?$a:La)(this,e)}}function ch(e,t){var n=Aa(e+"");if(arguments.length<2){for(var r=yi(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?uh:t?sh:ah)(n,t))}function lh(){this.textContent=""}function fh(e){return function(){this.textContent=e}}function dh(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function hh(e){return arguments.length?this.each(e==null?lh:(typeof e=="function"?dh:fh)(e)):this.node().textContent}function ph(){this.innerHTML=""}function gh(e){return function(){this.innerHTML=e}}function mh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function vh(e){return arguments.length?this.each(e==null?ph:(typeof e=="function"?mh:gh)(e)):this.node().innerHTML}function yh(){this.nextSibling&&this.parentNode.appendChild(this)}function wh(){return this.each(yh)}function xh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _h(){return this.each(xh)}function bh(e){var t=typeof e=="function"?e:Sa(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Eh(){return null}function Sh(e,t){var n=typeof e=="function"?e:Sa(e),r=t==null?Eh:typeof t=="function"?t:vi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Nh(){var e=this.parentNode;e&&e.removeChild(this)}function Ch(){return this.each(Nh)}function kh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ih(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mh(e){return this.select(e?Ih:kh)}function Ah(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ph(e){return function(t){e.call(this,t,this.__data__)}}function $h(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Lh(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Rh(e,t,n){return function(){var r=this.__on,i,o=Ph(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Th(e,t,n){var r=$h(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,f=a.length,c;u<f;++u)for(i=0,c=a[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?Rh:Lh,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Ra(e,t,n){var r=Ma(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Dh(e,t){return function(){return Ra(this,e,t)}}function qh(e,t){return function(){return Ra(this,e,t.apply(this,arguments))}}function zh(e,t){return this.each((typeof t=="function"?qh:Dh)(e,t))}function*Oh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Ta=[null];function pe(e,t){this._groups=e,this._parents=t}function Mt(){return new pe([[document.documentElement]],Ta)}function Fh(){return this}pe.prototype=Mt.prototype={constructor:pe,select:dd,selectAll:md,selectChild:xd,selectChildren:Sd,filter:Nd,data:Pd,enter:Cd,exit:Ld,join:Rd,merge:Td,selection:Fh,order:Dd,sort:qd,call:Od,nodes:Fd,node:Vd,size:Hd,empty:Bd,each:jd,attr:Zd,style:th,property:oh,classed:ch,text:hh,html:vh,raise:wh,lower:_h,append:bh,insert:Sh,remove:Ch,clone:Mh,datum:Ah,on:Th,dispatch:zh,[Symbol.iterator]:Oh};function he(e){return typeof e=="string"?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],Ta)}function Vh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function me(e,t){if(e=Vh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Hh={passive:!1},bt={capture:!0,passive:!1};function $n(e){e.stopImmediatePropagation()}function tt(e){e.preventDefault(),e.stopImmediatePropagation()}function Da(e){var t=e.document.documentElement,n=he(e).on("dragstart.drag",tt,bt);"onselectstart"in t?n.on("selectstart.drag",tt,bt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function qa(e,t){var n=e.document.documentElement,r=he(e).on("dragstart.drag",null);t&&(r.on("click.drag",tt,bt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Dt=e=>()=>e;function Zr(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:f,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:c}})}Zr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Bh(e){return!e.ctrlKey&&!e.button}function jh(){return this.parentNode}function Gh(e,t){return t??{x:e.x,y:e.y}}function Yh(){return navigator.maxTouchPoints||"ontouchstart"in this}function za(){var e=Bh,t=jh,n=Gh,r=Yh,i={},o=hn("start","drag","end"),s=0,a,u,f,c,l=0;function d(w){w.on("mousedown.drag",h).filter(r).on("touchstart.drag",y).on("touchmove.drag",v,Hh).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,N){if(!(c||!e.call(this,w,N))){var b=m(this,t.call(this,w,N),w,N,"mouse");b&&(he(w.view).on("mousemove.drag",p,bt).on("mouseup.drag",g,bt),Da(w.view),$n(w),f=!1,a=w.clientX,u=w.clientY,b("start",w))}}function p(w){if(tt(w),!f){var N=w.clientX-a,b=w.clientY-u;f=N*N+b*b>l}i.mouse("drag",w)}function g(w){he(w.view).on("mousemove.drag mouseup.drag",null),qa(w.view,f),tt(w),i.mouse("end",w)}function y(w,N){if(e.call(this,w,N)){var b=w.changedTouches,C=t.call(this,w,N),P=b.length,R,z;for(R=0;R<P;++R)(z=m(this,C,w,N,b[R].identifier,b[R]))&&($n(w),z("start",w,b[R]))}}function v(w){var N=w.changedTouches,b=N.length,C,P;for(C=0;C<b;++C)(P=i[N[C].identifier])&&(tt(w),P("drag",w,N[C]))}function _(w){var N=w.changedTouches,b=N.length,C,P;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),C=0;C<b;++C)(P=i[N[C].identifier])&&($n(w),P("end",w,N[C]))}function m(w,N,b,C,P,R){var z=o.copy(),I=me(R||b,N),M,q,x;if((x=n.call(w,new Zr("beforestart",{sourceEvent:b,target:d,identifier:P,active:s,x:I[0],y:I[1],dx:0,dy:0,dispatch:z}),C))!=null)return M=x.x-I[0]||0,q=x.y-I[1]||0,function A(S,$,k){var E=I,D;switch(S){case"start":i[P]=A,D=s++;break;case"end":delete i[P],--s;case"drag":I=me(k||$,N),D=s;break}z.call(S,w,new Zr(S,{sourceEvent:$,subject:x,target:d,identifier:P,active:D,x:I[0]+M,y:I[1]+q,dx:I[0]-E[0],dy:I[1]-E[1],dispatch:z}),C)}}return d.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Dt(!!w),d):e},d.container=function(w){return arguments.length?(t=typeof w=="function"?w:Dt(w),d):t},d.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Dt(w),d):n},d.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Dt(!!w),d):r},d.on=function(){var w=o.on.apply(o,arguments);return w===o?d:w},d.clickDistance=function(w){return arguments.length?(l=(w=+w)*w,d):Math.sqrt(l)},d}var it=0,mt=0,pt=0,Oa=1e3,Kt,vt,Zt=0,Ye=0,gn=0,Et=typeof performance=="object"&&performance.now?performance:Date,Fa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wi(){return Ye||(Fa(Wh),Ye=Et.now()+gn)}function Wh(){Ye=0}function Qt(){this._call=this._time=this._next=null}Qt.prototype=Va.prototype={constructor:Qt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?wi():+n)+(t==null?0:+t),!this._next&&vt!==this&&(vt?vt._next=this:Kt=this,vt=this),this._call=e,this._time=n,Qr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qr())}};function Va(e,t,n){var r=new Qt;return r.restart(e,t,n),r}function Xh(){wi(),++it;for(var e=Kt,t;e;)(t=Ye-e._time)>=0&&e._call.call(void 0,t),e=e._next;--it}function Ki(){Ye=(Zt=Et.now())+gn,it=mt=0;try{Xh()}finally{it=0,Kh(),Ye=0}}function Uh(){var e=Et.now(),t=e-Zt;t>Oa&&(gn-=t,Zt=e)}function Kh(){for(var e,t=Kt,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Kt=n);vt=e,Qr(r)}function Qr(e){if(!it){mt&&(mt=clearTimeout(mt));var t=e-Ye;t>24?(e<1/0&&(mt=setTimeout(Ki,e-Et.now()-gn)),pt&&(pt=clearInterval(pt))):(pt||(Zt=Et.now(),pt=setInterval(Uh,Oa)),it=1,Fa(Ki))}}function Zi(e,t,n){var r=new Qt;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Zh=hn("start","end","cancel","interrupt"),Qh=[],Ha=0,Qi=1,Jr=2,Yt=3,Ji=4,ei=5,Wt=6;function mn(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Jh(e,n,{name:t,index:r,group:i,on:Zh,tween:Qh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ha})}function xi(e,t){var n=we(e,t);if(n.state>Ha)throw new Error("too late; already scheduled");return n}function Ee(e,t){var n=we(e,t);if(n.state>Yt)throw new Error("too late; already running");return n}function we(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Jh(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Va(o,0,n.time);function o(f){n.state=Qi,n.timer.restart(s,n.delay,n.time),n.delay<=f&&s(f-n.delay)}function s(f){var c,l,d,h;if(n.state!==Qi)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Yt)return Zi(s);h.state===Ji?(h.state=Wt,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Wt,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Zi(function(){n.state===Yt&&(n.state=Ji,n.timer.restart(a,n.delay,n.time),a(f))}),n.state=Jr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Jr){for(n.state=Yt,i=new Array(d=n.tween.length),c=0,l=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++l]=h);i.length=l+1}}function a(f){for(var c=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(u),n.state=ei,1),l=-1,d=i.length;++l<d;)i[l].call(e,c);n.state===ei&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Wt,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function Xt(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Jr&&r.state<ei,r.state=Wt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function ep(e){return this.each(function(){Xt(this,e)})}function tp(e,t){var n,r;return function(){var i=Ee(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function np(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ee(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,f=i.length;u<f;++u)if(i[u].name===t){i[u]=a;break}u===f&&i.push(a)}o.tween=i}}function rp(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=we(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?tp:np)(n,e,t))}function _i(e,t,n){var r=e._id;return e.each(function(){var i=Ee(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return we(i,r).value[t]}}function Ba(e,t){var n;return(typeof t=="number"?Bl:t instanceof Yi?Gi:(n=Yi(t))?(t=n,Gi):jl)(e,t)}function ip(e){return function(){this.removeAttribute(e)}}function op(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sp(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function ap(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function up(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function cp(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function lp(e,t){var n=pn(e),r=n==="transform"?Gl:Ba;return this.attrTween(e,typeof t=="function"?(n.local?cp:up)(n,r,_i(this,"attr."+e,t)):t==null?(n.local?op:ip)(n):(n.local?ap:sp)(n,r,t))}function fp(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dp(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hp(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&dp(e,o)),n}return i._value=t,i}function pp(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&fp(e,o)),n}return i._value=t,i}function gp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=pn(e);return this.tween(n,(r.local?hp:pp)(r,t))}function mp(e,t){return function(){xi(this,e).delay=+t.apply(this,arguments)}}function vp(e,t){return t=+t,function(){xi(this,e).delay=t}}function yp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mp:vp)(t,e)):we(this.node(),t).delay}function wp(e,t){return function(){Ee(this,e).duration=+t.apply(this,arguments)}}function xp(e,t){return t=+t,function(){Ee(this,e).duration=t}}function _p(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wp:xp)(t,e)):we(this.node(),t).duration}function bp(e,t){if(typeof t!="function")throw new Error;return function(){Ee(this,e).ease=t}}function Ep(e){var t=this._id;return arguments.length?this.each(bp(t,e)):we(this.node(),t).ease}function Sp(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ee(this,e).ease=n}}function Np(e){if(typeof e!="function")throw new Error;return this.each(Sp(this._id,e))}function Cp(e){typeof e!="function"&&(e=Ca(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,f=0;f<s;++f)(u=o[f])&&e.call(u,u.__data__,f,o)&&a.push(u);return new Ae(r,this._parents,this._name,this._id)}function kp(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],f=n[a],c=u.length,l=s[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||f[h])&&(l[h]=d);for(;a<r;++a)s[a]=t[a];return new Ae(s,this._parents,this._name,this._id)}function Ip(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Mp(e,t,n){var r,i,o=Ip(t)?xi:Ee;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function Ap(e,t){var n=this._id;return arguments.length<2?we(this.node(),n).on.on(e):this.each(Mp(n,e,t))}function Pp(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $p(){return this.on("end.remove",Pp(this._id))}function Lp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vi(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,f=o[s]=new Array(u),c,l,d=0;d<u;++d)(c=a[d])&&(l=e.call(c,c.__data__,d,a))&&("__data__"in c&&(l.__data__=c.__data__),f[d]=l,mn(f[d],t,n,d,f,we(c,n)));return new Ae(o,this._parents,t,n)}function Rp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Na(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],f=u.length,c,l=0;l<f;++l)if(c=u[l]){for(var d=e.call(c,c.__data__,l,u),h,p=we(c,n),g=0,y=d.length;g<y;++g)(h=d[g])&&mn(h,t,n,g,d,p);o.push(d),s.push(c)}return new Ae(o,s,t,n)}var Tp=Mt.prototype.constructor;function Dp(){return new Tp(this._groups,this._parents)}function qp(e,t){var n,r,i;return function(){var o=rt(this,e),s=(this.style.removeProperty(e),rt(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function ja(e){return function(){this.style.removeProperty(e)}}function zp(e,t,n){var r,i=n+"",o;return function(){var s=rt(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Op(e,t,n){var r,i,o;return function(){var s=rt(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),rt(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function Fp(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=Ee(this,e),f=u.on,c=u.value[o]==null?a||(a=ja(t)):void 0;(f!==n||i!==c)&&(r=(n=f).copy()).on(s,i=c),u.on=r}}function Vp(e,t,n){var r=(e+="")=="transform"?Yl:Ba;return t==null?this.styleTween(e,qp(e,r)).on("end.style."+e,ja(e)):typeof t=="function"?this.styleTween(e,Op(e,r,_i(this,"style."+e,t))).each(Fp(this._id,e)):this.styleTween(e,zp(e,r,t),n).on("end.style."+e,null)}function Hp(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Bp(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Hp(e,s,n)),r}return o._value=t,o}function jp(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Bp(e,t,n??""))}function Gp(e){return function(){this.textContent=e}}function Yp(e){return function(){var t=e(this);this.textContent=t??""}}function Wp(e){return this.tween("text",typeof e=="function"?Yp(_i(this,"text",e)):Gp(e==null?"":e+""))}function Xp(e){return function(t){this.textContent=e.call(this,t)}}function Up(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Xp(i)),t}return r._value=e,r}function Kp(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Up(e))}function Zp(){for(var e=this._name,t=this._id,n=Ga(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,f=0;f<a;++f)if(u=s[f]){var c=we(u,t);mn(u,e,n,f,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ae(r,this._parents,e,n)}function Qp(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var f=Ee(this,r),c=f.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),f.on=t}),i===0&&o()})}var Jp=0;function Ae(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ga(){return++Jp}var Ne=Mt.prototype;Ae.prototype={constructor:Ae,select:Lp,selectAll:Rp,selectChild:Ne.selectChild,selectChildren:Ne.selectChildren,filter:Cp,merge:kp,selection:Dp,transition:Zp,call:Ne.call,nodes:Ne.nodes,node:Ne.node,size:Ne.size,empty:Ne.empty,each:Ne.each,on:Ap,attr:lp,attrTween:gp,style:Vp,styleTween:jp,text:Wp,textTween:Kp,remove:$p,tween:rp,delay:yp,duration:_p,ease:Ep,easeVarying:Np,end:Qp,[Symbol.iterator]:Ne[Symbol.iterator]};function eg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var tg={time:null,delay:0,duration:250,ease:eg};function ng(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rg(e){var t,n;e instanceof Ae?(t=e._id,e=e._name):(t=Ga(),(n=tg).time=wi(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,f=0;f<a;++f)(u=s[f])&&mn(u,e,t,f,s,n||ng(u,t));return new Ae(r,this._parents,e,t)}Mt.prototype.interrupt=ep;Mt.prototype.transition=rg;const qt=e=>()=>e;function ig(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ke(e,t,n){this.k=e,this.x=t,this.y=n}ke.prototype={constructor:ke,scale:function(e){return e===1?this:new ke(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ke(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vn=new ke(1,0,0);Ya.prototype=ke.prototype;function Ya(e){for(;!e.__zoom;)if(!(e=e.parentNode))return vn;return e.__zoom}function Ln(e){e.stopImmediatePropagation()}function gt(e){e.preventDefault(),e.stopImmediatePropagation()}function og(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function sg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function eo(){return this.__zoom||vn}function ag(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ug(){return navigator.maxTouchPoints||"ontouchstart"in this}function cg(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Wa(){var e=og,t=sg,n=cg,r=ag,i=ug,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=jt,f=hn("start","zoom","end"),c,l,d,h=500,p=150,g=0,y=10;function v(x){x.property("__zoom",eo).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",I).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(x,A,S,$){var k=x.selection?x.selection():x;k.property("__zoom",eo),x!==k?N(x,A,S,$):k.interrupt().each(function(){b(this,arguments).event($).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},v.scaleBy=function(x,A,S,$){v.scaleTo(x,function(){var k=this.__zoom.k,E=typeof A=="function"?A.apply(this,arguments):A;return k*E},S,$)},v.scaleTo=function(x,A,S,$){v.transform(x,function(){var k=t.apply(this,arguments),E=this.__zoom,D=S==null?w(k):typeof S=="function"?S.apply(this,arguments):S,F=E.invert(D),O=typeof A=="function"?A.apply(this,arguments):A;return n(m(_(E,O),D,F),k,s)},S,$)},v.translateBy=function(x,A,S,$){v.transform(x,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),s)},null,$)},v.translateTo=function(x,A,S,$,k){v.transform(x,function(){var E=t.apply(this,arguments),D=this.__zoom,F=$==null?w(E):typeof $=="function"?$.apply(this,arguments):$;return n(vn.translate(F[0],F[1]).scale(D.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof S=="function"?-S.apply(this,arguments):-S),E,s)},$,k)};function _(x,A){return A=Math.max(o[0],Math.min(o[1],A)),A===x.k?x:new ke(A,x.x,x.y)}function m(x,A,S){var $=A[0]-S[0]*x.k,k=A[1]-S[1]*x.k;return $===x.x&&k===x.y?x:new ke(x.k,$,k)}function w(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function N(x,A,S,$){x.on("start.zoom",function(){b(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event($).end()}).tween("zoom",function(){var k=this,E=arguments,D=b(k,E).event($),F=t.apply(k,E),O=S==null?w(F):typeof S=="function"?S.apply(k,E):S,B=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),H=k.__zoom,G=typeof A=="function"?A.apply(k,E):A,U=u(H.invert(O).concat(B/H.k),G.invert(O).concat(B/G.k));return function(W){if(W===1)W=G;else{var V=U(W),Y=B/V[2];W=new ke(Y,O[0]-V[0]*Y,O[1]-V[1]*Y)}D.zoom(null,W)}})}function b(x,A,S){return!S&&x.__zooming||new C(x,A)}function C(x,A){this.that=x,this.args=A,this.active=0,this.sourceEvent=null,this.extent=t.apply(x,A),this.taps=0}C.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,A){return this.mouse&&x!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var A=he(this.that).datum();f.call(x,this.that,new ig(x,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:f}),A)}};function P(x,...A){if(!e.apply(this,arguments))return;var S=b(this,A).event(x),$=this.__zoom,k=Math.max(o[0],Math.min(o[1],$.k*Math.pow(2,r.apply(this,arguments)))),E=me(x);if(S.wheel)(S.mouse[0][0]!==E[0]||S.mouse[0][1]!==E[1])&&(S.mouse[1]=$.invert(S.mouse[0]=E)),clearTimeout(S.wheel);else{if($.k===k)return;S.mouse=[E,$.invert(E)],Xt(this),S.start()}gt(x),S.wheel=setTimeout(D,p),S.zoom("mouse",n(m(_($,k),S.mouse[0],S.mouse[1]),S.extent,s));function D(){S.wheel=null,S.end()}}function R(x,...A){if(d||!e.apply(this,arguments))return;var S=x.currentTarget,$=b(this,A,!0).event(x),k=he(x.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",B,!0),E=me(x,S),D=x.clientX,F=x.clientY;Da(x.view),Ln(x),$.mouse=[E,this.__zoom.invert(E)],Xt(this),$.start();function O(H){if(gt(H),!$.moved){var G=H.clientX-D,U=H.clientY-F;$.moved=G*G+U*U>g}$.event(H).zoom("mouse",n(m($.that.__zoom,$.mouse[0]=me(H,S),$.mouse[1]),$.extent,s))}function B(H){k.on("mousemove.zoom mouseup.zoom",null),qa(H.view,$.moved),gt(H),$.event(H).end()}}function z(x,...A){if(e.apply(this,arguments)){var S=this.__zoom,$=me(x.changedTouches?x.changedTouches[0]:x,this),k=S.invert($),E=S.k*(x.shiftKey?.5:2),D=n(m(_(S,E),$,k),t.apply(this,A),s);gt(x),a>0?he(this).transition().duration(a).call(N,D,$,x):he(this).call(v.transform,D,$,x)}}function I(x,...A){if(e.apply(this,arguments)){var S=x.touches,$=S.length,k=b(this,A,x.changedTouches.length===$).event(x),E,D,F,O;for(Ln(x),D=0;D<$;++D)F=S[D],O=me(F,this),O=[O,this.__zoom.invert(O),F.identifier],k.touch0?!k.touch1&&k.touch0[2]!==O[2]&&(k.touch1=O,k.taps=0):(k.touch0=O,E=!0,k.taps=1+!!c);c&&(c=clearTimeout(c)),E&&(k.taps<2&&(l=O[0],c=setTimeout(function(){c=null},h)),Xt(this),k.start())}}function M(x,...A){if(this.__zooming){var S=b(this,A).event(x),$=x.changedTouches,k=$.length,E,D,F,O;for(gt(x),E=0;E<k;++E)D=$[E],F=me(D,this),S.touch0&&S.touch0[2]===D.identifier?S.touch0[0]=F:S.touch1&&S.touch1[2]===D.identifier&&(S.touch1[0]=F);if(D=S.that.__zoom,S.touch1){var B=S.touch0[0],H=S.touch0[1],G=S.touch1[0],U=S.touch1[1],W=(W=G[0]-B[0])*W+(W=G[1]-B[1])*W,V=(V=U[0]-H[0])*V+(V=U[1]-H[1])*V;D=_(D,Math.sqrt(W/V)),F=[(B[0]+G[0])/2,(B[1]+G[1])/2],O=[(H[0]+U[0])/2,(H[1]+U[1])/2]}else if(S.touch0)F=S.touch0[0],O=S.touch0[1];else return;S.zoom("touch",n(m(D,F,O),S.extent,s))}}function q(x,...A){if(this.__zooming){var S=b(this,A).event(x),$=x.changedTouches,k=$.length,E,D;for(Ln(x),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),E=0;E<k;++E)D=$[E],S.touch0&&S.touch0[2]===D.identifier?delete S.touch0:S.touch1&&S.touch1[2]===D.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(D=me(D,this),Math.hypot(l[0]-D[0],l[1]-D[1])<y)){var F=he(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return v.wheelDelta=function(x){return arguments.length?(r=typeof x=="function"?x:qt(+x),v):r},v.filter=function(x){return arguments.length?(e=typeof x=="function"?x:qt(!!x),v):e},v.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:qt(!!x),v):i},v.extent=function(x){return arguments.length?(t=typeof x=="function"?x:qt([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),v):t},v.scaleExtent=function(x){return arguments.length?(o[0]=+x[0],o[1]=+x[1],v):[o[0],o[1]]},v.translateExtent=function(x){return arguments.length?(s[0][0]=+x[0][0],s[1][0]=+x[1][0],s[0][1]=+x[0][1],s[1][1]=+x[1][1],v):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},v.constrain=function(x){return arguments.length?(n=x,v):n},v.duration=function(x){return arguments.length?(a=+x,v):a},v.interpolate=function(x){return arguments.length?(u=x,v):u},v.on=function(){var x=f.on.apply(f,arguments);return x===f?v:x},v.clickDistance=function(x){return arguments.length?(g=(x=+x)*x,v):Math.sqrt(g)},v.tapDistance=function(x){return arguments.length?(y=+x,v):y},v}const be={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},St=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Xa=["Enter"," ","Escape"],Ua={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ot;(function(e){e.Strict="strict",e.Loose="loose"})(ot||(ot={}));var Ge;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ge||(Ge={}));var Nt;(function(e){e.Partial="partial",e.Full="full"})(Nt||(Nt={}));const Ka={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var qe;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(qe||(qe={}));var Jt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Jt||(Jt={}));var j;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(j||(j={}));const to={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top};function Za(e){return e===null?null:e?"valid":"invalid"}const Qa=e=>"id"in e&&"source"in e&&"target"in e,lg=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),bi=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),At=(e,t=[0,0])=>{const{width:n,height:r}=$e(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},fg=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):bi(i)?i:t.nodeLookup.get(i.id));const a=s?en(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return yn(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return wn(n)},Pt=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=yn(n,en(i)),r=!0)}),r?wn(n):{x:0,y:0,width:0,height:0}},Ei=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...Lt(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const f of e.values()){const{measured:c,selectable:l=!0,hidden:d=!1}=f;if(s&&!l||d)continue;const h=c.width??f.width??f.initialWidth??null,p=c.height??f.height??f.initialHeight??null,g=Ct(a,at(f)),y=(h??0)*(p??0),v=o&&g>0;(!f.internals.handleBounds||v||g>=y||f.dragging)&&u.push(f)}return u},dg=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function hg(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function pg({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=hg(e,s),u=Pt(a),f=Si(u,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(f,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function Ja({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:u,y:f}=a?a.internals.positionAbsolute:{x:0,y:0},c=s.origin??r;let l=s.extent||i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",be.error005());else{const h=a.measured.width,p=a.measured.height;h&&p&&(l=[[u,f],[u+h,f+p]])}else a&&ut(s.extent)&&(l=[[s.extent[0][0]+u,s.extent[0][1]+f],[s.extent[1][0]+u,s.extent[1][1]+f]]);const d=ut(l)?We(t,l,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",be.error015())),{position:{x:d.x-u+(s.measured.width??0)*c[0],y:d.y-f+(s.measured.height??0)*c[1]},positionAbsolute:d}}async function gg({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(d=>d.id)),s=[];for(const d of n){if(d.deletable===!1)continue;const h=o.has(d.id),p=!h&&d.parentId&&s.find(g=>g.id===d.parentId);(h||p)&&s.push(d)}const a=new Set(t.map(d=>d.id)),u=r.filter(d=>d.deletable!==!1),c=dg(s,u);for(const d of u)a.has(d.id)&&!c.find(p=>p.id===d.id)&&c.push(d);if(!i)return{edges:c,nodes:s};const l=await i({nodes:s,edges:c});return typeof l=="boolean"?l?{edges:c,nodes:s}:{edges:[],nodes:[]}:l}const st=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),We=(e={x:0,y:0},t,n)=>({x:st(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:st(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function eu(e,t,n){const{width:r,height:i}=$e(n),{x:o,y:s}=n.internals.positionAbsolute;return We(e,[[o,s],[o+r,s+i]],t)}const no=(e,t,n)=>e<t?st(Math.abs(e-t),1,t)/t:e>n?-st(Math.abs(e-n),1,t)/t:0,tu=(e,t,n=15,r=40)=>{const i=no(e.x,r,t.width-r)*n,o=no(e.y,r,t.height-r)*n;return[i,o]},yn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ti=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),wn=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),at=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=bi(e)?e.internals.positionAbsolute:At(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},en=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=bi(e)?e.internals.positionAbsolute:At(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},nu=(e,t)=>wn(yn(ti(e),ti(t))),Ct=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},ro=e=>ve(e.width)&&ve(e.height)&&ve(e.x)&&ve(e.y),ve=e=>!isNaN(e)&&isFinite(e),mg=(e,t)=>{},$t=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Lt=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?$t(a,s):a},tn=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Qe(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function vg(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Qe(e,n),i=Qe(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Qe(e.top??e.y??0,n),i=Qe(e.bottom??e.y??0,n),o=Qe(e.left??e.x??0,t),s=Qe(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:o,x:o+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function yg(e,t,n,r,i,o){const{x:s,y:a}=tn(e,[t,n,r]),{x:u,y:f}=tn({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-u,l=o-f;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(l)}}const Si=(e,t,n,r,i,o)=>{const s=vg(o,t,n),a=(t-s.x)/e.width,u=(n-s.y)/e.height,f=Math.min(a,u),c=st(f,r,i),l=e.x+e.width/2,d=e.y+e.height/2,h=t/2-l*c,p=n/2-d*c,g=yg(e,h,p,c,t,n),y={left:Math.min(g.left-s.left,0),top:Math.min(g.top-s.top,0),right:Math.min(g.right-s.right,0),bottom:Math.min(g.bottom-s.bottom,0)};return{x:h-y.left+y.right,y:p-y.top+y.bottom,zoom:c}},kt=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ut(e){return e!=null&&e!=="parent"}function $e(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function ru(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function iu(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function io(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function wg(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function xg(e){return{...Ua,...e||{}}}function _t(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=ye(e),a=Lt({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:u,y:f}=n?$t(a,t):a;return{xSnapped:u,ySnapped:f,...a}}const Ni=e=>({width:e.offsetWidth,height:e.offsetHeight}),ou=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},_g=["INPUT","SELECT","TEXTAREA"];function su(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:_g.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const au=e=>"clientX"in e,ye=(e,t)=>{var o,s;const n=au(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},oo=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Ni(s)}})};function uu({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const u=e*.125+i*.375+s*.375+n*.125,f=t*.125+o*.375+a*.375+r*.125,c=Math.abs(u-e),l=Math.abs(f-t);return[u,f,c,l]}function zt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function so({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case j.Left:return[t-zt(t-r,o),n];case j.Right:return[t+zt(r-t,o),n];case j.Top:return[t,n-zt(n-i,o)];case j.Bottom:return[t,n+zt(i-n,o)]}}function cu({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:r,targetY:i,targetPosition:o=j.Top,curvature:s=.25}){const[a,u]=so({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[f,c]=so({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[l,d,h,p]=uu({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:f,targetControlY:c});return[`M${e},${t} C${a},${u} ${f},${c} ${r},${i}`,l,d,h,p]}function lu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function bg({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:o="basic"}){if(o==="manual")return r;const s=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return s+a}function Eg({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=yn(en(e),en(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Ct(s,wn(o))>0}const fu=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Sg=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Ng=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||fu;let i;return Qa(e)?i={...e}:i={...e,id:r(e)},Sg(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))},w_=(e,t,n,r={shouldReplaceId:!0})=>{const{id:i,...o}=e;if(!t.source||!t.target||!n.find(f=>f.id===e.id))return n;const a=r.getEdgeId||fu,u={...o,id:r.shouldReplaceId?a(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.filter(f=>f.id!==i).concat(u)};function du({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=lu({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const ao={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}},Cg=({source:e,sourcePosition:t=j.Bottom,target:n})=>t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},uo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kg({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:r=j.Top,center:i,offset:o,stepPosition:s}){const a=ao[t],u=ao[r],f={x:e.x+a.x*o,y:e.y+a.y*o},c={x:n.x+u.x*o,y:n.y+u.y*o},l=Cg({source:f,sourcePosition:t,target:c}),d=l.x!==0?"x":"y",h=l[d];let p=[],g,y;const v={x:0,y:0},_={x:0,y:0},[,,m,w]=lu({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*u[d]===-1){d==="x"?(g=i.x??f.x+(c.x-f.x)*s,y=i.y??(f.y+c.y)/2):(g=i.x??(f.x+c.x)/2,y=i.y??f.y+(c.y-f.y)*s);const b=[{x:g,y:f.y},{x:g,y:c.y}],C=[{x:f.x,y},{x:c.x,y}];a[d]===h?p=d==="x"?b:C:p=d==="x"?C:b}else{const b=[{x:f.x,y:c.y}],C=[{x:c.x,y:f.y}];if(d==="x"?p=a.x===h?C:b:p=a.y===h?b:C,t===r){const M=Math.abs(e[d]-n[d]);if(M<=o){const q=Math.min(o-1,o-M);a[d]===h?v[d]=(f[d]>e[d]?-1:1)*q:_[d]=(c[d]>n[d]?-1:1)*q}}if(t!==r){const M=d==="x"?"y":"x",q=a[d]===u[M],x=f[M]>c[M],A=f[M]<c[M];(a[d]===1&&(!q&&x||q&&A)||a[d]!==1&&(!q&&A||q&&x))&&(p=d==="x"?b:C)}const P={x:f.x+v.x,y:f.y+v.y},R={x:c.x+_.x,y:c.y+_.y},z=Math.max(Math.abs(P.x-p[0].x),Math.abs(R.x-p[0].x)),I=Math.max(Math.abs(P.y-p[0].y),Math.abs(R.y-p[0].y));z>=I?(g=(P.x+R.x)/2,y=p[0].y):(g=p[0].x,y=(P.y+R.y)/2)}return[[e,{x:f.x+v.x,y:f.y+v.y},...p,{x:c.x+_.x,y:c.y+_.y},n],g,y,m,w]}function Ig(e,t,n,r){const i=Math.min(uo(e,t)/2,uo(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const f=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+i*f},${s}Q ${o},${s} ${o},${s+i*c}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${s+i*u}Q ${o},${s} ${o+i*a},${s}`}function ni({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:r,targetY:i,targetPosition:o=j.Top,borderRadius:s=5,centerX:a,centerY:u,offset:f=20,stepPosition:c=.5}){const[l,d,h,p,g]=kg({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:u},offset:f,stepPosition:c});return[l.reduce((v,_,m)=>{let w="";return m>0&&m<l.length-1?w=Ig(l[m-1],_,l[m+1],s):w=`${m===0?"M":"L"}${_.x} ${_.y}`,v+=w,v},""),d,h,p,g]}function co(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Mg(e){var l;const{sourceNode:t,targetNode:n}=e;if(!co(t)||!co(n))return null;const r=t.internals.handleBounds||lo(t.handles),i=n.internals.handleBounds||lo(n.handles),o=fo((r==null?void 0:r.source)??[],e.sourceHandle),s=fo(e.connectionMode===ot.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(l=e.onError)==null||l.call(e,"008",be.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||j.Bottom,u=(s==null?void 0:s.position)||j.Top,f=Xe(t,o,a),c=Xe(n,s,u);return{sourceX:f.x,sourceY:f.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:u}}function lo(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Xe(e,t,n=j.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??$e(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case j.Top:return{x:i+s/2,y:o};case j.Right:return{x:i+s,y:o+a/2};case j.Bottom:return{x:i+s/2,y:o+a};case j.Left:return{x:i,y:o+a/2}}}function fo(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function ri(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Ag(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const f=ri(u,t);o.has(f)||(s.push({id:f,color:u.color||n,...u}),o.add(f))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const hu=1e3,Pg=10,Ci={nodeOrigin:[0,0],nodeExtent:St,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},$g={...Ci,checkEquality:!0};function ki(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Lg(e,t,n){const r=ki(Ci,n);for(const i of e.values())if(i.parentId)Mi(i,e,t,r);else{const o=At(i,r.nodeOrigin),s=ut(i.extent)?i.extent:r.nodeExtent,a=We(o,s,$e(i));i.internals.positionAbsolute=a}}function Rg(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const o={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(o):i.type==="target"&&r.push(o)}return{source:n,target:r}}function Ii(e){return e==="manual"}function ii(e,t,n,r={}){var f,c;const i=ki($g,r),o={i:0},s=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!Ii(i.zIndexMode)?hu:0;let u=e.length>0;t.clear(),n.clear();for(const l of e){let d=s.get(l.id);if(i.checkEquality&&l===(d==null?void 0:d.internals.userNode))t.set(l.id,d);else{const h=At(l,i.nodeOrigin),p=ut(l.extent)?l.extent:i.nodeExtent,g=We(h,p,$e(l));d={...i.defaults,...l,measured:{width:(f=l.measured)==null?void 0:f.width,height:(c=l.measured)==null?void 0:c.height},internals:{positionAbsolute:g,handleBounds:Rg(l,d),z:pu(l,a,i.zIndexMode),userNode:l}},t.set(l.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(u=!1),l.parentId&&Mi(d,t,n,r,o)}return u}function Tg(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Mi(e,t,n,r,i){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:a,zIndexMode:u}=ki(Ci,r),f=e.parentId,c=t.get(f);if(!c){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Tg(e,n),i&&!c.parentId&&c.internals.rootParentIndex===void 0&&u==="auto"&&(c.internals.rootParentIndex=++i.i,c.internals.z=c.internals.z+i.i*Pg),i&&c.internals.rootParentIndex!==void 0&&(i.i=c.internals.rootParentIndex);const l=o&&!Ii(u)?hu:0,{x:d,y:h,z:p}=Dg(e,c,s,a,l,u),{positionAbsolute:g}=e.internals,y=d!==g.x||h!==g.y;(y||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:y?{x:d,y:h}:g,z:p}})}function pu(e,t,n){const r=ve(e.zIndex)?e.zIndex:0;return Ii(n)?r:r+(e.selected?t:0)}function Dg(e,t,n,r,i,o){const{x:s,y:a}=t.internals.positionAbsolute,u=$e(e),f=At(e,n),c=ut(e.extent)?We(f,e.extent,u):f;let l=We({x:s+c.x,y:a+c.y},r,u);e.extent==="parent"&&(l=eu(l,u,t));const d=pu(e,i,o),h=t.internals.z??0;return{x:l.x,y:l.y,z:h>=d?h+1:d}}function Ai(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const u=t.get(a.parentId);if(!u)continue;const f=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??at(u),c=nu(f,a.rect);o.set(a.parentId,{expandedRect:c,parent:u})}return o.size>0&&o.forEach(({expandedRect:a,parent:u},f)=>{var m;const c=u.internals.positionAbsolute,l=$e(u),d=u.origin??r,h=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,p=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,g=Math.max(l.width,Math.round(a.width)),y=Math.max(l.height,Math.round(a.height)),v=(g-l.width)*d[0],_=(y-l.height)*d[1];(h>0||p>0||v||_)&&(i.push({id:f,type:"position",position:{x:u.position.x-h+v,y:u.position.y-p+_}}),(m=n.get(f))==null||m.forEach(w=>{e.some(N=>N.id===w.id)||i.push({id:w.id,type:"position",position:{x:w.position.x+h,y:w.position.y+p}})})),(l.width<a.width||l.height<a.height||h||p)&&i.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:g+(h?d[0]*h-v:0),height:y+(p?d[1]*p-_:0)}})}),i}function qg(e,t,n,r,i,o,s){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let u=!1;if(!a)return{changes:[],updatedInternals:u};const f=[],c=window.getComputedStyle(a),{m22:l}=new window.DOMMatrixReadOnly(c.transform),d=[];for(const h of e.values()){const p=t.get(h.id);if(!p)continue;if(p.hidden){t.set(p.id,{...p,internals:{...p.internals,handleBounds:void 0}}),u=!0;continue}const g=Ni(h.nodeElement),y=p.measured.width!==g.width||p.measured.height!==g.height;if(!!(g.width&&g.height&&(y||!p.internals.handleBounds||h.force))){const _=h.nodeElement.getBoundingClientRect(),m=ut(p.extent)?p.extent:o;let{positionAbsolute:w}=p.internals;p.parentId&&p.extent==="parent"?w=eu(w,g,t.get(p.parentId)):m&&(w=We(w,m,g));const N={...p,measured:g,internals:{...p.internals,positionAbsolute:w,handleBounds:{source:oo("source",h.nodeElement,_,l,p.id),target:oo("target",h.nodeElement,_,l,p.id)}}};t.set(p.id,N),p.parentId&&Mi(N,t,n,{nodeOrigin:i,zIndexMode:s}),u=!0,y&&(f.push({id:p.id,type:"dimensions",dimensions:g}),p.expandParent&&p.parentId&&d.push({id:p.id,parentId:p.parentId,rect:at(N,i)}))}}if(d.length>0){const h=Ai(d,t,n,i);f.push(...h)}return{changes:f,updatedInternals:u}}async function zg({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function ho(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${i}-${e}`;const u=r.get(s)||new Map;if(r.set(s,u.set(n,t)),o){s=`${i}-${e}-${o}`;const f=r.get(s)||new Map;r.set(s,f.set(n,t))}}function gu(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,u={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},f=`${i}-${s}--${o}-${a}`,c=`${o}-${a}--${i}-${s}`;ho("source",u,c,e,i,s),ho("target",u,f,e,o,a),t.set(r.id,r)}}function mu(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:mu(n,t):!1}function po(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Og(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!mu(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Rn({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,u;const i=[];for(const[f,c]of t){const l=(s=n.get(f))==null?void 0:s.internals.userNode;l&&i.push({...l,position:c.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((u=t.get(e))==null?void 0:u.position)||o.position,dragging:r}:i[0],i]}function Fg({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const o={x:n-i.distance.x,y:r-i.distance.y},s=$t(o,t);return{x:s.x-o.x,y:s.y-o.y}}function Vg({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,u=!1,f={x:0,y:0},c=null,l=!1,d=null,h=!1,p=!1,g=null;function y({noDragClassName:_,handleSelector:m,domNode:w,isSelectable:N,nodeId:b,nodeClickDistance:C=0}){d=he(w);function P({x:M,y:q}){const{nodeLookup:x,nodeExtent:A,snapGrid:S,snapToGrid:$,nodeOrigin:k,onNodeDrag:E,onSelectionDrag:D,onError:F,updateNodePositions:O}=t();o={x:M,y:q};let B=!1;const H=a.size>1,G=H&&A?ti(Pt(a)):null,U=H&&$?Fg({dragItems:a,snapGrid:S,x:M,y:q}):null;for(const[W,V]of a){if(!x.has(W))continue;let Y={x:M-V.distance.x,y:q-V.distance.y};$&&(Y=U?{x:Math.round(Y.x+U.x),y:Math.round(Y.y+U.y)}:$t(Y,S));let ee=null;if(H&&A&&!V.extent&&G){const{positionAbsolute:X}=V.internals,re=X.x-G.x+A[0][0],oe=X.x+V.measured.width-G.x2+A[1][0],ne=X.y-G.y+A[0][1],le=X.y+V.measured.height-G.y2+A[1][1];ee=[[re,ne],[oe,le]]}const{position:Q,positionAbsolute:K}=Ja({nodeId:W,nextPosition:Y,nodeLookup:x,nodeExtent:ee||A,nodeOrigin:k,onError:F});B=B||V.position.x!==Q.x||V.position.y!==Q.y,V.position=Q,V.internals.positionAbsolute=K}if(p=p||B,!!B&&(O(a,!0),g&&(r||E||!b&&D))){const[W,V]=Rn({nodeId:b,dragItems:a,nodeLookup:x});r==null||r(g,a,W,V),E==null||E(g,W,V),b||D==null||D(g,V)}}async function R(){if(!c)return;const{transform:M,panBy:q,autoPanSpeed:x,autoPanOnNodeDrag:A}=t();if(!A){u=!1,cancelAnimationFrame(s);return}const[S,$]=tu(f,c,x);(S!==0||$!==0)&&(o.x=(o.x??0)-S/M[2],o.y=(o.y??0)-$/M[2],await q({x:S,y:$})&&P(o)),s=requestAnimationFrame(R)}function z(M){var H;const{nodeLookup:q,multiSelectionActive:x,nodesDraggable:A,transform:S,snapGrid:$,snapToGrid:k,selectNodesOnDrag:E,onNodeDragStart:D,onSelectionDragStart:F,unselectNodesAndEdges:O}=t();l=!0,(!E||!N)&&!x&&b&&((H=q.get(b))!=null&&H.selected||O()),N&&E&&b&&(e==null||e(b));const B=_t(M.sourceEvent,{transform:S,snapGrid:$,snapToGrid:k,containerBounds:c});if(o=B,a=Og(q,A,B,b),a.size>0&&(n||D||!b&&F)){const[G,U]=Rn({nodeId:b,dragItems:a,nodeLookup:q});n==null||n(M.sourceEvent,a,G,U),D==null||D(M.sourceEvent,G,U),b||F==null||F(M.sourceEvent,U)}}const I=za().clickDistance(C).on("start",M=>{const{domNode:q,nodeDragThreshold:x,transform:A,snapGrid:S,snapToGrid:$}=t();c=(q==null?void 0:q.getBoundingClientRect())||null,h=!1,p=!1,g=M.sourceEvent,x===0&&z(M),o=_t(M.sourceEvent,{transform:A,snapGrid:S,snapToGrid:$,containerBounds:c}),f=ye(M.sourceEvent,c)}).on("drag",M=>{const{autoPanOnNodeDrag:q,transform:x,snapGrid:A,snapToGrid:S,nodeDragThreshold:$,nodeLookup:k}=t(),E=_t(M.sourceEvent,{transform:x,snapGrid:A,snapToGrid:S,containerBounds:c});if(g=M.sourceEvent,(M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1||b&&!k.has(b))&&(h=!0),!h){if(!u&&q&&l&&(u=!0,R()),!l){const D=ye(M.sourceEvent,c),F=D.x-f.x,O=D.y-f.y;Math.sqrt(F*F+O*O)>$&&z(M)}(o.x!==E.xSnapped||o.y!==E.ySnapped)&&a&&l&&(f=ye(M.sourceEvent,c),P(E))}}).on("end",M=>{if(!(!l||h)&&(u=!1,l=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:q,updateNodePositions:x,onNodeDragStop:A,onSelectionDragStop:S}=t();if(p&&(x(a,!1),p=!1),i||A||!b&&S){const[$,k]=Rn({nodeId:b,dragItems:a,nodeLookup:q,dragging:!1});i==null||i(M.sourceEvent,a,$,k),A==null||A(M.sourceEvent,$,k),b||S==null||S(M.sourceEvent,k)}}}).filter(M=>{const q=M.target;return!M.button&&(!_||!po(q,`.${_}`,w))&&(!m||po(q,m,w))});d.call(I)}function v(){d==null||d.on(".drag",null)}return{update:y,destroy:v}}function Hg(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Ct(i,at(o))>0&&r.push(o);return r}const Bg=250;function jg(e,t,n,r){var a,u;let i=[],o=1/0;const s=Hg(e,n,t+Bg);for(const f of s){const c=[...((a=f.internals.handleBounds)==null?void 0:a.source)??[],...((u=f.internals.handleBounds)==null?void 0:u.target)??[]];for(const l of c){if(r.nodeId===l.nodeId&&r.type===l.type&&r.id===l.id)continue;const{x:d,y:h}=Xe(f,l,l.position,!0),p=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(h-e.y,2));p>t||(p<o?(i=[{...l,x:d,y:h}],o=p):p===o&&i.push({...l,x:d,y:h}))}}if(!i.length)return null;if(i.length>1){const f=r.type==="source"?"target":"source";return i.find(c=>c.type===f)??i[0]}return i[0]}function vu(e,t,n,r,i,o=!1){var f,c,l;const s=r.get(e);if(!s)return null;const a=i==="strict"?(f=s.internals.handleBounds)==null?void 0:f[t]:[...((c=s.internals.handleBounds)==null?void 0:c.source)??[],...((l=s.internals.handleBounds)==null?void 0:l.target)??[]],u=(n?a==null?void 0:a.find(d=>d.id===n):a==null?void 0:a[0])??null;return u&&o?{...u,...Xe(s,u,u.position,!0)}:u}function yu(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Gg(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const wu=()=>!0;function Yg(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:u,lib:f,autoPanOnConnect:c,flowId:l,panBy:d,cancelConnection:h,onConnectStart:p,onConnect:g,onConnectEnd:y,isValidConnection:v=wu,onReconnectEnd:_,updateConnection:m,getTransform:w,getFromHandle:N,autoPanSpeed:b,dragThreshold:C=1,handleDomNode:P}){const R=ou(e.target);let z=0,I;const{x:M,y:q}=ye(e),x=yu(o,P),A=a==null?void 0:a.getBoundingClientRect();let S=!1;if(!A||!x)return;const $=vu(i,x,r,u,t);if(!$)return;let k=ye(e,A),E=!1,D=null,F=!1,O=null;function B(){if(!c||!A)return;const[Q,K]=tu(k,A,b);d({x:Q,y:K}),z=requestAnimationFrame(B)}const H={...$,nodeId:i,type:x,position:$.position},G=u.get(i);let W={inProgress:!0,isValid:null,from:Xe(G,H,j.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:G,to:k,toHandle:null,toPosition:to[H.position],toNode:null,pointer:k};function V(){S=!0,m(W),p==null||p(e,{nodeId:i,handleId:r,handleType:x})}C===0&&V();function Y(Q){if(!S){const{x:le,y:Le}=ye(Q),Se=le-M,He=Le-q;if(!(Se*Se+He*He>C*C))return;V()}if(!N()||!H){ee(Q);return}const K=w();k=ye(Q,A),I=jg(Lt(k,K,!1,[1,1]),n,u,H),E||(B(),E=!0);const X=xu(Q,{handle:I,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:v,doc:R,lib:f,flowId:l,nodeLookup:u});O=X.handleDomNode,D=X.connection,F=Gg(!!I,X.isValid);const re=u.get(i),oe=re?Xe(re,H,j.Left,!0):W.from,ne={...W,from:oe,isValid:F,to:X.toHandle&&F?tn({x:X.toHandle.x,y:X.toHandle.y},K):k,toHandle:X.toHandle,toPosition:F&&X.toHandle?X.toHandle.position:to[H.position],toNode:X.toHandle?u.get(X.toHandle.nodeId):null,pointer:k};m(ne),W=ne}function ee(Q){if(!("touches"in Q&&Q.touches.length>0)){if(S){(I||O)&&D&&F&&(g==null||g(D));const{inProgress:K,...X}=W,re={...X,toPosition:W.toHandle?W.toPosition:null};y==null||y(Q,re),o&&(_==null||_(Q,re))}h(),cancelAnimationFrame(z),E=!1,F=!1,D=null,O=null,R.removeEventListener("mousemove",Y),R.removeEventListener("mouseup",ee),R.removeEventListener("touchmove",Y),R.removeEventListener("touchend",ee)}}R.addEventListener("mousemove",Y),R.addEventListener("mouseup",ee),R.addEventListener("touchmove",Y),R.addEventListener("touchend",ee)}function xu(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:u,isValidConnection:f=wu,nodeLookup:c}){const l=o==="target",d=t?s.querySelector(`.${a}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:p}=ye(e),g=s.elementFromPoint(h,p),y=g!=null&&g.classList.contains(`${a}-flow__handle`)?g:d,v={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const _=yu(void 0,y),m=y.getAttribute("data-nodeid"),w=y.getAttribute("data-handleid"),N=y.classList.contains("connectable"),b=y.classList.contains("connectableend");if(!m||!_)return v;const C={source:l?m:r,sourceHandle:l?w:i,target:l?r:m,targetHandle:l?i:w};v.connection=C;const R=N&&b&&(n===ot.Strict?l&&_==="source"||!l&&_==="target":m!==r||w!==i);v.isValid=R&&f(C),v.toHandle=vu(m,_,w,c,n,!0)}return v}const oi={onPointerDown:Yg,isValid:xu};function Wg({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=he(e);function o({translateExtent:a,width:u,height:f,zoomStep:c=1,pannable:l=!0,zoomable:d=!0,inversePan:h=!1}){const p=m=>{if(m.sourceEvent.type!=="wheel"||!t)return;const w=n(),N=m.sourceEvent.ctrlKey&&kt()?10:1,b=-m.sourceEvent.deltaY*(m.sourceEvent.deltaMode===1?.05:m.sourceEvent.deltaMode?1:.002)*c,C=w[2]*Math.pow(2,b*N);t.scaleTo(C)};let g=[0,0];const y=m=>{(m.sourceEvent.type==="mousedown"||m.sourceEvent.type==="touchstart")&&(g=[m.sourceEvent.clientX??m.sourceEvent.touches[0].clientX,m.sourceEvent.clientY??m.sourceEvent.touches[0].clientY])},v=m=>{const w=n();if(m.sourceEvent.type!=="mousemove"&&m.sourceEvent.type!=="touchmove"||!t)return;const N=[m.sourceEvent.clientX??m.sourceEvent.touches[0].clientX,m.sourceEvent.clientY??m.sourceEvent.touches[0].clientY],b=[N[0]-g[0],N[1]-g[1]];g=N;const C=r()*Math.max(w[2],Math.log(w[2]))*(h?-1:1),P={x:w[0]-b[0]*C,y:w[1]-b[1]*C},R=[[0,0],[u,f]];t.setViewportConstrained({x:P.x,y:P.y,zoom:w[2]},R,a)},_=Wa().on("start",y).on("zoom",l?v:null).on("zoom.wheel",d?p:null);i.call(_,{})}function s(){i.on("zoom",null)}return{update:o,destroy:s,pointer:me}}const xn=e=>({x:e.x,y:e.y,zoom:e.k}),Tn=({x:e,y:t,zoom:n})=>vn.translate(e,t).scale(n),Je=(e,t)=>e.target.closest(`.${t}`),_u=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xg=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Dn=(e,t=0,n=Xg,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},bu=e=>{const t=e.ctrlKey&&kt()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Ug({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:u,onPanZoomEnd:f}){return c=>{if(Je(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const l=n.property("__zoom").k||1;if(c.ctrlKey&&s){const y=me(c),v=bu(c),_=l*Math.pow(2,v);r.scaleTo(n,_,y,c);return}const d=c.deltaMode===1?20:1;let h=i===Ge.Vertical?0:c.deltaX*d,p=i===Ge.Horizontal?0:c.deltaY*d;!kt()&&c.shiftKey&&i!==Ge.Vertical&&(h=c.deltaY*d,p=0),r.translateBy(n,-(h/l)*o,-(p/l)*o,{internal:!0});const g=xn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(u==null||u(c,g),e.panScrollTimeout=setTimeout(()=>{f==null||f(c,g),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(c,g))}}function Kg({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=Je(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function Zg({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=xn(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Qg({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&_u(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,xn(o.transform)))}}function Jg({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&_u(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const u=xn(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,u)},n?150:0)}}}function em({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:u,lib:f,connectionInProgress:c}){return l=>{var y;const d=e||t,h=n&&l.ctrlKey,p=l.type==="wheel";if(l.button===1&&l.type==="mousedown"&&(Je(l,`${f}-flow__node`)||Je(l,`${f}-flow__edge`)))return!0;if(!r&&!d&&!i&&!o&&!n||s||c&&!p||Je(l,a)&&p||Je(l,u)&&(!p||i&&p&&!e)||!n&&l.ctrlKey&&p)return!1;if(!n&&l.type==="touchstart"&&((y=l.touches)==null?void 0:y.length)>1)return l.preventDefault(),!1;if(!d&&!i&&!h&&p||!r&&(l.type==="mousedown"||l.type==="touchstart")||Array.isArray(r)&&!r.includes(l.button)&&l.type==="mousedown")return!1;const g=Array.isArray(r)&&r.includes(l.button)||!l.button||l.button<=1;return(!l.ctrlKey||p)&&g}}function tm({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:u}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),l=Wa().scaleExtent([t,n]).translateExtent(r),d=he(e).call(l);_({x:i.x,y:i.y,zoom:st(i.zoom,t,n)},[[0,0],[c.width,c.height]],r);const h=d.on("wheel.zoom"),p=d.on("dblclick.zoom");l.wheelDelta(bu);function g(I,M){return d?new Promise(q=>{l==null||l.interpolate((M==null?void 0:M.interpolate)==="linear"?An:jt).transform(Dn(d,M==null?void 0:M.duration,M==null?void 0:M.ease,()=>q(!0)),I)}):Promise.resolve(!1)}function y({noWheelClassName:I,noPanClassName:M,onPaneContextMenu:q,userSelectionActive:x,panOnScroll:A,panOnDrag:S,panOnScrollMode:$,panOnScrollSpeed:k,preventScrolling:E,zoomOnPinch:D,zoomOnScroll:F,zoomOnDoubleClick:O,zoomActivationKeyPressed:B,lib:H,onTransformChange:G,connectionInProgress:U,paneClickDistance:W,selectionOnDrag:V}){x&&!f.isZoomingOrPanning&&v();const Y=A&&!B&&!x;l.clickDistance(V?1/0:!ve(W)||W<0?0:W);const ee=Y?Ug({zoomPanValues:f,noWheelClassName:I,d3Selection:d,d3Zoom:l,panOnScrollMode:$,panOnScrollSpeed:k,zoomOnPinch:D,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:a}):Kg({noWheelClassName:I,preventScrolling:E,d3ZoomHandler:h});if(d.on("wheel.zoom",ee,{passive:!1}),!x){const K=Zg({zoomPanValues:f,onDraggingChange:u,onPanZoomStart:s});l.on("start",K);const X=Qg({zoomPanValues:f,panOnDrag:S,onPaneContextMenu:!!q,onPanZoom:o,onTransformChange:G});l.on("zoom",X);const re=Jg({zoomPanValues:f,panOnDrag:S,panOnScroll:A,onPaneContextMenu:q,onPanZoomEnd:a,onDraggingChange:u});l.on("end",re)}const Q=em({zoomActivationKeyPressed:B,panOnDrag:S,zoomOnScroll:F,panOnScroll:A,zoomOnDoubleClick:O,zoomOnPinch:D,userSelectionActive:x,noPanClassName:M,noWheelClassName:I,lib:H,connectionInProgress:U});l.filter(Q),O?d.on("dblclick.zoom",p):d.on("dblclick.zoom",null)}function v(){l.on("zoom",null)}async function _(I,M,q){const x=Tn(I),A=l==null?void 0:l.constrain()(x,M,q);return A&&await g(A),new Promise(S=>S(A))}async function m(I,M){const q=Tn(I);return await g(q,M),new Promise(x=>x(q))}function w(I){if(d){const M=Tn(I),q=d.property("__zoom");(q.k!==I.zoom||q.x!==I.x||q.y!==I.y)&&(l==null||l.transform(d,M,null,{sync:!0}))}}function N(){const I=d?Ya(d.node()):{x:0,y:0,k:1};return{x:I.x,y:I.y,zoom:I.k}}function b(I,M){return d?new Promise(q=>{l==null||l.interpolate((M==null?void 0:M.interpolate)==="linear"?An:jt).scaleTo(Dn(d,M==null?void 0:M.duration,M==null?void 0:M.ease,()=>q(!0)),I)}):Promise.resolve(!1)}function C(I,M){return d?new Promise(q=>{l==null||l.interpolate((M==null?void 0:M.interpolate)==="linear"?An:jt).scaleBy(Dn(d,M==null?void 0:M.duration,M==null?void 0:M.ease,()=>q(!0)),I)}):Promise.resolve(!1)}function P(I){l==null||l.scaleExtent(I)}function R(I){l==null||l.translateExtent(I)}function z(I){const M=!ve(I)||I<0?0:I;l==null||l.clickDistance(M)}return{update:y,destroy:v,setViewport:m,setViewportConstrained:_,getViewport:N,scaleTo:b,scaleBy:C,setScaleExtent:P,setTranslateExtent:R,syncViewport:w,setClickDistance:z}}var ct;(function(e){e.Line="line",e.Handle="handle"})(ct||(ct={}));function nm({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const s=e-t,a=n-r,u=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&i&&(u[0]=u[0]*-1),a&&o&&(u[1]=u[1]*-1),u}function go(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Re(e,t){return Math.max(0,t-e)}function Te(e,t){return Math.max(0,e-t)}function Ot(e,t,n){return Math.max(0,t-e,e-n)}function mo(e,t){return e?!t:t}function rm(e,t,n,r,i,o,s,a){let{affectsX:u,affectsY:f}=t;const{isHorizontal:c,isVertical:l}=t,d=c&&l,{xSnapped:h,ySnapped:p}=n,{minWidth:g,maxWidth:y,minHeight:v,maxHeight:_}=r,{x:m,y:w,width:N,height:b,aspectRatio:C}=e;let P=Math.floor(c?h-e.pointerX:0),R=Math.floor(l?p-e.pointerY:0);const z=N+(u?-P:P),I=b+(f?-R:R),M=-o[0]*N,q=-o[1]*b;let x=Ot(z,g,y),A=Ot(I,v,_);if(s){let k=0,E=0;u&&P<0?k=Re(m+P+M,s[0][0]):!u&&P>0&&(k=Te(m+z+M,s[1][0])),f&&R<0?E=Re(w+R+q,s[0][1]):!f&&R>0&&(E=Te(w+I+q,s[1][1])),x=Math.max(x,k),A=Math.max(A,E)}if(a){let k=0,E=0;u&&P>0?k=Te(m+P,a[0][0]):!u&&P<0&&(k=Re(m+z,a[1][0])),f&&R>0?E=Te(w+R,a[0][1]):!f&&R<0&&(E=Re(w+I,a[1][1])),x=Math.max(x,k),A=Math.max(A,E)}if(i){if(c){const k=Ot(z/C,v,_)*C;if(x=Math.max(x,k),s){let E=0;!u&&!f||u&&!f&&d?E=Te(w+q+z/C,s[1][1])*C:E=Re(w+q+(u?P:-P)/C,s[0][1])*C,x=Math.max(x,E)}if(a){let E=0;!u&&!f||u&&!f&&d?E=Re(w+z/C,a[1][1])*C:E=Te(w+(u?P:-P)/C,a[0][1])*C,x=Math.max(x,E)}}if(l){const k=Ot(I*C,g,y)/C;if(A=Math.max(A,k),s){let E=0;!u&&!f||f&&!u&&d?E=Te(m+I*C+M,s[1][0])/C:E=Re(m+(f?R:-R)*C+M,s[0][0])/C,A=Math.max(A,E)}if(a){let E=0;!u&&!f||f&&!u&&d?E=Re(m+I*C,a[1][0])/C:E=Te(m+(f?R:-R)*C,a[0][0])/C,A=Math.max(A,E)}}}R=R+(R<0?A:-A),P=P+(P<0?x:-x),i&&(d?z>I*C?R=(mo(u,f)?-P:P)/C:P=(mo(u,f)?-R:R)*C:c?(R=P/C,f=u):(P=R*C,u=f));const S=u?m+P:m,$=f?w+R:w;return{width:N+(u?-P:P),height:b+(f?-R:R),x:o[0]*P*(u?-1:1)+S,y:o[1]*R*(f?-1:1)+$}}const Eu={width:0,height:0,x:0,y:0},im={...Eu,pointerX:0,pointerY:0,aspectRatio:1};function om(e){return[[0,0],[e.measured.width,e.measured.height]]}function sm(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=n[0]*o,u=n[1]*s;return[[r-a,i-u],[r+o-a,i+s-u]]}function am({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=he(e);let s={controlDirection:go("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function a({controlPosition:f,boundaries:c,keepAspectRatio:l,resizeDirection:d,onResizeStart:h,onResize:p,onResizeEnd:g,shouldResize:y}){let v={...Eu},_={...im};s={boundaries:c,resizeDirection:d,keepAspectRatio:l,controlDirection:go(f)};let m,w=null,N=[],b,C,P,R=!1;const z=za().on("start",I=>{const{nodeLookup:M,transform:q,snapGrid:x,snapToGrid:A,nodeOrigin:S,paneDomNode:$}=n();if(m=M.get(t),!m)return;w=($==null?void 0:$.getBoundingClientRect())??null;const{xSnapped:k,ySnapped:E}=_t(I.sourceEvent,{transform:q,snapGrid:x,snapToGrid:A,containerBounds:w});v={width:m.measured.width??0,height:m.measured.height??0,x:m.position.x??0,y:m.position.y??0},_={...v,pointerX:k,pointerY:E,aspectRatio:v.width/v.height},b=void 0,m.parentId&&(m.extent==="parent"||m.expandParent)&&(b=M.get(m.parentId),C=b&&m.extent==="parent"?om(b):void 0),N=[],P=void 0;for(const[D,F]of M)if(F.parentId===t&&(N.push({id:D,position:{...F.position},extent:F.extent}),F.extent==="parent"||F.expandParent)){const O=sm(F,m,F.origin??S);P?P=[[Math.min(O[0][0],P[0][0]),Math.min(O[0][1],P[0][1])],[Math.max(O[1][0],P[1][0]),Math.max(O[1][1],P[1][1])]]:P=O}h==null||h(I,{...v})}).on("drag",I=>{const{transform:M,snapGrid:q,snapToGrid:x,nodeOrigin:A}=n(),S=_t(I.sourceEvent,{transform:M,snapGrid:q,snapToGrid:x,containerBounds:w}),$=[];if(!m)return;const{x:k,y:E,width:D,height:F}=v,O={},B=m.origin??A,{width:H,height:G,x:U,y:W}=rm(_,s.controlDirection,S,s.boundaries,s.keepAspectRatio,B,C,P),V=H!==D,Y=G!==F,ee=U!==k&&V,Q=W!==E&&Y;if(!ee&&!Q&&!V&&!Y)return;if((ee||Q||B[0]===1||B[1]===1)&&(O.x=ee?U:v.x,O.y=Q?W:v.y,v.x=O.x,v.y=O.y,N.length>0)){const oe=U-k,ne=W-E;for(const le of N)le.position={x:le.position.x-oe+B[0]*(H-D),y:le.position.y-ne+B[1]*(G-F)},$.push(le)}if((V||Y)&&(O.width=V&&(!s.resizeDirection||s.resizeDirection==="horizontal")?H:v.width,O.height=Y&&(!s.resizeDirection||s.resizeDirection==="vertical")?G:v.height,v.width=O.width,v.height=O.height),b&&m.expandParent){const oe=B[0]*(O.width??0);O.x&&O.x<oe&&(v.x=oe,_.x=_.x-(O.x-oe));const ne=B[1]*(O.height??0);O.y&&O.y<ne&&(v.y=ne,_.y=_.y-(O.y-ne))}const K=nm({width:v.width,prevWidth:D,height:v.height,prevHeight:F,affectsX:s.controlDirection.affectsX,affectsY:s.controlDirection.affectsY}),X={...v,direction:K};(y==null?void 0:y(I,X))!==!1&&(R=!0,p==null||p(I,X),r(O,$))}).on("end",I=>{R&&(g==null||g(I,{...v}),i==null||i({...v}),R=!1)});o.call(z)}function u(){o.on(".drag",null)}return{update:a,destroy:u}}const{useDebugValue:um}=Vl,{useSyncExternalStoreWithSelector:cm}=od,lm=e=>e;function Su(e,t=lm,n){const r=cm(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return um(r),r}const vo=(e,t)=>{const n=Of(e),r=(i,o=t)=>Su(n,i,o);return Object.assign(r,n),r},fm=(e,t)=>e?vo(e,t):vo;function se(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const _n=T.createContext(null),dm=_n.Provider,Nu=be.error001();function te(e,t){const n=T.useContext(_n);if(n===null)throw new Error(Nu);return Su(n,e,t)}function ae(){const e=T.useContext(_n);if(e===null)throw new Error(Nu);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const yo={display:"none"},hm={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Cu="react-flow__node-desc",ku="react-flow__edge-desc",pm="react-flow__aria-live",gm=e=>e.ariaLiveMessage,mm=e=>e.ariaLabelConfig;function vm({rfId:e}){const t=te(gm);return L.jsx("div",{id:`${pm}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:hm,children:t})}function ym({rfId:e,disableKeyboardA11y:t}){const n=te(mm);return L.jsxs(L.Fragment,{children:[L.jsx("div",{id:`${Cu}-${e}`,style:yo,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),L.jsx("div",{id:`${ku}-${e}`,style:yo,children:n["edge.a11yDescription.default"]}),!t&&L.jsx(vm,{rfId:e})]})}const bn=T.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},o)=>{const s=`${e}`.split("-");return L.jsx("div",{className:ce(["react-flow__panel",n,...s]),style:r,ref:o,...i,children:t})});bn.displayName="Panel";function wm({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:L.jsx(bn,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:L.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const xm=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Ft=e=>e.id;function _m(e,t){return se(e.selectedNodes.map(Ft),t.selectedNodes.map(Ft))&&se(e.selectedEdges.map(Ft),t.selectedEdges.map(Ft))}function bm({onSelectionChange:e}){const t=ae(),{selectedNodes:n,selectedEdges:r}=te(xm,_m);return T.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(o=>o(i))},[n,r,e]),null}const Em=e=>!!e.onSelectionChangeHandlers;function Sm({onSelectionChange:e}){const t=te(Em);return e||t?L.jsx(bm,{onSelectionChange:e}):null}const Iu=[0,0],Nm={x:0,y:0,zoom:1},Cm=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],wo=[...Cm,"rfId"],km=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),xo={translateExtent:St,nodeOrigin:Iu,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Im(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:o,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:u}=te(km,se),f=ae();T.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{c.current=xo,a()}),[]);const c=T.useRef(xo);return T.useEffect(()=>{for(const l of wo){const d=e[l],h=c.current[l];d!==h&&(typeof e[l]>"u"||(l==="nodes"?t(d):l==="edges"?n(d):l==="minZoom"?r(d):l==="maxZoom"?i(d):l==="translateExtent"?o(d):l==="nodeExtent"?s(d):l==="ariaLabelConfig"?f.setState({ariaLabelConfig:xg(d)}):l==="fitView"?f.setState({fitViewQueued:d}):l==="fitViewOptions"?f.setState({fitViewOptions:d}):f.setState({[l]:d})))}c.current=e},wo.map(l=>e[l])),null}function _o(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Mm(e){var r;const[t,n]=T.useState(e==="system"?null:e);return T.useEffect(()=>{if(e!=="system"){n(e);return}const i=_o(),o=()=>n(i!=null&&i.matches?"dark":"light");return o(),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}},[e]),t!==null?t:(r=_o())!=null&&r.matches?"dark":"light"}const bo=typeof document<"u"?document:null;function It(e=null,t={target:bo,actInsideInputWithModifier:!0}){const[n,r]=T.useState(!1),i=T.useRef(!1),o=T.useRef(new Set([])),[s,a]=T.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(l=>typeof l=="string").map(l=>l.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=f.reduce((l,d)=>l.concat(...d),[]);return[f,c]}return[[],[]]},[e]);return T.useEffect(()=>{const u=(t==null?void 0:t.target)??bo,f=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const c=h=>{var y,v;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!f)&&su(h))return!1;const g=So(h.code,a);if(o.current.add(h[g]),Eo(s,o.current,!1)){const _=((v=(y=h.composedPath)==null?void 0:y.call(h))==null?void 0:v[0])||h.target,m=(_==null?void 0:_.nodeName)==="BUTTON"||(_==null?void 0:_.nodeName)==="A";t.preventDefault!==!1&&(i.current||!m)&&h.preventDefault(),r(!0)}},l=h=>{const p=So(h.code,a);Eo(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(h[p]),h.key==="Meta"&&o.current.clear(),i.current=!1},d=()=>{o.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",l),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",l),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function Eo(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function So(e,t){return t.includes(e)?"code":"key"}const Am=()=>{const e=ae();return T.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,o],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:o,maxZoom:s,panZoom:a}=e.getState(),u=Si(t,r,i,o,s,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(u,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:o,domNode:s}=e.getState();if(!s)return t;const{x:a,y:u}=s.getBoundingClientRect(),f={x:t.x-a,y:t.y-u},c=n.snapGrid??i,l=n.snapToGrid??o;return Lt(f,r,l,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:o}=r.getBoundingClientRect(),s=tn(t,n);return{x:s.x+i,y:s.y+o}}}),[])};function Mu(e,t){const n=[],r=new Map,i=[];for(const o of e)if(o.type==="add"){i.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const s=r.get(o.id);s?s.push(o):r.set(o.id,[o])}for(const o of t){const s=r.get(o.id);if(!s){n.push(o);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...o};for(const u of s)Pm(u,a);n.push(a)}return i.length&&i.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function Pm(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Au(e,t){return Mu(e,t)}function Pu(e,t){return Mu(e,t)}function Be(e,t){return{id:e,type:"select",selected:t}}function et(e,t=new Set,n=!1){const r=[];for(const[i,o]of e){const s=t.has(i);!(o.selected===void 0&&!s)&&o.selected!==s&&(n&&(o.selected=s),r.push(Be(o.id,s)))}return r}function No({items:e=[],lookup:t}){var i;const n=[],r=new Map(e.map(o=>[o.id,o]));for(const[o,s]of e.entries()){const a=t.get(s.id),u=((i=a==null?void 0:a.internals)==null?void 0:i.userNode)??a;u!==void 0&&u!==s&&n.push({id:s.id,item:s,type:"replace"}),u===void 0&&n.push({item:s,type:"add",index:o})}for(const[o]of t)r.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function Co(e){return{id:e.id,type:"remove"}}const ko=e=>lg(e),$m=e=>Qa(e);function $u(e){return T.forwardRef(e)}const Lm=typeof window<"u"?T.useLayoutEffect:T.useEffect;function Io(e){const[t,n]=T.useState(BigInt(0)),[r]=T.useState(()=>Rm(()=>n(i=>i+BigInt(1))));return Lm(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function Rm(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Lu=T.createContext(null);function Tm({children:e}){const t=ae(),n=T.useCallback(a=>{const{nodes:u=[],setNodes:f,hasDefaultNodes:c,onNodesChange:l,nodeLookup:d,fitViewQueued:h,onNodesChangeMiddlewareMap:p}=t.getState();let g=u;for(const v of a)g=typeof v=="function"?v(g):v;let y=No({items:g,lookup:d});for(const v of p.values())y=v(y);c&&f(g),y.length>0?l==null||l(y):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:v,nodes:_,setNodes:m}=t.getState();v&&m(_)})},[]),r=Io(n),i=T.useCallback(a=>{const{edges:u=[],setEdges:f,hasDefaultEdges:c,onEdgesChange:l,edgeLookup:d}=t.getState();let h=u;for(const p of a)h=typeof p=="function"?p(h):p;c?f(h):l&&l(No({items:h,lookup:d}))},[]),o=Io(i),s=T.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return L.jsx(Lu.Provider,{value:s,children:e})}function Dm(){const e=T.useContext(Lu);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const qm=e=>!!e.panZoom;function Pi(){const e=Am(),t=ae(),n=Dm(),r=te(qm),i=T.useMemo(()=>{const o=l=>t.getState().nodeLookup.get(l),s=l=>{n.nodeQueue.push(l)},a=l=>{n.edgeQueue.push(l)},u=l=>{var v,_;const{nodeLookup:d,nodeOrigin:h}=t.getState(),p=ko(l)?l:d.get(l.id),g=p.parentId?iu(p.position,p.measured,p.parentId,d,h):p.position,y={...p,position:g,width:((v=p.measured)==null?void 0:v.width)??p.width,height:((_=p.measured)==null?void 0:_.height)??p.height};return at(y)},f=(l,d,h={replace:!1})=>{s(p=>p.map(g=>{if(g.id===l){const y=typeof d=="function"?d(g):d;return h.replace&&ko(y)?y:{...g,...y}}return g}))},c=(l,d,h={replace:!1})=>{a(p=>p.map(g=>{if(g.id===l){const y=typeof d=="function"?d(g):d;return h.replace&&$m(y)?y:{...g,...y}}return g}))};return{getNodes:()=>t.getState().nodes.map(l=>({...l})),getNode:l=>{var d;return(d=o(l))==null?void 0:d.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:l=[]}=t.getState();return l.map(d=>({...d}))},getEdge:l=>t.getState().edgeLookup.get(l),setNodes:s,setEdges:a,addNodes:l=>{const d=Array.isArray(l)?l:[l];n.nodeQueue.push(h=>[...h,...d])},addEdges:l=>{const d=Array.isArray(l)?l:[l];n.edgeQueue.push(h=>[...h,...d])},toObject:()=>{const{nodes:l=[],edges:d=[],transform:h}=t.getState(),[p,g,y]=h;return{nodes:l.map(v=>({...v})),edges:d.map(v=>({...v})),viewport:{x:p,y:g,zoom:y}}},deleteElements:async({nodes:l=[],edges:d=[]})=>{const{nodes:h,edges:p,onNodesDelete:g,onEdgesDelete:y,triggerNodeChanges:v,triggerEdgeChanges:_,onDelete:m,onBeforeDelete:w}=t.getState(),{nodes:N,edges:b}=await gg({nodesToRemove:l,edgesToRemove:d,nodes:h,edges:p,onBeforeDelete:w}),C=b.length>0,P=N.length>0;if(C){const R=b.map(Co);y==null||y(b),_(R)}if(P){const R=N.map(Co);g==null||g(N),v(R)}return(P||C)&&(m==null||m({nodes:N,edges:b})),{deletedNodes:N,deletedEdges:b}},getIntersectingNodes:(l,d=!0,h)=>{const p=ro(l),g=p?l:u(l),y=h!==void 0;return g?(h||t.getState().nodes).filter(v=>{const _=t.getState().nodeLookup.get(v.id);if(_&&!p&&(v.id===l.id||!_.internals.positionAbsolute))return!1;const m=at(y?v:_),w=Ct(m,g);return d&&w>0||w>=m.width*m.height||w>=g.width*g.height}):[]},isNodeIntersecting:(l,d,h=!0)=>{const g=ro(l)?l:u(l);if(!g)return!1;const y=Ct(g,d);return h&&y>0||y>=d.width*d.height||y>=g.width*g.height},updateNode:f,updateNodeData:(l,d,h={replace:!1})=>{f(l,p=>{const g=typeof d=="function"?d(p):d;return h.replace?{...p,data:g}:{...p,data:{...p.data,...g}}},h)},updateEdge:c,updateEdgeData:(l,d,h={replace:!1})=>{c(l,p=>{const g=typeof d=="function"?d(p):d;return h.replace?{...p,data:g}:{...p,data:{...p.data,...g}}},h)},getNodesBounds:l=>{const{nodeLookup:d,nodeOrigin:h}=t.getState();return fg(l,{nodeLookup:d,nodeOrigin:h})},getHandleConnections:({type:l,id:d,nodeId:h})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${h}-${l}${d?`-${d}`:""}`))==null?void 0:p.values())??[])},getNodeConnections:({type:l,handleId:d,nodeId:h})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${h}${l?d?`-${l}-${d}`:`-${l}`:""}`))==null?void 0:p.values())??[])},fitView:async l=>{const d=t.getState().fitViewResolver??wg();return t.setState({fitViewQueued:!0,fitViewOptions:l,fitViewResolver:d}),n.nodeQueue.push(h=>[...h]),d.promise}}},[]);return T.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const Mo=e=>e.selected,zm=typeof window<"u"?window:void 0;function Om({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ae(),{deleteElements:r}=Pi(),i=It(e,{actInsideInputWithModifier:!1}),o=It(t,{target:zm});T.useEffect(()=>{if(i){const{edges:s,nodes:a}=n.getState();r({nodes:a.filter(Mo),edges:s.filter(Mo)}),n.setState({nodesSelectionActive:!1})}},[i]),T.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function Fm(e){const t=ae();T.useEffect(()=>{const n=()=>{var i,o,s,a;if(!e.current||!(((o=(i=e.current).checkVisibility)==null?void 0:o.call(i))??!0))return!1;const r=Ni(e.current);(r.height===0||r.width===0)&&((a=(s=t.getState()).onError)==null||a.call(s,"004",be.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const En={position:"absolute",width:"100%",height:"100%",top:0,left:0},Vm=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function Hm({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:o=Ge.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:u,translateExtent:f,minZoom:c,maxZoom:l,zoomActivationKeyCode:d,preventScrolling:h=!0,children:p,noWheelClassName:g,noPanClassName:y,onViewportChange:v,isControlledViewport:_,paneClickDistance:m,selectionOnDrag:w}){const N=ae(),b=T.useRef(null),{userSelectionActive:C,lib:P,connectionInProgress:R}=te(Vm,se),z=It(d),I=T.useRef();Fm(b);const M=T.useCallback(q=>{v==null||v({x:q[0],y:q[1],zoom:q[2]}),_||N.setState({transform:q})},[v,_]);return T.useEffect(()=>{if(b.current){I.current=tm({domNode:b.current,minZoom:c,maxZoom:l,translateExtent:f,viewport:u,onDraggingChange:S=>N.setState({paneDragging:S}),onPanZoomStart:(S,$)=>{const{onViewportChangeStart:k,onMoveStart:E}=N.getState();E==null||E(S,$),k==null||k($)},onPanZoom:(S,$)=>{const{onViewportChange:k,onMove:E}=N.getState();E==null||E(S,$),k==null||k($)},onPanZoomEnd:(S,$)=>{const{onViewportChangeEnd:k,onMoveEnd:E}=N.getState();E==null||E(S,$),k==null||k($)}});const{x:q,y:x,zoom:A}=I.current.getViewport();return N.setState({panZoom:I.current,transform:[q,x,A],domNode:b.current.closest(".react-flow")}),()=>{var S;(S=I.current)==null||S.destroy()}}},[]),T.useEffect(()=>{var q;(q=I.current)==null||q.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:o,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:z,preventScrolling:h,noPanClassName:y,userSelectionActive:C,noWheelClassName:g,lib:P,onTransformChange:M,connectionInProgress:R,selectionOnDrag:w,paneClickDistance:m})},[e,t,n,r,i,o,s,a,z,h,y,C,g,P,M,R,w,m]),L.jsx("div",{className:"react-flow__renderer",ref:b,style:En,children:p})}const Bm=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function jm(){const{userSelectionActive:e,userSelectionRect:t}=te(Bm,se);return e&&t?L.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const qn=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Gm=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Ym({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Nt.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:o,onSelectionStart:s,onSelectionEnd:a,onPaneClick:u,onPaneContextMenu:f,onPaneScroll:c,onPaneMouseEnter:l,onPaneMouseMove:d,onPaneMouseLeave:h,children:p}){const g=ae(),{userSelectionActive:y,elementsSelectable:v,dragging:_,connectionInProgress:m}=te(Gm,se),w=v&&(e||y),N=T.useRef(null),b=T.useRef(),C=T.useRef(new Set),P=T.useRef(new Set),R=T.useRef(!1),z=k=>{if(R.current||m){R.current=!1;return}u==null||u(k),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},I=k=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){k.preventDefault();return}f==null||f(k)},M=c?k=>c(k):void 0,q=k=>{R.current&&(k.stopPropagation(),R.current=!1)},x=k=>{var G,U;const{domNode:E}=g.getState();if(b.current=E==null?void 0:E.getBoundingClientRect(),!b.current)return;const D=k.target===N.current;if(!D&&!!k.target.closest(".nokey")||!e||!(o&&D||t)||k.button!==0||!k.isPrimary)return;(U=(G=k.target)==null?void 0:G.setPointerCapture)==null||U.call(G,k.pointerId),R.current=!1;const{x:B,y:H}=ye(k.nativeEvent,b.current);g.setState({userSelectionRect:{width:0,height:0,startX:B,startY:H,x:B,y:H}}),D||(k.stopPropagation(),k.preventDefault())},A=k=>{const{userSelectionRect:E,transform:D,nodeLookup:F,edgeLookup:O,connectionLookup:B,triggerNodeChanges:H,triggerEdgeChanges:G,defaultEdgeOptions:U,resetSelectedElements:W}=g.getState();if(!b.current||!E)return;const{x:V,y:Y}=ye(k.nativeEvent,b.current),{startX:ee,startY:Q}=E;if(!R.current){const ne=t?0:i;if(Math.hypot(V-ee,Y-Q)<=ne)return;W(),s==null||s(k)}R.current=!0;const K={startX:ee,startY:Q,x:V<ee?V:ee,y:Y<Q?Y:Q,width:Math.abs(V-ee),height:Math.abs(Y-Q)},X=C.current,re=P.current;C.current=new Set(Ei(F,K,D,n===Nt.Partial,!0).map(ne=>ne.id)),P.current=new Set;const oe=(U==null?void 0:U.selectable)??!0;for(const ne of C.current){const le=B.get(ne);if(le)for(const{edgeId:Le}of le.values()){const Se=O.get(Le);Se&&(Se.selectable??oe)&&P.current.add(Le)}}if(!io(X,C.current)){const ne=et(F,C.current,!0);H(ne)}if(!io(re,P.current)){const ne=et(O,P.current);G(ne)}g.setState({userSelectionRect:K,userSelectionActive:!0,nodesSelectionActive:!1})},S=k=>{var E,D;k.button===0&&((D=(E=k.target)==null?void 0:E.releasePointerCapture)==null||D.call(E,k.pointerId),!y&&k.target===N.current&&g.getState().userSelectionRect&&(z==null||z(k)),g.setState({userSelectionActive:!1,userSelectionRect:null}),R.current&&(a==null||a(k),g.setState({nodesSelectionActive:C.current.size>0})))},$=r===!0||Array.isArray(r)&&r.includes(0);return L.jsxs("div",{className:ce(["react-flow__pane",{draggable:$,dragging:_,selection:e}]),onClick:w?void 0:qn(z,N),onContextMenu:qn(I,N),onWheel:qn(M,N),onPointerEnter:w?void 0:l,onPointerMove:w?A:d,onPointerUp:w?S:void 0,onPointerDownCapture:w?x:void 0,onClickCapture:w?q:void 0,onPointerLeave:h,ref:N,style:En,children:[p,L.jsx(jm,{})]})}function si({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeLookup:a,onError:u}=t.getState(),f=a.get(e);if(!f){u==null||u("012",be.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&s)&&(o({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function Ru({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,nodeClickDistance:s}){const a=ae(),[u,f]=T.useState(!1),c=T.useRef();return T.useEffect(()=>{c.current=Vg({getStoreItems:()=>a.getState(),onNodeMouseDown:l=>{si({id:l,store:a,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),T.useEffect(()=>{var l,d;if(t)(l=c.current)==null||l.destroy();else if(e.current)return(d=c.current)==null||d.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:i,nodeClickDistance:s}),()=>{var h;(h=c.current)==null||h.destroy()}},[n,r,t,o,e,i]),u}const Wm=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Tu(){const e=ae();return T.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:o,nodesDraggable:s,onError:a,updateNodePositions:u,nodeLookup:f,nodeOrigin:c}=e.getState(),l=new Map,d=Wm(s),h=i?o[0]:5,p=i?o[1]:5,g=n.direction.x*h*n.factor,y=n.direction.y*p*n.factor;for(const[,v]of f){if(!d(v))continue;let _={x:v.internals.positionAbsolute.x+g,y:v.internals.positionAbsolute.y+y};i&&(_=$t(_,o));const{position:m,positionAbsolute:w}=Ja({nodeId:v.id,nextPosition:_,nodeLookup:f,nodeExtent:r,nodeOrigin:c,onError:a});v.position=m,v.internals.positionAbsolute=w,l.set(v.id,v)}u(l)},[])}const $i=T.createContext(null),Xm=$i.Provider;$i.Consumer;const Du=()=>T.useContext($i),Um=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Km=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:o,connection:s}=r,{fromHandle:a,toHandle:u,isValid:f}=s,c=(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.id)===t&&(u==null?void 0:u.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:o===ot.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:c&&f}};function Zm({type:e="source",position:t=j.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:u,className:f,onMouseDown:c,onTouchStart:l,...d},h){var A,S;const p=s||null,g=e==="target",y=ae(),v=Du(),{connectOnClick:_,noPanClassName:m,rfId:w}=te(Um,se),{connectingFrom:N,connectingTo:b,clickConnecting:C,isPossibleEndHandle:P,connectionInProcess:R,clickConnectionInProcess:z,valid:I}=te(Km(v,p,e),se);v||(S=(A=y.getState()).onError)==null||S.call(A,"010",be.error010());const M=$=>{const{defaultEdgeOptions:k,onConnect:E,hasDefaultEdges:D}=y.getState(),F={...k,...$};if(D){const{edges:O,setEdges:B}=y.getState();B(Ng(F,O))}E==null||E(F),a==null||a(F)},q=$=>{if(!v)return;const k=au($.nativeEvent);if(i&&(k&&$.button===0||!k)){const E=y.getState();oi.onPointerDown($.nativeEvent,{handleDomNode:$.currentTarget,autoPanOnConnect:E.autoPanOnConnect,connectionMode:E.connectionMode,connectionRadius:E.connectionRadius,domNode:E.domNode,nodeLookup:E.nodeLookup,lib:E.lib,isTarget:g,handleId:p,nodeId:v,flowId:E.rfId,panBy:E.panBy,cancelConnection:E.cancelConnection,onConnectStart:E.onConnectStart,onConnectEnd:E.onConnectEnd,updateConnection:E.updateConnection,onConnect:M,isValidConnection:n||E.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:E.autoPanSpeed,dragThreshold:E.connectionDragThreshold})}k?c==null||c($):l==null||l($)},x=$=>{const{onClickConnectStart:k,onClickConnectEnd:E,connectionClickStartHandle:D,connectionMode:F,isValidConnection:O,lib:B,rfId:H,nodeLookup:G,connection:U}=y.getState();if(!v||!D&&!i)return;if(!D){k==null||k($.nativeEvent,{nodeId:v,handleId:p,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:v,type:e,id:p}});return}const W=ou($.target),V=n||O,{connection:Y,isValid:ee}=oi.isValid($.nativeEvent,{handle:{nodeId:v,id:p,type:e},connectionMode:F,fromNodeId:D.nodeId,fromHandleId:D.id||null,fromType:D.type,isValidConnection:V,flowId:H,doc:W,lib:B,nodeLookup:G});ee&&Y&&M(Y);const Q=structuredClone(U);delete Q.inProgress,Q.toPosition=Q.toHandle?Q.toHandle.position:null,E==null||E($,Q),y.setState({connectionClickStartHandle:null})};return L.jsx("div",{"data-handleid":p,"data-nodeid":v,"data-handlepos":t,"data-id":`${w}-${v}-${p}-${e}`,className:ce(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",m,f,{source:!g,target:g,connectable:r,connectablestart:i,connectableend:o,clickconnecting:C,connectingfrom:N,connectingto:b,valid:I,connectionindicator:r&&(!R||P)&&(R||z?o:i)}]),onMouseDown:q,onTouchStart:q,onClick:_?x:void 0,ref:h,...d,children:u})}const nn=T.memo($u(Zm));function Qm({data:e,isConnectable:t,sourcePosition:n=j.Bottom}){return L.jsxs(L.Fragment,{children:[e==null?void 0:e.label,L.jsx(nn,{type:"source",position:n,isConnectable:t})]})}function Jm({data:e,isConnectable:t,targetPosition:n=j.Top,sourcePosition:r=j.Bottom}){return L.jsxs(L.Fragment,{children:[L.jsx(nn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,L.jsx(nn,{type:"source",position:r,isConnectable:t})]})}function ev(){return null}function tv({data:e,isConnectable:t,targetPosition:n=j.Top}){return L.jsxs(L.Fragment,{children:[L.jsx(nn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const rn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Ao={input:Qm,default:Jm,output:tv,group:ev};function nv(e){var t,n,r,i;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((i=e.style)==null?void 0:i.height)}}const rv=e=>{const{width:t,height:n,x:r,y:i}=Pt(e.nodeLookup,{filter:o=>!!o.selected});return{width:ve(t)?t:null,height:ve(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function iv({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ae(),{width:i,height:o,transformString:s,userSelectionActive:a}=te(rv,se),u=Tu(),f=T.useRef(null);if(T.useEffect(()=>{var d;n||(d=f.current)==null||d.focus({preventScroll:!0})},[n]),Ru({nodeRef:f}),a||!i||!o)return null;const c=e?d=>{const h=r.getState().nodes.filter(p=>p.selected);e(d,h)}:void 0,l=d=>{Object.prototype.hasOwnProperty.call(rn,d.key)&&(d.preventDefault(),u({direction:rn[d.key],factor:d.shiftKey?4:1}))};return L.jsx("div",{className:ce(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:L.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:n?void 0:-1,onKeyDown:n?void 0:l,style:{width:i,height:o}})})}const Po=typeof window<"u"?window:void 0,ov=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function qu({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:u,selectionKeyCode:f,selectionOnDrag:c,selectionMode:l,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:p,panActivationKeyCode:g,zoomActivationKeyCode:y,elementsSelectable:v,zoomOnScroll:_,zoomOnPinch:m,panOnScroll:w,panOnScrollSpeed:N,panOnScrollMode:b,zoomOnDoubleClick:C,panOnDrag:P,defaultViewport:R,translateExtent:z,minZoom:I,maxZoom:M,preventScrolling:q,onSelectionContextMenu:x,noWheelClassName:A,noPanClassName:S,disableKeyboardA11y:$,onViewportChange:k,isControlledViewport:E}){const{nodesSelectionActive:D,userSelectionActive:F}=te(ov,se),O=It(f,{target:Po}),B=It(g,{target:Po}),H=B||P,G=B||w,U=c&&H!==!0,W=O||F||U;return Om({deleteKeyCode:u,multiSelectionKeyCode:p}),L.jsx(Hm,{onPaneContextMenu:o,elementsSelectable:v,zoomOnScroll:_,zoomOnPinch:m,panOnScroll:G,panOnScrollSpeed:N,panOnScrollMode:b,zoomOnDoubleClick:C,panOnDrag:!O&&H,defaultViewport:R,translateExtent:z,minZoom:I,maxZoom:M,zoomActivationKeyCode:y,preventScrolling:q,noWheelClassName:A,noPanClassName:S,onViewportChange:k,isControlledViewport:E,paneClickDistance:a,selectionOnDrag:U,children:L.jsxs(Ym,{onSelectionStart:d,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:H,isSelecting:!!W,selectionMode:l,selectionKeyPressed:O,paneClickDistance:a,selectionOnDrag:U,children:[e,D&&L.jsx(iv,{onSelectionContextMenu:x,noPanClassName:S,disableKeyboardA11y:$})]})})}qu.displayName="FlowRenderer";const sv=T.memo(qu),av=e=>t=>e?Ei(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function uv(e){return te(T.useCallback(av(e),[e]),se)}const cv=e=>e.updateNodeInternals;function lv(){const e=te(cv),[t]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const o=i.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:i.target,force:!0})}),e(r)}));return T.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function fv({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=ae(),o=T.useRef(null),s=T.useRef(null),a=T.useRef(e.sourcePosition),u=T.useRef(e.targetPosition),f=T.useRef(t),c=n&&!!e.internals.handleBounds;return T.useEffect(()=>{o.current&&!e.hidden&&(!c||s.current!==o.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(o.current),s.current=o.current)},[c,e.hidden]),T.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),T.useEffect(()=>{if(o.current){const l=f.current!==t,d=a.current!==e.sourcePosition,h=u.current!==e.targetPosition;(l||d||h)&&(f.current=t,a.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function dv({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:o,onDoubleClick:s,nodesDraggable:a,elementsSelectable:u,nodesConnectable:f,nodesFocusable:c,resizeObserver:l,noDragClassName:d,noPanClassName:h,disableKeyboardA11y:p,rfId:g,nodeTypes:y,nodeClickDistance:v,onError:_}){const{node:m,internals:w,isParent:N}=te(V=>{const Y=V.nodeLookup.get(e),ee=V.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:ee}},se);let b=m.type||"default",C=(y==null?void 0:y[b])||Ao[b];C===void 0&&(_==null||_("003",be.error003(b)),b="default",C=(y==null?void 0:y.default)||Ao.default);const P=!!(m.draggable||a&&typeof m.draggable>"u"),R=!!(m.selectable||u&&typeof m.selectable>"u"),z=!!(m.connectable||f&&typeof m.connectable>"u"),I=!!(m.focusable||c&&typeof m.focusable>"u"),M=ae(),q=ru(m),x=fv({node:m,nodeType:b,hasDimensions:q,resizeObserver:l}),A=Ru({nodeRef:x,disabled:m.hidden||!P,noDragClassName:d,handleSelector:m.dragHandle,nodeId:e,isSelectable:R,nodeClickDistance:v}),S=Tu();if(m.hidden)return null;const $=$e(m),k=nv(m),E=R||P||t||n||r||i,D=n?V=>n(V,{...w.userNode}):void 0,F=r?V=>r(V,{...w.userNode}):void 0,O=i?V=>i(V,{...w.userNode}):void 0,B=o?V=>o(V,{...w.userNode}):void 0,H=s?V=>s(V,{...w.userNode}):void 0,G=V=>{const{selectNodesOnDrag:Y,nodeDragThreshold:ee}=M.getState();R&&(!Y||!P||ee>0)&&si({id:e,store:M,nodeRef:x}),t&&t(V,{...w.userNode})},U=V=>{if(!(su(V.nativeEvent)||p)){if(Xa.includes(V.key)&&R){const Y=V.key==="Escape";si({id:e,store:M,unselect:Y,nodeRef:x})}else if(P&&m.selected&&Object.prototype.hasOwnProperty.call(rn,V.key)){V.preventDefault();const{ariaLabelConfig:Y}=M.getState();M.setState({ariaLiveMessage:Y["node.a11yDescription.ariaLiveMessage"]({direction:V.key.replace("Arrow","").toLowerCase(),x:~~w.positionAbsolute.x,y:~~w.positionAbsolute.y})}),S({direction:rn[V.key],factor:V.shiftKey?4:1})}}},W=()=>{var re;if(p||!((re=x.current)!=null&&re.matches(":focus-visible")))return;const{transform:V,width:Y,height:ee,autoPanOnNodeFocus:Q,setCenter:K}=M.getState();if(!Q)return;Ei(new Map([[e,m]]),{x:0,y:0,width:Y,height:ee},V,!0).length>0||K(m.position.x+$.width/2,m.position.y+$.height/2,{zoom:V[2]})};return L.jsx("div",{className:ce(["react-flow__node",`react-flow__node-${b}`,{[h]:P},m.className,{selected:m.selected,selectable:R,parent:N,draggable:P,dragging:A}]),ref:x,style:{zIndex:w.z,transform:`translate(${w.positionAbsolute.x}px,${w.positionAbsolute.y}px)`,pointerEvents:E?"all":"none",visibility:q?"visible":"hidden",...m.style,...k},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:D,onMouseMove:F,onMouseLeave:O,onContextMenu:B,onClick:G,onDoubleClick:H,onKeyDown:I?U:void 0,tabIndex:I?0:void 0,onFocus:I?W:void 0,role:m.ariaRole??(I?"group":void 0),"aria-roledescription":"node","aria-describedby":p?void 0:`${Cu}-${g}`,"aria-label":m.ariaLabel,...m.domAttributes,children:L.jsx(Xm,{value:e,children:L.jsx(C,{id:e,data:m.data,type:b,positionAbsoluteX:w.positionAbsolute.x,positionAbsoluteY:w.positionAbsolute.y,selected:m.selected??!1,selectable:R,draggable:P,deletable:m.deletable??!0,isConnectable:z,sourcePosition:m.sourcePosition,targetPosition:m.targetPosition,dragging:A,dragHandle:m.dragHandle,zIndex:w.z,parentId:m.parentId,...$})})})}var hv=T.memo(dv);const pv=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function zu(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:o}=te(pv,se),s=uv(e.onlyRenderVisibleElements),a=lv();return L.jsx("div",{className:"react-flow__nodes",style:En,children:s.map(u=>L.jsx(hv,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:o},u))})}zu.displayName="NodeRenderer";const gv=T.memo(zu);function mv(e){return te(T.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const o=n.nodeLookup.get(i.source),s=n.nodeLookup.get(i.target);o&&s&&Eg({sourceNode:o,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),se)}const vv=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return L.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},yv=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return L.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},$o={[Jt.Arrow]:vv,[Jt.ArrowClosed]:yv};function wv(e){const t=ae();return T.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call($o,e)?$o[e]:((o=(i=t.getState()).onError)==null||o.call(i,"009",be.error009(e)),null)},[e])}const xv=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const u=wv(t);return u?L.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0",children:L.jsx(u,{color:n,strokeWidth:s})}):null},Ou=({defaultColor:e,rfId:t})=>{const n=te(o=>o.edges),r=te(o=>o.defaultEdgeOptions),i=T.useMemo(()=>Ag(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?L.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:L.jsx("defs",{children:i.map(o=>L.jsx(xv,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};Ou.displayName="MarkerDefinitions";var _v=T.memo(Ou);function Fu({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:o,labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:u,className:f,...c}){const[l,d]=T.useState({x:1,y:0,width:0,height:0}),h=ce(["react-flow__edge-textwrapper",f]),p=T.useRef(null);return T.useEffect(()=>{if(p.current){const g=p.current.getBBox();d({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),n?L.jsxs("g",{transform:`translate(${e-l.width/2} ${t-l.height/2})`,className:h,visibility:l.width?"visible":"hidden",...c,children:[i&&L.jsx("rect",{width:l.width+2*s[0],x:-s[0],y:-s[1],height:l.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),L.jsx("text",{className:"react-flow__edge-text",y:l.height/2,dy:"0.3em",ref:p,style:r,children:n}),u]}):null}Fu.displayName="EdgeText";const bv=T.memo(Fu);function Sn({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:u,interactionWidth:f=20,...c}){return L.jsxs(L.Fragment,{children:[L.jsx("path",{...c,d:e,fill:"none",className:ce(["react-flow__edge-path",c.className])}),f?L.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,r&&ve(t)&&ve(n)?L.jsx(bv,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:u}):null]})}function Lo({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===j.Left||e===j.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function Vu({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:r,targetY:i,targetPosition:o=j.Top}){const[s,a]=Lo({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,f]=Lo({pos:o,x1:r,y1:i,x2:e,y2:t}),[c,l,d,h]=uu({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:u,targetControlY:f});return[`M${e},${t} C${s},${a} ${u},${f} ${r},${i}`,c,l,d,h]}function Hu(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s,targetPosition:a,label:u,labelStyle:f,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:y,interactionWidth:v})=>{const[_,m,w]=Vu({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:a}),N=e.isInternal?void 0:t;return L.jsx(Sn,{id:N,path:_,labelX:m,labelY:w,label:u,labelStyle:f,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:y,interactionWidth:v})})}const Ev=Hu({isInternal:!1}),Bu=Hu({isInternal:!0});Ev.displayName="SimpleBezierEdge";Bu.displayName="SimpleBezierEdgeInternal";function ju(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:l,style:d,sourcePosition:h=j.Bottom,targetPosition:p=j.Top,markerEnd:g,markerStart:y,pathOptions:v,interactionWidth:_})=>{const[m,w,N]=ni({sourceX:n,sourceY:r,sourcePosition:h,targetX:i,targetY:o,targetPosition:p,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset,stepPosition:v==null?void 0:v.stepPosition}),b=e.isInternal?void 0:t;return L.jsx(Sn,{id:b,path:m,labelX:w,labelY:N,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:l,style:d,markerEnd:g,markerStart:y,interactionWidth:_})})}const Gu=ju({isInternal:!1}),Yu=ju({isInternal:!0});Gu.displayName="SmoothStepEdge";Yu.displayName="SmoothStepEdgeInternal";function Wu(e){return T.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return L.jsx(Gu,{...n,id:r,pathOptions:T.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const Sv=Wu({isInternal:!1}),Xu=Wu({isInternal:!0});Sv.displayName="StepEdge";Xu.displayName="StepEdgeInternal";function Uu(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:l,style:d,markerEnd:h,markerStart:p,interactionWidth:g})=>{const[y,v,_]=du({sourceX:n,sourceY:r,targetX:i,targetY:o}),m=e.isInternal?void 0:t;return L.jsx(Sn,{id:m,path:y,labelX:v,labelY:_,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:l,style:d,markerEnd:h,markerStart:p,interactionWidth:g})})}const Nv=Uu({isInternal:!1}),Ku=Uu({isInternal:!0});Nv.displayName="StraightEdge";Ku.displayName="StraightEdgeInternal";function Zu(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s=j.Bottom,targetPosition:a=j.Top,label:u,labelStyle:f,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:y,pathOptions:v,interactionWidth:_})=>{const[m,w,N]=cu({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:a,curvature:v==null?void 0:v.curvature}),b=e.isInternal?void 0:t;return L.jsx(Sn,{id:b,path:m,labelX:w,labelY:N,label:u,labelStyle:f,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:y,interactionWidth:_})})}const Cv=Zu({isInternal:!1}),Qu=Zu({isInternal:!0});Cv.displayName="BezierEdge";Qu.displayName="BezierEdgeInternal";const Ro={default:Qu,straight:Ku,step:Xu,smoothstep:Yu,simplebezier:Bu},To={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},kv=(e,t,n)=>n===j.Left?e-t:n===j.Right?e+t:e,Iv=(e,t,n)=>n===j.Top?e-t:n===j.Bottom?e+t:e,Do="react-flow__edgeupdater";function qo({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a}){return L.jsx("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:ce([Do,`${Do}-${a}`]),cx:kv(t,r,e),cy:Iv(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Mv({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:o,targetY:s,sourcePosition:a,targetPosition:u,onReconnect:f,onReconnectStart:c,onReconnectEnd:l,setReconnecting:d,setUpdateHover:h}){const p=ae(),g=(w,N)=>{if(w.button!==0)return;const{autoPanOnConnect:b,domNode:C,isValidConnection:P,connectionMode:R,connectionRadius:z,lib:I,onConnectStart:M,onConnectEnd:q,cancelConnection:x,nodeLookup:A,rfId:S,panBy:$,updateConnection:k}=p.getState(),E=N.type==="target",D=(B,H)=>{d(!1),l==null||l(B,n,N.type,H)},F=B=>f==null?void 0:f(n,B),O=(B,H)=>{d(!0),c==null||c(w,n,N.type),M==null||M(B,H)};oi.onPointerDown(w.nativeEvent,{autoPanOnConnect:b,connectionMode:R,connectionRadius:z,domNode:C,handleId:N.id,nodeId:N.nodeId,nodeLookup:A,isTarget:E,edgeUpdaterType:N.type,lib:I,flowId:S,cancelConnection:x,panBy:$,isValidConnection:P,onConnect:F,onConnectStart:O,onConnectEnd:q,onReconnectEnd:D,updateConnection:k,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle,dragThreshold:p.getState().connectionDragThreshold,handleDomNode:w.currentTarget})},y=w=>g(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),v=w=>g(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),_=()=>h(!0),m=()=>h(!1);return L.jsxs(L.Fragment,{children:[(e===!0||e==="source")&&L.jsx(qo,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:y,onMouseEnter:_,onMouseOut:m,type:"source"}),(e===!0||e==="target")&&L.jsx(qo,{position:u,centerX:o,centerY:s,radius:t,onMouseDown:v,onMouseEnter:_,onMouseOut:m,type:"target"})]})}function Av({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:o,onContextMenu:s,onMouseEnter:a,onMouseMove:u,onMouseLeave:f,reconnectRadius:c,onReconnect:l,onReconnectStart:d,onReconnectEnd:h,rfId:p,edgeTypes:g,noPanClassName:y,onError:v,disableKeyboardA11y:_}){let m=te(K=>K.edgeLookup.get(e));const w=te(K=>K.defaultEdgeOptions);m=w?{...w,...m}:m;let N=m.type||"default",b=(g==null?void 0:g[N])||Ro[N];b===void 0&&(v==null||v("011",be.error011(N)),N="default",b=(g==null?void 0:g.default)||Ro.default);const C=!!(m.focusable||t&&typeof m.focusable>"u"),P=typeof l<"u"&&(m.reconnectable||n&&typeof m.reconnectable>"u"),R=!!(m.selectable||r&&typeof m.selectable>"u"),z=T.useRef(null),[I,M]=T.useState(!1),[q,x]=T.useState(!1),A=ae(),{zIndex:S,sourceX:$,sourceY:k,targetX:E,targetY:D,sourcePosition:F,targetPosition:O}=te(T.useCallback(K=>{const X=K.nodeLookup.get(m.source),re=K.nodeLookup.get(m.target);if(!X||!re)return{zIndex:m.zIndex,...To};const oe=Mg({id:e,sourceNode:X,targetNode:re,sourceHandle:m.sourceHandle||null,targetHandle:m.targetHandle||null,connectionMode:K.connectionMode,onError:v});return{zIndex:bg({selected:m.selected,zIndex:m.zIndex,sourceNode:X,targetNode:re,elevateOnSelect:K.elevateEdgesOnSelect,zIndexMode:K.zIndexMode}),...oe||To}},[m.source,m.target,m.sourceHandle,m.targetHandle,m.selected,m.zIndex]),se),B=T.useMemo(()=>m.markerStart?`url('#${ri(m.markerStart,p)}')`:void 0,[m.markerStart,p]),H=T.useMemo(()=>m.markerEnd?`url('#${ri(m.markerEnd,p)}')`:void 0,[m.markerEnd,p]);if(m.hidden||$===null||k===null||E===null||D===null)return null;const G=K=>{var ne;const{addSelectedEdges:X,unselectNodesAndEdges:re,multiSelectionActive:oe}=A.getState();R&&(A.setState({nodesSelectionActive:!1}),m.selected&&oe?(re({nodes:[],edges:[m]}),(ne=z.current)==null||ne.blur()):X([e])),i&&i(K,m)},U=o?K=>{o(K,{...m})}:void 0,W=s?K=>{s(K,{...m})}:void 0,V=a?K=>{a(K,{...m})}:void 0,Y=u?K=>{u(K,{...m})}:void 0,ee=f?K=>{f(K,{...m})}:void 0,Q=K=>{var X;if(!_&&Xa.includes(K.key)&&R){const{unselectNodesAndEdges:re,addSelectedEdges:oe}=A.getState();K.key==="Escape"?((X=z.current)==null||X.blur(),re({edges:[m]})):oe([e])}};return L.jsx("svg",{style:{zIndex:S},children:L.jsxs("g",{className:ce(["react-flow__edge",`react-flow__edge-${N}`,m.className,y,{selected:m.selected,animated:m.animated,inactive:!R&&!i,updating:I,selectable:R}]),onClick:G,onDoubleClick:U,onContextMenu:W,onMouseEnter:V,onMouseMove:Y,onMouseLeave:ee,onKeyDown:C?Q:void 0,tabIndex:C?0:void 0,role:m.ariaRole??(C?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":m.ariaLabel===null?void 0:m.ariaLabel||`Edge from ${m.source} to ${m.target}`,"aria-describedby":C?`${ku}-${p}`:void 0,ref:z,...m.domAttributes,children:[!q&&L.jsx(b,{id:e,source:m.source,target:m.target,type:m.type,selected:m.selected,animated:m.animated,selectable:R,deletable:m.deletable??!0,label:m.label,labelStyle:m.labelStyle,labelShowBg:m.labelShowBg,labelBgStyle:m.labelBgStyle,labelBgPadding:m.labelBgPadding,labelBgBorderRadius:m.labelBgBorderRadius,sourceX:$,sourceY:k,targetX:E,targetY:D,sourcePosition:F,targetPosition:O,data:m.data,style:m.style,sourceHandleId:m.sourceHandle,targetHandleId:m.targetHandle,markerStart:B,markerEnd:H,pathOptions:"pathOptions"in m?m.pathOptions:void 0,interactionWidth:m.interactionWidth}),P&&L.jsx(Mv,{edge:m,isReconnectable:P,reconnectRadius:c,onReconnect:l,onReconnectStart:d,onReconnectEnd:h,sourceX:$,sourceY:k,targetX:E,targetY:D,sourcePosition:F,targetPosition:O,setUpdateHover:M,setReconnecting:x})]})})}var Pv=T.memo(Av);const $v=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Ju({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:o,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:u,onEdgeMouseLeave:f,onEdgeClick:c,reconnectRadius:l,onEdgeDoubleClick:d,onReconnectStart:h,onReconnectEnd:p,disableKeyboardA11y:g}){const{edgesFocusable:y,edgesReconnectable:v,elementsSelectable:_,onError:m}=te($v,se),w=mv(t);return L.jsxs("div",{className:"react-flow__edges",children:[L.jsx(_v,{defaultColor:e,rfId:n}),w.map(N=>L.jsx(Pv,{id:N,edgesFocusable:y,edgesReconnectable:v,elementsSelectable:_,noPanClassName:i,onReconnect:o,onContextMenu:s,onMouseEnter:a,onMouseMove:u,onMouseLeave:f,onClick:c,reconnectRadius:l,onDoubleClick:d,onReconnectStart:h,onReconnectEnd:p,rfId:n,onError:m,edgeTypes:r,disableKeyboardA11y:g},N))]})}Ju.displayName="EdgeRenderer";const Lv=T.memo(Ju),Rv=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Tv({children:e}){const t=te(Rv);return L.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Dv(e){const t=Pi(),n=T.useRef(!1);T.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const qv=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function zv(e){const t=te(qv),n=ae();return T.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Ov(e){return e.connection.inProgress?{...e.connection,to:Lt(e.connection.to,e.transform)}:{...e.connection}}function Fv(e){return Ov}function Vv(e){const t=Fv();return te(t,se)}const Hv=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Bv({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:o,height:s,isValid:a,inProgress:u}=te(Hv,se);return!(o&&i&&u)?null:L.jsx("svg",{style:e,width:o,height:s,className:"react-flow__connectionline react-flow__container",children:L.jsx("g",{className:ce(["react-flow__connection",Za(a)]),children:L.jsx(ec,{style:t,type:n,CustomComponent:r,isValid:a})})})}const ec=({style:e,type:t=qe.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:o,fromNode:s,fromHandle:a,fromPosition:u,to:f,toNode:c,toHandle:l,toPosition:d,pointer:h}=Vv();if(!i)return;if(n)return L.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:o.x,fromY:o.y,toX:f.x,toY:f.y,fromPosition:u,toPosition:d,connectionStatus:Za(r),toNode:c,toHandle:l,pointer:h});let p="";const g={sourceX:o.x,sourceY:o.y,sourcePosition:u,targetX:f.x,targetY:f.y,targetPosition:d};switch(t){case qe.Bezier:[p]=cu(g);break;case qe.SimpleBezier:[p]=Vu(g);break;case qe.Step:[p]=ni({...g,borderRadius:0});break;case qe.SmoothStep:[p]=ni(g);break;default:[p]=du(g)}return L.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};ec.displayName="ConnectionLine";const jv={};function zo(e=jv){T.useRef(e),ae(),T.useEffect(()=>{},[e])}function Gv(){ae(),T.useRef(!1),T.useEffect(()=>{},[])}function tc({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:o,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:c,onSelectionContextMenu:l,onSelectionStart:d,onSelectionEnd:h,connectionLineType:p,connectionLineStyle:g,connectionLineComponent:y,connectionLineContainerStyle:v,selectionKeyCode:_,selectionOnDrag:m,selectionMode:w,multiSelectionKeyCode:N,panActivationKeyCode:b,zoomActivationKeyCode:C,deleteKeyCode:P,onlyRenderVisibleElements:R,elementsSelectable:z,defaultViewport:I,translateExtent:M,minZoom:q,maxZoom:x,preventScrolling:A,defaultMarkerColor:S,zoomOnScroll:$,zoomOnPinch:k,panOnScroll:E,panOnScrollSpeed:D,panOnScrollMode:F,zoomOnDoubleClick:O,panOnDrag:B,onPaneClick:H,onPaneMouseEnter:G,onPaneMouseMove:U,onPaneMouseLeave:W,onPaneScroll:V,onPaneContextMenu:Y,paneClickDistance:ee,nodeClickDistance:Q,onEdgeContextMenu:K,onEdgeMouseEnter:X,onEdgeMouseMove:re,onEdgeMouseLeave:oe,reconnectRadius:ne,onReconnect:le,onReconnectStart:Le,onReconnectEnd:Se,noDragClassName:He,noWheelClassName:lt,noPanClassName:ft,disableKeyboardA11y:dt,nodeExtent:kn,rfId:Rt,viewport:Ze,onViewportChange:ht}){return zo(e),zo(t),Gv(),Dv(n),zv(Ze),L.jsx(sv,{onPaneClick:H,onPaneMouseEnter:G,onPaneMouseMove:U,onPaneMouseLeave:W,onPaneContextMenu:Y,onPaneScroll:V,paneClickDistance:ee,deleteKeyCode:P,selectionKeyCode:_,selectionOnDrag:m,selectionMode:w,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:N,panActivationKeyCode:b,zoomActivationKeyCode:C,elementsSelectable:z,zoomOnScroll:$,zoomOnPinch:k,zoomOnDoubleClick:O,panOnScroll:E,panOnScrollSpeed:D,panOnScrollMode:F,panOnDrag:B,defaultViewport:I,translateExtent:M,minZoom:q,maxZoom:x,onSelectionContextMenu:l,preventScrolling:A,noDragClassName:He,noWheelClassName:lt,noPanClassName:ft,disableKeyboardA11y:dt,onViewportChange:ht,isControlledViewport:!!Ze,children:L.jsxs(Tv,{children:[L.jsx(Lv,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:s,onReconnect:le,onReconnectStart:Le,onReconnectEnd:Se,onlyRenderVisibleElements:R,onEdgeContextMenu:K,onEdgeMouseEnter:X,onEdgeMouseMove:re,onEdgeMouseLeave:oe,reconnectRadius:ne,defaultMarkerColor:S,noPanClassName:ft,disableKeyboardA11y:dt,rfId:Rt}),L.jsx(Bv,{style:g,type:p,component:y,containerStyle:v}),L.jsx("div",{className:"react-flow__edgelabel-renderer"}),L.jsx(gv,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:c,nodeClickDistance:Q,onlyRenderVisibleElements:R,noPanClassName:ft,noDragClassName:He,disableKeyboardA11y:dt,nodeExtent:kn,rfId:Rt}),L.jsx("div",{className:"react-flow__viewport-portal"})]})})}tc.displayName="GraphView";const Yv=T.memo(tc),Oo=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:u=.5,maxZoom:f=2,nodeOrigin:c,nodeExtent:l,zIndexMode:d="basic"}={})=>{const h=new Map,p=new Map,g=new Map,y=new Map,v=r??t??[],_=n??e??[],m=c??[0,0],w=l??St;gu(g,y,v);const N=ii(_,h,p,{nodeOrigin:m,nodeExtent:w,zIndexMode:d});let b=[0,0,1];if(s&&i&&o){const C=Pt(h,{filter:I=>!!((I.width||I.initialWidth)&&(I.height||I.initialHeight))}),{x:P,y:R,zoom:z}=Si(C,i,o,u,f,(a==null?void 0:a.padding)??.1);b=[P,R,z]}return{rfId:"1",width:i??0,height:o??0,transform:b,nodes:_,nodesInitialized:N,nodeLookup:h,parentLookup:p,edges:v,edgeLookup:y,connectionLookup:g,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:f,translateExtent:St,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ot.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:a,fitViewResolver:null,connection:{...Ka},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:mg,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Ua,zIndexMode:d,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},Wv=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:u,maxZoom:f,nodeOrigin:c,nodeExtent:l,zIndexMode:d})=>fm((h,p)=>{async function g(){const{nodeLookup:y,panZoom:v,fitViewOptions:_,fitViewResolver:m,width:w,height:N,minZoom:b,maxZoom:C}=p();v&&(await pg({nodes:y,width:w,height:N,panZoom:v,minZoom:b,maxZoom:C},_),m==null||m.resolve(!0),h({fitViewResolver:null}))}return{...Oo({nodes:e,edges:t,width:i,height:o,fitView:s,fitViewOptions:a,minZoom:u,maxZoom:f,nodeOrigin:c,nodeExtent:l,defaultNodes:n,defaultEdges:r,zIndexMode:d}),setNodes:y=>{const{nodeLookup:v,parentLookup:_,nodeOrigin:m,elevateNodesOnSelect:w,fitViewQueued:N,zIndexMode:b}=p(),C=ii(y,v,_,{nodeOrigin:m,nodeExtent:l,elevateNodesOnSelect:w,checkEquality:!0,zIndexMode:b});N&&C?(g(),h({nodes:y,nodesInitialized:C,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:y,nodesInitialized:C})},setEdges:y=>{const{connectionLookup:v,edgeLookup:_}=p();gu(v,_,y),h({edges:y})},setDefaultNodesAndEdges:(y,v)=>{if(y){const{setNodes:_}=p();_(y),h({hasDefaultNodes:!0})}if(v){const{setEdges:_}=p();_(v),h({hasDefaultEdges:!0})}},updateNodeInternals:y=>{const{triggerNodeChanges:v,nodeLookup:_,parentLookup:m,domNode:w,nodeOrigin:N,nodeExtent:b,debug:C,fitViewQueued:P,zIndexMode:R}=p(),{changes:z,updatedInternals:I}=qg(y,_,m,w,N,b,R);I&&(Lg(_,m,{nodeOrigin:N,nodeExtent:b,zIndexMode:R}),P?(g(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),(z==null?void 0:z.length)>0&&(C&&console.log("React Flow: trigger node changes",z),v==null||v(z)))},updateNodePositions:(y,v=!1)=>{const _=[];let m=[];const{nodeLookup:w,triggerNodeChanges:N,connection:b,updateConnection:C,onNodesChangeMiddlewareMap:P}=p();for(const[R,z]of y){const I=w.get(R),M=!!(I!=null&&I.expandParent&&(I!=null&&I.parentId)&&(z!=null&&z.position)),q={id:R,type:"position",position:M?{x:Math.max(0,z.position.x),y:Math.max(0,z.position.y)}:z.position,dragging:v};if(I&&b.inProgress&&b.fromNode.id===I.id){const x=Xe(I,b.fromHandle,j.Left,!0);C({...b,from:x})}M&&I.parentId&&_.push({id:R,parentId:I.parentId,rect:{...z.internals.positionAbsolute,width:z.measured.width??0,height:z.measured.height??0}}),m.push(q)}if(_.length>0){const{parentLookup:R,nodeOrigin:z}=p(),I=Ai(_,w,R,z);m.push(...I)}for(const R of P.values())m=R(m);N(m)},triggerNodeChanges:y=>{const{onNodesChange:v,setNodes:_,nodes:m,hasDefaultNodes:w,debug:N}=p();if(y!=null&&y.length){if(w){const b=Au(y,m);_(b)}N&&console.log("React Flow: trigger node changes",y),v==null||v(y)}},triggerEdgeChanges:y=>{const{onEdgesChange:v,setEdges:_,edges:m,hasDefaultEdges:w,debug:N}=p();if(y!=null&&y.length){if(w){const b=Pu(y,m);_(b)}N&&console.log("React Flow: trigger edge changes",y),v==null||v(y)}},addSelectedNodes:y=>{const{multiSelectionActive:v,edgeLookup:_,nodeLookup:m,triggerNodeChanges:w,triggerEdgeChanges:N}=p();if(v){const b=y.map(C=>Be(C,!0));w(b);return}w(et(m,new Set([...y]),!0)),N(et(_))},addSelectedEdges:y=>{const{multiSelectionActive:v,edgeLookup:_,nodeLookup:m,triggerNodeChanges:w,triggerEdgeChanges:N}=p();if(v){const b=y.map(C=>Be(C,!0));N(b);return}N(et(_,new Set([...y]))),w(et(m,new Set,!0))},unselectNodesAndEdges:({nodes:y,edges:v}={})=>{const{edges:_,nodes:m,nodeLookup:w,triggerNodeChanges:N,triggerEdgeChanges:b}=p(),C=y||m,P=v||_,R=C.map(I=>{const M=w.get(I.id);return M&&(M.selected=!1),Be(I.id,!1)}),z=P.map(I=>Be(I.id,!1));N(R),b(z)},setMinZoom:y=>{const{panZoom:v,maxZoom:_}=p();v==null||v.setScaleExtent([y,_]),h({minZoom:y})},setMaxZoom:y=>{const{panZoom:v,minZoom:_}=p();v==null||v.setScaleExtent([_,y]),h({maxZoom:y})},setTranslateExtent:y=>{var v;(v=p().panZoom)==null||v.setTranslateExtent(y),h({translateExtent:y})},resetSelectedElements:()=>{const{edges:y,nodes:v,triggerNodeChanges:_,triggerEdgeChanges:m,elementsSelectable:w}=p();if(!w)return;const N=v.reduce((C,P)=>P.selected?[...C,Be(P.id,!1)]:C,[]),b=y.reduce((C,P)=>P.selected?[...C,Be(P.id,!1)]:C,[]);_(N),m(b)},setNodeExtent:y=>{const{nodes:v,nodeLookup:_,parentLookup:m,nodeOrigin:w,elevateNodesOnSelect:N,nodeExtent:b,zIndexMode:C}=p();y[0][0]===b[0][0]&&y[0][1]===b[0][1]&&y[1][0]===b[1][0]&&y[1][1]===b[1][1]||(ii(v,_,m,{nodeOrigin:w,nodeExtent:y,elevateNodesOnSelect:N,checkEquality:!1,zIndexMode:C}),h({nodeExtent:y}))},panBy:y=>{const{transform:v,width:_,height:m,panZoom:w,translateExtent:N}=p();return zg({delta:y,panZoom:w,transform:v,translateExtent:N,width:_,height:m})},setCenter:async(y,v,_)=>{const{width:m,height:w,maxZoom:N,panZoom:b}=p();if(!b)return Promise.resolve(!1);const C=typeof(_==null?void 0:_.zoom)<"u"?_.zoom:N;return await b.setViewport({x:m/2-y*C,y:w/2-v*C,zoom:C},{duration:_==null?void 0:_.duration,ease:_==null?void 0:_.ease,interpolate:_==null?void 0:_.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...Ka}})},updateConnection:y=>{h({connection:y})},reset:()=>h({...Oo()})}},Object.is);function Xv({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:o,initialMinZoom:s,initialMaxZoom:a,initialFitViewOptions:u,fitView:f,nodeOrigin:c,nodeExtent:l,zIndexMode:d,children:h}){const[p]=T.useState(()=>Wv({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:o,fitView:f,minZoom:s,maxZoom:a,fitViewOptions:u,nodeOrigin:c,nodeExtent:l,zIndexMode:d}));return L.jsx(dm,{value:p,children:L.jsx(Tm,{children:h})})}function Uv({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:s,fitView:a,fitViewOptions:u,minZoom:f,maxZoom:c,nodeOrigin:l,nodeExtent:d,zIndexMode:h}){return T.useContext(_n)?L.jsx(L.Fragment,{children:e}):L.jsx(Xv,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:o,initialHeight:s,fitView:a,initialFitViewOptions:u,initialMinZoom:f,initialMaxZoom:c,nodeOrigin:l,nodeExtent:d,zIndexMode:h,children:e})}const Kv={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Zv({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o,edgeTypes:s,onNodeClick:a,onEdgeClick:u,onInit:f,onMove:c,onMoveStart:l,onMoveEnd:d,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:v,onNodeMouseEnter:_,onNodeMouseMove:m,onNodeMouseLeave:w,onNodeContextMenu:N,onNodeDoubleClick:b,onNodeDragStart:C,onNodeDrag:P,onNodeDragStop:R,onNodesDelete:z,onEdgesDelete:I,onDelete:M,onSelectionChange:q,onSelectionDragStart:x,onSelectionDrag:A,onSelectionDragStop:S,onSelectionContextMenu:$,onSelectionStart:k,onSelectionEnd:E,onBeforeDelete:D,connectionMode:F,connectionLineType:O=qe.Bezier,connectionLineStyle:B,connectionLineComponent:H,connectionLineContainerStyle:G,deleteKeyCode:U="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:V=!1,selectionMode:Y=Nt.Full,panActivationKeyCode:ee="Space",multiSelectionKeyCode:Q=kt()?"Meta":"Control",zoomActivationKeyCode:K=kt()?"Meta":"Control",snapToGrid:X,snapGrid:re,onlyRenderVisibleElements:oe=!1,selectNodesOnDrag:ne,nodesDraggable:le,autoPanOnNodeFocus:Le,nodesConnectable:Se,nodesFocusable:He,nodeOrigin:lt=Iu,edgesFocusable:ft,edgesReconnectable:dt,elementsSelectable:kn=!0,defaultViewport:Rt=Nm,minZoom:Ze=.5,maxZoom:ht=2,translateExtent:qi=St,preventScrolling:zc=!0,nodeExtent:In,defaultMarkerColor:Oc="#b1b1b7",zoomOnScroll:Fc=!0,zoomOnPinch:Vc=!0,panOnScroll:Hc=!1,panOnScrollSpeed:Bc=.5,panOnScrollMode:jc=Ge.Free,zoomOnDoubleClick:Gc=!0,panOnDrag:Yc=!0,onPaneClick:Wc,onPaneMouseEnter:Xc,onPaneMouseMove:Uc,onPaneMouseLeave:Kc,onPaneScroll:Zc,onPaneContextMenu:Qc,paneClickDistance:Jc=1,nodeClickDistance:el=0,children:tl,onReconnect:nl,onReconnectStart:rl,onReconnectEnd:il,onEdgeContextMenu:ol,onEdgeDoubleClick:sl,onEdgeMouseEnter:al,onEdgeMouseMove:ul,onEdgeMouseLeave:cl,reconnectRadius:ll=10,onNodesChange:fl,onEdgesChange:dl,noDragClassName:hl="nodrag",noWheelClassName:pl="nowheel",noPanClassName:zi="nopan",fitView:Oi,fitViewOptions:Fi,connectOnClick:gl,attributionPosition:ml,proOptions:vl,defaultEdgeOptions:yl,elevateNodesOnSelect:wl=!0,elevateEdgesOnSelect:xl=!1,disableKeyboardA11y:Vi=!1,autoPanOnConnect:_l,autoPanOnNodeDrag:bl,autoPanSpeed:El,connectionRadius:Sl,isValidConnection:Nl,onError:Cl,style:kl,id:Hi,nodeDragThreshold:Il,connectionDragThreshold:Ml,viewport:Al,onViewportChange:Pl,width:$l,height:Ll,colorMode:Rl="light",debug:Tl,onScroll:Tt,ariaLabelConfig:Dl,zIndexMode:Bi="basic",...ql},zl){const Mn=Hi||"1",Ol=Mm(Rl),Fl=T.useCallback(ji=>{ji.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Tt==null||Tt(ji)},[Tt]);return L.jsx("div",{"data-testid":"rf__wrapper",...ql,onScroll:Fl,style:{...kl,...Kv},ref:zl,className:ce(["react-flow",i,Ol]),id:Hi,role:"application",children:L.jsxs(Uv,{nodes:e,edges:t,width:$l,height:Ll,fitView:Oi,fitViewOptions:Fi,minZoom:Ze,maxZoom:ht,nodeOrigin:lt,nodeExtent:In,zIndexMode:Bi,children:[L.jsx(Yv,{onInit:f,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:_,onNodeMouseMove:m,onNodeMouseLeave:w,onNodeContextMenu:N,onNodeDoubleClick:b,nodeTypes:o,edgeTypes:s,connectionLineType:O,connectionLineStyle:B,connectionLineComponent:H,connectionLineContainerStyle:G,selectionKeyCode:W,selectionOnDrag:V,selectionMode:Y,deleteKeyCode:U,multiSelectionKeyCode:Q,panActivationKeyCode:ee,zoomActivationKeyCode:K,onlyRenderVisibleElements:oe,defaultViewport:Rt,translateExtent:qi,minZoom:Ze,maxZoom:ht,preventScrolling:zc,zoomOnScroll:Fc,zoomOnPinch:Vc,zoomOnDoubleClick:Gc,panOnScroll:Hc,panOnScrollSpeed:Bc,panOnScrollMode:jc,panOnDrag:Yc,onPaneClick:Wc,onPaneMouseEnter:Xc,onPaneMouseMove:Uc,onPaneMouseLeave:Kc,onPaneScroll:Zc,onPaneContextMenu:Qc,paneClickDistance:Jc,nodeClickDistance:el,onSelectionContextMenu:$,onSelectionStart:k,onSelectionEnd:E,onReconnect:nl,onReconnectStart:rl,onReconnectEnd:il,onEdgeContextMenu:ol,onEdgeDoubleClick:sl,onEdgeMouseEnter:al,onEdgeMouseMove:ul,onEdgeMouseLeave:cl,reconnectRadius:ll,defaultMarkerColor:Oc,noDragClassName:hl,noWheelClassName:pl,noPanClassName:zi,rfId:Mn,disableKeyboardA11y:Vi,nodeExtent:In,viewport:Al,onViewportChange:Pl}),L.jsx(Im,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:v,nodesDraggable:le,autoPanOnNodeFocus:Le,nodesConnectable:Se,nodesFocusable:He,edgesFocusable:ft,edgesReconnectable:dt,elementsSelectable:kn,elevateNodesOnSelect:wl,elevateEdgesOnSelect:xl,minZoom:Ze,maxZoom:ht,nodeExtent:In,onNodesChange:fl,onEdgesChange:dl,snapToGrid:X,snapGrid:re,connectionMode:F,translateExtent:qi,connectOnClick:gl,defaultEdgeOptions:yl,fitView:Oi,fitViewOptions:Fi,onNodesDelete:z,onEdgesDelete:I,onDelete:M,onNodeDragStart:C,onNodeDrag:P,onNodeDragStop:R,onSelectionDrag:A,onSelectionDragStart:x,onSelectionDragStop:S,onMove:c,onMoveStart:l,onMoveEnd:d,noPanClassName:zi,nodeOrigin:lt,rfId:Mn,autoPanOnConnect:_l,autoPanOnNodeDrag:bl,autoPanSpeed:El,onError:Cl,connectionRadius:Sl,isValidConnection:Nl,selectNodesOnDrag:ne,nodeDragThreshold:Il,connectionDragThreshold:Ml,onBeforeDelete:D,debug:Tl,ariaLabelConfig:Dl,zIndexMode:Bi}),L.jsx(Sm,{onSelectionChange:q}),tl,L.jsx(wm,{proOptions:vl,position:ml}),L.jsx(ym,{rfId:Mn,disableKeyboardA11y:Vi})]})})}var x_=$u(Zv);const Qv=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function __({children:e}){const t=te(Qv);return t?Hl.createPortal(e,t):null}function b_(e){const[t,n]=T.useState(e),r=T.useCallback(i=>n(o=>Au(i,o)),[]);return[t,n,r]}function E_(e){const[t,n]=T.useState(e),r=T.useCallback(i=>n(o=>Pu(i,o)),[]);return[t,n,r]}function Jv({dimensions:e,lineWidth:t,variant:n,className:r}){return L.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ce(["react-flow__background-pattern",n,r])})}function ey({radius:e,className:t}){return L.jsx("circle",{cx:e,cy:e,r:e,className:ce(["react-flow__background-pattern","dots",t])})}var Oe;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Oe||(Oe={}));const ty={[Oe.Dots]:1,[Oe.Lines]:1,[Oe.Cross]:6},ny=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function nc({id:e,variant:t=Oe.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=0,color:s,bgColor:a,style:u,className:f,patternClassName:c}){const l=T.useRef(null),{transform:d,patternId:h}=te(ny,se),p=r||ty[t],g=t===Oe.Dots,y=t===Oe.Cross,v=Array.isArray(n)?n:[n,n],_=[v[0]*d[2]||1,v[1]*d[2]||1],m=p*d[2],w=Array.isArray(o)?o:[o,o],N=y?[m,m]:_,b=[w[0]*d[2]||1+N[0]/2,w[1]*d[2]||1+N[1]/2],C=`${h}${e||""}`;return L.jsxs("svg",{className:ce(["react-flow__background",f]),style:{...u,...En,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:l,"data-testid":"rf__background",children:[L.jsx("pattern",{id:C,x:d[0]%_[0],y:d[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`,children:g?L.jsx(ey,{radius:m/2,className:c}):L.jsx(Jv,{dimensions:N,lineWidth:i,variant:t,className:c})}),L.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C})`})]})}nc.displayName="Background";const S_=T.memo(nc);function ry(){return L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:L.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function iy(){return L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:L.jsx("path",{d:"M0 0h32v4.2H0z"})})}function oy(){return L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:L.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function sy(){return L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:L.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ay(){return L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:L.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Vt({children:e,className:t,...n}){return L.jsx("button",{type:"button",className:ce(["react-flow__controls-button",t]),...n,children:e})}const uy=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function rc({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:u,className:f,children:c,position:l="bottom-left",orientation:d="vertical","aria-label":h}){const p=ae(),{isInteractive:g,minZoomReached:y,maxZoomReached:v,ariaLabelConfig:_}=te(uy,se),{zoomIn:m,zoomOut:w,fitView:N}=Pi(),b=()=>{m(),o==null||o()},C=()=>{w(),s==null||s()},P=()=>{N(i),a==null||a()},R=()=>{p.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),u==null||u(!g)},z=d==="horizontal"?"horizontal":"vertical";return L.jsxs(bn,{className:ce(["react-flow__controls",z,f]),position:l,style:e,"data-testid":"rf__controls","aria-label":h??_["controls.ariaLabel"],children:[t&&L.jsxs(L.Fragment,{children:[L.jsx(Vt,{onClick:b,className:"react-flow__controls-zoomin",title:_["controls.zoomIn.ariaLabel"],"aria-label":_["controls.zoomIn.ariaLabel"],disabled:v,children:L.jsx(ry,{})}),L.jsx(Vt,{onClick:C,className:"react-flow__controls-zoomout",title:_["controls.zoomOut.ariaLabel"],"aria-label":_["controls.zoomOut.ariaLabel"],disabled:y,children:L.jsx(iy,{})})]}),n&&L.jsx(Vt,{className:"react-flow__controls-fitview",onClick:P,title:_["controls.fitView.ariaLabel"],"aria-label":_["controls.fitView.ariaLabel"],children:L.jsx(oy,{})}),r&&L.jsx(Vt,{className:"react-flow__controls-interactive",onClick:R,title:_["controls.interactive.ariaLabel"],"aria-label":_["controls.interactive.ariaLabel"],children:g?L.jsx(ay,{}):L.jsx(sy,{})}),c]})}rc.displayName="Controls";const N_=T.memo(rc);function cy({id:e,x:t,y:n,width:r,height:i,style:o,color:s,strokeColor:a,strokeWidth:u,className:f,borderRadius:c,shapeRendering:l,selected:d,onClick:h}){const{background:p,backgroundColor:g}=o||{},y=s||p||g;return L.jsx("rect",{className:ce(["react-flow__minimap-node",{selected:d},f]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:y,stroke:a,strokeWidth:u},shapeRendering:l,onClick:h?v=>h(v,e):void 0})}const ly=T.memo(cy),fy=e=>e.nodes.map(t=>t.id),zn=e=>e instanceof Function?e:()=>e;function dy({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:o=ly,onClick:s}){const a=te(fy,se),u=zn(t),f=zn(e),c=zn(n),l=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return L.jsx(L.Fragment,{children:a.map(d=>L.jsx(py,{id:d,nodeColorFunc:u,nodeStrokeColorFunc:f,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:o,onClick:s,shapeRendering:l},d))})}function hy({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:o,shapeRendering:s,NodeComponent:a,onClick:u}){const{node:f,x:c,y:l,width:d,height:h}=te(p=>{const{internals:g}=p.nodeLookup.get(e),y=g.userNode,{x:v,y:_}=g.positionAbsolute,{width:m,height:w}=$e(y);return{node:y,x:v,y:_,width:m,height:w}},se);return!f||f.hidden||!ru(f)?null:L.jsx(a,{x:c,y:l,width:d,height:h,style:f.style,selected:!!f.selected,className:r(f),color:t(f),borderRadius:i,strokeColor:n(f),strokeWidth:o,shapeRendering:s,onClick:u,id:f.id})}const py=T.memo(hy);var gy=T.memo(dy);const my=200,vy=150,yy=e=>!e.hidden,wy=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?nu(Pt(e.nodeLookup,{filter:yy}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},xy="react-flow__minimap-desc";function ic({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:u,maskColor:f,maskStrokeColor:c,maskStrokeWidth:l,position:d="bottom-right",onClick:h,onNodeClick:p,pannable:g=!1,zoomable:y=!1,ariaLabel:v,inversePan:_,zoomStep:m=1,offsetScale:w=5}){const N=ae(),b=T.useRef(null),{boundingRect:C,viewBB:P,rfId:R,panZoom:z,translateExtent:I,flowWidth:M,flowHeight:q,ariaLabelConfig:x}=te(wy,se),A=(e==null?void 0:e.width)??my,S=(e==null?void 0:e.height)??vy,$=C.width/A,k=C.height/S,E=Math.max($,k),D=E*A,F=E*S,O=w*E,B=C.x-(D-C.width)/2-O,H=C.y-(F-C.height)/2-O,G=D+O*2,U=F+O*2,W=`${xy}-${R}`,V=T.useRef(0),Y=T.useRef();V.current=E,T.useEffect(()=>{if(b.current&&z)return Y.current=Wg({domNode:b.current,panZoom:z,getTransform:()=>N.getState().transform,getViewScale:()=>V.current}),()=>{var X;(X=Y.current)==null||X.destroy()}},[z]),T.useEffect(()=>{var X;(X=Y.current)==null||X.update({translateExtent:I,width:M,height:q,inversePan:_,pannable:g,zoomStep:m,zoomable:y})},[g,y,_,m,I,M,q]);const ee=h?X=>{var ne;const[re,oe]=((ne=Y.current)==null?void 0:ne.pointer(X))||[0,0];h(X,{x:re,y:oe})}:void 0,Q=p?T.useCallback((X,re)=>{const oe=N.getState().nodeLookup.get(re).internals.userNode;p(X,oe)},[]):void 0,K=v??x["minimap.ariaLabel"];return L.jsx(bn,{position:d,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof l=="number"?l*E:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:ce(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:L.jsxs("svg",{width:A,height:S,viewBox:`${B} ${H} ${G} ${U}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":W,ref:b,onClick:ee,children:[K&&L.jsx("title",{id:W,children:K}),L.jsx(gy,{onClick:Q,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:a}),L.jsx("path",{className:"react-flow__minimap-mask",d:`M${B-O},${H-O}h${G+O*2}v${U+O*2}h${-G-O*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}ic.displayName="MiniMap";const C_=T.memo(ic),_y=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,by={[ct.Line]:"right",[ct.Handle]:"bottom-right"};function Ey({nodeId:e,position:t,variant:n=ct.Handle,className:r,style:i=void 0,children:o,color:s,minWidth:a=10,minHeight:u=10,maxWidth:f=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:l=!1,resizeDirection:d,autoScale:h=!0,shouldResize:p,onResizeStart:g,onResize:y,onResizeEnd:v}){const _=Du(),m=typeof e=="string"?e:_,w=ae(),N=T.useRef(null),b=n===ct.Handle,C=te(T.useCallback(_y(b&&h),[b,h]),se),P=T.useRef(null),R=t??by[n];T.useEffect(()=>{if(!(!N.current||!m))return P.current||(P.current=am({domNode:N.current,nodeId:m,getStoreItems:()=>{const{nodeLookup:I,transform:M,snapGrid:q,snapToGrid:x,nodeOrigin:A,domNode:S}=w.getState();return{nodeLookup:I,transform:M,snapGrid:q,snapToGrid:x,nodeOrigin:A,paneDomNode:S}},onChange:(I,M)=>{const{triggerNodeChanges:q,nodeLookup:x,parentLookup:A,nodeOrigin:S}=w.getState(),$=[],k={x:I.x,y:I.y},E=x.get(m);if(E&&E.expandParent&&E.parentId){const D=E.origin??S,F=I.width??E.measured.width??0,O=I.height??E.measured.height??0,B={id:E.id,parentId:E.parentId,rect:{width:F,height:O,...iu({x:I.x??E.position.x,y:I.y??E.position.y},{width:F,height:O},E.parentId,x,D)}},H=Ai([B],x,A,S);$.push(...H),k.x=I.x?Math.max(D[0]*F,I.x):void 0,k.y=I.y?Math.max(D[1]*O,I.y):void 0}if(k.x!==void 0&&k.y!==void 0){const D={id:m,type:"position",position:{...k}};$.push(D)}if(I.width!==void 0&&I.height!==void 0){const F={id:m,type:"dimensions",resizing:!0,setAttributes:d?d==="horizontal"?"width":"height":!0,dimensions:{width:I.width,height:I.height}};$.push(F)}for(const D of M){const F={...D,type:"position"};$.push(F)}q($)},onEnd:({width:I,height:M})=>{const q={id:m,type:"dimensions",resizing:!1,dimensions:{width:I,height:M}};w.getState().triggerNodeChanges([q])}})),P.current.update({controlPosition:R,boundaries:{minWidth:a,minHeight:u,maxWidth:f,maxHeight:c},keepAspectRatio:l,resizeDirection:d,onResizeStart:g,onResize:y,onResizeEnd:v,shouldResize:p}),()=>{var I;(I=P.current)==null||I.destroy()}},[R,a,u,f,c,l,g,y,v,p]);const z=R.split("-");return L.jsx("div",{className:ce(["react-flow__resize-control","nodrag",...z,n,r]),ref:N,style:{...i,scale:C,...s&&{[b?"backgroundColor":"borderColor"]:s}},children:o})}T.memo(Ey);function Li(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var On,Fo;function Sy(){if(Fo)return On;Fo=1;var e=oa(),t=4;function n(r){return e(r,t)}return On=n,On}var Fn,Vo;function oc(){if(Vo)return Fn;Vo=1;var e=Wl();function t(n){return typeof n=="function"?n:e}return Fn=t,Fn}var Vn,Ho;function sc(){if(Ho)return Vn;Ho=1;var e=sa(),t=li(),n=oc(),r=Ue();function i(o,s){var a=r(o)?e:t;return a(o,n(s))}return Vn=i,Vn}var Hn,Bo;function ac(){return Bo||(Bo=1,Hn=sc()),Hn}var Bn,jo;function Ny(){if(jo)return Bn;jo=1;var e=li();function t(n,r){var i=[];return e(n,function(o,s,a){r(o,s,a)&&i.push(o)}),i}return Bn=t,Bn}var jn,Go;function uc(){if(Go)return jn;Go=1;var e=Xl(),t=Ny(),n=fi(),r=Ue();function i(o,s){var a=r(o)?e:t;return a(o,n(s,3))}return jn=i,jn}var Gn,Yo;function Cy(){if(Yo)return Gn;Yo=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Gn=n,Gn}var Yn,Wo;function cc(){if(Wo)return Yn;Wo=1;var e=Cy(),t=Ul();function n(r,i){return r!=null&&t(r,i,e)}return Yn=n,Yn}var Wn,Xo;function ky(){if(Xo)return Wn;Xo=1;var e=aa(),t=ua(),n=ca(),r=Ue(),i=di(),o=hi(),s=Kl(),a=pi(),u="[object Map]",f="[object Set]",c=Object.prototype,l=c.hasOwnProperty;function d(h){if(h==null)return!0;if(i(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||o(h)||a(h)||n(h)))return!h.length;var p=t(h);if(p==u||p==f)return!h.size;if(s(h))return!e(h).length;for(var g in h)if(l.call(h,g))return!1;return!0}return Wn=d,Wn}var Xn,Uo;function lc(){if(Uo)return Xn;Uo=1;function e(t){return t===void 0}return Xn=e,Xn}var Un,Ko;function Iy(){if(Ko)return Un;Ko=1;function e(t,n,r,i){var o=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++o]);++o<s;)r=n(r,t[o],o,t);return r}return Un=e,Un}var Kn,Zo;function My(){if(Zo)return Kn;Zo=1;function e(t,n,r,i,o){return o(t,function(s,a,u){r=i?(i=!1,s):n(r,s,a,u)}),r}return Kn=e,Kn}var Zn,Qo;function fc(){if(Qo)return Zn;Qo=1;var e=Iy(),t=li(),n=fi(),r=My(),i=Ue();function o(s,a,u){var f=i(s)?e:r,c=arguments.length<3;return f(s,n(a,4),u,c,t)}return Zn=o,Zn}var Qn,Jo;function Ay(){if(Jo)return Qn;Jo=1;var e=Zl(),t=e("length");return Qn=t,Qn}var Jn,es;function Py(){if(es)return Jn;es=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",s="["+e+"]",a="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",f="(?:"+a+"|"+u+")",c="[^"+e+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",p=f+"?",g="["+o+"]?",y="(?:"+h+"(?:"+[c,l,d].join("|")+")"+g+p+")*",v=g+p+y,_="(?:"+[c+a+"?",a,l,d,s].join("|")+")",m=RegExp(u+"(?="+u+")|"+_+v,"g");function w(N){for(var b=m.lastIndex=0;m.test(N);)++b;return b}return Jn=w,Jn}var er,ts;function $y(){if(ts)return er;ts=1;var e=Ay(),t=Ql(),n=Py();function r(i){return t(i)?n(i):e(i)}return er=r,er}var tr,ns;function Ly(){if(ns)return tr;ns=1;var e=aa(),t=ua(),n=di(),r=Jl(),i=$y(),o="[object Map]",s="[object Set]";function a(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var f=t(u);return f==o||f==s?u.size:e(u).length}return tr=a,tr}var nr,rs;function Ry(){if(rs)return nr;rs=1;var e=sa(),t=nf(),n=ef(),r=fi(),i=tf(),o=Ue(),s=hi(),a=gi(),u=cn(),f=pi();function c(l,d,h){var p=o(l),g=p||s(l)||f(l);if(d=r(d,4),h==null){var y=l&&l.constructor;g?h=p?new y:[]:u(l)?h=a(y)?t(i(l)):{}:h={}}return(g?e:n)(l,function(v,_,m){return d(h,v,_,m)}),h}return nr=c,nr}var rr,is;function dc(){if(is)return rr;is=1;var e=di(),t=rf();function n(r){return t(r)&&e(r)}return rr=n,rr}var ir,os;function Ty(){if(os)return ir;os=1;var e=of(),t=mi(),n=sf(),r=dc(),i=t(function(o){return n(e(o,1,r,!0))});return ir=i,ir}var or,ss;function Dy(){if(ss)return or;ss=1;var e=af();function t(n,r){return e(r,function(i){return n[i]})}return or=t,or}var sr,as;function hc(){if(as)return sr;as=1;var e=Dy(),t=la();function n(r){return r==null?[]:e(r,t(r))}return sr=n,sr}var ar,us;function ge(){if(us)return ar;us=1;var e;if(typeof Li=="function")try{e={clone:Sy(),constant:da(),each:ac(),filter:uc(),has:cc(),isArray:Ue(),isEmpty:ky(),isFunction:gi(),isUndefined:lc(),keys:la(),map:fa(),reduce:fc(),size:Ly(),transform:Ry(),union:Ty(),values:hc()}}catch{}return e||(e=window._),ar=e,ar}var ur,cs;function Ri(){if(cs)return ur;cs=1;var e=ge();ur=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(l){return e.isEmpty(c._in[l])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(l){return e.isEmpty(c._out[l])})},i.prototype.setNodes=function(c,l){var d=arguments,h=this;return e.each(c,function(p){d.length>1?h.setNode(p,l):h.setNode(p)}),this},i.prototype.setNode=function(c,l){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=l),this):(this._nodes[c]=arguments.length>1?l:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var l=this;if(e.has(this._nodes,c)){var d=function(h){l.removeEdge(l._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){l.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),d),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),d),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,l){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(l))l=n;else{l+="";for(var d=l;!e.isUndefined(d);d=this.parent(d))if(d===c)throw new Error("Setting "+l+" as parent of "+c+" would create a cycle");this.setNode(l)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=l,this._children[l][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var l=this._parent[c];if(l!==n)return l}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var l=this._children[c];if(l)return e.keys(l)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var l=this._preds[c];if(l)return e.keys(l)},i.prototype.successors=function(c){var l=this._sucs[c];if(l)return e.keys(l)},i.prototype.neighbors=function(c){var l=this.predecessors(c);if(l)return e.union(l,this.successors(c))},i.prototype.isLeaf=function(c){var l;return this.isDirected()?l=this.successors(c):l=this.neighbors(c),l.length===0},i.prototype.filterNodes=function(c){var l=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});l.setGraph(this.graph());var d=this;e.each(this._nodes,function(g,y){c(y)&&l.setNode(y,g)}),e.each(this._edgeObjs,function(g){l.hasNode(g.v)&&l.hasNode(g.w)&&l.setEdge(g,d.edge(g))});var h={};function p(g){var y=d.parent(g);return y===void 0||l.hasNode(y)?(h[g]=y,y):y in h?h[y]:p(y)}return this._isCompound&&e.each(l.nodes(),function(g){l.setParent(g,p(g))}),l},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,l){var d=this,h=arguments;return e.reduce(c,function(p,g){return h.length>1?d.setEdge(p,g,l):d.setEdge(p,g),g}),this},i.prototype.setEdge=function(){var c,l,d,h,p=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(c=g.v,l=g.w,d=g.name,arguments.length===2&&(h=arguments[1],p=!0)):(c=g,l=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],p=!0)),c=""+c,l=""+l,e.isUndefined(d)||(d=""+d);var y=a(this._isDirected,c,l,d);if(e.has(this._edgeLabels,y))return p&&(this._edgeLabels[y]=h),this;if(!e.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(l),this._edgeLabels[y]=p?h:this._defaultEdgeLabelFn(c,l,d);var v=u(this._isDirected,c,l,d);return c=v.v,l=v.w,Object.freeze(v),this._edgeObjs[y]=v,o(this._preds[l],c),o(this._sucs[c],l),this._in[l][y]=v,this._out[c][y]=v,this._edgeCount++,this},i.prototype.edge=function(c,l,d){var h=arguments.length===1?f(this._isDirected,arguments[0]):a(this._isDirected,c,l,d);return this._edgeLabels[h]},i.prototype.hasEdge=function(c,l,d){var h=arguments.length===1?f(this._isDirected,arguments[0]):a(this._isDirected,c,l,d);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(c,l,d){var h=arguments.length===1?f(this._isDirected,arguments[0]):a(this._isDirected,c,l,d),p=this._edgeObjs[h];return p&&(c=p.v,l=p.w,delete this._edgeLabels[h],delete this._edgeObjs[h],s(this._preds[l],c),s(this._sucs[c],l),delete this._in[l][h],delete this._out[c][h],this._edgeCount--),this},i.prototype.inEdges=function(c,l){var d=this._in[c];if(d){var h=e.values(d);return l?e.filter(h,function(p){return p.v===l}):h}},i.prototype.outEdges=function(c,l){var d=this._out[c];if(d){var h=e.values(d);return l?e.filter(h,function(p){return p.w===l}):h}},i.prototype.nodeEdges=function(c,l){var d=this.inEdges(c,l);if(d)return d.concat(this.outEdges(c,l))};function o(c,l){c[l]?c[l]++:c[l]=1}function s(c,l){--c[l]||delete c[l]}function a(c,l,d,h){var p=""+l,g=""+d;if(!c&&p>g){var y=p;p=g,g=y}return p+r+g+r+(e.isUndefined(h)?t:h)}function u(c,l,d,h){var p=""+l,g=""+d;if(!c&&p>g){var y=p;p=g,g=y}var v={v:p,w:g};return h&&(v.name=h),v}function f(c,l){return a(c,l.v,l.w,l.name)}return ur}var cr,ls;function qy(){return ls||(ls=1,cr="2.1.8"),cr}var lr,fs;function zy(){return fs||(fs=1,lr={Graph:Ri(),version:qy()}),lr}var fr,ds;function Oy(){if(ds)return fr;ds=1;var e=ge(),t=Ri();fr={write:n,read:o};function n(s){var a={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(a.value=e.clone(s.graph())),a}function r(s){return e.map(s.nodes(),function(a){var u=s.node(a),f=s.parent(a),c={v:a};return e.isUndefined(u)||(c.value=u),e.isUndefined(f)||(c.parent=f),c})}function i(s){return e.map(s.edges(),function(a){var u=s.edge(a),f={v:a.v,w:a.w};return e.isUndefined(a.name)||(f.name=a.name),e.isUndefined(u)||(f.value=u),f})}function o(s){var a=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(u){a.setNode(u.v,u.value),u.parent&&a.setParent(u.v,u.parent)}),e.each(s.edges,function(u){a.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),a}return fr}var dr,hs;function Fy(){if(hs)return dr;hs=1;var e=ge();dr=t;function t(n){var r={},i=[],o;function s(a){e.has(r,a)||(r[a]=!0,o.push(a),e.each(n.successors(a),s),e.each(n.predecessors(a),s))}return e.each(n.nodes(),function(a){o=[],s(a),o.length&&i.push(o)}),i}return dr}var hr,ps;function pc(){if(ps)return hr;ps=1;var e=ge();hr=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var o=this._arr,s=o.length;return i[n]=s,o.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,o=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,o<r.length&&(s=r[o].priority<r[s].priority?o:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<i));)this._swap(n,o),n=o},t.prototype._swap=function(n,r){var i=this._arr,o=this._keyIndices,s=i[n],a=i[r];i[n]=a,i[r]=s,o[a.key]=n,o[s.key]=r},hr}var pr,gs;function gc(){if(gs)return pr;gs=1;var e=ge(),t=pc();pr=r;var n=e.constant(1);function r(o,s,a,u){return i(o,String(s),a||n,u||function(f){return o.outEdges(f)})}function i(o,s,a,u){var f={},c=new t,l,d,h=function(p){var g=p.v!==l?p.v:p.w,y=f[g],v=a(p),_=d.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+v);_<y.distance&&(y.distance=_,y.predecessor=l,c.decrease(g,_))};for(o.nodes().forEach(function(p){var g=p===s?0:Number.POSITIVE_INFINITY;f[p]={distance:g},c.add(p,g)});c.size()>0&&(l=c.removeMin(),d=f[l],d.distance!==Number.POSITIVE_INFINITY);)u(l).forEach(h);return f}return pr}var gr,ms;function Vy(){if(ms)return gr;ms=1;var e=gc(),t=ge();gr=n;function n(r,i,o){return t.transform(r.nodes(),function(s,a){s[a]=e(r,a,i,o)},{})}return gr}var mr,vs;function mc(){if(vs)return mr;vs=1;var e=ge();mr=t;function t(n){var r=0,i=[],o={},s=[];function a(u){var f=o[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(d){e.has(o,d)?o[d].onStack&&(f.lowlink=Math.min(f.lowlink,o[d].index)):(a(d),f.lowlink=Math.min(f.lowlink,o[d].lowlink))}),f.lowlink===f.index){var c=[],l;do l=i.pop(),o[l].onStack=!1,c.push(l);while(u!==l);s.push(c)}}return n.nodes().forEach(function(u){e.has(o,u)||a(u)}),s}return mr}var vr,ys;function Hy(){if(ys)return vr;ys=1;var e=ge(),t=mc();vr=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return vr}var yr,ws;function By(){if(ws)return yr;ws=1;var e=ge();yr=n;var t=e.constant(1);function n(i,o,s){return r(i,o||t,s||function(a){return i.outEdges(a)})}function r(i,o,s){var a={},u=i.nodes();return u.forEach(function(f){a[f]={},a[f][f]={distance:0},u.forEach(function(c){f!==c&&(a[f][c]={distance:Number.POSITIVE_INFINITY})}),s(f).forEach(function(c){var l=c.v===f?c.w:c.v,d=o(c);a[f][l]={distance:d,predecessor:f}})}),u.forEach(function(f){var c=a[f];u.forEach(function(l){var d=a[l];u.forEach(function(h){var p=d[f],g=c[h],y=d[h],v=p.distance+g.distance;v<y.distance&&(y.distance=v,y.predecessor=g.predecessor)})})}),a}return yr}var wr,xs;function vc(){if(xs)return wr;xs=1;var e=ge();wr=t,t.CycleException=n;function t(r){var i={},o={},s=[];function a(u){if(e.has(o,u))throw new n;e.has(i,u)||(o[u]=!0,i[u]=!0,e.each(r.predecessors(u),a),delete o[u],s.push(u))}if(e.each(r.sinks(),a),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,wr}var xr,_s;function jy(){if(_s)return xr;_s=1;var e=vc();xr=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return xr}var _r,bs;function yc(){if(bs)return _r;bs=1;var e=ge();_r=t;function t(r,i,o){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],u={};return e.each(i,function(f){if(!r.hasNode(f))throw new Error("Graph does not have node: "+f);n(r,f,o==="post",u,s,a)}),a}function n(r,i,o,s,a,u){e.has(s,i)||(s[i]=!0,o||u.push(i),e.each(a(i),function(f){n(r,f,o,s,a,u)}),o&&u.push(i))}return _r}var br,Es;function Gy(){if(Es)return br;Es=1;var e=yc();br=t;function t(n,r){return e(n,r,"post")}return br}var Er,Ss;function Yy(){if(Ss)return Er;Ss=1;var e=yc();Er=t;function t(n,r){return e(n,r,"pre")}return Er}var Sr,Ns;function Wy(){if(Ns)return Sr;Ns=1;var e=ge(),t=Ri(),n=pc();Sr=r;function r(i,o){var s=new t,a={},u=new n,f;function c(d){var h=d.v===f?d.w:d.v,p=u.priority(h);if(p!==void 0){var g=o(d);g<p&&(a[h]=f,u.decrease(h,g))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(d){u.add(d,Number.POSITIVE_INFINITY),s.setNode(d)}),u.decrease(i.nodes()[0],0);for(var l=!1;u.size()>0;){if(f=u.removeMin(),e.has(a,f))s.setEdge(f,a[f]);else{if(l)throw new Error("Input graph is not connected: "+i);l=!0}i.nodeEdges(f).forEach(c)}return s}return Sr}var Nr,Cs;function Xy(){return Cs||(Cs=1,Nr={components:Fy(),dijkstra:gc(),dijkstraAll:Vy(),findCycles:Hy(),floydWarshall:By(),isAcyclic:jy(),postorder:Gy(),preorder:Yy(),prim:Wy(),tarjan:mc(),topsort:vc()}),Nr}var Cr,ks;function Uy(){if(ks)return Cr;ks=1;var e=zy();return Cr={Graph:e.Graph,json:Oy(),alg:Xy(),version:e.version},Cr}var on;if(typeof Li=="function")try{on=Uy()}catch{}on||(on=window.graphlib);var xe=on,kr,Is;function Ky(){if(Is)return kr;Is=1;var e=oa(),t=1,n=4;function r(i){return e(i,t|n)}return kr=r,kr}var Ir,Ms;function Zy(){if(Ms)return Ir;Ms=1;var e=mi(),t=ha(),n=pa(),r=ln(),i=Object.prototype,o=i.hasOwnProperty,s=e(function(a,u){a=Object(a);var f=-1,c=u.length,l=c>2?u[2]:void 0;for(l&&n(u[0],u[1],l)&&(c=1);++f<c;)for(var d=u[f],h=r(d),p=-1,g=h.length;++p<g;){var y=h[p],v=a[y];(v===void 0||t(v,i[y])&&!o.call(a,y))&&(a[y]=d[y])}return a});return Ir=s,Ir}var Mr,As;function Qy(){if(As)return Mr;As=1;var e=ga(),t=oc(),n=ln();function r(i,o){return i==null?i:e(i,t(o),n)}return Mr=r,Mr}var Ar,Ps;function wc(){if(Ps)return Ar;Ps=1;var e=uf(),t=ha();function n(r,i,o){(o!==void 0&&!t(r[i],o)||o===void 0&&!(i in r))&&e(r,i,o)}return Ar=n,Ar}var Pr,$s;function xc(){if($s)return Pr;$s=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return Pr=e,Pr}var $r,Ls;function Jy(){if(Ls)return $r;Ls=1;var e=cf(),t=ln();function n(r){return e(r,t(r))}return $r=n,$r}var Lr,Rs;function e0(){if(Rs)return Lr;Rs=1;var e=wc(),t=lf(),n=ff(),r=df(),i=hf(),o=ca(),s=Ue(),a=dc(),u=hi(),f=gi(),c=cn(),l=pf(),d=pi(),h=xc(),p=Jy();function g(y,v,_,m,w,N,b){var C=h(y,_),P=h(v,_),R=b.get(P);if(R){e(y,_,R);return}var z=N?N(C,P,_+"",y,v,b):void 0,I=z===void 0;if(I){var M=s(P),q=!M&&u(P),x=!M&&!q&&d(P);z=P,M||q||x?s(C)?z=C:a(C)?z=r(C):q?(I=!1,z=t(P,!0)):x?(I=!1,z=n(P,!0)):z=[]:l(P)||o(P)?(z=C,o(C)?z=p(C):(!c(C)||f(C))&&(z=i(P))):I=!1}I&&(b.set(P,z),w(z,P,m,N,b),b.delete(P)),e(y,_,z)}return Lr=g,Lr}var Rr,Ts;function t0(){if(Ts)return Rr;Ts=1;var e=gf(),t=wc(),n=ga(),r=e0(),i=cn(),o=ln(),s=xc();function a(u,f,c,l,d){u!==f&&n(f,function(h,p){if(d||(d=new e),i(h))r(u,f,p,c,a,l,d);else{var g=l?l(s(u,p),h,p+"",u,f,d):void 0;g===void 0&&(g=h),t(u,p,g)}},o)}return Rr=a,Rr}var Tr,Ds;function n0(){if(Ds)return Tr;Ds=1;var e=mi(),t=pa();function n(r){return e(function(i,o){var s=-1,a=o.length,u=a>1?o[a-1]:void 0,f=a>2?o[2]:void 0;for(u=r.length>3&&typeof u=="function"?(a--,u):void 0,f&&t(o[0],o[1],f)&&(u=a<3?void 0:u,a=1),i=Object(i);++s<a;){var c=o[s];c&&r(i,c,s,u)}return i})}return Tr=n,Tr}var Dr,qs;function r0(){if(qs)return Dr;qs=1;var e=t0(),t=n0(),n=t(function(r,i,o){e(r,i,o)});return Dr=n,Dr}var qr,zs;function i0(){if(zs)return qr;zs=1;var e=ma(),t=va(),n=mf(),r=cn(),i=vf();function o(s,a,u,f){if(!r(s))return s;a=t(a,s);for(var c=-1,l=a.length,d=l-1,h=s;h!=null&&++c<l;){var p=i(a[c]),g=u;if(p==="__proto__"||p==="constructor"||p==="prototype")return s;if(c!=d){var y=h[p];g=f?f(y,p,h):void 0,g===void 0&&(g=r(y)?y:n(a[c+1])?[]:{})}e(h,p,g),h=h[p]}return s}return qr=o,qr}var zr,Os;function o0(){if(Os)return zr;Os=1;var e=yf(),t=i0(),n=va();function r(i,o,s){for(var a=-1,u=o.length,f={};++a<u;){var c=o[a],l=e(i,c);s(l,c)&&t(f,n(c,i),l)}return f}return zr=r,zr}var Or,Fs;function s0(){if(Fs)return Or;Fs=1;var e=o0(),t=wf();function n(r,i){return e(r,i,function(o,s){return t(r,s)})}return Or=n,Or}var Fr,Vs;function a0(){if(Vs)return Fr;Vs=1;var e=s0(),t=xf(),n=t(function(r,i){return r==null?{}:e(r,i)});return Fr=n,Fr}var Vr,Hs;function u0(){if(Hs)return Vr;Hs=1;var e=_f(),t=0;function n(r){var i=++t;return e(r)+i}return Vr=n,Vr}var Hr,Bs;function c0(){if(Bs)return Hr;Bs=1;function e(t,n,r){for(var i=-1,o=t.length,s=n.length,a={};++i<o;){var u=i<s?n[i]:void 0;r(a,t[i],u)}return a}return Hr=e,Hr}var Br,js;function l0(){if(js)return Br;js=1;var e=ma(),t=c0();function n(r,i){return t(r||[],i||[],e)}return Br=n,Br}var sn;if(typeof Li=="function")try{sn={cloneDeep:Ky(),constant:da(),defaults:Zy(),each:ac(),filter:uc(),find:Pf(),flatten:Af(),forEach:sc(),forIn:Qy(),has:cc(),isUndefined:lc(),last:Mf(),map:fa(),mapValues:If(),max:kf(),merge:r0(),min:Cf(),minBy:Nf(),now:Sf(),pick:a0(),range:Ef(),reduce:fc(),sortBy:bf(),uniqueId:u0(),values:hc(),zipObject:l0()}}catch{}sn||(sn=window._);var ue=sn,f0=Nn;function Nn(){var e={};e._next=e._prev=e,this._sentinel=e}Nn.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return _c(t),t};Nn.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&_c(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Nn.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,d0)),n=n._prev;return"["+e.join(", ")+"]"};function _c(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function d0(e,t){if(e!=="_next"&&e!=="_prev")return t}var Ie=ue,h0=xe.Graph,p0=f0,g0=v0,m0=Ie.constant(1);function v0(e,t){if(e.nodeCount()<=1)return[];var n=w0(e,t||m0),r=y0(n.graph,n.buckets,n.zeroIdx);return Ie.flatten(Ie.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function y0(e,t,n){for(var r=[],i=t[t.length-1],o=t[0],s;e.nodeCount();){for(;s=o.dequeue();)jr(e,t,n,s);for(;s=i.dequeue();)jr(e,t,n,s);if(e.nodeCount()){for(var a=t.length-2;a>0;--a)if(s=t[a].dequeue(),s){r=r.concat(jr(e,t,n,s,!0));break}}}return r}function jr(e,t,n,r,i){var o=i?[]:void 0;return Ie.forEach(e.inEdges(r.v),function(s){var a=e.edge(s),u=e.node(s.v);i&&o.push({v:s.v,w:s.w}),u.out-=a,ai(t,n,u)}),Ie.forEach(e.outEdges(r.v),function(s){var a=e.edge(s),u=s.w,f=e.node(u);f.in-=a,ai(t,n,f)}),e.removeNode(r.v),o}function w0(e,t){var n=new h0,r=0,i=0;Ie.forEach(e.nodes(),function(a){n.setNode(a,{v:a,in:0,out:0})}),Ie.forEach(e.edges(),function(a){var u=n.edge(a.v,a.w)||0,f=t(a),c=u+f;n.setEdge(a.v,a.w,c),i=Math.max(i,n.node(a.v).out+=f),r=Math.max(r,n.node(a.w).in+=f)});var o=Ie.range(i+r+3).map(function(){return new p0}),s=r+1;return Ie.forEach(n.nodes(),function(a){ai(o,s,n.node(a))}),{graph:n,buckets:o,zeroIdx:s}}function ai(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var je=ue,x0=g0,_0={run:b0,undo:S0};function b0(e){var t=e.graph().acyclicer==="greedy"?x0(e,n(e)):E0(e);je.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,je.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function E0(e){var t=[],n={},r={};function i(o){je.has(r,o)||(r[o]=!0,n[o]=!0,je.forEach(e.outEdges(o),function(s){je.has(n,s.w)?t.push(s):i(s.w)}),delete n[o])}return je.forEach(e.nodes(),i),t}function S0(e){je.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ie=ue,bc=xe.Graph,fe={addDummyNode:Ec,simplify:N0,asNonCompoundGraph:C0,successorWeights:k0,predecessorWeights:I0,intersectRect:M0,buildLayerMatrix:A0,normalizeRanks:P0,removeEmptyRanks:$0,addBorderNode:L0,maxRank:Sc,partition:R0,time:T0,notime:D0};function Ec(e,t,n,r){var i;do i=ie.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function N0(e){var t=new bc().setGraph(e.graph());return ie.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ie.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function C0(e){var t=new bc({multigraph:e.isMultigraph()}).setGraph(e.graph());return ie.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ie.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function k0(e){var t=ie.map(e.nodes(),function(n){var r={};return ie.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return ie.zipObject(e.nodes(),t)}function I0(e){var t=ie.map(e.nodes(),function(n){var r={};return ie.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return ie.zipObject(e.nodes(),t)}function M0(e,t){var n=e.x,r=e.y,i=t.x-n,o=t.y-r,s=e.width/2,a=e.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var u,f;return Math.abs(o)*s>Math.abs(i)*a?(o<0&&(a=-a),u=a*i/o,f=a):(i<0&&(s=-s),u=s,f=s*o/i),{x:n+u,y:r+f}}function A0(e){var t=ie.map(ie.range(Sc(e)+1),function(){return[]});return ie.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;ie.isUndefined(i)||(t[i][r.order]=n)}),t}function P0(e){var t=ie.min(ie.map(e.nodes(),function(n){return e.node(n).rank}));ie.forEach(e.nodes(),function(n){var r=e.node(n);ie.has(r,"rank")&&(r.rank-=t)})}function $0(e){var t=ie.min(ie.map(e.nodes(),function(o){return e.node(o).rank})),n=[];ie.forEach(e.nodes(),function(o){var s=e.node(o).rank-t;n[s]||(n[s]=[]),n[s].push(o)});var r=0,i=e.graph().nodeRankFactor;ie.forEach(n,function(o,s){ie.isUndefined(o)&&s%i!==0?--r:r&&ie.forEach(o,function(a){e.node(a).rank+=r})})}function L0(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),Ec(e,"border",i,t)}function Sc(e){return ie.max(ie.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ie.isUndefined(n))return n}))}function R0(e,t){var n={lhs:[],rhs:[]};return ie.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function T0(e,t){var n=ie.now();try{return t()}finally{console.log(e+" time: "+(ie.now()-n)+"ms")}}function D0(e,t){return t()}var Nc=ue,q0=fe,z0={run:O0,undo:V0};function O0(e){e.graph().dummyChains=[],Nc.forEach(e.edges(),function(t){F0(e,t)})}function F0(e,t){var n=t.v,r=e.node(n).rank,i=t.w,o=e.node(i).rank,s=t.name,a=e.edge(t),u=a.labelRank;if(o!==r+1){e.removeEdge(t);var f,c,l;for(l=0,++r;r<o;++l,++r)a.points=[],c={width:0,height:0,edgeLabel:a,edgeObj:t,rank:r},f=q0.addDummyNode(e,"edge",c,"_d"),r===u&&(c.width=a.width,c.height=a.height,c.dummy="edge-label",c.labelpos=a.labelpos),e.setEdge(n,f,{weight:a.weight},s),l===0&&e.graph().dummyChains.push(f),n=f;e.setEdge(n,i,{weight:a.weight},s)}}function V0(e){Nc.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var Ht=ue,Cn={longestPath:H0,slack:B0};function H0(e){var t={};function n(r){var i=e.node(r);if(Ht.has(t,r))return i.rank;t[r]=!0;var o=Ht.min(Ht.map(e.outEdges(r),function(s){return n(s.w)-e.edge(s).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),i.rank=o}Ht.forEach(e.sources(),n)}function B0(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var an=ue,j0=xe.Graph,un=Cn.slack,Cc=G0;function G0(e){var t=new j0({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,o;Y0(t,e)<r;)i=W0(t,e),o=t.hasNode(i.v)?un(e,i):-un(e,i),X0(t,e,o);return t}function Y0(e,t){function n(r){an.forEach(t.nodeEdges(r),function(i){var o=i.v,s=r===o?i.w:o;!e.hasNode(s)&&!un(t,i)&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})}return an.forEach(e.nodes(),n),e.nodeCount()}function W0(e,t){return an.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return un(t,n)})}function X0(e,t,n){an.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Pe=ue,U0=Cc,K0=Cn.slack,Z0=Cn.longestPath,Q0=xe.alg.preorder,J0=xe.alg.postorder,ew=fe.simplify,tw=Ke;Ke.initLowLimValues=Di;Ke.initCutValues=Ti;Ke.calcCutValue=kc;Ke.leaveEdge=Mc;Ke.enterEdge=Ac;Ke.exchangeEdges=Pc;function Ke(e){e=ew(e),Z0(e);var t=U0(e);Di(t),Ti(t,e);for(var n,r;n=Mc(t);)r=Ac(t,e,n),Pc(t,e,n,r)}function Ti(e,t){var n=J0(e,e.nodes());n=n.slice(0,n.length-1),Pe.forEach(n,function(r){nw(e,t,r)})}function nw(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=kc(e,t,n)}function kc(e,t,n){var r=e.node(n),i=r.parent,o=!0,s=t.edge(n,i),a=0;return s||(o=!1,s=t.edge(i,n)),a=s.weight,Pe.forEach(t.nodeEdges(n),function(u){var f=u.v===n,c=f?u.w:u.v;if(c!==i){var l=f===o,d=t.edge(u).weight;if(a+=l?d:-d,iw(e,n,c)){var h=e.edge(n,c).cutvalue;a+=l?-h:h}}}),a}function Di(e,t){arguments.length<2&&(t=e.nodes()[0]),Ic(e,{},1,t)}function Ic(e,t,n,r,i){var o=n,s=e.node(r);return t[r]=!0,Pe.forEach(e.neighbors(r),function(a){Pe.has(t,a)||(n=Ic(e,t,n,a,r))}),s.low=o,s.lim=n++,i?s.parent=i:delete s.parent,n}function Mc(e){return Pe.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Ac(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var o=e.node(r),s=e.node(i),a=o,u=!1;o.lim>s.lim&&(a=s,u=!0);var f=Pe.filter(t.edges(),function(c){return u===Gs(e,e.node(c.v),a)&&u!==Gs(e,e.node(c.w),a)});return Pe.minBy(f,function(c){return K0(t,c)})}function Pc(e,t,n,r){var i=n.v,o=n.w;e.removeEdge(i,o),e.setEdge(r.v,r.w,{}),Di(e),Ti(e,t),rw(e,t)}function rw(e,t){var n=Pe.find(e.nodes(),function(i){return!t.node(i).parent}),r=Q0(e,n);r=r.slice(1),Pe.forEach(r,function(i){var o=e.node(i).parent,s=t.edge(i,o),a=!1;s||(s=t.edge(o,i),a=!0),t.node(i).rank=t.node(o).rank+(a?s.minlen:-s.minlen)})}function iw(e,t,n){return e.hasEdge(t,n)}function Gs(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var ow=Cn,$c=ow.longestPath,sw=Cc,aw=tw,uw=cw;function cw(e){switch(e.graph().ranker){case"network-simplex":Ys(e);break;case"tight-tree":fw(e);break;case"longest-path":lw(e);break;default:Ys(e)}}var lw=$c;function fw(e){$c(e),sw(e)}function Ys(e){aw(e)}var ui=ue,dw=hw;function hw(e){var t=gw(e);ui.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,o=pw(e,t,i.v,i.w),s=o.path,a=o.lca,u=0,f=s[u],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(f=s[u])!==a&&e.node(f).maxRank<r.rank;)u++;f===a&&(c=!1)}if(!c){for(;u<s.length-1&&e.node(f=s[u+1]).minRank<=r.rank;)u++;f=s[u]}e.setParent(n,f),n=e.successors(n)[0]}})}function pw(e,t,n,r){var i=[],o=[],s=Math.min(t[n].low,t[r].low),a=Math.max(t[n].lim,t[r].lim),u,f;u=n;do u=e.parent(u),i.push(u);while(u&&(t[u].low>s||a>t[u].lim));for(f=u,u=r;(u=e.parent(u))!==f;)o.push(u);return{path:i.concat(o.reverse()),lca:f}}function gw(e){var t={},n=0;function r(i){var o=n;ui.forEach(e.children(i),r),t[i]={low:o,lim:n++}}return ui.forEach(e.children(),r),t}var Me=ue,ci=fe,mw={run:vw,cleanup:xw};function vw(e){var t=ci.addDummyNode(e,"root",{},"_root"),n=yw(e),r=Me.max(Me.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,Me.forEach(e.edges(),function(s){e.edge(s).minlen*=i});var o=ww(e)+1;Me.forEach(e.children(),function(s){Lc(e,t,i,o,r,n,s)}),e.graph().nodeRankFactor=i}function Lc(e,t,n,r,i,o,s){var a=e.children(s);if(!a.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:n});return}var u=ci.addBorderNode(e,"_bt"),f=ci.addBorderNode(e,"_bb"),c=e.node(s);e.setParent(u,s),c.borderTop=u,e.setParent(f,s),c.borderBottom=f,Me.forEach(a,function(l){Lc(e,t,n,r,i,o,l);var d=e.node(l),h=d.borderTop?d.borderTop:l,p=d.borderBottom?d.borderBottom:l,g=d.borderTop?r:2*r,y=h!==p?1:i-o[s]+1;e.setEdge(u,h,{weight:g,minlen:y,nestingEdge:!0}),e.setEdge(p,f,{weight:g,minlen:y,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,u,{weight:0,minlen:i+o[s]})}function yw(e){var t={};function n(r,i){var o=e.children(r);o&&o.length&&Me.forEach(o,function(s){n(s,i+1)}),t[r]=i}return Me.forEach(e.children(),function(r){n(r,1)}),t}function ww(e){return Me.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function xw(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Me.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Gr=ue,_w=fe,bw=Ew;function Ew(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Gr.forEach(r,t),Gr.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,s=i.maxRank+1;o<s;++o)Ws(e,"borderLeft","_bl",n,i,o),Ws(e,"borderRight","_br",n,i,o)}}Gr.forEach(e.children(),t)}function Ws(e,t,n,r,i,o){var s={width:0,height:0,rank:o,borderType:t},a=i[t][o-1],u=_w.addDummyNode(e,"border",s,n);i[t][o]=u,e.setParent(u,r),a&&e.setEdge(a,u,{weight:1})}var _e=ue,Sw={adjust:Nw,undo:Cw};function Nw(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Rc(e)}function Cw(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&kw(e),(t==="lr"||t==="rl")&&(Iw(e),Rc(e))}function Rc(e){_e.forEach(e.nodes(),function(t){Xs(e.node(t))}),_e.forEach(e.edges(),function(t){Xs(e.edge(t))})}function Xs(e){var t=e.width;e.width=e.height,e.height=t}function kw(e){_e.forEach(e.nodes(),function(t){Yr(e.node(t))}),_e.forEach(e.edges(),function(t){var n=e.edge(t);_e.forEach(n.points,Yr),_e.has(n,"y")&&Yr(n)})}function Yr(e){e.y=-e.y}function Iw(e){_e.forEach(e.nodes(),function(t){Wr(e.node(t))}),_e.forEach(e.edges(),function(t){var n=e.edge(t);_e.forEach(n.points,Wr),_e.has(n,"x")&&Wr(n)})}function Wr(e){var t=e.x;e.x=e.y,e.y=t}var Ce=ue,Mw=Aw;function Aw(e){var t={},n=Ce.filter(e.nodes(),function(a){return!e.children(a).length}),r=Ce.max(Ce.map(n,function(a){return e.node(a).rank})),i=Ce.map(Ce.range(r+1),function(){return[]});function o(a){if(!Ce.has(t,a)){t[a]=!0;var u=e.node(a);i[u.rank].push(a),Ce.forEach(e.successors(a),o)}}var s=Ce.sortBy(n,function(a){return e.node(a).rank});return Ce.forEach(s,o),i}var De=ue,Pw=$w;function $w(e,t){for(var n=0,r=1;r<t.length;++r)n+=Lw(e,t[r-1],t[r]);return n}function Lw(e,t,n){for(var r=De.zipObject(n,De.map(n,function(f,c){return c})),i=De.flatten(De.map(t,function(f){return De.sortBy(De.map(e.outEdges(f),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var s=2*o-1;o-=1;var a=De.map(new Array(s),function(){return 0}),u=0;return De.forEach(i.forEach(function(f){var c=f.pos+o;a[c]+=f.weight;for(var l=0;c>0;)c%2&&(l+=a[c+1]),c=c-1>>1,a[c]+=f.weight;u+=f.weight*l})),u}var Us=ue,Rw=Tw;function Tw(e,t){return Us.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=Us.reduce(r,function(o,s){var a=e.edge(s),u=e.node(s.v);return{sum:o.sum+a.weight*u.order,weight:o.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var de=ue,Dw=qw;function qw(e,t){var n={};de.forEach(e,function(i,o){var s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};de.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),de.forEach(t.edges(),function(i){var o=n[i.v],s=n[i.w];!de.isUndefined(o)&&!de.isUndefined(s)&&(s.indegree++,o.out.push(n[i.w]))});var r=de.filter(n,function(i){return!i.indegree});return zw(r)}function zw(e){var t=[];function n(o){return function(s){s.merged||(de.isUndefined(s.barycenter)||de.isUndefined(o.barycenter)||s.barycenter>=o.barycenter)&&Ow(o,s)}}function r(o){return function(s){s.in.push(o),--s.indegree===0&&e.push(s)}}for(;e.length;){var i=e.pop();t.push(i),de.forEach(i.in.reverse(),n(i)),de.forEach(i.out,r(i))}return de.map(de.filter(t,function(o){return!o.merged}),function(o){return de.pick(o,["vs","i","barycenter","weight"])})}function Ow(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var yt=ue,Fw=fe,Vw=Hw;function Hw(e,t){var n=Fw.partition(e,function(c){return yt.has(c,"barycenter")}),r=n.lhs,i=yt.sortBy(n.rhs,function(c){return-c.i}),o=[],s=0,a=0,u=0;r.sort(Bw(!!t)),u=Ks(o,i,u),yt.forEach(r,function(c){u+=c.vs.length,o.push(c.vs),s+=c.barycenter*c.weight,a+=c.weight,u=Ks(o,i,u)});var f={vs:yt.flatten(o,!0)};return a&&(f.barycenter=s/a,f.weight=a),f}function Ks(e,t,n){for(var r;t.length&&(r=yt.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function Bw(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var ze=ue,jw=Rw,Gw=Dw,Yw=Vw,Ww=Tc;function Tc(e,t,n,r){var i=e.children(t),o=e.node(t),s=o?o.borderLeft:void 0,a=o?o.borderRight:void 0,u={};s&&(i=ze.filter(i,function(p){return p!==s&&p!==a}));var f=jw(e,i);ze.forEach(f,function(p){if(e.children(p.v).length){var g=Tc(e,p.v,n,r);u[p.v]=g,ze.has(g,"barycenter")&&Uw(p,g)}});var c=Gw(f,n);Xw(c,u);var l=Yw(c,r);if(s&&(l.vs=ze.flatten([s,l.vs,a],!0),e.predecessors(s).length)){var d=e.node(e.predecessors(s)[0]),h=e.node(e.predecessors(a)[0]);ze.has(l,"barycenter")||(l.barycenter=0,l.weight=0),l.barycenter=(l.barycenter*l.weight+d.order+h.order)/(l.weight+2),l.weight+=2}return l}function Xw(e,t){ze.forEach(e,function(n){n.vs=ze.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function Uw(e,t){ze.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var wt=ue,Kw=xe.Graph,Zw=Qw;function Qw(e,t,n){var r=Jw(e),i=new Kw({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(o){return e.node(o)});return wt.forEach(e.nodes(),function(o){var s=e.node(o),a=e.parent(o);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(o),i.setParent(o,a||r),wt.forEach(e[n](o),function(u){var f=u.v===o?u.w:u.v,c=i.edge(f,o),l=wt.isUndefined(c)?0:c.weight;i.setEdge(f,o,{weight:e.edge(u).weight+l})}),wt.has(s,"minRank")&&i.setNode(o,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),i}function Jw(e){for(var t;e.hasNode(t=wt.uniqueId("_root")););return t}var ex=ue,tx=nx;function nx(e,t,n){var r={},i;ex.forEach(n,function(o){for(var s=e.parent(o),a,u;s;){if(a=e.parent(s),a?(u=r[a],r[a]=s):(u=i,i=s),u&&u!==s){t.setEdge(u,s);return}s=a}})}var Fe=ue,rx=Mw,ix=Pw,ox=Ww,sx=Zw,ax=tx,ux=xe.Graph,Zs=fe,cx=lx;function lx(e){var t=Zs.maxRank(e),n=Qs(e,Fe.range(1,t+1),"inEdges"),r=Qs(e,Fe.range(t-1,-1,-1),"outEdges"),i=rx(e);Js(e,i);for(var o=Number.POSITIVE_INFINITY,s,a=0,u=0;u<4;++a,++u){fx(a%2?n:r,a%4>=2),i=Zs.buildLayerMatrix(e);var f=ix(e,i);f<o&&(u=0,s=Fe.cloneDeep(i),o=f)}Js(e,s)}function Qs(e,t,n){return Fe.map(t,function(r){return sx(e,r,n)})}function fx(e,t){var n=new ux;Fe.forEach(e,function(r){var i=r.graph().root,o=ox(r,i,n,t);Fe.forEach(o.vs,function(s,a){r.node(s).order=a}),ax(r,n,o.vs)})}function Js(e,t){Fe.forEach(t,function(n){Fe.forEach(n,function(r,i){e.node(r).order=i})})}var Z=ue,dx=xe.Graph,hx=fe,px={positionX:Nx};function gx(e,t){var n={};function r(i,o){var s=0,a=0,u=i.length,f=Z.last(o);return Z.forEach(o,function(c,l){var d=vx(e,c),h=d?e.node(d).order:u;(d||c===f)&&(Z.forEach(o.slice(a,l+1),function(p){Z.forEach(e.predecessors(p),function(g){var y=e.node(g),v=y.order;(v<s||h<v)&&!(y.dummy&&e.node(p).dummy)&&Dc(n,g,p)})}),a=l+1,s=h)}),o}return Z.reduce(t,r),n}function mx(e,t){var n={};function r(o,s,a,u,f){var c;Z.forEach(Z.range(s,a),function(l){c=o[l],e.node(c).dummy&&Z.forEach(e.predecessors(c),function(d){var h=e.node(d);h.dummy&&(h.order<u||h.order>f)&&Dc(n,d,c)})})}function i(o,s){var a=-1,u,f=0;return Z.forEach(s,function(c,l){if(e.node(c).dummy==="border"){var d=e.predecessors(c);d.length&&(u=e.node(d[0]).order,r(s,f,l,a,u),f=l,a=u)}r(s,f,s.length,u,o.length)}),s}return Z.reduce(t,i),n}function vx(e,t){if(e.node(t).dummy)return Z.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Dc(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function yx(e,t,n){if(t>n){var r=t;t=n,n=r}return Z.has(e[t],n)}function wx(e,t,n,r){var i={},o={},s={};return Z.forEach(t,function(a){Z.forEach(a,function(u,f){i[u]=u,o[u]=u,s[u]=f})}),Z.forEach(t,function(a){var u=-1;Z.forEach(a,function(f){var c=r(f);if(c.length){c=Z.sortBy(c,function(g){return s[g]});for(var l=(c.length-1)/2,d=Math.floor(l),h=Math.ceil(l);d<=h;++d){var p=c[d];o[f]===f&&u<s[p]&&!yx(n,f,p)&&(o[p]=f,o[f]=i[f]=i[p],u=s[p])}}})}),{root:i,align:o}}function xx(e,t,n,r,i){var o={},s=_x(e,t,n,i),a=i?"borderLeft":"borderRight";function u(l,d){for(var h=s.nodes(),p=h.pop(),g={};p;)g[p]?l(p):(g[p]=!0,h.push(p),h=h.concat(d(p))),p=h.pop()}function f(l){o[l]=s.inEdges(l).reduce(function(d,h){return Math.max(d,o[h.v]+s.edge(h))},0)}function c(l){var d=s.outEdges(l).reduce(function(p,g){return Math.min(p,o[g.w]-s.edge(g))},Number.POSITIVE_INFINITY),h=e.node(l);d!==Number.POSITIVE_INFINITY&&h.borderType!==a&&(o[l]=Math.max(o[l],d))}return u(f,s.predecessors.bind(s)),u(c,s.successors.bind(s)),Z.forEach(r,function(l){o[l]=o[n[l]]}),o}function _x(e,t,n,r){var i=new dx,o=e.graph(),s=Cx(o.nodesep,o.edgesep,r);return Z.forEach(t,function(a){var u;Z.forEach(a,function(f){var c=n[f];if(i.setNode(c),u){var l=n[u],d=i.edge(l,c);i.setEdge(l,c,Math.max(s(e,f,u),d||0))}u=f})}),i}function bx(e,t){return Z.minBy(Z.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Z.forIn(n,function(o,s){var a=kx(e,s)/2;r=Math.max(o+a,r),i=Math.min(o-a,i)}),r-i})}function Ex(e,t){var n=Z.values(t),r=Z.min(n),i=Z.max(n);Z.forEach(["u","d"],function(o){Z.forEach(["l","r"],function(s){var a=o+s,u=e[a],f;if(u!==t){var c=Z.values(u);f=s==="l"?r-Z.min(c):i-Z.max(c),f&&(e[a]=Z.mapValues(u,function(l){return l+f}))}})})}function Sx(e,t){return Z.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=Z.sortBy(Z.map(e,r));return(i[1]+i[2])/2})}function Nx(e){var t=hx.buildLayerMatrix(e),n=Z.merge(gx(e,t),mx(e,t)),r={},i;Z.forEach(["u","d"],function(s){i=s==="u"?t:Z.values(t).reverse(),Z.forEach(["l","r"],function(a){a==="r"&&(i=Z.map(i,function(l){return Z.values(l).reverse()}));var u=(s==="u"?e.predecessors:e.successors).bind(e),f=wx(e,i,n,u),c=xx(e,i,f.root,f.align,a==="r");a==="r"&&(c=Z.mapValues(c,function(l){return-l})),r[s+a]=c})});var o=bx(e,r);return Ex(r,o),Sx(r,e.graph().align)}function Cx(e,t,n){return function(r,i,o){var s=r.node(i),a=r.node(o),u=0,f;if(u+=s.width/2,Z.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":f=-s.width/2;break;case"r":f=s.width/2;break}if(f&&(u+=n?f:-f),f=0,u+=(s.dummy?t:e)/2,u+=(a.dummy?t:e)/2,u+=a.width/2,Z.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":f=a.width/2;break;case"r":f=-a.width/2;break}return f&&(u+=n?f:-f),f=0,u}}function kx(e,t){return e.node(t).width}var xt=ue,qc=fe,Ix=px.positionX,Mx=Ax;function Ax(e){e=qc.asNonCompoundGraph(e),Px(e),xt.forEach(Ix(e),function(t,n){e.node(n).x=t})}function Px(e){var t=qc.buildLayerMatrix(e),n=e.graph().ranksep,r=0;xt.forEach(t,function(i){var o=xt.max(xt.map(i,function(s){return e.node(s).height}));xt.forEach(i,function(s){e.node(s).y=r+o/2}),r+=o+n})}var J=ue,ea=_0,ta=z0,$x=uw,Lx=fe.normalizeRanks,Rx=dw,Tx=fe.removeEmptyRanks,na=mw,Dx=bw,ra=Sw,qx=cx,zx=Mx,Ve=fe,Ox=xe.Graph,Fx=Vx;function Vx(e,t){var n=t&&t.debugTiming?Ve.time:Ve.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return Qx(e)});n("  runLayout",function(){Hx(r,n)}),n("  updateInputGraph",function(){Bx(e,r)})})}function Hx(e,t){t("    makeSpaceForEdgeLabels",function(){Jx(e)}),t("    removeSelfEdges",function(){u_(e)}),t("    acyclic",function(){ea.run(e)}),t("    nestingGraph.run",function(){na.run(e)}),t("    rank",function(){$x(Ve.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){e_(e)}),t("    removeEmptyRanks",function(){Tx(e)}),t("    nestingGraph.cleanup",function(){na.cleanup(e)}),t("    normalizeRanks",function(){Lx(e)}),t("    assignRankMinMax",function(){t_(e)}),t("    removeEdgeLabelProxies",function(){n_(e)}),t("    normalize.run",function(){ta.run(e)}),t("    parentDummyChains",function(){Rx(e)}),t("    addBorderSegments",function(){Dx(e)}),t("    order",function(){qx(e)}),t("    insertSelfEdges",function(){c_(e)}),t("    adjustCoordinateSystem",function(){ra.adjust(e)}),t("    position",function(){zx(e)}),t("    positionSelfEdges",function(){l_(e)}),t("    removeBorderNodes",function(){a_(e)}),t("    normalize.undo",function(){ta.undo(e)}),t("    fixupEdgeLabelCoords",function(){o_(e)}),t("    undoCoordinateSystem",function(){ra.undo(e)}),t("    translateGraph",function(){r_(e)}),t("    assignNodeIntersects",function(){i_(e)}),t("    reversePoints",function(){s_(e)}),t("    acyclic.undo",function(){ea.undo(e)})}function Bx(e,t){J.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),J.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,J.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var jx=["nodesep","edgesep","ranksep","marginx","marginy"],Gx={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Yx=["acyclicer","ranker","rankdir","align"],Wx=["width","height"],Xx={width:0,height:0},Ux=["minlen","weight","width","height","labeloffset"],Kx={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Zx=["labelpos"];function Qx(e){var t=new Ox({multigraph:!0,compound:!0}),n=Ur(e.graph());return t.setGraph(J.merge({},Gx,Xr(n,jx),J.pick(n,Yx))),J.forEach(e.nodes(),function(r){var i=Ur(e.node(r));t.setNode(r,J.defaults(Xr(i,Wx),Xx)),t.setParent(r,e.parent(r))}),J.forEach(e.edges(),function(r){var i=Ur(e.edge(r));t.setEdge(r,J.merge({},Kx,Xr(i,Ux),J.pick(i,Zx)))}),t}function Jx(e){var t=e.graph();t.ranksep/=2,J.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function e_(e){J.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),o={rank:(i.rank-r.rank)/2+r.rank,e:t};Ve.addDummyNode(e,"edge-proxy",o,"_ep")}})}function t_(e){var t=0;J.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=J.max(t,r.maxRank))}),e.graph().maxRank=t}function n_(e){J.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function r_(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=e.graph(),s=o.marginx||0,a=o.marginy||0;function u(f){var c=f.x,l=f.y,d=f.width,h=f.height;t=Math.min(t,c-d/2),n=Math.max(n,c+d/2),r=Math.min(r,l-h/2),i=Math.max(i,l+h/2)}J.forEach(e.nodes(),function(f){u(e.node(f))}),J.forEach(e.edges(),function(f){var c=e.edge(f);J.has(c,"x")&&u(c)}),t-=s,r-=a,J.forEach(e.nodes(),function(f){var c=e.node(f);c.x-=t,c.y-=r}),J.forEach(e.edges(),function(f){var c=e.edge(f);J.forEach(c.points,function(l){l.x-=t,l.y-=r}),J.has(c,"x")&&(c.x-=t),J.has(c,"y")&&(c.y-=r)}),o.width=n-t+s,o.height=i-r+a}function i_(e){J.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),o,s;n.points?(o=n.points[0],s=n.points[n.points.length-1]):(n.points=[],o=i,s=r),n.points.unshift(Ve.intersectRect(r,o)),n.points.push(Ve.intersectRect(i,s))})}function o_(e){J.forEach(e.edges(),function(t){var n=e.edge(t);if(J.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function s_(e){J.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function a_(e){J.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),o=e.node(J.last(n.borderLeft)),s=e.node(J.last(n.borderRight));n.width=Math.abs(s.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),J.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function u_(e){J.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function c_(e){var t=Ve.buildLayerMatrix(e);J.forEach(t,function(n){var r=0;J.forEach(n,function(i,o){var s=e.node(i);s.order=o+r,J.forEach(s.selfEdges,function(a){Ve.addDummyNode(e,"selfedge",{width:a.label.width,height:a.label.height,rank:s.rank,order:o+ ++r,e:a.e,label:a.label},"_se")}),delete s.selfEdges})})}function l_(e){J.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}})}function Xr(e,t){return J.mapValues(J.pick(e,t),Number)}function Ur(e){var t={};return J.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Bt=ue,f_=fe,d_=xe.Graph,h_={debugOrdering:p_};function p_(e){var t=f_.buildLayerMatrix(e),n=new d_({compound:!0,multigraph:!0}).setGraph({});return Bt.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Bt.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Bt.forEach(t,function(r,i){var o="layer"+i;n.setNode(o,{rank:"same"}),Bt.reduce(r,function(s,a){return n.setEdge(s,a,{style:"invis"}),a})}),n}var g_="0.8.5",m_={graphlib:xe,layout:Fx,debug:h_,util:{time:fe.time,notime:fe.notime},version:g_};const k_=ia(m_);export{Sn as B,ot as C,__ as E,nn as H,C_ as M,j as P,Pi as a,b_ as b,Of as c,k_ as d,E_ as e,Ng as f,cu as g,S_ as h,x_ as i,L as j,N_ as k,bn as l,w_ as r,od as u};
//# sourceMappingURL=reactflow-DSe82xZ2.js.map
