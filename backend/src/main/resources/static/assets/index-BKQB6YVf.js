var ha=Object.defineProperty;var pa=(s,t,a)=>t in s?ha(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var ve=(s,t,a)=>pa(s,typeof t!="symbol"?t+"":t,a);import{j as e,a as Ns,H as ie,P as le,g as ga,B as ja,E as fa,d as tt,b as ya,e as va,f as Na,r as ba,i as wa,C as Sa,h as Ca,k as Ea,M as Ta,l as at}from"./reactflow-DSe82xZ2.js";import{b as Fa,r as N,a as Ee}from"./vendor-CkebN-nG.js";import{N as Ts,u as $e,O as Aa,a as Te,L as Ae,b as qs,c as St,R as ka,d as se,B as Pa}from"./router-BHeSLID_.js";import{a as Da,u as ee,b as X,c as be,Q as Ia,d as La}from"./query-P2lKDTSa.js";import{t as Ra,c as Ma,a as Ls,L as Ua,B as Ct,W as qe,A as Ne,b as Vs,D as Re,S as ae,C as js,d as Oa,e as Bs,f as $a,M as Va,g as Ka,h as Et,U as fs,i as _a,j as Xe,E as bs,k as Se,X as Pe,l as Hs,m as za,P as Me,n as us,o as ns,p as te,R as he,T as qa,F as pe,q as re,r as oe,s as Ba,u as rt,v as Ha,w as Gs,x as nt,y as Ge,z as is,G as Ps,H as je,I as ts,J as Ga,K as Le,N as Wa,O as Ue,Q as ls,V as it,Y as ke,Z as Ks,_ as _s,$ as Ya,a0 as Ws,a1 as Qa,a2 as Ja,a3 as Xa,a4 as Za,a5 as er,a6 as ge,a7 as ce,a8 as sr,a9 as Rs,aa as Oe,ab as Fs,ac as lt,ad as Ys,ae as ct,af as ot,ag as tr,ah as dt,ai as ar,aj as rr,ak as Tt,al as nr,am as Ft}from"./utils-BckXFSzn.js";import{c as At,u as kt,C as G,a as Fe}from"./forms-BWU-AKHq.js";import{C as ir,S as lr}from"./websocket-DDMhnY3t.js";import{S as cr,a as Pt,b as Dt,P as or,C as It,I as Lt,c as Rt,d as Mt,R as Ut,L as Ot,e as $t,f as dr,T as xr,g as Vt,O as Kt,h as mr,i as _t,j as ur,k as zt,D as qt,l as hr,m as pr,n as Bt,o as gr,p as Ht,q as Gt,r as jr,s as Wt,V as fr,t as Yt,u as Qt,v as yr,w as vr,x as Jt,y as Nr,z as br,A as Xt,B as wr,E as Zt,F as ea,G as Sr,H as Cr,J as Er,K as Tr,M as Fr,N as Ar,Q as sa,U as ta,W as aa,X as kr}from"./ui-DsOSSPVU.js";import"./charts-CItJE7zn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var zs={},xt=Fa;zs.createRoot=xt.createRoot,zs.hydrateRoot=xt.hydrateRoot;const Pr={};function Dr(s,t){let a;try{a=s()}catch{return}return{getItem:n=>{var i;const o=d=>d===null?null:JSON.parse(d,void 0),j=(i=a.getItem(n))!=null?i:null;return j instanceof Promise?j.then(o):o(j)},setItem:(n,i)=>a.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>a.removeItem(n)}}const ys=s=>t=>{try{const a=s(t);return a instanceof Promise?a:{then(r){return ys(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return ys(r)(a)}}}},Ir=(s,t)=>(a,r,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:p=>p,version:0,merge:(p,b)=>({...b,...p}),...t},o=!1;const j=new Set,d=new Set;let f;try{f=i.getStorage()}catch{}if(!f)return s((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),a(...p)},r,n);const h=ys(i.serialize),E=()=>{const p=i.partialize({...r()});let b;const v=h({state:p,version:i.version}).then(L=>f.setItem(i.name,L)).catch(L=>{b=L});if(b)throw b;return v},w=n.setState;n.setState=(p,b)=>{w(p,b),E()};const k=s((...p)=>{a(...p),E()},r,n);let S;const g=()=>{var p;if(!f)return;o=!1,j.forEach(v=>v(r()));const b=((p=i.onRehydrateStorage)==null?void 0:p.call(i,r()))||void 0;return ys(f.getItem.bind(f))(i.name).then(v=>{if(v)return i.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return i.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var L;return S=i.merge(v,(L=r())!=null?L:k),a(S,!0),E()}).then(()=>{b==null||b(S,void 0),o=!0,d.forEach(v=>v(S))}).catch(v=>{b==null||b(void 0,v)})};return n.persist={setOptions:p=>{i={...i,...p},p.getStorage&&(f=p.getStorage())},clearStorage:()=>{f==null||f.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:p=>(j.add(p),()=>{j.delete(p)}),onFinishHydration:p=>(d.add(p),()=>{d.delete(p)})},g(),S||k},Lr=(s,t)=>(a,r,n)=>{let i={storage:Dr(()=>localStorage),partialize:g=>g,version:0,merge:(g,p)=>({...p,...g}),...t},o=!1;const j=new Set,d=new Set;let f=i.storage;if(!f)return s((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),a(...g)},r,n);const h=()=>{const g=i.partialize({...r()});return f.setItem(i.name,{state:g,version:i.version})},E=n.setState;n.setState=(g,p)=>{E(g,p),h()};const w=s((...g)=>{a(...g),h()},r,n);n.getInitialState=()=>w;let k;const S=()=>{var g,p;if(!f)return;o=!1,j.forEach(v=>{var L;return v((L=r())!=null?L:w)});const b=((p=i.onRehydrateStorage)==null?void 0:p.call(i,(g=r())!=null?g:w))||void 0;return ys(f.getItem.bind(f))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var L;const[u,I]=v;if(k=i.merge(I,(L=r())!=null?L:w),a(k,!0),u)return h()}).then(()=>{b==null||b(k,void 0),k=r(),o=!0,d.forEach(v=>v(k))}).catch(v=>{b==null||b(void 0,v)})};return n.persist={setOptions:g=>{i={...i,...g},g.storage&&(f=g.storage)},clearStorage:()=>{f==null||f.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:g=>(j.add(g),()=>{j.delete(g)}),onFinishHydration:g=>(d.add(g),()=>{d.delete(g)})},i.skipHydration||S(),k||w},Rr=(s,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Pr?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Ir(s,t)):Lr(s,t),Mr=Rr,Ur={persistLogin:!1,sessionTimeout:24*60*60*1e3,heartbeatInterval:5*60*1e3};class Or{constructor(t={}){ve(this,"config");ve(this,"heartbeatTimer");ve(this,"sessionTimeoutTimer");ve(this,"isVerifying",!1);this.config={...Ur,...t},this.setupSessionManagement()}setupSessionManagement(){window.addEventListener("beforeunload",this.handleBeforeUnload.bind(this)),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),this.isLoggedIn()&&this.startHeartbeat()}handleBeforeUnload(t){console.log("[SessionManager] beforeunload triggered, persistLogin:",this.config.persistLogin)}handleVisibilityChange(){document.hidden?this.stopHeartbeat():this.isLoggedIn()&&this.startHeartbeat()}setToken(t,a,r=!1){console.log("[SessionManager] setToken called with persistLogin:",r),this.config.persistLogin=r,r?(console.log("[SessionManager] Storing in localStorage (persistent)"),localStorage.setItem("h2h_token",t),localStorage.setItem("h2h_user",JSON.stringify(a)),localStorage.setItem("h2h_persist_login","true"),sessionStorage.removeItem("h2h_token"),sessionStorage.removeItem("h2h_user")):(console.log("[SessionManager] Storing in sessionStorage (temporary)"),sessionStorage.setItem("h2h_token",t),sessionStorage.setItem("h2h_user",JSON.stringify(a)),localStorage.removeItem("h2h_token"),localStorage.removeItem("h2h_user"),localStorage.removeItem("h2h_persist_login")),this.startHeartbeat(),this.startSessionTimeout()}getToken(){return sessionStorage.getItem("h2h_token")||localStorage.getItem("h2h_token")}getUser(){const t=sessionStorage.getItem("h2h_user")||localStorage.getItem("h2h_user");return t?JSON.parse(t):null}isLoggedIn(){return!!this.getToken()}isPersistentLogin(){return localStorage.getItem("h2h_persist_login")==="true"}logout(){this.clearAllTokens(),this.stopHeartbeat(),this.stopSessionTimeout(),window.location.href="/login"}clearTokens(){this.clearAllTokens(),this.stopHeartbeat(),this.stopSessionTimeout()}forceLogout(t="Session expired"){console.warn("Force logout:",t),this.logout()}clearAllTokens(){sessionStorage.removeItem("h2h_token"),sessionStorage.removeItem("h2h_user"),localStorage.removeItem("h2h_token"),localStorage.removeItem("h2h_user"),localStorage.removeItem("h2h_persist_login")}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=window.setInterval(()=>{this.isVerifying||this.performHeartbeat()},this.config.heartbeatInterval)}stopHeartbeat(){this.heartbeatTimer&&(window.clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0)}startSessionTimeout(){this.stopSessionTimeout(),this.sessionTimeoutTimer=window.setTimeout(()=>{this.forceLogout("Session timeout")},this.config.sessionTimeout)}stopSessionTimeout(){this.sessionTimeoutTimer&&(window.clearTimeout(this.sessionTimeoutTimer),this.sessionTimeoutTimer=void 0)}async performHeartbeat(){if(!this.isVerifying){this.isVerifying=!0;try{const t=this.getToken();if(!t){this.forceLogout("No token found");return}const a=await fetch("/api/auth/verify",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!a.ok){a.status===401&&this.forceLogout("Invalid token");return}this.startSessionTimeout()}catch(t){console.warn("Heartbeat failed:",t)}finally{this.isVerifying=!1}}}refreshSession(){this.isLoggedIn()&&this.startSessionTimeout()}}const de=new Or,$r=["mousedown","mousemove","keypress","scroll","touchstart"];let mt=Date.now();$r.forEach(s=>{document.addEventListener(s,()=>{const t=Date.now();t-mt>6e4&&de.refreshSession(),mt=t},!0)});class Vr{constructor(t){ve(this,"client",null);ve(this,"subscriptions",new Map);ve(this,"isConnected",!1);ve(this,"reconnectAttempts",0);ve(this,"maxReconnectAttempts",5);ve(this,"reconnectInterval",5e3);ve(this,"reconnectTimer");this.baseUrl=t,this.baseUrl=t||this.getWebSocketUrl()}getWebSocketUrl(){return`${window.location.protocol}//${window.location.host}/ws`}getAuthToken(){return sessionStorage.getItem("h2h_token")||localStorage.getItem("h2h_token")}connect(){return this.isConnected?Promise.resolve():new Promise((t,a)=>{const r=this.getAuthToken();if(!r){a(new Error("No authentication token available"));return}const n={webSocketFactory:()=>new lr(this.baseUrl),connectHeaders:{Authorization:`Bearer ${r}`},heartbeatIncoming:4e3,heartbeatOutgoing:4e3,reconnectDelay:this.reconnectInterval,logRawCommunication:!1,debug:()=>{},onConnect:i=>{console.log("[WebSocket] Connected successfully",i),this.isConnected=!0,this.reconnectAttempts=0,this.clearReconnectTimer(),this.resubscribeAll(),t()},onStompError:i=>{console.error("[WebSocket] STOMP error",i),this.isConnected=!1,a(new Error(`STOMP error: ${i.body}`))},onWebSocketClose:i=>{console.warn("[WebSocket] Connection closed",i),this.isConnected=!1,this.handleReconnect()},onDisconnect:i=>{console.log("[WebSocket] Disconnected",i),this.isConnected=!1},onWebSocketError:i=>{console.error("[WebSocket] Connection error",i),this.isConnected=!1,this.handleReconnect()}};this.client=new ir(n),this.client.activate()})}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("[WebSocket] Maximum reconnection attempts reached");return}this.reconnectAttempts++,console.log(`[WebSocket] Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.reconnectTimer=setTimeout(()=>{this.connect().catch(t=>{console.error("[WebSocket] Reconnection failed",t)})},this.reconnectInterval*this.reconnectAttempts)}clearReconnectTimer(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=void 0)}resubscribeAll(){const t=Array.from(this.subscriptions.keys());for(const a of t)this.subscribeToTopic(a)}subscribeToTopic(t){if(!this.client||!this.isConnected){console.warn(`[WebSocket] Cannot subscribe to ${t}: not connected`);return}this.client.subscribe(t,a=>{try{const r=JSON.parse(a.body),n=this.subscriptions.get(t)||[];for(const i of n)try{i(r)}catch(o){console.error(`[WebSocket] Handler error for topic ${t}:`,o)}}catch(r){console.error(`[WebSocket] Failed to parse message on ${t}:`,r)}})}subscribe(t,a){return this.subscriptions.has(t)||this.subscriptions.set(t,[]),this.subscriptions.get(t).push(a),this.isConnected&&this.subscribeToTopic(t),()=>{const r=this.subscriptions.get(t);if(r){const n=r.indexOf(a);n>-1&&(r.splice(n,1),r.length===0&&this.subscriptions.delete(t))}}}subscribeToFlowExecutions(t){return this.subscribe("/topic/flow-executions",a=>{a.type==="FLOW_EXECUTION_UPDATE"&&t(a)})}subscribeToSpecificFlowExecutions(t,a){return this.subscribe(`/topic/flow/${t}/executions`,r=>{r.type==="FLOW_EXECUTION_UPDATE"&&a(r)})}subscribeToSpecificExecution(t,a){return this.subscribe(`/topic/execution/${t}`,r=>{(r.type==="FLOW_EXECUTION_UPDATE"||r.type==="FLOW_STEP_UPDATE")&&a(r)})}subscribeToExecutionSteps(t,a){return this.subscribe(`/topic/execution/${t}/steps`,r=>{r.type==="FLOW_STEP_UPDATE"&&a(r)})}subscribeToFlowDefinitionUpdates(t){return this.subscribe("/topic/flow-definitions",a=>{a.type==="FLOW_DEFINITION_UPDATE"&&t(a)})}subscribeToFlowValidation(t,a){return this.subscribe(`/topic/flow/${t}/validation`,r=>{r.type==="FLOW_VALIDATION_RESULT"&&a(r)})}subscribeToSystemHealth(t){return this.subscribe("/topic/system-health",a=>{a.type==="SYSTEM_HEALTH_UPDATE"&&t(a)})}disconnect(){this.clearReconnectTimer(),this.isConnected=!1,this.subscriptions.clear(),this.client&&(this.client.deactivate(),this.client=null),console.log("[WebSocket] Disconnected and cleaned up")}isConnectionActive(){var t;return this.isConnected&&((t=this.client)==null?void 0:t.connected)===!0}getConnectionStatus(){return this.client?this.isConnected&&this.client.connected?"connected":this.reconnectAttempts>0?"reconnecting":this.client.active?"connecting":"disconnected":"disconnected"}}let rs=null;function ws(){return rs||(rs=new Vr),rs}function ra(){return ws().connect()}function ds(){rs&&(rs.disconnect(),rs=null)}const Kr=()=>{try{const s=localStorage.getItem("h2h_persist_login")==="true",t=de.getToken(),a=de.getUser();let r=!1;if(t)try{const i=JSON.parse(atob(t.split(".")[1])),o=Date.now()/1e3;r=i.exp>o}catch{}return{user:a,token:t,isAuthenticated:!!(t&&a&&r),persistLogin:s,hasInitialized:!1,isLoading:!1}}catch(s){return console.warn("Failed to initialize auth state from storage:",s),{user:null,token:null,isAuthenticated:!1,persistLogin:!1,hasInitialized:!1,isLoading:!0}}},Ve=At()(Mr((s,t)=>({...Kr(),setAuth:(a,r,n=!1)=>{s({user:a,token:r,isAuthenticated:!0,isLoading:!1,hasInitialized:!0,persistLogin:n}),de.setToken(r,a,n),ra().catch(i=>{console.warn("[Auth Store] Failed to initialize WebSocket:",i)})},clearAuth:()=>{s({user:null,token:null,isAuthenticated:!1,isLoading:!1,hasInitialized:!0,persistLogin:!1}),ds()},setLoading:a=>{s({isLoading:a})},setInitialized:a=>{s({hasInitialized:a,isLoading:!1})},updateUser:a=>{s({user:a});const r=t().token;r&&de.setToken(r,a,t().persistLogin)},setPersistLogin:a=>{s({persistLogin:a})}}),{name:"h2h-auth",partialize:s=>({persistLogin:s.persistLogin})})),_r=()=>window.location.origin,zr=_r(),P=Da.create({baseURL:zr,timeout:3e4,headers:{"Content-Type":"application/json"}});P.interceptors.request.use(s=>{const t=sessionStorage.getItem("h2h_token")||localStorage.getItem("h2h_token");return t&&(s.headers.Authorization=`Bearer ${t}`),s});P.interceptors.response.use(s=>s,s=>{var t,a,r;if(((t=s.response)==null?void 0:t.status)===401){const n=((a=s.config)==null?void 0:a.url)||"";console.warn("[API] 401 response received:",{url:n,method:(r=s.config)==null?void 0:r.method})}return Promise.reject(s)});const Qs={login:async s=>(await P.post("/api/auth/login",s)).data,refreshToken:async s=>(await P.post("/api/auth/refresh",{refreshToken:s})).data,verifyToken:async()=>(await P.get("/api/auth/verify")).data,logout:async()=>(await P.post("/api/auth/logout")).data},Je={getCurrentUser:async()=>(await P.get("/api/users/me")).data,getAllUsers:async()=>(await P.get("/api/users")).data,createUser:async s=>(await P.post("/api/users",s)).data,updateUser:async(s,t)=>(await P.put(`/api/users/${s}`,t)).data,deleteUser:async s=>(await P.delete(`/api/users/${s}`)).data,changePassword:async(s,t,a)=>(await P.put(`/api/users/${s}/password`,{currentPassword:t,newPassword:a})).data},$s={getSystemHealth:async()=>(await P.get("/api/dashboard/health")).data,getAdapterStatistics:async()=>(await P.get("/api/dashboard/adapter-stats")).data,getRecentExecutions:async(s=10)=>(await P.get(`/api/dashboard/recent-executions?limit=${s}`)).data},Ds={getDashboardIntervals:async()=>(await P.get("/api/configuration/dashboard/intervals")).data,getAllConfigurations:async()=>(await P.get("/api/configuration/all")).data,getConfigurationsByCategory:async s=>(await P.get(`/api/configuration/category/${s}`)).data,updateConfigurationValue:async(s,t)=>(await P.put(`/api/configuration/key/${s}/value`,{value:t})).data,resetConfigurationToDefault:async s=>(await P.put(`/api/configuration/key/${s}/reset`)).data,getConfigurationMetadata:async()=>(await P.get("/api/configuration/metadata")).data,getConfigurationStatistics:async()=>(await P.get("/api/configuration/statistics")).data},me={getAllAdapters:async()=>(await P.get("/api/adapters")).data,getAdapter:async s=>(await P.get(`/api/adapters/${s}`)).data,createAdapter:async s=>(await P.post("/api/adapters",s)).data,updateAdapter:async(s,t)=>(await P.put(`/api/adapters/${s}`,t)).data,deleteAdapter:async s=>(await P.delete(`/api/adapters/${s}`)).data,testAdapter:async s=>(await P.post(`/api/adapters/${s}/test`)).data,executeAdapter:async s=>(await P.post(`/api/adapters/${s}/execute`)).data,startAdapter:async s=>(await P.post(`/api/adapters/${s}/start`)).data,stopAdapter:async s=>(await P.post(`/api/adapters/${s}/stop`)).data,getAdapterStatus:async s=>(await P.get(`/api/adapters/${s}/status`)).data,getAdapterLogs:async s=>{const t=new URLSearchParams;s!=null&&s.filter&&t.append("filter",s.filter),s!=null&&s.level&&s.level!=="all"&&t.append("level",s.level),s!=null&&s.adapterId&&t.append("adapterId",s.adapterId);const a=`/api/adapters/logs${t.toString()?`?${t.toString()}`:""}`;return(await P.get(a)).data},getAdapterExecutionHistory:async(s,t)=>{const a=new URLSearchParams;t!=null&&t.limit&&a.append("limit",t.limit.toString());const r=`/api/adapters/${s}/executions${a.toString()?`?${a.toString()}`:""}`;return(await P.get(r)).data}},qr={getAllInterfaces:async()=>(await P.get("/api/interfaces")).data},Be={getAllKeys:async()=>(await P.get("/api/ssh-keys")).data.data||[],generateRSAKey:async s=>(await P.post("/api/ssh-keys/generate/rsa",s)).data,generateDSAKey:async s=>(await P.post("/api/ssh-keys/generate/dsa",s)).data,importKey:async s=>(await P.post("/api/ssh-keys/import",s)).data,downloadPrivateKey:async s=>(await P.get(`/api/ssh-keys/${s}/download/private`,{responseType:"blob"})).data,downloadPublicKey:async s=>(await P.get(`/api/ssh-keys/${s}/download/public`,{responseType:"blob"})).data,updateKey:async(s,t)=>(await P.put(`/api/ssh-keys/${s}`,t)).data,toggleKeyStatus:async(s,t)=>(await P.put(`/api/ssh-keys/${s}/status`,{enabled:t})).data,deleteKey:async s=>(await P.delete(`/api/ssh-keys/${s}`)).data},Ye={getAllKeys:async()=>(await P.get("/api/admin/pgp-keys")).data,getKeyById:async s=>(await P.get(`/api/admin/pgp-keys/${s}`)).data,generateKey:async s=>(await P.post("/api/admin/pgp-keys/generate",s)).data,importKey:async s=>(await P.post("/api/admin/pgp-keys/import",s)).data,exportPublicKey:async s=>(await P.get(`/api/admin/pgp-keys/${s}/export/public`,{responseType:"text"})).data,exportPrivateKey:async s=>(await P.get(`/api/admin/pgp-keys/${s}/export/private`,{responseType:"text"})).data,revokeKey:async(s,t)=>(await P.post(`/api/admin/pgp-keys/${s}/revoke`,{reason:t})).data,deleteKey:async s=>(await P.delete(`/api/admin/pgp-keys/${s}`)).data,getExpiredKeys:async()=>(await P.get("/api/admin/pgp-keys/expired")).data},ue={getAllFlows:async()=>(await P.get("/api/flows")).data,getFlowById:async s=>(await P.get(`/api/flows/${s}`)).data,createFlow:async s=>(await P.post("/api/flows",s)).data,updateFlow:async(s,t)=>{var a,r;try{return(await P.put(`/api/flows/${s}`,t)).data}catch(n){if(console.error("❌ Frontend: Flow update failed:",n),(r=(a=n.response)==null?void 0:a.data)!=null&&r.message){const i=n.response.data.message;if(i.includes("deployed"))throw new Error(i)}throw n}},deleteFlow:async s=>(await P.delete(`/api/flows/${s}`)).data,executeFlow:async s=>(await P.post(`/api/flows/${s}/execute`)).data,exportFlow:async s=>(await P.get(`/api/flows/${s}/export`)).data,importFlow:async s=>(await P.post("/api/flows/import",s)).data,getStatistics:async()=>(await P.get("/api/flows/statistics")).data,validateFlow:async s=>{var t;try{return(await P.post(`/api/flows/${s}/validate`)).data}catch(a){throw console.error("❌ Frontend: Flow validation failed:",a),console.error("❌ Frontend: Validation error response:",(t=a.response)==null?void 0:t.data),a}},setFlowActive:async(s,t)=>(await P.put(`/api/flows/${s}/active?active=${t}`)).data,deployFlow:async s=>{var t,a;try{return(await P.post(`/api/flows/${s}/deploy`)).data}catch(r){throw console.error("❌ Frontend: Flow deployment failed:",r),console.error("❌ Frontend: Error response:",(t=r.response)==null?void 0:t.data),console.error("❌ Frontend: Error status:",(a=r.response)==null?void 0:a.status),r}},undeployFlow:async s=>(await P.post(`/api/flows/${s}/undeploy`)).data,getFlowDeploymentStatus:async s=>(await P.get(`/api/flows/${s}/deployment`)).data,validateFlowDeployment:async s=>(await P.post(`/api/flows/${s}/validate-deployment`)).data},Is={getAllExecutions:async s=>{const t=new URLSearchParams;s!=null&&s.page&&t.append("page",s.page.toString()),s!=null&&s.size&&t.append("size",s.size.toString()),s!=null&&s.status&&t.append("status",s.status),s!=null&&s.flowId&&t.append("flowId",s.flowId),s!=null&&s.dateFrom&&t.append("dateFrom",s.dateFrom),s!=null&&s.dateTo&&t.append("dateTo",s.dateTo);const a=`/api/executions${t.toString()?`?${t.toString()}`:""}`;return(await P.get(a)).data},getExecutionById:async s=>(await P.get(`/api/executions/${s}`)).data,getExecutionSteps:async s=>(await P.get(`/api/executions/${s}/steps`)).data,retryExecution:async s=>(await P.post(`/api/executions/${s}/retry`)).data,cancelExecution:async s=>(await P.post(`/api/executions/${s}/cancel`)).data,getRunningExecutions:async()=>(await P.get("/api/executions/running")).data,getFailedExecutions:async()=>(await P.get("/api/executions/failed")).data,getExecutionStatistics:async()=>(await P.get("/api/executions/statistics")).data,getExecutionPerformance:async()=>(await P.get("/api/executions/performance")).data,getExecutionsByFlow:async(s,t)=>{const a=new URLSearchParams;t!=null&&t.page&&a.append("page",t.page.toString()),t!=null&&t.size&&a.append("size",t.size.toString()),t!=null&&t.status&&a.append("status",t.status);const r=`/api/flows/${s}/executions${a.toString()?`?${a.toString()}`:""}`;return(await P.get(r)).data},getExecutionLogs:async(s,t)=>{const a=new URLSearchParams;t!=null&&t.filter&&a.append("filter",t.filter),t!=null&&t.level&&t.level!=="all"&&a.append("level",t.level);const r=`/api/executions/${s}/logs${a.toString()?`?${a.toString()}`:""}`;return(await P.get(r)).data}},ut={getRecentLogs:async s=>{const t=new URLSearchParams;s!=null&&s.limit&&t.append("limit",s.limit.toString()),s!=null&&s.level&&s.level!=="ALL"&&t.append("level",s.level),s!=null&&s.category&&s.category!=="ALL"&&t.append("category",s.category),s!=null&&s.search&&t.append("search",s.search);const a=`/api/transaction-logs/recent${t.toString()?`?${t.toString()}`:""}`;return(await P.get(a)).data},exportLogs:async s=>{const t=new URLSearchParams;s!=null&&s.limit&&t.append("limit",s.limit.toString()),s!=null&&s.level&&s.level!=="ALL"&&t.append("level",s.level),s!=null&&s.category&&s.category!=="ALL"&&t.append("category",s.category),s!=null&&s.format&&t.append("format",s.format);const a=`/api/transaction-logs/export${t.toString()?`?${t.toString()}`:""}`;return(await P.get(a,{responseType:"blob"})).data}},As={getCurrentEnvironment:async()=>(await P.get("/api/system/environment")).data,updateEnvironment:async s=>(await P.put("/api/system/environment",s)).data,getEnvironmentTypes:async()=>(await P.get("/api/system/environment/types")).data,checkPermission:async s=>(await P.get(`/api/system/environment/permissions/${s}`)).data},Br={getRecentLogs:async s=>{const t=new URLSearchParams;s!=null&&s.limit&&t.append("limit",s.limit.toString()),s!=null&&s.level&&s.level!=="ALL"&&t.append("level",s.level),s!=null&&s.search&&t.append("search",s.search),(s==null?void 0:s.page)!==void 0&&t.append("page",s.page.toString()),s!=null&&s.size&&t.append("size",s.size.toString());const a=`/api/logs/system${t.toString()?`?${t.toString()}`:""}`;return(await P.get(a)).data},exportLogs:async s=>{const t=new URLSearchParams;s!=null&&s.limit&&t.append("limit",s.limit.toString()),s!=null&&s.level&&s.level!=="ALL"&&t.append("level",s.level),s!=null&&s.category&&s.category!=="ALL"&&t.append("category",s.category),s!=null&&s.format&&t.append("format",s.format);const a=`/api/logs/system/export${t.toString()?`?${t.toString()}`:""}`;return(await P.get(a,{responseType:"blob"})).data}},Hr=s=>{try{const t=JSON.parse(atob(s.split(".")[1])),a=Date.now()/1e3;return t.exp>a}catch(t){return console.warn("[JWT] Failed to parse token:",t),!1}},Gr=()=>{const{setAuth:s,setInitialized:t,hasInitialized:a}=Ve();N.useEffect(()=>{if(a)return;(async()=>{var n;try{const i=de.getToken(),o=de.getUser();if(!i||!o){t(!0);return}const j=de.getUser();if(j&&i){const d=de.isPersistentLogin();s(j,i,d)}if(!Hr(i)){de.clearTokens(),t(!0),ds();return}try{const d=await Qs.verifyToken();if(!d||!d.valid){de.clearTokens(),t(!0),ds();return}}catch(d){if(((n=d==null?void 0:d.response)==null?void 0:n.status)===401){de.clearTokens(),t(!0),ds();return}console.warn("[useAuthInit] Backend verification failed (non-blocking):",d)}if(!j){const d=de.isPersistentLogin();s(o,i,d)}try{await ra()}catch(d){console.warn("[useAuthInit] WebSocket failed:",d)}t(!0)}catch(i){console.error("[useAuthInit] Initialization failed:",i),t(!0),ds()}})()},[s,t,a])};function O(...s){return Ra(Ma(s))}const Wr=Ls("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),T=N.forwardRef(({className:s,variant:t,size:a,asChild:r=!1,...n},i)=>{const o=r?cr:"button";return e.jsx(o,{className:O(Wr({variant:t,size:a,className:s})),ref:i,...n})});T.displayName="Button";const Yr=[{name:"Dashboard",href:"/dashboard",icon:Ua,section:"main"},{name:"Adapters",href:"/adapters",icon:Ct,adminOnly:!0,section:"integration"},{name:"Flow Management",href:"/flows",icon:qe,adminOnly:!0,section:"integration"},{name:"Adapter Monitoring",href:"/adapter-monitoring",icon:Ne,section:"monitoring"},{name:"Flow Monitoring",href:"/flow-monitoring",icon:Vs,section:"monitoring"},{name:"Administration",href:"/admin",icon:Re,adminOnly:!0,section:"system"},{name:"Settings",href:"/settings",icon:ae,section:"system"}],Qr=()=>{const[s,t]=N.useState(!1),{user:a}=Ve(),r=(a==null?void 0:a.role)==="ADMINISTRATOR",n=Yr.filter(i=>!i.adminOnly||r);return e.jsx("div",{className:O("h-full min-h-full bg-card/80 backdrop-blur-md border-r border-border transition-all duration-300 ease-in-out",s?"w-16":"w-64"),children:e.jsxs("div",{className:"flex flex-col h-full min-h-full",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>t(!s),className:"ml-auto flex transition-all duration-300 hover:scale-110 hover:bg-accent/50",children:s?e.jsx(js,{className:"h-4 w-4 transition-transform duration-300"}):e.jsx(Oa,{className:"h-4 w-4 transition-transform duration-300"})})}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[!s&&e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Main"}),n.filter(i=>i.section==="main").map(i=>e.jsxs(Ts,{to:i.href,className:({isActive:o})=>O("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 group","hover:bg-primary hover:text-primary-foreground hover:scale-[1.02] hover:shadow-soft",o?"bg-primary text-primary-foreground shadow-elegant":"text-muted-foreground"),children:[e.jsx(i.icon,{className:O("h-4 w-4 transition-all duration-300 group-hover:scale-110",!s&&"mr-3")}),!s&&e.jsx("span",{className:"transition-all duration-300",children:i.name})]},i.name)),!s&&n.some(i=>i.section==="integration")&&e.jsx("div",{className:"px-3 py-2 mt-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Integration"}),n.filter(i=>i.section==="integration").map(i=>e.jsxs(Ts,{to:i.href,className:({isActive:o})=>O("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 group","hover:bg-primary hover:text-primary-foreground hover:scale-[1.02] hover:shadow-soft",o?"bg-primary text-primary-foreground shadow-elegant":"text-muted-foreground"),children:[e.jsx(i.icon,{className:O("h-4 w-4 transition-all duration-300 group-hover:scale-110",!s&&"mr-3")}),!s&&e.jsx("span",{className:"transition-all duration-300",children:i.name})]},i.name)),!s&&n.some(i=>i.section==="monitoring")&&e.jsx("div",{className:"px-3 py-2 mt-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Monitoring"}),n.filter(i=>i.section==="monitoring").map(i=>e.jsxs(Ts,{to:i.href,className:({isActive:o})=>O("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 group","hover:bg-primary hover:text-primary-foreground hover:scale-[1.02] hover:shadow-soft",o?"bg-primary text-primary-foreground shadow-elegant":"text-muted-foreground"),children:[e.jsx(i.icon,{className:O("h-4 w-4 transition-all duration-300 group-hover:scale-110",!s&&"mr-3")}),!s&&e.jsx("span",{className:"transition-all duration-300",children:i.name})]},i.name)),!s&&n.some(i=>i.section==="system")&&e.jsx("div",{className:"px-3 py-2 mt-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"System"}),n.filter(i=>i.section==="system").map(i=>e.jsxs(Ts,{to:i.href,className:({isActive:o})=>O("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 group","hover:bg-primary hover:text-primary-foreground hover:scale-[1.02] hover:shadow-soft",o?"bg-primary text-primary-foreground shadow-elegant":"text-muted-foreground"),children:[e.jsx(i.icon,{className:O("h-4 w-4 transition-all duration-300 group-hover:scale-110",!s&&"mr-3")}),!s&&e.jsx("span",{className:"transition-all duration-300",children:i.name})]},i.name))]}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsx("div",{className:O("text-xs text-muted-foreground",s?"text-center":"space-y-1"),children:!s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Version 1.0.0"}),e.jsx("div",{children:"© 2024 Integrix Host 2 Host"})]})})})]})})},Jr=At((s,t)=>({sidebarOpen:!0,notifications:[],globalLoading:!1,modals:{},toggleSidebar:()=>{s(a=>({sidebarOpen:!a.sidebarOpen}))},setSidebarOpen:a=>{s({sidebarOpen:a})},addNotification:a=>{const r=Math.random().toString(36).substr(2,9),n={...a,id:r,timestamp:new Date,duration:a.duration||5e3};s(i=>({notifications:[n,...i.notifications].slice(0,10)})),(n.duration??4e3)>0&&setTimeout(()=>{t().removeNotification(r)},n.duration??4e3)},removeNotification:a=>{s(r=>({notifications:r.notifications.filter(n=>n.id!==a)}))},clearNotifications:()=>{s({notifications:[]})},setGlobalLoading:a=>{s({globalLoading:a})},openModal:a=>{s(r=>({modals:{...r.modals,[a]:!0}}))},closeModal:a=>{s(r=>({modals:{...r.modals,[a]:!1}}))},toggleModal:a=>{s(r=>({modals:{...r.modals,[a]:!r.modals[a]}}))}})),xe=()=>{const{addNotification:s,removeNotification:t,clearNotifications:a}=Jr();return{success:(r,n,i)=>s({type:"success",title:r,message:n,duration:i}),error:(r,n,i)=>s({type:"error",title:r,message:n,duration:i}),warning:(r,n,i)=>s({type:"warning",title:r,message:n,duration:i}),info:(r,n,i)=>s({type:"info",title:r,message:n,duration:i}),remove:t,clear:a}},Xr=Ls("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function We({className:s,variant:t,...a}){return e.jsx("div",{className:O(Xr({variant:t}),s),...a})}const Zr=dr,en=xr,sn=N.forwardRef(({className:s,inset:t,children:a,...r},n)=>e.jsxs(Pt,{ref:n,className:O("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...r,children:[a,e.jsx(js,{className:"ml-auto h-4 w-4"})]}));sn.displayName=Pt.displayName;const tn=N.forwardRef(({className:s,...t},a)=>e.jsx(Dt,{ref:a,className:O("z-50 min-w-[8rem] overflow-hidden rounded-md border border-border bg-card p-1 text-card-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));tn.displayName=Dt.displayName;const na=N.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(or,{children:e.jsx(It,{ref:r,sideOffset:t,className:O("z-50 min-w-[8rem] overflow-hidden rounded-md border border-border bg-card p-1 text-card-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));na.displayName=It.displayName;const ks=N.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(Lt,{ref:r,className:O("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...a}));ks.displayName=Lt.displayName;const an=N.forwardRef(({className:s,children:t,checked:a,...r},n)=>e.jsxs(Rt,{ref:n,className:O("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Mt,{children:e.jsx(Bs,{className:"h-4 w-4"})})}),t]}));an.displayName=Rt.displayName;const rn=N.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Ut,{ref:r,className:O("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Mt,{children:e.jsx($a,{className:"h-2 w-2 fill-current"})})}),t]}));rn.displayName=Ut.displayName;const nn=N.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(Ot,{ref:r,className:O("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));nn.displayName=Ot.displayName;const ia=N.forwardRef(({className:s,...t},a)=>e.jsx($t,{ref:a,className:O("-mx-1 my-1 h-px bg-muted",s),...t}));ia.displayName=$t.displayName;const Js=()=>{const{isAuthenticated:s}=Ve();return ee({queryKey:["environment"],queryFn:async()=>(await As.getCurrentEnvironment()).data,enabled:s,refetchInterval:3e4,staleTime:1e4,retry:(t,a)=>{var r,n;return((r=a==null?void 0:a.response)==null?void 0:r.status)===401||((n=a==null?void 0:a.response)==null?void 0:n.status)===403?!1:t<3}})},ln={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},cn=s=>{switch((s==null?void 0:s.toUpperCase())||"DEVELOPMENT"){case"DEVELOPMENT":return{id:"H2H-DEV",name:"Development",color:"#22c55e",className:"bg-green-100 text-green-800 border-green-200"};case"QUALITY_ASSURANCE":return{id:"H2H-QAS",name:"Quality Assurance",color:"#8b5cf6",className:"bg-purple-100 text-purple-800 border-purple-200"};case"PRODUCTION":return{id:"H2H-PRD",name:"Production",color:"#ef4444",className:"bg-red-100 text-red-800 border-red-200"};default:return{id:"H2H-UNK",name:"Unknown",color:"#6b7280",className:"bg-gray-100 text-gray-800 border-gray-200"}}},on=({size:s="md",className:t,showName:a=!1})=>{const{data:r,isLoading:n}=Js();if(n||!r)return e.jsxs("div",{className:"animate-pulse bg-gray-200 rounded-md h-6 w-16 inline-flex items-center justify-center",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full mr-1"}),e.jsx("div",{className:"w-8 h-4 bg-gray-300 rounded"})]});const i=cn(r.type);return e.jsxs(We,{className:O(i.className,ln[s],"inline-flex items-center gap-1.5 transition-all duration-200 font-mono font-bold",t),title:`Environment: ${r.displayName} (${r.type})`,children:[e.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:i.color,filter:"brightness(1.2)"}}),e.jsx("span",{className:"font-mono font-bold tracking-wide",children:i.id}),a&&e.jsx("span",{className:"font-sans font-normal ml-0.5",children:i.name})]})},dn=()=>{const s=$e(),{user:t,clearAuth:a}=Ve(),{success:r,error:n}=xe(),i=X({mutationFn:Qs.logout,onSuccess:()=>{de.clearTokens(),a(),r("Logged out","Successfully logged out"),s("/login",{replace:!0})},onError:()=>{de.clearTokens(),a(),n("Logout Error","There was an issue logging out, but you have been signed out locally"),s("/login",{replace:!0})}}),o=()=>{i.mutate()};return e.jsx("header",{className:"h-16 border-b border-border bg-card/80 backdrop-blur-md transition-all duration-300",children:e.jsxs("div",{className:"flex h-full items-center justify-between px-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(T,{variant:"ghost",size:"icon",className:"md:hidden","aria-label":"Toggle sidebar",children:e.jsx(Va,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center",children:e.jsx(Ka,{className:"h-4 w-4 text-primary-foreground"})}),e.jsx("h1",{className:"text-xl font-semibold app-name-gradient",children:"Integrixs Host 2 Host"}),e.jsx(on,{size:"sm"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(T,{variant:"ghost",size:"sm",className:"relative transition-all duration-300 hover:scale-110 hover:bg-accent/50",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx(We,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0 text-xs animate-pulse",children:"0"})]}),e.jsxs(Zr,{children:[e.jsx(en,{asChild:!0,children:e.jsxs(T,{variant:"ghost",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(fs,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]})]})}),e.jsxs(na,{align:"end",className:"w-56",children:[e.jsxs(ks,{children:[e.jsx(fs,{className:"mr-2 h-4 w-4"}),"Profile"]}),e.jsxs(ks,{children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Settings"]}),e.jsx(ia,{}),e.jsxs(ks,{onClick:o,disabled:i.isPending,className:"text-destructive",children:[e.jsx(_a,{className:"mr-2 h-4 w-4"}),i.isPending?"Logging out...":"Logout"]})]})]})]})]})})},xn=()=>e.jsxs("div",{className:"h-screen w-full bg-background flex flex-col overflow-hidden",children:[e.jsx(dn,{}),e.jsxs("div",{className:"flex flex-1 w-full overflow-hidden",children:[e.jsx(Qr,{}),e.jsx("div",{className:"flex-1 flex flex-col min-w-0 w-full max-w-none overflow-hidden",children:e.jsx("main",{className:"flex-1 overflow-auto p-6 w-full",children:e.jsx(Aa,{})})})]})]}),mn=({children:s,roles:t})=>{const{isAuthenticated:a,user:r,isLoading:n,hasInitialized:i}=Ve();return console.log("[ProtectedRoute] render",{isAuthenticated:a,isLoading:n,hasInitialized:i,userRole:r==null?void 0:r.role}),n||!i?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Verifying authentication..."})]})}):a?t&&r&&!t.includes(r.role)?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):e.jsx(e.Fragment,{children:s}):(console.log("[ProtectedRoute] Authentication verification complete - not authenticated, redirecting to login"),e.jsx(Te,{to:"/login",replace:!0}))},D=N.forwardRef(({className:s,type:t,...a},r)=>e.jsx("input",{type:t,className:O("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...a}));D.displayName="Input";const un=Ls("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=N.forwardRef(({className:s,...t},a)=>e.jsx(Vt,{ref:a,className:O(un(),s),...t}));y.displayName=Vt.displayName;const M=N.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:O("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));M.displayName="Card";const Y=N.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:O("flex flex-col space-y-1.5 p-6",s),...t}));Y.displayName="CardHeader";const Q=N.forwardRef(({className:s,...t},a)=>e.jsx("h3",{ref:a,className:O("text-2xl font-semibold leading-none tracking-tight",s),...t}));Q.displayName="CardTitle";const He=N.forwardRef(({className:s,...t},a)=>e.jsx("p",{ref:a,className:O("text-sm text-muted-foreground",s),...t}));He.displayName="CardDescription";const U=N.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:O("p-6 pt-0",s),...t}));U.displayName="CardContent";const hn=N.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:O("flex items-center p-6 pt-0",s),...t}));hn.displayName="CardFooter";const pn=()=>{var w,k,S;const s=$e(),[t,a]=Ee.useState(!1),{setAuth:r,isAuthenticated:n,hasInitialized:i}=Ve(),{error:o}=xe(),{register:j,handleSubmit:d,formState:{errors:f}}=kt({defaultValues:{username:"",password:"",rememberMe:!1}}),h=X({mutationFn:Qs.login,onSuccess:(g,p)=>{var b,v;if(g.accessToken&&g.username){const L=JSON.parse(atob(g.accessToken.split(".")[1])),u={id:L.sub,username:g.username,firstName:((b=g.fullName)==null?void 0:b.split(" ")[0])||g.username,lastName:((v=g.fullName)==null?void 0:v.split(" ").slice(1).join(" "))||"",email:L.email||`${g.username}@integrixs.com`,role:g.role,enabled:L.enabled||!0,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};r(u,g.accessToken,p.rememberMe)}else o("Login Failed","Invalid response from server")},onError:g=>{var b,v;const p=((v=(b=g.response)==null?void 0:b.data)==null?void 0:v.message)||"Login failed. Please check your credentials.";o("Login Failed",p)}}),E=g=>{h.mutate({username:g.username,password:g.password,rememberMe:g.rememberMe})};return N.useEffect(()=>{i&&n&&s("/dashboard",{replace:!0})},[i,n,s]),i?n?null:e.jsx("div",{className:"min-h-screen app-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2 app-name-gradient",children:"Integrixs Host 2 Host"}),e.jsx("p",{className:"text-muted-foreground",children:"Secure Host-to-Host File Transfer System"})]}),e.jsxs(M,{className:"app-card shadow-xl border",children:[e.jsxs(Y,{className:"space-y-1",children:[e.jsx(Q,{className:"text-2xl text-center text-foreground",children:"Welcome back"}),e.jsx(He,{className:"text-center text-muted-foreground",children:"Enter your credentials to access the system"})]}),e.jsx(U,{children:e.jsxs("form",{onSubmit:d(E),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"username",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(D,{id:"username",type:"text",placeholder:"Enter your username",className:O("pl-10 bg-input border-border text-foreground",f.username&&"border-destructive focus-visible:ring-destructive"),...j("username",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"}})}),f.username&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:f.username.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(D,{id:"password",type:t?"text":"password",placeholder:"Enter your password",className:O("pl-10 pr-10 bg-input border-border text-foreground",f.password&&"border-destructive focus-visible:ring-destructive"),...j("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",onClick:()=>a(!t),children:t?e.jsx(bs,{className:"h-4 w-4"}):e.jsx(Se,{className:"h-4 w-4"})}),f.password&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:f.password.message})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"rememberMe",className:"rounded border-border text-primary focus:ring-primary focus:ring-offset-0",...j("rememberMe")}),e.jsx(y,{htmlFor:"rememberMe",className:"text-sm text-muted-foreground cursor-pointer",children:"Keep me signed in"})]}),e.jsx(T,{type:"submit",className:"w-full btn-primary",disabled:h.isPending,children:h.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):"Sign in"}),h.isError&&e.jsx("div",{className:"text-center text-sm text-destructive bg-destructive/10 border border-destructive/20 p-3 rounded-md",children:((S=(k=(w=h.error)==null?void 0:w.response)==null?void 0:k.data)==null?void 0:S.message)||"Login failed. Please try again."})]})})]}),e.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"© 2024 Integrix Host 2 Host System"})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})},cs=hr,gn=pr,jn=mr,la=Ee.forwardRef(({className:s,...t},a)=>e.jsx(Kt,{ref:a,className:O("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));la.displayName=Kt.displayName;const Ze=Ee.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(jn,{children:[e.jsx(la,{}),e.jsxs(_t,{ref:r,className:O("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[t,e.jsxs(ur,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ze.displayName=_t.displayName;const es=({className:s,...t})=>e.jsx("div",{className:O("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});es.displayName="DialogHeader";const Ms=({className:s,...t})=>e.jsx("div",{className:O("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Ms.displayName="DialogFooter";const ss=Ee.forwardRef(({className:s,...t},a)=>e.jsx(zt,{ref:a,className:O("text-lg font-semibold leading-none tracking-tight",s),...t}));ss.displayName=zt.displayName;const vs=Ee.forwardRef(({className:s,...t},a)=>e.jsx(qt,{ref:a,className:O("text-sm text-muted-foreground",s),...t}));vs.displayName=qt.displayName;const K=Nr,_=br,$=N.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Bt,{ref:r,className:O("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[t,e.jsx(gr,{asChild:!0,children:e.jsx(Hs,{className:"h-4 w-4 opacity-50"})})]}));$.displayName=Bt.displayName;const ca=N.forwardRef(({className:s,...t},a)=>e.jsx(Ht,{ref:a,className:O("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(za,{className:"h-4 w-4"})}));ca.displayName=Ht.displayName;const oa=N.forwardRef(({className:s,...t},a)=>e.jsx(Gt,{ref:a,className:O("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Hs,{className:"h-4 w-4"})}));oa.displayName=Gt.displayName;const V=N.forwardRef(({className:s,children:t,position:a="popper",...r},n)=>e.jsx(jr,{children:e.jsxs(Wt,{ref:n,className:O("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-border bg-card text-card-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...r,children:[e.jsx(ca,{}),e.jsx(fr,{className:O("p-1 bg-card",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(oa,{})]})}));V.displayName=Wt.displayName;const fn=N.forwardRef(({className:s,...t},a)=>e.jsx(Yt,{ref:a,className:O("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));fn.displayName=Yt.displayName;const x=N.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Qt,{ref:r,className:O("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(yr,{children:e.jsx(Bs,{className:"h-4 w-4"})})}),e.jsx(vr,{children:t})]}));x.displayName=Qt.displayName;const yn=N.forwardRef(({className:s,...t},a)=>e.jsx(Jt,{ref:a,className:O("-mx-1 my-1 h-px bg-muted",s),...t}));yn.displayName=Jt.displayName;const vn=({open:s,onOpenChange:t})=>{var E,w,k;const[a,r]=N.useState(""),n=be(),{data:i,isLoading:o}=ee({queryKey:["flows"],queryFn:ue.getAllFlows,enabled:s}),j=(i==null?void 0:i.data)||[],d=X({mutationFn:S=>ue.executeFlow(S),onSuccess:()=>{n.invalidateQueries({queryKey:["dashboard"]}),t(!1),r("")},onError:S=>{console.error("Failed to execute flow:",S)}}),f=()=>{a&&d.mutate(a)},h=Array.isArray(j)?j.filter(S=>S.active===!0&&S.deployed===!0&&S.deploymentStatus==="DEPLOYED"):[];return e.jsx(cs,{open:s,onOpenChange:t,children:e.jsxs(Ze,{className:"sm:max-w-md",children:[e.jsx(es,{children:e.jsxs(ss,{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Manually Execute Flow"})]})}),e.jsx("div",{className:"space-y-4 pt-4",children:o?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(us,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading flows..."})]})}):h.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ns,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No active flows available"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Create and activate flows to enable manual execution"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Select Flow to Execute"}),e.jsxs(K,{value:a,onValueChange:r,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Choose a flow..."})}),e.jsx(V,{children:h.map(S=>e.jsx(x,{value:S.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:S.name}),S.deploymentStatus==="DEPLOYED"&&e.jsx(te,{className:"h-4 w-4 text-success ml-2"})]})},S.id))})]})]}),a&&e.jsx("div",{className:"bg-secondary rounded-lg p-3",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-muted-foreground",children:"Selected Flow:"}),e.jsx("p",{className:"font-medium text-foreground",children:(E=h.find(S=>S.id===a))==null?void 0:E.name}),((w=h.find(S=>S.id===a))==null?void 0:w.description)&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(k=h.find(S=>S.id===a))==null?void 0:k.description})]})}),d.error&&e.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ns,{className:"h-4 w-4 text-destructive"}),e.jsxs("span",{className:"text-sm text-destructive",children:["Failed to execute flow: ",d.error.message||"Unknown error"]})]})}),d.isSuccess&&e.jsx("div",{className:"bg-success/10 border border-success/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"h-4 w-4 text-success"}),e.jsx("span",{className:"text-sm text-success",children:"Flow executed successfully!"})]})})]})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(T,{variant:"outline",onClick:()=>{t(!1),r(""),d.reset()},children:"Cancel"}),e.jsxs(T,{onClick:f,disabled:!a||d.isPending||o,className:"flex items-center space-x-2",children:[d.isPending?e.jsx(us,{className:"h-4 w-4 animate-spin"}):e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:d.isPending?"Executing...":"Execute"})]})]})]})})},Nn=()=>{var E;const[s,t]=N.useState(!1),{data:a}=ee({queryKey:["configuration","dashboard-intervals"],queryFn:Ds.getDashboardIntervals,staleTime:5*60*1e3}),r=(a==null?void 0:a.intervals)||{"dashboard.refresh.health_interval":3e4,"dashboard.refresh.adapter_stats_interval":6e4,"dashboard.refresh.recent_executions_interval":6e4},{data:n,isLoading:i}=ee({queryKey:["dashboard","health"],queryFn:$s.getSystemHealth,refetchInterval:r["dashboard.refresh.health_interval"]}),{data:o,isLoading:j}=ee({queryKey:["dashboard","adapter-stats"],queryFn:$s.getAdapterStatistics,refetchInterval:r["dashboard.refresh.adapter_stats_interval"]}),{data:d,isLoading:f}=ee({queryKey:["dashboard","recent-executions"],queryFn:()=>$s.getRecentExecutions(10),refetchInterval:r["dashboard.refresh.recent_executions_interval"]});return i||j||f?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading dashboard..."})]})})}):e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Integrixs Host 2 Host Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor your bank file transfer operations and system health"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${(n==null?void 0:n.status)==="UP"?"bg-green-500 animate-glow":"bg-red-500"}`}),e.jsx("span",{className:`text-sm font-medium ${(n==null?void 0:n.status)==="UP"?"text-green-500":"text-red-500"}`,children:(n==null?void 0:n.status)==="UP"?"Up":"Down"})]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"flex items-center space-x-2",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"app-card rounded-lg p-6 border hover-scale animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"System Status"}),e.jsx("p",{className:`text-2xl font-bold ${(n==null?void 0:n.status)==="UP"?"text-green-500":"text-red-500"}`,children:(n==null?void 0:n.status)==="UP"?"Up":"Down"})]}),e.jsx(Ne,{className:`h-8 w-8 ${(n==null?void 0:n.status)==="UP"?"text-green-500":"text-red-500"}`})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Uptime: ",(n==null?void 0:n.uptime)||"0%"]})})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border hover-scale animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Operations Today"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:(o==null?void 0:o.operationsToday)||0})]}),e.jsx(qa,{className:"h-8 w-8 text-primary"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:(o==null?void 0:o.operationsTrend)||"No trend data"})})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border hover-scale animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Files Processed"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:(o==null?void 0:o.filesProcessed)||0})]}),e.jsx(pe,{className:"h-8 w-8 text-info"})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Last hour: ",(o==null?void 0:o.filesLastHour)||0," files"]})})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border hover-scale animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsx("p",{className:`text-2xl font-bold ${((o==null?void 0:o.successRate)||0)>=95?"text-success":((o==null?void 0:o.successRate)||0)>=85?"text-warning":"text-destructive"}`,children:o!=null&&o.successRate?`${o.successRate}%`:"0%"})]}),e.jsx(te,{className:`h-8 w-8 ${((o==null?void 0:o.successRate)||0)>=95?"text-success":((o==null?void 0:o.successRate)||0)>=85?"text-warning":"text-destructive"}`})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:[(o==null?void 0:o.errorsToday)||0," errors today"]})})]})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Recent Operations"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(d==null?void 0:d.length)||0," operations"]})]}),d&&d.length>0?e.jsx("div",{className:"space-y-3",children:d.map((w,k)=>{const S=p=>{switch(p.toUpperCase()){case"SUCCESS":return e.jsx(te,{className:"h-5 w-5 text-success"});case"FAILED":return e.jsx(oe,{className:"h-5 w-5 text-destructive"});case"IN_PROGRESS":case"RUNNING":return e.jsx(re,{className:"h-5 w-5 text-warning animate-pulse"});default:return e.jsx(re,{className:"h-5 w-5 text-muted-foreground"})}},g=p=>{const b=new Date,v=new Date(p),L=b.getTime()-v.getTime(),u=Math.floor(L/6e4);if(u<1)return"Just now";if(u<60)return`${u} min ago`;const I=Math.floor(u/60);return I<24?`${I}h ago`:`${Math.floor(I/24)}d ago`};return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md bg-secondary",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[S(w.status),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground",children:[w.adapterName||"Unknown"," - ",w.operation||"Operation"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w.message||`${w.filesProcessed||0} files processed`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-foreground",children:w.startTime?new Date(w.startTime).toLocaleTimeString():"--:--"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:w.startTime?g(w.startTime):"Unknown"})]})]},w.id||k)})}):e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ne,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No recent operations"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 app-card rounded-lg p-6 border animate-fade-in",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Active Adapters"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:((E=o==null?void 0:o.adapters)==null?void 0:E.map((w,k)=>e.jsxs("div",{className:"bg-secondary rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${w.status==="ACTIVE"?"bg-success animate-glow":w.status==="ERROR"?"bg-destructive":"bg-warning"}`}),e.jsx("h3",{className:"font-medium text-foreground",children:w.name})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${w.status==="ACTIVE"?"bg-success/20 text-success":w.status==="ERROR"?"bg-destructive/20 text-destructive":"bg-warning/20 text-warning"}`,children:w.status})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"text-foreground",children:w.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Run:"}),e.jsx("span",{className:"text-foreground",children:w.lastRun?new Date(w.lastRun).toLocaleString():"Never"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Files Today:"}),e.jsx("span",{className:"text-foreground",children:w.filesToday||0})]})]})]},w.id||k)))||e.jsx("div",{className:"md:col-span-2 flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ct,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No adapters configured"}),e.jsx(T,{variant:"outline",size:"sm",className:"mt-2",children:"Configure Adapters"})]})})})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border animate-fade-in",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(T,{className:"w-full btn-primary justify-start",size:"lg",onClick:()=>t(!0),children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Manually Execute Flow"]}),e.jsx(T,{variant:"outline",className:"w-full justify-start",size:"lg",asChild:!0,children:e.jsxs(Ae,{to:"/admin?tab=logs",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"View System Logs"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-border",children:[e.jsx("h3",{className:"font-medium text-foreground mb-3",children:"System Info"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Version:"}),e.jsx("span",{className:"text-foreground",children:"v1.0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Java:"}),e.jsx("span",{className:"text-foreground",children:(n==null?void 0:n.javaVersion)||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Memory:"}),e.jsx("span",{className:"text-foreground",children:(n==null?void 0:n.memoryUsage)||"0%"})]})]})]})]})]}),e.jsx(vn,{open:s,onOpenChange:t})]})},Ce=N.forwardRef(({className:s,...t},a)=>e.jsx(Xt,{className:O("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:a,children:e.jsx(wr,{className:O("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ce.displayName=Xt.displayName;function da(){const[s,t]=N.useState({isConnected:!1,status:"disconnected",error:null});return N.useEffect(()=>{const a=ws(),r=()=>{t({isConnected:a.isConnectionActive(),status:a.getConnectionStatus(),error:null})};r();const n=setInterval(r,1e3);return a.isConnectionActive()||a.connect().catch(i=>{t(o=>({...o,error:i.message,status:"disconnected"}))}),()=>{clearInterval(n)}},[]),s}function bn(s){const{success:t,error:a}=xe(),r=N.useRef(s==null?void 0:s.onUpdate);r.current=s==null?void 0:s.onUpdate,N.useEffect(()=>{const n=ws(),i=[],o=j=>{switch(r.current&&r.current(j),j.status){case"COMPLETED":t("Flow Completed",`Flow "${j.flowName}" executed successfully`);break;case"FAILED":a("Flow Failed",j.errorMessage||`Flow "${j.flowName}" execution failed`);break;case"CANCELLED":a("Flow Cancelled",`Flow "${j.flowName}" was cancelled`);break}};return s!=null&&s.executionId?i.push(n.subscribeToSpecificExecution(s.executionId,j=>{j.type==="FLOW_EXECUTION_UPDATE"&&o(j)})):s!=null&&s.flowId?i.push(n.subscribeToSpecificFlowExecutions(s.flowId,o)):i.push(n.subscribeToFlowExecutions(o)),()=>{i.forEach(j=>j())}},[s==null?void 0:s.flowId,s==null?void 0:s.executionId,t,a])}function wn(s){const t=N.useRef(s);t.current=s,N.useEffect(()=>ws().subscribe("/topic/flow-validations",n=>{t.current&&n.type==="FLOW_VALIDATION_RESULT"&&t.current(n)}),[])}function Sn(s){const{success:t,error:a}=xe(),r=N.useRef(s);r.current=s,N.useEffect(()=>ws().subscribeToFlowDefinitionUpdates(o=>{switch(r.current&&r.current(o),o.updateType){case"CREATED":t("Flow Created",`New flow "${o.flowName}" has been created`);break;case"UPDATED":t("Flow Updated",`Flow "${o.flowName}" has been updated`);break;case"DELETED":a("Flow Deleted",`Flow "${o.flowName}" has been deleted`);break;case"ENABLED":t("Flow Enabled",`Flow "${o.flowName}" has been enabled`);break;case"DISABLED":a("Flow Disabled",`Flow "${o.flowName}" has been disabled`);break}}),[t,a])}const Us=({className:s="",showLabel:t=!0,size:a="md"})=>{const{status:r}=da(),n=()=>{const d=a==="sm"?"h-3 w-3":a==="lg"?"h-5 w-5":"h-4 w-4";switch(r){case"connected":return e.jsx(Ha,{className:`${d} text-success`});case"connecting":return e.jsx(rt,{className:`${d} text-warning animate-spin`});case"reconnecting":return e.jsx(rt,{className:`${d} text-warning animate-spin`});case"disconnected":default:return e.jsx(Ba,{className:`${d} text-destructive`})}},i=()=>{switch(r){case"connected":return"Live Updates";case"connecting":return"Connecting...";case"reconnecting":return"Reconnecting...";case"disconnected":default:return"Offline"}},o=()=>{switch(r){case"connected":return"text-success";case"connecting":case"reconnecting":return"text-warning";case"disconnected":default:return"text-destructive"}},j=a==="sm"?"text-xs":a==="lg"?"text-sm":"text-xs";return e.jsxs("div",{className:`flex items-center space-x-2 ${s}`,children:[n(),t&&e.jsx("span",{className:`${j} ${o()}`,children:i()})]})},ht=s=>{const a=Number(s.smtpPort)===465,r=!!s.sslEnabled,n=!!s.startTlsEnabled;return r===n?{...s,sslEnabled:a,startTlsEnabled:!a}:s},pt=()=>{var A,Z,fe,ye,Ke;const{id:s}=qs(),t=$e(),{success:a,error:r}=xe(),n=be(),{data:i}=ee({queryKey:["system-config","FILE_PROCESSING"],queryFn:()=>Ds.getConfigurationsByCategory("FILE_PROCESSING"),staleTime:5*60*1e3}),o=(i==null?void 0:i.configurations)||[],j=!!s,[d,f]=N.useState("FILE"),[h,E]=N.useState(null),{data:w,isLoading:k}=ee({queryKey:["adapter",s],queryFn:()=>me.getAdapter(s),enabled:j}),{data:S=[]}=ee({queryKey:["ssh-keys"],queryFn:()=>Be.getAllKeys(),staleTime:5*60*1e3}),{register:g,handleSubmit:p,control:b,watch:v,setValue:L,formState:{errors:u}}=kt({defaultValues:{name:"",bank:"",description:"",adapterType:"FILE",direction:"SENDER",active:!0,configuration:{}}}),I=v("adapterType"),c=v("direction");N.useEffect(()=>{if(w!=null&&w.data){const B=w.data;L("name",B.name),L("bank",B.bank),L("description",B.description),L("adapterType",B.adapterType),L("direction",B.direction),L("active",B.active);const J=B.configuration||{},ne=B.adapterType==="EMAIL"?ht(J):J;L("configuration",ne),f(B.adapterType)}},[w,L]),N.useEffect(()=>{var B,J,ne;if(o.length>0&&!j){const Ss=(B=o.find(De=>De.configKey==="file.processing.retry_interval_seconds"))==null?void 0:B.configValue,Cs=(J=o.find(De=>De.configKey==="file.processing.modification_check_delay_ms"))==null?void 0:J.configValue,Es=(ne=o.find(De=>De.configKey==="file.processing.max_file_size_mb"))==null?void 0:ne.configValue;if(Ss&&L("configuration.retryInterval",Ss),Cs&&L("configuration.msecsToWaitBeforeModificationCheck",Cs),Es){const De=String(parseInt(Es)*1024*1024);L("configuration.maximumFileSize",De)}}},[o,j,L]);const l=X({mutationFn:me.createAdapter,onSuccess:()=>{a("Adapter Created","Adapter interface created successfully"),setTimeout(()=>{n.invalidateQueries({queryKey:["adapters"]}),t("/adapters")},100)},onError:B=>{var J,ne;r("Creation Failed",((ne=(J=B.response)==null?void 0:J.data)==null?void 0:ne.message)||"Failed to create adapter")}}),m=X({mutationFn:B=>me.updateAdapter(s,B),onSuccess:()=>{a("Adapter Updated","Adapter interface updated successfully"),setTimeout(()=>{n.invalidateQueries({queryKey:["adapters"]}),n.invalidateQueries({queryKey:["adapter",s]}),t("/adapters")},100)},onError:B=>{var J,ne;r("Update Failed",((ne=(J=B.response)==null?void 0:J.data)==null?void 0:ne.message)||"Failed to update adapter")}}),C=X({mutationFn:B=>s?me.testAdapter(s):me.createAdapter(B).then(J=>me.testAdapter(J.data.id).finally(()=>me.deleteAdapter(J.data.id))),onSuccess:B=>{var J,ne;E(B),(J=B.data)!=null&&J.success?a("Test Successful","Adapter configuration test passed"):r("Test Failed",((ne=B.data)==null?void 0:ne.message)||"Adapter test failed")},onError:B=>{var J,ne;r("Test Error",((ne=(J=B.response)==null?void 0:J.data)==null?void 0:ne.message)||"Failed to test adapter configuration")}}),F=B=>{const J=B.adapterType==="EMAIL"?{...B,configuration:ht(B.configuration||{})}:B;j?m.mutate(J):l.mutate(J)},R=()=>{const B=v();C.mutate(B)},z=B=>{switch(B){case"FILE":return e.jsx(pe,{className:"h-5 w-5"});case"SFTP":return e.jsx(Ps,{className:"h-5 w-5"});case"EMAIL":return e.jsx(is,{className:"h-5 w-5"});default:return e.jsx(pe,{className:"h-5 w-5"})}};return k?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading adapter configuration..."})]})}):e.jsxs("div",{className:"content-spacing",style:{contain:"layout style paint"},children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>t("/adapters"),children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Back to Adapters"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:j?"Edit Adapter":"Create New Adapter"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("p",{className:"text-muted-foreground",children:j?"Modify your adapter configuration":"Configure a new file transfer adapter"}),e.jsx(Us,{size:"sm"})]})]})]}),e.jsxs("form",{onSubmit:p(F),className:"space-y-6",style:{contain:"layout"},children:[e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-foreground",children:"Basic Information"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"name",children:"Adapter Name"}),e.jsx(D,{id:"name",placeholder:"Enter adapter name",className:"bg-input border-border text-foreground",...g("name",{required:"Adapter name is required",minLength:{value:3,message:"Name must be at least 3 characters"}})}),u.name&&e.jsx("p",{className:"text-sm text-destructive",children:u.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"bank",children:"Bank"}),e.jsx(D,{id:"bank",placeholder:"Enter bank name (e.g., FNB, ABSA)",className:"bg-input border-border text-foreground",...g("bank",{required:"Bank name is required",minLength:{value:2,message:"Bank name must be at least 2 characters"}})}),u.bank&&e.jsx("p",{className:"text-sm text-destructive",children:u.bank.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"description",children:"Description"}),e.jsx(D,{id:"description",placeholder:"Enter adapter description",className:"bg-input border-border text-foreground",...g("description",{required:"Description is required"})}),u.description&&e.jsx("p",{className:"text-sm text-destructive",children:u.description.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"type",children:"Adapter Type"}),e.jsx(G,{name:"adapterType",control:b,rules:{required:"Adapter type is required"},render:({field:B})=>e.jsxs(K,{value:B.value,onValueChange:J=>{B.onChange(J),f(J)},children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select adapter type"})}),e.jsxs(V,{children:[e.jsx(x,{value:"FILE",children:"File Adapter"}),e.jsx(x,{value:"SFTP",children:"SFTP Adapter"}),e.jsx(x,{value:"EMAIL",children:"Email Adapter"})]})]})}),u.adapterType&&e.jsx("p",{className:"text-sm text-destructive",children:u.adapterType.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"direction",children:"Direction"}),e.jsx(G,{name:"direction",control:b,render:({field:B})=>e.jsxs(K,{value:B.value,onValueChange:B.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select direction"})}),e.jsxs(V,{children:[e.jsx(x,{value:"SENDER",children:"Sender"}),e.jsx(x,{value:"RECEIVER",children:"Receiver"})]})]})})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(G,{name:"active",control:b,render:({field:B})=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ce,{id:"active",checked:!!B.value,onCheckedChange:B.onChange}),e.jsx(y,{htmlFor:"active",className:"text-sm font-medium",children:B.value?"Active":"Inactive"})]})})})]})]}),e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center space-x-2 text-foreground",children:[z(I),e.jsxs("span",{children:[I," Configuration"]})]})}),e.jsx(U,{children:e.jsx(Cn,{type:I,direction:c,control:b,register:g,errors:u,systemConfig:o,setValue:L,sshKeysData:S},`${I}-${c}-${j?s:"new"}`)})]}),h&&e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center space-x-2 text-foreground",children:[e.jsx(nt,{className:"h-5 w-5"}),e.jsx("span",{children:"Test Results"})]})}),e.jsx(U,{children:e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-md ${(A=h.data)!=null&&A.success?"bg-success/10 border border-success/20":"bg-destructive/10 border border-destructive/20"}`,children:[(Z=h.data)!=null&&Z.success?e.jsx(te,{className:"h-5 w-5 text-success mt-0.5"}):e.jsx(oe,{className:"h-5 w-5 text-destructive mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${(fe=h.data)!=null&&fe.success?"text-success":"text-destructive"}`,children:(ye=h.data)!=null&&ye.success?"Configuration Test Passed":"Configuration Test Failed"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:((Ke=h.data)==null?void 0:Ke.message)||"No additional details available"})]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(T,{type:"submit",className:"btn-primary",disabled:l.isPending||m.isPending,children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),l.isPending||m.isPending?j?"Updating...":"Creating...":j?"Update Adapter":"Create Adapter"]}),I==="SFTP"&&e.jsxs(T,{type:"button",variant:"outline",onClick:R,disabled:C.isPending,children:[e.jsx(nt,{className:"h-4 w-4 mr-2"}),C.isPending?"Testing...":"Test Configuration"]}),e.jsx(T,{type:"button",variant:"outline",onClick:()=>t("/adapters"),children:"Cancel"})]})]})]})},Cn=({type:s,direction:t,control:a,register:r,errors:n,systemConfig:i,setValue:o,sshKeysData:j=[]})=>{switch(s){case"FILE":return e.jsx(En,{direction:t,control:a,register:r,errors:n,systemConfig:i});case"SFTP":return e.jsx(Tn,{direction:t,control:a,register:r,errors:n,systemConfig:i,sshKeysData:j});case"EMAIL":return e.jsx(kn,{direction:t,control:a,register:r,errors:n,systemConfig:i,setValue:o});default:return null}},En=({direction:s,control:t,register:a,errors:r,systemConfig:n})=>{var h,E,w,k,S,g;const i=Fe({control:t,name:"configuration.archiveFaultySourceFiles",defaultValue:!1}),o=Fe({control:t,name:"configuration.processingMode",defaultValue:"Test"}),j=Fe({control:t,name:"configuration.outputFilenameMode",defaultValue:"UseOriginal"}),d=Fe({control:t,name:"configuration.scheduleMode",defaultValue:"OnTime"}),f=Fe({control:t,name:"configuration.scheduleType",defaultValue:"Daily"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4",children:[s==="SENDER"?"Source":"Target"," Configuration"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s==="SENDER"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"sourceDirectory",children:"Source Directory *"}),e.jsx(D,{id:"sourceDirectory",...a("configuration.sourceDirectory",{required:!0}),placeholder:"/data/input",className:(h=r==null?void 0:r.configuration)!=null&&h.sourceDirectory?"border-destructive":""}),((E=r==null?void 0:r.configuration)==null?void 0:E.sourceDirectory)&&e.jsx("span",{className:"text-sm text-destructive",children:"Source directory is required"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"filePattern",children:"File Name Mask"}),e.jsx(D,{id:"filePattern",...a("configuration.filePattern"),placeholder:"*.xml",defaultValue:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"exclusionMask",children:"Exclusion Mask"}),e.jsx(D,{id:"exclusionMask",...a("configuration.exclusionMask"),placeholder:"*.tmp"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"targetDirectory",children:"Target Directory *"}),e.jsx(D,{id:"targetDirectory",...a("configuration.targetDirectory",{required:!0}),placeholder:"/data/output",className:(w=r==null?void 0:r.configuration)!=null&&w.targetDirectory?"border-destructive":""}),((k=r==null?void 0:r.configuration)==null?void 0:k.targetDirectory)&&e.jsx("span",{className:"text-sm text-destructive",children:"Target directory is required"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.createTargetDirectory",control:t,render:({field:p})=>e.jsx("input",{type:"checkbox",id:"createTargetDirectory",checked:!!p.value,onChange:p.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:"createTargetDirectory",children:"Create Target Directory"})]})]})})]}),s==="SENDER"?e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Processing Parameters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"retryInterval",children:"Retry Interval (secs)"}),e.jsx(D,{id:"retryInterval",type:"number",...a("configuration.retryInterval"),placeholder:"60",defaultValue:((S=n==null?void 0:n.find(p=>p.configKey==="file.processing.retry_interval_seconds"))==null?void 0:S.configValue)||"60",min:"1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"emptyFileHandling",children:"Empty File Handling"}),e.jsx(G,{name:"configuration.emptyFileHandling",control:t,defaultValue:"Do Not Create Message",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select handling"})}),e.jsxs(V,{children:[e.jsx(x,{value:"Do Not Create Message",children:"Do Not Create Message"}),e.jsx(x,{value:"Process Empty Files",children:"Process Empty Files"}),e.jsx(x,{value:"Skip Empty Files",children:"Skip Empty Files"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"processingMode",children:"Processing Mode"}),e.jsx(G,{name:"configuration.processingMode",control:t,defaultValue:"Test",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select mode"})}),e.jsxs(V,{children:[e.jsx(x,{value:"Test",children:"Test"}),e.jsx(x,{value:"Archive",children:"Archive"}),e.jsx(x,{value:"Delete",children:"Delete"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"fileType",children:"File Type"}),e.jsx(G,{name:"configuration.fileType",control:t,defaultValue:"Binary",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select file type"})}),e.jsxs(V,{children:[e.jsx(x,{value:"Binary",children:"Binary"}),e.jsx(x,{value:"Text",children:"Text"})]})]})})]})]})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"File Output Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"outputFilenameMode",children:"Output Filename Mode"}),e.jsx(G,{name:"configuration.outputFilenameMode",control:t,defaultValue:"UseOriginal",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select filename mode"})}),e.jsxs(V,{children:[e.jsx(x,{value:"UseOriginal",children:"Use Original Filename"}),e.jsx(x,{value:"AddTimestamp",children:"Add Timestamp to Filename"}),e.jsx(x,{value:"Custom",children:"Custom Filename Pattern"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"fileType",children:"File Type"}),e.jsx(G,{name:"configuration.fileType",control:t,defaultValue:"Binary",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select file type"})}),e.jsxs(V,{children:[e.jsx(x,{value:"Binary",children:"Binary"}),e.jsx(x,{value:"Text",children:"Text"})]})]})})]})]}),j==="Custom"&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"customFilenamePattern",children:"Custom Filename Pattern"}),e.jsx(D,{id:"customFilenamePattern",...a("configuration.customFilenamePattern"),placeholder:"{original_name}_{timestamp}.{extension}",className:"bg-input border-border text-foreground"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Available variables: ","{original_name}",", ","{timestamp}",", ","{date}",", ","{extension}"]})]})})]}),s==="SENDER"&&o==="Archive"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Archive Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"archiveDirectory",children:"Archive Directory"}),e.jsx(D,{id:"archiveDirectory",...a("configuration.archiveDirectory"),placeholder:"/data/archive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"archiveFileNaming",children:"Archive File Naming"}),e.jsx(G,{name:"configuration.archiveFileNaming",control:t,defaultValue:"Original",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select naming"})}),e.jsxs(V,{children:[e.jsx(x,{value:"Original",children:"Keep Original Name"}),e.jsx(x,{value:"Timestamp",children:"Add Timestamp"}),e.jsx(x,{value:"Counter",children:"Add Counter"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.createArchiveDirectory",control:t,render:({field:p})=>e.jsx("input",{type:"checkbox",id:"createArchiveDirectory",checked:!!p.value,onChange:p.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:"createArchiveDirectory",children:"Create Archive Directory if it doesn't exist"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.compressArchive",control:t,render:({field:p})=>e.jsx("input",{type:"checkbox",id:"compressArchive",checked:!!p.value,onChange:p.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:"compressArchive",children:"Compress archived files"})]})]})]}),s==="SENDER"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Error Handling"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.archiveFaultySourceFiles",control:t,render:({field:p})=>e.jsx("input",{type:"checkbox",id:"archiveFaultySourceFiles",checked:!!p.value,onChange:p.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:"archiveFaultySourceFiles",children:"Archive Faulty Source Files"})]}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"archiveErrorDirectory",children:"Directory for Archiving Files with Errors"}),e.jsx(D,{id:"archiveErrorDirectory",...a("configuration.archiveErrorDirectory"),placeholder:"/data/error"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.processReadOnlyFiles",control:t,render:({field:p})=>e.jsx("input",{type:"checkbox",id:"processReadOnlyFiles",checked:!!p.value,onChange:p.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:"processReadOnlyFiles",children:"Process Read-Only Files"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"processingSequence",children:"Processing Sequence"}),e.jsx(G,{name:"configuration.processingSequence",control:t,defaultValue:"By Name",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select sequence"})}),e.jsxs(V,{children:[e.jsx(x,{value:"By Name",children:"By Name"}),e.jsx(x,{value:"By Date",children:"By Date"})]})]})})]})]})]}),s==="RECEIVER"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"File Construction"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"fileConstructionMode",children:"File Construction Mode"}),e.jsx(G,{name:"configuration.fileConstructionMode",control:t,defaultValue:"Create",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select mode"})}),e.jsxs(V,{children:[e.jsx(x,{value:"Add Time Stamp",children:"Add Time Stamp"}),e.jsx(x,{value:"Create",children:"Create"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"writeMode",children:"Write Mode"}),e.jsx(G,{name:"configuration.writeMode",control:t,defaultValue:"Directly",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select write mode"})}),e.jsxs(V,{children:[e.jsx(x,{value:"Directly",children:"Directly"}),e.jsx(x,{value:"Create Temp File",children:"Create Temp File"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"emptyMessageHandling",children:"Empty Message Handling"}),e.jsx(G,{name:"configuration.emptyMessageHandling",control:t,defaultValue:"Write Empty File",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select handling"})}),e.jsxs(V,{children:[e.jsx(x,{value:"Write Empty File",children:"Write Empty File"}),e.jsx(x,{value:"Skip Empty Messages",children:"Skip Empty Messages"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"maximumConcurrency",children:"Maximum Concurrency"}),e.jsx(D,{id:"maximumConcurrency",type:"number",...a("configuration.maximumConcurrency"),placeholder:"1",defaultValue:"1",min:"1",max:"10"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Advanced Parameters"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"msecsToWaitBeforeModificationCheck",children:"Msecs to Wait Before Modification Check"}),e.jsx(D,{id:"msecsToWaitBeforeModificationCheck",type:"number",...a("configuration.msecsToWaitBeforeModificationCheck"),placeholder:"0",defaultValue:((g=n==null?void 0:n.find(p=>p.configKey==="file.processing.modification_check_delay_ms"))==null?void 0:g.configValue)||"0",min:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"maximumFileSize",children:"Maximum File Size (Bytes)"}),e.jsx(D,{id:"maximumFileSize",type:"number",...a("configuration.maximumFileSize"),placeholder:"0",defaultValue:(()=>{var b;const p=(b=n==null?void 0:n.find(v=>v.configKey==="file.processing.max_file_size_mb"))==null?void 0:b.configValue;return p?String(parseInt(p)*1024*1024):"0"})(),min:"0"})]})]})})]}),s==="SENDER"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Scheduler Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"scheduleType",children:"Schedule Type"}),e.jsx(G,{name:"configuration.scheduleType",control:t,defaultValue:"Daily",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"Daily",children:"Daily"}),e.jsx(x,{value:"Weekly",children:"Weekly"}),e.jsx(x,{value:"Monthly",children:"Monthly"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"scheduleMode",children:"Schedule Mode"}),e.jsx(G,{name:"configuration.scheduleMode",control:t,defaultValue:"OnTime",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"OnTime",children:"On Time"}),e.jsx(x,{value:"Every",children:"Every Interval"})]})]})})]})]}),d==="OnTime"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"onTimeValue",children:"Execution Time"}),e.jsx(D,{id:"onTimeValue",type:"time",defaultValue:"20:27",className:"bg-input border-border text-foreground",...a("configuration.onTimeValue")})]}),d==="Every"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"everyInterval",children:"Every Interval"}),e.jsx(G,{name:"configuration.everyInterval",control:t,defaultValue:"1 min",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"1 min",children:"1 minute"}),e.jsx(x,{value:"5 min",children:"5 minutes"}),e.jsx(x,{value:"15 min",children:"15 minutes"}),e.jsx(x,{value:"30 min",children:"30 minutes"}),e.jsx(x,{value:"1 hour",children:"1 hour"}),e.jsx(x,{value:"2 hours",children:"2 hours"}),e.jsx(x,{value:"4 hours",children:"4 hours"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"everyStartTime",children:"Start Time"}),e.jsx(D,{id:"everyStartTime",type:"time",defaultValue:"00:00",className:"bg-input border-border text-foreground",...a("configuration.everyStartTime")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"everyEndTime",children:"End Time"}),e.jsx(D,{id:"everyEndTime",type:"time",defaultValue:"24:00",className:"bg-input border-border text-foreground",...a("configuration.everyEndTime")})]})]}),f==="Weekly"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Days of Week"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}].map(p=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:`configuration.weeklyDays.${p.key}`,control:t,defaultValue:!1,render:({field:b})=>e.jsx("input",{type:"checkbox",id:`weekly_${p.key}`,checked:!!b.value,onChange:b.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:`weekly_${p.key}`,className:"text-sm",children:p.label})]},p.key))})]}),f==="Monthly"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"monthlyDay",children:"Day of Month"}),e.jsx(G,{name:"configuration.monthlyDay",control:t,defaultValue:"1",render:({field:p})=>e.jsxs(K,{value:p.value,onValueChange:p.onChange,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[Array.from({length:31},(b,v)=>v+1).map(b=>e.jsx(x,{value:b.toString(),children:b},b)),e.jsx(x,{value:"last",children:"Last Day of Month"})]})]})})]})]})]})]})},Tn=({direction:s,control:t,register:a,errors:r,systemConfig:n,sshKeysData:i=[]})=>{var d,f,h,E,w,k,S,g,p,b,v,L,u,I;const o=Fe({control:t,name:"configuration.scheduleMode",defaultValue:"OnTime"}),j=Fe({control:t,name:"configuration.scheduleType",defaultValue:"Daily"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Connection Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"host",children:"Host"}),e.jsx(D,{id:"host",placeholder:"sftp.bank.com",className:"bg-input border-border text-foreground",...a("configuration.host",{required:"SFTP host is required"})}),((d=r.configuration)==null?void 0:d.host)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.host.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"port",children:"Port"}),e.jsx(D,{id:"port",type:"number",placeholder:"22",defaultValue:"22",className:"bg-input border-border text-foreground",...a("configuration.port",{valueAsNumber:!0,required:"Port is required"})}),((f=r.configuration)==null?void 0:f.port)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.port.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"authenticationType",children:"Authentication Type"}),e.jsx(G,{name:"configuration.authenticationType",control:t,defaultValue:"USERNAME_PASSWORD",render:({field:c})=>e.jsxs(K,{value:c.value,onValueChange:c.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select authentication type"})}),e.jsxs(V,{children:[e.jsx(x,{value:"USERNAME_PASSWORD",children:"Username/Password"}),e.jsx(x,{value:"PUBLIC_KEY",children:"Public Key"}),e.jsx(x,{value:"DUAL",children:"Dual Authentication"})]})]})})]})]}),e.jsx(Pn,{control:t,register:a,errors:r,sshKeysData:i})]}),s==="RECEIVER"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Remote Destination Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"remoteDirectory",children:"Remote Directory"}),e.jsx(D,{id:"remoteDirectory",placeholder:"/incoming/payments",className:"bg-input border-border text-foreground",...a("configuration.remoteDirectory",{required:"Remote directory is required for receiver adapters"})}),((h=r.configuration)==null?void 0:h.remoteDirectory)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.remoteDirectory.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"remoteFilePermissions",children:"Remote File Permissions"}),e.jsx(D,{id:"remoteFilePermissions",placeholder:"644",defaultValue:"644",className:"bg-input border-border text-foreground",...a("configuration.remoteFilePermissions")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.createRemoteDirectory",control:t,render:({field:c})=>e.jsx("input",{type:"checkbox",id:"createRemoteDirectory",checked:!!c.value,onChange:c.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:"createRemoteDirectory",children:"Create Remote Directory"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.useTemporaryFileName",control:t,render:({field:c})=>e.jsx("input",{type:"checkbox",id:"useTemporaryFileName",checked:!!c.value,onChange:c.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:"useTemporaryFileName",children:"Use Temporary File Name"})]})]}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx(y,{htmlFor:"temporaryFileSuffix",children:"Temporary File Suffix"}),e.jsx(D,{id:"temporaryFileSuffix",placeholder:".uploading",defaultValue:".uploading",className:"bg-input border-border text-foreground",...a("configuration.temporaryFileSuffix")})]})]}),e.jsx(Fn,{control:t,register:a})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Connection Properties"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"connectionTimeout",children:"Connection Timeout (ms)"}),e.jsx(D,{id:"connectionTimeout",type:"number",placeholder:"30000",defaultValue:"30000",className:"bg-input border-border text-foreground",...a("configuration.connectionTimeout",{valueAsNumber:!0,min:{value:1e3,message:"Connection timeout must be at least 1000ms"},max:{value:3e5,message:"Connection timeout cannot exceed 300000ms"}})}),((E=r.configuration)==null?void 0:E.connectionTimeout)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.connectionTimeout.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"socketTimeout",children:"Socket Timeout (ms)"}),e.jsx(D,{id:"socketTimeout",type:"number",placeholder:"60000",defaultValue:"60000",className:"bg-input border-border text-foreground",...a("configuration.socketTimeout",{valueAsNumber:!0,min:{value:1e3,message:"Socket timeout must be at least 1000ms"},max:{value:3e5,message:"Socket timeout cannot exceed 300000ms"}})}),((w=r.configuration)==null?void 0:w.socketTimeout)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.socketTimeout.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"keepAlive",children:"Keep Alive"}),e.jsx(G,{name:"configuration.keepAlive",control:t,render:({field:c})=>e.jsxs(K,{value:c.value?"true":"false",onValueChange:l=>c.onChange(l==="true"),children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select keep alive"})}),e.jsxs(V,{children:[e.jsx(x,{value:"true",children:"Enabled"}),e.jsx(x,{value:"false",children:"Disabled"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"sessionTimeout",children:"Session Timeout (ms)"}),e.jsx(D,{id:"sessionTimeout",type:"number",placeholder:"60000",defaultValue:"60000",className:"bg-input border-border text-foreground",...a("configuration.sessionTimeout",{valueAsNumber:!0,min:{value:1e3,message:"Session timeout must be at least 1000ms"},max:{value:6e5,message:"Session timeout cannot exceed 600000ms"}})}),((k=r.configuration)==null?void 0:k.sessionTimeout)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.sessionTimeout.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"channelTimeout",children:"Channel Timeout (ms)"}),e.jsx(D,{id:"channelTimeout",type:"number",placeholder:"30000",defaultValue:"30000",className:"bg-input border-border text-foreground",...a("configuration.channelTimeout",{valueAsNumber:!0,min:{value:1e3,message:"Channel timeout must be at least 1000ms"},max:{value:3e5,message:"Channel timeout cannot exceed 300000ms"}})}),((S=r.configuration)==null?void 0:S.channelTimeout)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.channelTimeout.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"connectionPoolSize",children:"Connection Pool Size"}),e.jsx(D,{id:"connectionPoolSize",type:"number",placeholder:"5",defaultValue:"5",min:"1",max:"20",className:"bg-input border-border text-foreground",...a("configuration.connectionPoolSize",{valueAsNumber:!0,min:{value:1,message:"Connection pool size must be at least 1"},max:{value:20,message:"Connection pool size cannot exceed 20"}})}),((g=r.configuration)==null?void 0:g.connectionPoolSize)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.connectionPoolSize.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"strictHostKeyChecking",children:"Strict Host Key Checking"}),e.jsx(G,{name:"configuration.strictHostKeyChecking",control:t,defaultValue:!1,render:({field:c})=>e.jsxs(K,{value:c.value?"true":"false",onValueChange:l=>c.onChange(l==="true"),children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select host key checking"})}),e.jsxs(V,{children:[e.jsx(x,{value:"true",children:"Enabled"}),e.jsx(x,{value:"false",children:"Disabled"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"connectionMode",children:"Connection Mode"}),e.jsx(G,{name:"configuration.connectionMode",control:t,defaultValue:"Permanently",render:({field:c})=>e.jsxs(K,{value:c.value,onValueChange:c.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select connection mode"})}),e.jsxs(V,{children:[e.jsx(x,{value:"Permanently",children:"Permanently"}),e.jsx(x,{value:"Per File Transfer",children:"Per File Transfer"})]})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Transfer Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"maxRetryAttempts",children:"Max Retry Attempts"}),e.jsx(D,{id:"maxRetryAttempts",type:"number",placeholder:"3",defaultValue:"3",min:"1",max:"10",className:"bg-input border-border text-foreground",...a("configuration.maxRetryAttempts",{valueAsNumber:!0,min:{value:1,message:"Max retry attempts must be at least 1"},max:{value:10,message:"Max retry attempts cannot exceed 10"}})}),((p=r.configuration)==null?void 0:p.maxRetryAttempts)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.maxRetryAttempts.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"retryDelayMs",children:"Retry Delay (ms)"}),e.jsx(D,{id:"retryDelayMs",type:"number",placeholder:"5000",defaultValue:"5000",className:"bg-input border-border text-foreground",...a("configuration.retryDelayMs",{valueAsNumber:!0,min:{value:100,message:"Retry delay must be at least 100ms"},max:{value:6e4,message:"Retry delay cannot exceed 60000ms"}})}),((b=r.configuration)==null?void 0:b.retryDelayMs)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.retryDelayMs.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"maxFileSize",children:"Max File Size (MB)"}),e.jsx(D,{id:"maxFileSize",type:"number",placeholder:"100",defaultValue:"100",className:"bg-input border-border text-foreground",...a("configuration.maxFileSize",{valueAsNumber:!0,min:{value:1,message:"Max file size must be at least 1MB"},max:{value:5e3,message:"Max file size cannot exceed 5000MB"}})}),((v=r.configuration)==null?void 0:v.maxFileSize)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.maxFileSize.message})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"transferBufferSize",children:"Transfer Buffer Size (KB)"}),e.jsx(D,{id:"transferBufferSize",type:"number",placeholder:"32",defaultValue:"32",className:"bg-input border-border text-foreground",...a("configuration.transferBufferSize",{valueAsNumber:!0,min:{value:1,message:"Transfer buffer size must be at least 1KB"},max:{value:1024,message:"Transfer buffer size cannot exceed 1024KB"}})}),((L=r.configuration)==null?void 0:L.transferBufferSize)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.transferBufferSize.message})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"File Transfer Settings"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"transferMode",children:"Transfer Mode"}),e.jsx(G,{name:"configuration.transferMode",control:t,defaultValue:"BINARY",render:({field:c})=>e.jsxs(K,{value:c.value,onValueChange:c.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select transfer mode"})}),e.jsxs(V,{children:[e.jsx(x,{value:"BINARY",children:"Binary"}),e.jsx(x,{value:"ASCII",children:"ASCII"}),e.jsx(x,{value:"AUTO",children:"Auto"})]})]})})]})})]}),s==="SENDER"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Remote Pickup Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"remoteDirectory",children:"Remote Directory"}),e.jsx(D,{id:"remoteDirectory",placeholder:"/outgoing/statements",className:"bg-input border-border text-foreground",...a("configuration.remoteDirectory",{required:"Remote directory is required for sender adapters"})}),((u=r.configuration)==null?void 0:u.remoteDirectory)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.remoteDirectory.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"filename",children:"Filename Pattern"}),e.jsx(D,{id:"filename",placeholder:"*.csv",className:"bg-input border-border text-foreground",...a("configuration.filename",{required:"Filename pattern is required for sender adapters"})}),((I=r.configuration)==null?void 0:I.filename)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.filename.message})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"excludePattern",children:"Exclude Pattern"}),e.jsx(D,{id:"excludePattern",placeholder:"*.tmp,*.processing",className:"bg-input border-border text-foreground",...a("configuration.excludePattern")})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Scheduler Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"scheduleType",children:"Schedule Type"}),e.jsx(G,{name:"configuration.scheduleType",control:t,defaultValue:"Daily",render:({field:c})=>e.jsxs(K,{value:c.value,onValueChange:c.onChange,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"Daily",children:"Daily"}),e.jsx(x,{value:"Weekly",children:"Weekly"}),e.jsx(x,{value:"Monthly",children:"Monthly"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"scheduleMode",children:"Schedule Mode"}),e.jsx(G,{name:"configuration.scheduleMode",control:t,defaultValue:"OnTime",render:({field:c})=>e.jsxs(K,{value:c.value,onValueChange:c.onChange,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"OnTime",children:"On Time"}),e.jsx(x,{value:"Every",children:"Every Interval"})]})]})})]})]}),o==="OnTime"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"onTimeValue",children:"Execution Time"}),e.jsx(D,{id:"onTimeValue",type:"time",defaultValue:"20:27",className:"bg-input border-border text-foreground",...a("configuration.onTimeValue")})]}),o==="Every"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"everyInterval",children:"Every Interval"}),e.jsx(G,{name:"configuration.everyInterval",control:t,defaultValue:"1 min",render:({field:c})=>e.jsxs(K,{value:c.value,onValueChange:c.onChange,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"1 min",children:"1 minute"}),e.jsx(x,{value:"5 min",children:"5 minutes"}),e.jsx(x,{value:"15 min",children:"15 minutes"}),e.jsx(x,{value:"30 min",children:"30 minutes"}),e.jsx(x,{value:"1 hour",children:"1 hour"}),e.jsx(x,{value:"2 hours",children:"2 hours"}),e.jsx(x,{value:"4 hours",children:"4 hours"})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"everyStartTime",children:"Start Time"}),e.jsx(D,{id:"everyStartTime",type:"time",defaultValue:"00:00",className:"bg-input border-border text-foreground",...a("configuration.everyStartTime")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"everyEndTime",children:"End Time"}),e.jsx(D,{id:"everyEndTime",type:"time",defaultValue:"24:00",className:"bg-input border-border text-foreground",...a("configuration.everyEndTime")})]})]}),j==="Weekly"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Days of Week"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}].map(c=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:`configuration.weeklyDays.${c.key}`,control:t,defaultValue:!1,render:({field:l})=>e.jsx("input",{type:"checkbox",id:`weekly_${c.key}`,checked:!!l.value,onChange:l.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:`weekly_${c.key}`,className:"text-sm",children:c.label})]},c.key))})]}),j==="Monthly"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"monthlyDay",children:"Day of Month"}),e.jsx(G,{name:"configuration.monthlyDay",control:t,defaultValue:"1",render:({field:c})=>e.jsxs(K,{value:c.value,onValueChange:c.onChange,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[Array.from({length:31},(l,m)=>m+1).map(l=>e.jsx(x,{value:l.toString(),children:l},l)),e.jsx(x,{value:"last",children:"Last Day of Month"})]})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Empty File Handling"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"emptyFileHandling",children:"Empty File Handling"}),e.jsx(G,{name:"configuration.emptyFileHandling",control:t,defaultValue:"Do Not Create Message",render:({field:c})=>e.jsxs(K,{value:c.value,onValueChange:c.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select empty file handling"})}),e.jsxs(V,{children:[e.jsx(x,{value:"Do Not Create Message",children:"Do Not Create Message"}),e.jsx(x,{value:"Process Empty Files",children:"Process Empty Files"}),e.jsx(x,{value:"Skip Empty Files",children:"Skip Empty Files"})]})]})})]})]})]}),s==="SENDER"&&e.jsx(An,{control:t,register:a})]})},Fn=({control:s,register:t})=>{const a=Fe({control:s,name:"configuration.outputFilenameMode",defaultValue:"UseOriginal"});return e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Output Filename Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"outputFilenameMode",children:"Output Filename Mode"}),e.jsx(G,{name:"configuration.outputFilenameMode",control:s,defaultValue:"UseOriginal",render:({field:r})=>e.jsxs(K,{value:r.value,onValueChange:r.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select filename mode"})}),e.jsxs(V,{children:[e.jsx(x,{value:"UseOriginal",children:"Use Original Filename"}),e.jsx(x,{value:"AddTimestamp",children:"Add Timestamp to Filename"}),e.jsx(x,{value:"Custom",children:"Custom Filename Pattern"})]})]})})]}),a==="Custom"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"customFilenamePattern",children:"Custom Filename Pattern"}),e.jsx(D,{id:"customFilenamePattern",...t("configuration.customFilenamePattern"),placeholder:"{original_name}_{timestamp}.{extension}",className:"bg-input border-border text-foreground"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Available variables: ","{original_name}",", ","{timestamp}",", ","{date}",", ","{extension}"]})]})]})]})},An=({control:s,register:t})=>{const a=Fe({control:s,name:"configuration.postProcessAction",defaultValue:"ARCHIVE"});return e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Post-Processing"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"postProcessAction",children:"Post Process Action"}),e.jsx(G,{name:"configuration.postProcessAction",control:s,defaultValue:"ARCHIVE",render:({field:r})=>e.jsxs(K,{value:r.value,onValueChange:r.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select post process action"})}),e.jsxs(V,{children:[e.jsx(x,{value:"ARCHIVE",children:"Archive"}),e.jsx(x,{value:"KEEP_AND_MARK",children:"Keep File and Mark as Processed"}),e.jsx(x,{value:"KEEP_AND_REPROCESS",children:"Keep File and Process Again"}),e.jsx(x,{value:"DELETE",children:"Delete File"})]})]})})]}),a==="ARCHIVE"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"archiveDirectory",children:"Archive Directory"}),e.jsx(D,{id:"archiveDirectory",placeholder:"/data/archive",className:"bg-input border-border text-foreground",...t("configuration.archiveDirectory")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.archiveWithTimestamp",control:s,render:({field:r})=>e.jsx("input",{type:"checkbox",id:"archiveWithTimestamp",checked:!!r.value,onChange:r.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:"archiveWithTimestamp",children:"Archive with Timestamp"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"compressionType",children:"Compression Type"}),e.jsx(G,{name:"configuration.compressionType",control:s,defaultValue:"NONE",render:({field:r})=>e.jsxs(K,{value:r.value,onValueChange:r.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select compression"})}),e.jsxs(V,{children:[e.jsx(x,{value:"NONE",children:"None"}),e.jsx(x,{value:"GZIP",children:"GZIP"}),e.jsx(x,{value:"ZIP",children:"ZIP"})]})]})})]})]})]}),a==="KEEP_AND_MARK"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"processedDirectory",children:"Processed Directory"}),e.jsx(D,{id:"processedDirectory",placeholder:"/data/processed",className:"bg-input border-border text-foreground",...t("configuration.processedDirectory")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"processedFileSuffix",children:"Processed File Suffix"}),e.jsx(D,{id:"processedFileSuffix",placeholder:".processed",className:"bg-input border-border text-foreground",...t("configuration.processedFileSuffix")})]})]}),a==="KEEP_AND_REPROCESS"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"reprocessingDelay",children:"Reprocessing Delay (ms)"}),e.jsx(D,{id:"reprocessingDelay",type:"number",placeholder:"3600000",className:"bg-input border-border text-foreground",...t("configuration.reprocessingDelay",{valueAsNumber:!0})})]})}),a==="DELETE"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"deleteBackupDirectory",children:"Delete Backup Directory"}),e.jsx(D,{id:"deleteBackupDirectory",placeholder:"/data/deleted_backup",className:"bg-input border-border text-foreground",...t("configuration.deleteBackupDirectory")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.confirmDelete",control:s,render:({field:r})=>e.jsx("input",{type:"checkbox",id:"confirmDelete",checked:!!r.value,onChange:r.onChange,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"})}),e.jsx(y,{htmlFor:"confirmDelete",children:"Confirm Delete"})]})]})]})]})},kn=({direction:s,control:t,register:a,errors:r,systemConfig:n,setValue:i})=>{var o,j,d;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"smtpHost",children:"SMTP Host"}),e.jsx(D,{id:"smtpHost",placeholder:"smtp.gmail.com",className:"bg-input border-border text-foreground",...a("configuration.smtpHost",{required:"SMTP host is required"})}),((o=r.configuration)==null?void 0:o.smtpHost)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.smtpHost.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"smtpPort",children:"SMTP Port"}),e.jsx(D,{id:"smtpPort",type:"number",placeholder:"587",className:"bg-input border-border text-foreground",...a("configuration.smtpPort",{valueAsNumber:!0,required:"SMTP port is required"})}),((j=r.configuration)==null?void 0:j.smtpPort)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.smtpPort.message})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground",children:"SSL/TLS Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.sslEnabled",control:t,render:({field:f})=>e.jsx(Ce,{id:"sslEnabled",checked:!!f.value,onCheckedChange:h=>{f.onChange(h),i("configuration.startTlsEnabled",!h,{shouldValidate:!0,shouldDirty:!0})}})}),e.jsx(y,{htmlFor:"sslEnabled",children:"Enable SSL (Port 465)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use SSL for secure connection. Required for port 465."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{name:"configuration.startTlsEnabled",control:t,render:({field:f})=>e.jsx(Ce,{id:"startTlsEnabled",checked:!!f.value,onCheckedChange:h=>{f.onChange(h),i("configuration.sslEnabled",!h,{shouldValidate:!0,shouldDirty:!0})}})}),e.jsx(y,{htmlFor:"startTlsEnabled",children:"Enable STARTTLS (Port 587)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use STARTTLS for secure connection. Typically used with port 587."})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"fromAddress",children:"From Address (Sender Email)"}),e.jsx(D,{id:"fromAddress",placeholder:"noreply@company.com",className:"bg-input border-border text-foreground",...a("configuration.fromAddress",{required:"From address is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"}})}),((d=r.configuration)==null?void 0:d.fromAddress)&&e.jsx("p",{className:"text-sm text-destructive",children:r.configuration.fromAddress.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"smtpUsername",children:"Email Username"}),e.jsx(D,{id:"smtpUsername",placeholder:"notifications@company.com",className:"bg-input border-border text-foreground",...a("configuration.smtpUsername",{required:"Email username is required"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"smtpPassword",children:"Email Password"}),e.jsx(D,{id:"smtpPassword",type:"password",placeholder:"Enter email password",className:"bg-input border-border text-foreground",...a("configuration.smtpPassword",{required:"Email password is required"})})]})]}),s==="RECEIVER"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"recipients",children:"Recipients (comma-separated)"}),e.jsx(D,{id:"recipients",placeholder:"user1@example.com, user2@example.com",className:"bg-input border-border text-foreground",...a("configuration.recipients",{required:"Recipients are required for receiver email"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"subject",children:"Email Subject"}),e.jsx(D,{id:"subject",placeholder:"File Transfer Notification",className:"bg-input border-border text-foreground",...a("configuration.subject")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"body",children:"Email Body"}),e.jsx("textarea",{id:"body",placeholder:"Enter the email body text...",className:"flex min-h-[120px] w-full rounded-md border border-border bg-input px-3 py-2 text-sm text-foreground ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...a("configuration.body")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Files will be attached directly from the flow execution context."})]})]})]})},Pn=({control:s,register:t,errors:a,sshKeysData:r=[]})=>{var i,o,j;const n=Fe({control:s,name:"configuration.authenticationType",defaultValue:"USERNAME_PASSWORD"});return e.jsxs("div",{className:"space-y-4 mt-4",children:[(n==="USERNAME_PASSWORD"||n==="DUAL")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"username",children:"Username"}),e.jsx(D,{id:"username",placeholder:"Administrator",className:"bg-input border-border text-foreground",...t("configuration.username",{required:n==="USERNAME_PASSWORD"?"Username is required":!1})}),((i=a.configuration)==null?void 0:i.username)&&e.jsx("p",{className:"text-sm text-destructive",children:a.configuration.username.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"password",children:"Password"}),e.jsx(D,{id:"password",type:"password",placeholder:"••••••••",className:"bg-input border-border text-foreground",...t("configuration.password",{required:n==="USERNAME_PASSWORD"?"Password is required":!1})}),((o=a.configuration)==null?void 0:o.password)&&e.jsx("p",{className:"text-sm text-destructive",children:a.configuration.password.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"serverFingerprint",children:"Server Fingerprint"}),e.jsx(D,{id:"serverFingerprint",placeholder:"SHA256:AAAA... or MD5:aa:bb:cc...",className:"bg-input border-border text-foreground",...t("configuration.serverFingerprint")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: SSH server host key fingerprint for additional security verification"})]}),(n==="PUBLIC_KEY"||n==="DUAL")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"sshKeyId",children:"SSH Key"}),e.jsx(G,{name:"configuration.sshKeyId",control:s,rules:{required:n==="PUBLIC_KEY"?"SSH Key is required":!1},render:({field:d})=>e.jsxs(K,{value:d.value,onValueChange:d.onChange,children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select SSH Key"})}),e.jsx(V,{children:r.length>0?r.map(f=>e.jsxs(x,{value:f.id,children:[f.name," (",f.keyType,")"]},f.id)):e.jsx(x,{value:"no-keys",disabled:!0,children:"No SSH keys available"})})]})}),((j=a.configuration)==null?void 0:j.sshKeyId)&&e.jsx("p",{className:"text-sm text-destructive",children:a.configuration.sshKeyId.message})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsx("span",{children:"Need an SSH key?"}),e.jsx("button",{type:"button",onClick:()=>window.open("/ssh-keys","_blank"),className:"text-primary hover:underline",children:"Generate SSH Key"})]})]}),n==="DUAL"&&e.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Dual Authentication:"})," Both username/password and SSH key will be used for authentication."]})})]})},os=()=>{const{user:s}=Ve(),t=n=>s?(Array.isArray(n)?n:[n]).includes(s.role):!1;return{hasRole:t,isAdmin:()=>t("ADMINISTRATOR"),isViewer:()=>t("VIEWER"),currentRole:s==null?void 0:s.role}},Dn=({open:s,onOpenChange:t,testResult:a})=>{if(!(a!=null&&a.data))return null;const r=a.data,n=({success:o})=>o?e.jsx(te,{className:"h-4 w-4 text-success"}):e.jsx(oe,{className:"h-4 w-4 text-destructive"}),i=({success:o,successText:j="Success",failText:d="Failed"})=>e.jsx("span",{className:o?"text-success":"text-destructive",children:o?j:d});return e.jsx(cs,{open:s,onOpenChange:t,children:e.jsxs(Ze,{className:"max-w-2xl",children:[e.jsx(es,{className:"pb-0",children:e.jsx(ss,{className:"flex items-center space-x-2 text-lg",children:r.success?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-5 w-5 text-success"}),e.jsx("span",{children:"Test Successful"})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-5 w-5 text-destructive"}),e.jsx("span",{children:"Test Failed"})]})})}),e.jsxs("div",{className:"space-y-6 py-4",children:[!r.success&&r.error&&e.jsx("div",{className:"text-foreground leading-relaxed",children:r.error}),r.success&&r.testResult&&e.jsx("div",{className:"text-foreground leading-relaxed",children:r.testResult}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Connection Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3",children:[r.host&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Host: "}),e.jsxs("span",{className:"text-foreground font-medium",children:[r.host,":",r.port||22]})]}),r.username&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Username: "}),e.jsx("span",{className:"text-foreground font-medium",children:r.username})]})]}),r.homeDirectory&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Home Directory: "}),e.jsx("span",{className:"text-foreground font-medium",children:r.homeDirectory}),r.homeDirectoryAccessible&&e.jsx("span",{className:"ml-2 text-success",children:"(Accessible)"})]}),r.remoteDirectory&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Target Directory: "}),e.jsx("span",{className:"text-foreground font-medium",children:r.remoteDirectory})]})]})]}),r.testType==="SFTP_CONNECTION"&&e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Connection Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Connection:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{success:r.connectionEstablished||!1}),e.jsx(i,{success:r.connectionEstablished||!1})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"SFTP Channel:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{success:r.sftpChannelOpened||!1}),e.jsx(i,{success:r.sftpChannelOpened||!1,successText:"Opened",failText:"Failed"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Directory Access:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{success:r.directoryAccessible||!1}),e.jsx(i,{success:r.directoryAccessible||!1,successText:"Accessible",failText:"Failed"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Permissions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Read:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{success:r.readPermission||!1}),e.jsx(i,{success:r.readPermission||!1,successText:"Allowed",failText:"Denied"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Write:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{success:r.writePermission||!1}),e.jsx(i,{success:r.writePermission||!1,successText:"Allowed",failText:"Denied"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Delete:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{success:r.deletePermission||!1}),e.jsx(i,{success:r.deletePermission||!1,successText:"Allowed",failText:"Denied"})]})]})]})]})]}),r.testType==="SFTP_CONNECTION"&&r.fileCount!==void 0&&e.jsx("div",{className:"text-foreground",children:e.jsxs("strong",{children:["Files in directory: ",r.fileCount," files found"]})}),r.testType==="EMAIL_CONNECTION"&&e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.smtpHost&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"SMTP Host:"}),e.jsx("span",{className:"ml-2 text-foreground font-medium",children:r.smtpHost})]}),r.smtpPort&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"SMTP Port:"}),e.jsx("span",{className:"ml-2 text-foreground font-medium",children:r.smtpPort})]}),r.smtpConnectionEstablished!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Connection:"}),e.jsx("span",{className:`ml-2 ${r.smtpConnectionEstablished?"text-success":"text-destructive"}`,children:r.smtpConnectionEstablished?"Established":"Failed"})]})]})]}),e.jsx(Ms,{children:e.jsx(T,{onClick:()=>t(!1),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-2 font-medium",children:"OK"})})]})})},In=()=>{var C;const{isAdmin:s}=os(),{data:t}=Js(),{success:a,error:r}=xe(),n=be(),[i,o]=N.useState(!1),[j,d]=N.useState(null),[f,h]=N.useState(!1),[E,w]=N.useState(null),{data:k,isLoading:S,error:g}=ee({queryKey:["adapters"],queryFn:me.getAllAdapters}),p=X({mutationFn:me.deleteAdapter,onSuccess:()=>{a("Adapter Deleted","Adapter deleted successfully"),n.invalidateQueries({queryKey:["adapters"]}),o(!1),d(null)},onError:F=>{var R,z;r("Deletion Failed",((z=(R=F.response)==null?void 0:R.data)==null?void 0:z.message)||"Failed to delete adapter")}}),b=X({mutationFn:me.testAdapter,onSuccess:F=>{w(F),h(!0)},onError:F=>{var R,z;w({data:{success:!1,error:((z=(R=F.response)==null?void 0:R.data)==null?void 0:z.message)||"Failed to test adapter configuration",testType:"ERROR"}}),h(!0)}}),v=F=>{d(F),o(!0)},L=()=>{j&&p.mutate(j.id)},u=F=>{b.mutate(F)},I=(k==null?void 0:k.data)||[],c=s()&&(((C=t==null?void 0:t.permissions)==null?void 0:C.canCreateAdapters)??!0),l=F=>{switch(F){case"FILE":return e.jsx(pe,{className:"h-5 w-5"});case"SFTP":return e.jsx(Ps,{className:"h-5 w-5"});case"EMAIL":return e.jsx(is,{className:"h-5 w-5"});default:return e.jsx(ae,{className:"h-5 w-5"})}},m=F=>{switch(F){case"SUCCESS":return e.jsx(te,{className:"h-4 w-4 text-success"});case"FAILED":return e.jsx(oe,{className:"h-4 w-4 text-destructive"});case"RUNNING":return e.jsx(re,{className:"h-4 w-4 text-warning animate-pulse"});default:return e.jsx(re,{className:"h-4 w-4 text-muted-foreground"})}};return S?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading adapters..."})]})})}):g?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"app-card rounded-lg p-6 border",children:e.jsxs("div",{className:"flex items-center space-x-3 text-destructive",children:[e.jsx(oe,{className:"h-5 w-5"}),e.jsx("p",{children:"Failed to load adapters. Please try again."})]})})}):e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Adapter Configuration"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Configure and manage your file transfer adapters"}),e.jsx(Us,{size:"sm"})]})]}),c&&e.jsx(T,{asChild:!0,className:"btn-primary",children:e.jsxs(Ae,{to:"/adapters/create",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create Adapter"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"app-card rounded-lg p-6 border",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(pe,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"File Adapters"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Local file system operations"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-foreground",children:(I==null?void 0:I.filter(F=>F.adapterType==="FILE").length)||0})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(Ps,{className:"h-8 w-8 text-info"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"SFTP Adapters"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Secure file transfer protocol"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-foreground",children:(I==null?void 0:I.filter(F=>F.adapterType==="SFTP").length)||0})]}),e.jsxs("div",{className:"app-card rounded-lg p-6 border",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(is,{className:"h-8 w-8 text-success"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Email Adapters"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email-based file transfer"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-foreground",children:(I==null?void 0:I.filter(F=>F.adapterType==="EMAIL").length)||0})]})]}),I&&I.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:I.map(F=>e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[l(F.adapterType),e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg text-foreground",children:F.name}),e.jsx("p",{className:"text-sm font-medium text-primary",children:F.bank}),e.jsx("p",{className:"text-sm text-muted-foreground",children:F.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${F.active?"bg-success animate-glow":"bg-muted-foreground"}`}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${F.active?"bg-success/20 text-success":"bg-muted/20 text-muted-foreground"}`,children:F.active?"Active":"Inactive"})]})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"ml-2 text-foreground",children:F.adapterType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Direction:"}),e.jsx("span",{className:"ml-2 text-foreground",children:F.direction})]})]}),F.lastExecution&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Execution:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[m(F.lastExecutionStatus),e.jsx("span",{className:"text-foreground",children:new Date(F.lastExecution).toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4",children:[s()&&e.jsx(T,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(Ae,{to:`/adapters/${F.id}/edit`,children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Configure"]})}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>u(F.id),disabled:b.isPending,children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),b.isPending?"Testing...":"Test"]}),s()&&e.jsx(T,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10",onClick:()=>v(F),disabled:p.isPending,children:e.jsx(ts,{className:"h-4 w-4"})})]})]})})]},F.id))}):e.jsxs("div",{className:"app-card rounded-lg p-12 border text-center",children:[e.jsx(ae,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No Adapters Configured"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Get started by creating your first adapter interface"}),c&&e.jsx(T,{asChild:!0,className:"btn-primary",children:e.jsxs(Ae,{to:"/adapters/create",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create Your First Adapter"]})})]}),e.jsx(cs,{open:i,onOpenChange:o,children:e.jsxs(Ze,{children:[e.jsxs(es,{children:[e.jsx(ss,{children:"Delete Adapter"}),e.jsxs(vs,{children:['Are you sure you want to delete the adapter "',j==null?void 0:j.name,'"? This action cannot be undone and will permanently remove the adapter configuration.']})]}),e.jsxs(Ms,{children:[e.jsx(T,{variant:"outline",onClick:()=>o(!1),disabled:p.isPending,children:"Cancel"}),e.jsx(T,{variant:"destructive",onClick:L,disabled:p.isPending,children:p.isPending?"Deleting...":"Delete Adapter"})]})]})}),e.jsx(Dn,{open:f,onOpenChange:h,testResult:E})]})},Ln=()=>{const s=$e(),{success:t,error:a}=xe(),r=be(),[n,i]=N.useState({name:"",description:"",keyType:"RSA",keySize:2048}),o=X({mutationFn:async h=>{console.log("Generating SSH key with data:",h);const E=h.keyType==="RSA"?await Be.generateRSAKey(h):await Be.generateDSAKey(h);return console.log("SSH key generation result:",E),E},onSuccess:h=>{console.log("SSH key generated successfully:",h),t("SSH Key Generated","SSH key pair created successfully"),r.invalidateQueries({queryKey:["ssh-keys"]}),s("/ssh-keys")},onError:h=>{var E,w;console.error("SSH key generation failed:",h),console.error("Error response:",h.response),a("Generation Failed",((w=(E=h.response)==null?void 0:E.data)==null?void 0:w.message)||h.message||"Failed to generate SSH key")}}),j=h=>{h.preventDefault(),o.mutate(n)},d=()=>n.keyType==="RSA"?n.keySize>=4096?{level:"High",color:"text-green-500"}:n.keySize>=3072?{level:"Strong",color:"text-green-400"}:{level:"Standard",color:"text-blue-400"}:{level:n.keySize>=2048?"Standard":"Basic",color:"text-yellow-400"},f=n.name.trim()!==""&&n.description.trim()!=="";return e.jsxs("div",{className:"content-spacing",children:[e.jsxs("nav",{className:"flex items-center space-x-2 text-sm mb-6",children:[e.jsx(Ae,{to:"/dashboard",className:"text-muted-foreground hover:text-foreground transition-colors flex items-center",children:e.jsx(Ga,{className:"h-4 w-4"})}),e.jsx(js,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(Ae,{to:"/ssh-keys",className:"text-muted-foreground hover:text-foreground transition-colors",children:"SSH Keys"}),e.jsx(js,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground font-medium",children:"Generate New Key"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Generate SSH Key Pair"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new SSH key pair for secure SFTP connections"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-foreground flex items-center space-x-2",children:[e.jsx(Le,{className:"h-5 w-5"}),e.jsx("span",{children:"Key Configuration"})]})}),e.jsx(U,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"name",children:"Key Name"}),e.jsx(D,{id:"name",value:n.name,onChange:h=>i(E=>({...E,name:h.target.value})),placeholder:"e.g., production-sftp-key",className:"bg-input border-border text-foreground",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A unique name to identify this key"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"description",children:"Description"}),e.jsx(D,{id:"description",value:n.description,onChange:h=>i(E=>({...E,description:h.target.value})),placeholder:"e.g., Key for production SFTP server",className:"bg-input border-border text-foreground",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A brief description of what this key is used for"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"keyType",children:"Key Type"}),e.jsxs("select",{id:"keyType",value:n.keyType,onChange:h=>i(E=>({...E,keyType:h.target.value,keySize:h.target.value==="RSA"?2048:1024})),className:"w-full px-3 py-2 bg-input border border-border rounded-md text-foreground",children:[e.jsx("option",{value:"RSA",children:"RSA (Recommended)"}),e.jsx("option",{value:"DSA",children:"DSA"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"RSA is recommended for better compatibility"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"keySize",children:"Key Size"}),e.jsx("select",{id:"keySize",value:n.keySize,onChange:h=>i(E=>({...E,keySize:parseInt(h.target.value)})),className:"w-full px-3 py-2 bg-input border border-border rounded-md text-foreground",children:n.keyType==="RSA"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:2048,children:"2048 bits (Recommended)"}),e.jsx("option",{value:3072,children:"3072 bits"}),e.jsx("option",{value:4096,children:"4096 bits (High Security)"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:1024,children:"1024 bits (Standard)"}),e.jsx("option",{value:2048,children:"2048 bits"})]})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Larger keys are more secure but slower"})]})]}),e.jsxs("div",{className:"bg-secondary/50 rounded-lg p-4 border border-border",children:[e.jsx("h4",{className:"font-medium text-foreground mb-2",children:"Security Notice"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The private key will be stored securely on the server. You can download it after generation for backup purposes. Keep your private key secure and never share it."})]}),e.jsxs("div",{className:"flex items-center space-x-4 pt-4 border-t border-border",children:[e.jsx(T,{type:"submit",className:"btn-primary",disabled:o.isPending||!f,children:o.isPending?"Generating...":"Generate Key Pair"}),e.jsx(T,{type:"button",variant:"outline",onClick:()=>s("/ssh-keys"),children:"Cancel"})]})]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(M,{className:"app-card border sticky top-6",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-foreground flex items-center space-x-2",children:[e.jsx(Wa,{className:"h-5 w-5"}),e.jsx("span",{children:"Key Preview"})]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Key Name"}),e.jsx("p",{className:"text-foreground font-medium",children:n.name||e.jsx("span",{className:"text-muted-foreground italic",children:"Not specified"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Description"}),e.jsx("p",{className:"text-foreground text-sm",children:n.description||e.jsx("span",{className:"text-muted-foreground italic",children:"Not specified"})})]}),e.jsxs("div",{className:"border-t border-border pt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"Algorithm"}),e.jsx("span",{className:"text-foreground font-medium",children:n.keyType})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"Key Size"}),e.jsxs("span",{className:"text-foreground font-medium",children:[n.keySize," bits"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"Security"}),e.jsx("span",{className:`font-medium ${d().color}`,children:d().level})]})]}),e.jsxs("div",{className:"border-t border-border pt-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-3",children:"Will Generate"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(te,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-foreground",children:"Public Key (.pub)"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(te,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-foreground",children:"Private Key"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(te,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-foreground",children:"Fingerprint"})]})]})]}),e.jsx("div",{className:"bg-secondary/50 rounded-lg p-3 border border-border",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Est. generation time: ",n.keySize>=4096?"5-10":n.keySize>=3072?"3-5":"1-3"," seconds"]})]})}),f&&e.jsx("div",{className:"bg-green-500/10 rounded-lg p-3 border border-green-500/20",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-500 font-medium",children:"Ready to generate"})]})})]})]})})]})]})},Rn=()=>{var l;const{isAdmin:s}=os(),{data:t}=Js(),{success:a,error:r}=xe(),n=be(),i=N.useRef(null),{status:o}=da(),[j,d]=N.useState(new Set);bn({onUpdate:m=>{d(C=>{const F=new Set(C);return m.status==="RUNNING"?F.add(m.flowId):(m.status==="COMPLETED"||m.status==="FAILED"||m.status==="CANCELLED")&&(F.delete(m.flowId),n.invalidateQueries({queryKey:["flows"]}),n.invalidateQueries({queryKey:["flowStatistics"]})),F})}}),Sn(()=>{n.invalidateQueries({queryKey:["flows"]}),n.invalidateQueries({queryKey:["flowStatistics"]})});const{data:f,isLoading:h}=ee({queryKey:["flows"],queryFn:ue.getAllFlows}),{data:E}=ee({queryKey:["flowStatistics"],queryFn:ue.getStatistics}),w=(f==null?void 0:f.data)||[],k=X({mutationFn:ue.deleteFlow,onSuccess:()=>{a("Flow Deleted","Flow deleted successfully"),n.invalidateQueries({queryKey:["flows"]}),n.invalidateQueries({queryKey:["flowStatistics"]})},onError:m=>{var F,R;const C=((R=(F=m.response)==null?void 0:F.data)==null?void 0:R.message)||"Failed to delete flow";r("Cannot Delete Flow",C)}}),S=X({mutationFn:ue.exportFlow,onSuccess:m=>{const C=JSON.stringify(m.data,null,2),F=new Blob([C],{type:"application/json"}),R=URL.createObjectURL(F),z=document.createElement("a");z.href=R,z.download=`${m.data.name||"flow"}_export.json`,z.click(),URL.revokeObjectURL(R),a("Flow Exported","Flow exported successfully")},onError:m=>{var C,F;r("Export Failed",((F=(C=m.response)==null?void 0:C.data)==null?void 0:F.message)||"Failed to export flow")}}),g=X({mutationFn:ue.importFlow,onSuccess:()=>{a("Flow Imported","Flow and associated adapters imported successfully. Please configure environment-specific connection details for imported adapters."),n.invalidateQueries({queryKey:["flows"]}),n.invalidateQueries({queryKey:["flowStatistics"]})},onError:m=>{var C,F;r("Import Failed",((F=(C=m.response)==null?void 0:C.data)==null?void 0:F.message)||"Failed to import flow")}}),p=X({mutationFn:ue.deployFlow,onSuccess:()=>{a("Flow Deployed","Flow deployed successfully and is now executable"),n.invalidateQueries({queryKey:["flows"]}),n.invalidateQueries({queryKey:["flowStatistics"]})},onError:m=>{var F,R;const C=((R=(F=m.response)==null?void 0:F.data)==null?void 0:R.message)||"Failed to deploy flow";r("Cannot Deploy Flow",C)}}),b=X({mutationFn:ue.undeployFlow,onSuccess:()=>{a("Flow Undeployed","Flow undeployed successfully and execution is now blocked"),n.invalidateQueries({queryKey:["flows"]}),n.invalidateQueries({queryKey:["flowStatistics"]})},onError:m=>{var F,R;const C=((R=(F=m.response)==null?void 0:F.data)==null?void 0:R.message)||"Failed to undeploy flow";r("Cannot Undeploy Flow",C)}}),v=m=>{var R;const C=(R=m.target.files)==null?void 0:R[0];if(!C)return;const F=new FileReader;F.onload=z=>{var A;try{const Z=JSON.parse((A=z.target)==null?void 0:A.result);g.mutate(Z)}catch{r("Invalid File","Please select a valid JSON file exported from the system")}},F.readAsText(C),m.target.value=""},L=m=>{switch(m){case"PARALLEL":return e.jsx(_s,{className:"h-4 w-4 text-info"});case"CONDITIONAL":return e.jsx(_s,{className:"h-4 w-4 text-warning"});case"LOOP":return e.jsx(it,{className:"h-4 w-4 text-info"});default:return e.jsx(qe,{className:"h-4 w-4 text-primary"})}},u=m=>{if(m<1e3)return`${m}ms`;if(m<6e4)return`${(m/1e3).toFixed(1)}s`;const C=Math.floor(m/6e4),F=Math.floor(m%6e4/1e3);return`${C}m ${F}s`},I=(m,C)=>C===0?100:Math.round(m/C*100),c=s()&&(((l=t==null?void 0:t.permissions)==null?void 0:l.canCreateFlows)??!0);return s?h?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading flows..."})]})})}):e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Visual Flow Management"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Create and manage visual integration flows with drag-and-drop components"}),e.jsx(Us,{size:"sm"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:i,type:"file",accept:".json",onChange:v,className:"hidden",disabled:g.isPending}),e.jsxs(T,{variant:"outline",disabled:g.isPending,onClick:()=>{var m;return(m=i.current)==null?void 0:m.click()},children:[g.isPending?e.jsx(us,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Import Flow"]})]}),c&&e.jsx(T,{asChild:!0,className:"btn-primary",children:e.jsxs(Ae,{to:"/flows/create",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create Flow"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(qe,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Flows"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:w.length})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"h-8 w-8 text-success"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Enabled Flows"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:w.filter(m=>m.active).length})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"h-8 w-8 text-info"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Executions"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:w.reduce((m,C)=>m+C.totalExecutions,0)})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(re,{className:"h-8 w-8 text-warning"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Execution Time"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:w.length>0?u(w.reduce((m,C)=>m+C.averageExecutionTimeMs,0)/w.length):"0ms"})]})]})})})]}),e.jsx("div",{className:"space-y-6",children:w.map(m=>{var C,F,R,z;return e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[L(m.flowType),e.jsxs("div",{children:[e.jsxs(Q,{className:"text-lg text-foreground",children:[m.name,e.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["v",m.flowVersion]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Type: ",m.flowType]}),e.jsxs("span",{children:["Updated: ",new Date(m.updatedAt).toLocaleDateString()]}),m.scheduleEnabled&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(re,{className:"h-3 w-3"}),e.jsx("span",{children:"Scheduled"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[j.has(m.id)&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-info/20 text-info flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-info rounded-full animate-pulse"}),e.jsx("span",{children:"Running"})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${m.active?"bg-success/20 text-success":"bg-muted/20 text-muted-foreground"}`,children:m.active?"Active":"Inactive"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${m.deployed?"bg-info/20 text-info":"bg-warning/20 text-warning"}`,children:m.deployed?"Deployed":"Not Deployed"}),e.jsx("div",{className:`w-3 h-3 rounded-full ${j.has(m.id)?"bg-info animate-pulse":m.active?"bg-success animate-glow":"bg-muted-foreground"}`})]})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-secondary rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{className:"h-4 w-4 text-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Nodes:"}),e.jsx("span",{className:"ml-1 text-foreground font-medium",children:((F=(C=m.flowDefinition)==null?void 0:C.nodes)==null?void 0:F.length)||0})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"h-4 w-4 text-info"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Connections:"}),e.jsx("span",{className:"ml-1 text-foreground font-medium",children:((z=(R=m.flowDefinition)==null?void 0:R.edges)==null?void 0:z.length)||0})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"h-4 w-4 text-success"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Success Rate:"}),e.jsxs("span",{className:"ml-1 text-success font-medium",children:[I(m.successfulExecutions,m.totalExecutions),"%"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-4 w-4 text-warning"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg Time:"}),e.jsx("span",{className:"ml-1 text-foreground font-medium",children:u(m.averageExecutionTimeMs)})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Executions:"}),e.jsx("span",{className:"ml-2 text-foreground font-medium",children:m.totalExecutions})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Successful:"}),e.jsx("span",{className:"ml-2 text-success font-medium",children:m.successfulExecutions})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Failed:"}),e.jsx("span",{className:"ml-2 text-destructive font-medium",children:m.failedExecutions})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(m.createdAt).toLocaleDateString()})]})]}),e.jsx("div",{className:"flex items-center justify-end pt-4 border-t border-border",children:s()&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{variant:"outline",size:"sm",asChild:!m.deployed,disabled:m.deployed,className:m.deployed?"opacity-50 cursor-not-allowed":"",title:m.deployed?"Flow must be undeployed before editing":"",children:m.deployed?e.jsxs("span",{children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Edit Visual Flow"]}):e.jsxs(Ae,{to:`/flows/${m.id}/visual`,children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Edit Visual Flow"]})}),e.jsx(T,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(Ae,{to:`/flows/${m.id}/visual?mode=view`,children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"View Details"]})}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>S.mutate(m.id),disabled:S.isPending,children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Export"]}),m.deployed?e.jsxs(T,{variant:"outline",size:"sm",className:"text-warning hover:bg-warning/10 hover:text-warning",onClick:()=>b.mutate(m.id),disabled:b.isPending,children:[b.isPending?e.jsx(us,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ks,{className:"h-4 w-4 mr-2"}),"Undeploy"]}):e.jsxs(T,{variant:"outline",size:"sm",className:"text-info hover:bg-info/10 hover:text-info",onClick:()=>p.mutate(m.id),disabled:p.isPending||!m.active,children:[p.isPending?e.jsx(us,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Deploy"]}),e.jsxs(T,{variant:"outline",size:"sm",className:`text-destructive hover:bg-destructive/10 hover:text-destructive ${m.deployed?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!m.deployed&&k.mutate(m.id),disabled:k.isPending||m.deployed,title:m.deployed?"Flow must be undeployed before deleting":"",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})]})})]},m.id)})}),w.length===0&&e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(qe,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Visual Flows"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:c?"Create your first visual integration flow using our drag-and-drop builder":"Import flows are available in this environment. Flow creation is restricted."}),e.jsx("div",{className:"flex items-center space-x-3 justify-center",children:c&&e.jsx(T,{asChild:!0,className:"btn-primary",children:e.jsxs(Ae,{to:"/flows/create",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create Flow"]})})})]})})})]}):e.jsx("div",{className:"content-spacing",children:e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(qe,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:"Administrator privileges required to manage flows"})]})})})})},Mn=({className:s})=>e.jsx("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",children:e.jsx("path",{d:"M2,21L23,12L2,3V10L17,12L2,14V21Z"})}),Un=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"1"}),e.jsx("polyline",{points:"3,5 12,13 21,5"})]}),On=({className:s})=>e.jsx("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",children:e.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z"})}),$n=({id:s,data:t,selected:a})=>{const{setNodes:r,setEdges:n}=Ns(),i=t||{label:"Adapter"},j=i.direction==="SENDER"?Un:i.direction==="RECEIVER"?Mn:On,d=()=>{r(E=>E.filter(w=>w.id!==s)),n(E=>E.filter(w=>w.source!==s&&w.target!==s))},f=()=>a?"border-blue-400 shadow-lg shadow-blue-500/30":i.direction==="SENDER"?"border-green-500 hover:border-green-400":i.direction==="RECEIVER"?"border-orange-500 hover:border-orange-400":"border-slate-500 hover:border-slate-400",h=()=>i.direction==="SENDER"?"text-green-400":i.direction==="RECEIVER"?"text-orange-400":"text-blue-400";return e.jsxs("div",{className:"flex flex-col items-center relative",children:[i.showDeleteButton&&e.jsx(T,{variant:"ghost",size:"sm",onClick:d,className:"absolute -top-3 -right-3 h-5 w-5 p-0 bg-red-500 text-white rounded-full shadow-md hover:bg-red-600 z-10",title:"Delete node",children:e.jsx(Pe,{className:"h-3 w-3"})}),e.jsxs("div",{className:`relative min-w-28 h-14 rounded-lg bg-slate-800 border-2 flex items-center justify-center px-3 transition-all ${f()}`,children:[e.jsx("div",{className:"absolute top-1 left-1",children:e.jsx(j,{className:`w-4 h-4 ${h()}`})}),e.jsx("span",{className:"text-xs font-medium text-slate-200 text-center leading-tight pt-2",children:i.label||"Adapter"})]}),e.jsx("div",{className:"mt-1 text-[10px] text-slate-500",children:i.adapterType&&i.adapterType!==null?`${i.adapterType} ${i.direction}`:`${i.direction} (Select instance)`}),i.direction==="SENDER"&&e.jsx(ie,{type:"source",position:le.Right,className:"w-2 h-2 bg-green-500 border border-slate-800",style:{right:"-4px",top:"28px"}}),i.direction==="RECEIVER"&&e.jsx(ie,{type:"target",position:le.Left,className:"w-2 h-2 bg-orange-500 border border-slate-800",style:{left:"-4px",top:"28px"}}),!i.direction&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{type:"target",position:le.Left,className:"w-2 h-2 bg-slate-400 border border-slate-800",style:{left:"-4px",top:"28px"}}),e.jsx(ie,{type:"source",position:le.Right,className:"w-2 h-2 bg-slate-400 border border-slate-800",style:{right:"-4px",top:"28px"}})]})]})},Vn=({className:s})=>e.jsx("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",children:e.jsx("path",{d:"M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z"})}),Kn=({className:s})=>e.jsx("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",children:e.jsx("path",{d:"M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z"})}),_n=({id:s,data:t,selected:a})=>{const{setNodes:r,setEdges:n}=Ns(),i=t||{label:"Service Task"},o=()=>{r(f=>f.filter(h=>h.id!==s)),n(f=>f.filter(h=>h.source!==s&&h.target!==s))},j=i.utilityType==="CUSTOM_SCRIPT",d=()=>i.utilityType?i.utilityType.replace(/_/g," ").toLowerCase().split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" "):"";return e.jsxs("div",{className:"flex flex-col items-center relative",children:[i.showDeleteButton&&e.jsx(T,{variant:"ghost",size:"sm",onClick:o,className:"absolute -top-3 -right-3 h-5 w-5 p-0 bg-red-500 text-white rounded-full shadow-md hover:bg-red-600 z-10",title:"Delete node",children:e.jsx(Pe,{className:"h-3 w-3"})}),e.jsxs("div",{className:`relative min-w-28 h-14 rounded-lg bg-slate-800 border-2 flex items-center justify-center px-3 transition-all ${a?"border-amber-400 shadow-lg shadow-amber-500/30":"border-slate-500 hover:border-slate-400"}`,children:[e.jsx("div",{className:"absolute top-1 left-1",children:j?e.jsx(Kn,{className:"w-4 h-4 text-amber-400"}):e.jsx(Vn,{className:"w-4 h-4 text-amber-400"})}),e.jsx("span",{className:"text-xs font-medium text-slate-200 text-center leading-tight pt-2",children:i.label||d()||"Service Task"}),e.jsx(ie,{type:"target",position:le.Left,className:"w-2 h-2 bg-slate-400 border border-slate-800",style:{left:"-4px",top:"50%",transform:"translateY(-50%)"}}),e.jsx(ie,{type:"source",position:le.Right,className:"w-2 h-2 bg-slate-400 border border-slate-800",style:{right:"-4px",top:"50%",transform:"translateY(-50%)"}})]})]})},zn=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"none",stroke:"currentColor",strokeWidth:"3",children:[e.jsx("line",{x1:"7",y1:"7",x2:"17",y2:"17"}),e.jsx("line",{x1:"17",y1:"7",x2:"7",y2:"17"})]}),qn=({id:s,data:t,selected:a})=>{const{setNodes:r,setEdges:n}=Ns(),i=t||{label:"Gateway"},o=()=>{r(j=>j.filter(d=>d.id!==s)),n(j=>j.filter(d=>d.source!==s&&d.target!==s))};return e.jsxs("div",{className:"flex flex-col items-center relative",children:[i.showDeleteButton&&e.jsx(T,{variant:"ghost",size:"sm",onClick:o,className:"absolute -top-3 right-0 h-5 w-5 p-0 bg-red-500 text-white rounded-full shadow-md hover:bg-red-600 z-10",title:"Delete node",children:e.jsx(Pe,{className:"h-3 w-3"})}),e.jsx("div",{className:`w-11 h-11 bg-slate-800 border-2 flex items-center justify-center transition-all rotate-45 ${a?"border-amber-400 shadow-lg shadow-amber-500/30":"border-amber-500 hover:border-amber-400"}`,children:e.jsx(zn,{className:"w-5 h-5 text-amber-400 -rotate-45"})}),e.jsx("div",{className:"mt-3 text-xs font-medium text-slate-400 text-center max-w-20",children:i.label||"Gateway"}),e.jsx(ie,{type:"target",position:le.Left,className:"w-2 h-2 bg-amber-500 border border-slate-800",style:{left:"-2px",top:"22px"}}),e.jsx(ie,{type:"source",position:le.Right,id:"yes",className:"w-2 h-2 bg-green-500 border border-slate-800",style:{right:"-2px",top:"22px"}}),e.jsx(ie,{type:"source",position:le.Bottom,id:"no",className:"w-2 h-2 bg-red-500 border border-slate-800",style:{bottom:"14px",left:"50%",transform:"translateX(-50%)"}})]})},Bn=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"1"}),e.jsx("polyline",{points:"3,5 12,13 21,5"})]}),Hn=({data:s,selected:t})=>{const a=s||{label:"Start"};return e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:"target",position:le.Left,className:"w-2 h-2 bg-green-500 border border-slate-800",style:{left:"-4px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("div",{className:`w-12 h-12 rounded-full bg-slate-800 border flex items-center justify-center transition-all ${t?"border-2 border-green-400 shadow-lg shadow-green-500/30":"border-green-500 hover:border-green-400"}`,children:e.jsx(Bn,{className:"w-5 h-5 text-green-400"})}),e.jsx(ie,{type:"source",position:le.Right,className:"w-2 h-2 bg-green-500 border border-slate-800",style:{right:"-4px",top:"50%",transform:"translateY(-50%)"}})]}),e.jsx("div",{className:"mt-2 text-xs font-medium text-slate-400",children:a.label||"Start"})]})},Gn=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",stroke:"currentColor",strokeWidth:"0.5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"1"}),e.jsx("polyline",{points:"3,5 12,13 21,5",fill:"none",strokeWidth:"1.5"})]}),Wn=({data:s,selected:t})=>{const a=s||{label:"End"};return e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:"target",position:le.Left,className:"w-2 h-2 bg-red-500 border border-slate-800",style:{left:"-4px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("div",{className:`w-12 h-12 rounded-full bg-slate-800 border-[3px] flex items-center justify-center transition-all ${t?"border-red-400 shadow-lg shadow-red-500/30":"border-red-500 hover:border-red-400"}`,children:e.jsx(Gn,{className:"w-5 h-5 text-red-400"})}),e.jsx(ie,{type:"source",position:le.Right,className:"w-2 h-2 bg-red-500 border border-slate-800",style:{right:"-4px",top:"50%",transform:"translateY(-50%)"}})]}),e.jsx("div",{className:"mt-2 text-xs font-medium text-slate-400",children:a.label||"End"})]})},Yn=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"none",stroke:"currentColor",strokeWidth:"3",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Qn=({id:s,data:t,selected:a})=>{const{setNodes:r,setEdges:n}=Ns(),i=t||{label:"Parallel",parallelPaths:2},o=()=>{r(f=>f.filter(h=>h.id!==s)),n(f=>f.filter(h=>h.source!==s&&h.target!==s))},d=(()=>{const f=[],h=i.parallelPaths||2;if(h<=2)f.push({id:"out-1",top:"16px"},{id:"out-2",top:"28px"});else for(let E=0;E<h;E++){const w=10+E*12;f.push({id:`out-${E+1}`,top:`${w}px`})}return f.slice(0,h)})();return e.jsxs("div",{className:"flex flex-col items-center relative",children:[i.showDeleteButton&&e.jsx(T,{variant:"ghost",size:"sm",onClick:o,className:"absolute -top-3 right-0 h-5 w-5 p-0 bg-red-500 text-white rounded-full shadow-md hover:bg-red-600 z-10",title:"Delete node",children:e.jsx(Pe,{className:"h-3 w-3"})}),e.jsx("div",{className:`w-11 h-11 bg-slate-800 border-2 flex items-center justify-center transition-all rotate-45 ${a?"border-green-400 shadow-lg shadow-green-500/30":"border-green-500 hover:border-green-400"}`,children:e.jsx(Yn,{className:"w-5 h-5 text-green-400 -rotate-45"})}),e.jsx("div",{className:"mt-3 text-xs font-medium text-slate-400 text-center",children:i.label||"Parallel"}),e.jsx(ie,{type:"target",position:le.Left,className:"w-2 h-2 bg-green-500 border border-slate-800",style:{left:"-2px",top:"22px"}}),d.map((f,h)=>e.jsx(ie,{type:"source",position:le.Right,id:f.id,className:"w-2 h-2 bg-green-500 border border-slate-800",style:{right:"-2px",top:f.top}},f.id))]})},Jn=({className:s})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",stroke:"currentColor",strokeWidth:"0.5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"1"}),e.jsx("polyline",{points:"3,5 12,13 21,5",fill:"none",strokeWidth:"1.5"})]}),Xn=({data:s,selected:t})=>{const a=s||{label:"Message End"};return e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:"target",position:le.Left,className:"w-2 h-2 bg-blue-500 border border-slate-800",style:{left:"-4px",top:"50%",transform:"translateY(-50%)"}}),e.jsx("div",{className:`w-12 h-12 rounded-full bg-slate-800 border-[3px] flex items-center justify-center transition-all ${t?"border-blue-400 shadow-lg shadow-blue-500/30":"border-blue-500 hover:border-blue-400"}`,children:e.jsx(Jn,{className:"w-5 h-5 text-blue-400"})}),e.jsx(ie,{type:"source",position:le.Right,className:"w-2 h-2 bg-blue-500 border border-slate-800",style:{right:"-4px",top:"50%",transform:"translateY(-50%)"}})]}),e.jsx("div",{className:"mt-2 text-xs font-medium text-slate-400 text-center max-w-20",children:a.label||"Message End"})]})},Zn=({id:s,sourceX:t,sourceY:a,targetX:r,targetY:n,sourcePosition:i,targetPosition:o,data:j,selected:d,markerEnd:f})=>{const{setEdges:h}=Ns(),E=j||{},[w,k]=Ee.useState(!1),S=()=>{h(u=>u.filter(I=>I.id!==s))},[g,p,b]=ga({sourceX:t,sourceY:a,sourcePosition:i,targetX:r,targetY:n,targetPosition:o}),v=()=>{switch(E.condition){case"true":return"hsl(142, 76%, 36%)";case"false":return"hsl(0, 84%, 60%)";default:return"hsl(217, 91%, 60%)"}},L=()=>d?3:2;return e.jsxs(e.Fragment,{children:[e.jsx(ja,{path:g,markerEnd:f,style:{stroke:v(),strokeWidth:L(),strokeDasharray:"none"},onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1)}),e.jsx(fa,{children:e.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${p}px,${b}px)`,pointerEvents:"all"},className:"nodrag nopan",children:e.jsx("div",{className:"flex items-center",children:(d||w)&&e.jsx("button",{onClick:S,className:`w-6 h-6 bg-destructive text-white rounded-full flex items-center justify-center hover:bg-destructive/80 transition-all shadow-md z-10 ${d?"opacity-100 scale-110":"opacity-90 hover:opacity-100 hover:scale-105"}`,title:"Delete connection",children:e.jsx(Pe,{className:"h-3 w-3"})})})})})]})},hs=Ee.forwardRef(({className:s,orientation:t="horizontal",decorative:a=!0,...r},n)=>e.jsx(Zt,{ref:n,decorative:a,orientation:t,className:O("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r}));hs.displayName=Zt.displayName;const ei=Sr,_e=Cr,ze=Er,Ie=Ee.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(ea,{ref:r,sideOffset:t,className:O("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));Ie.displayName=ea.displayName;const si=({onSave:s,onExecute:t,onClear:a,onDelete:r,onExport:n,onImport:i,onToggleNodeSidebar:o,onAutoLayout:j,isNodeSidebarVisible:d=!1,readOnly:f=!1,canExecute:h=!0,canSave:E=!0,canDelete:w=!0,isExecuting:k=!1,isSaving:S=!1,className:g=""})=>e.jsx(ei,{children:e.jsxs("div",{className:`flex items-center space-x-2 p-3 bg-background border-b ${g}`,children:[!f&&e.jsxs(e.Fragment,{children:[e.jsxs(_e,{children:[e.jsx(ze,{asChild:!0,children:e.jsxs(T,{variant:"default",size:"sm",onClick:s,disabled:!E||S,className:"space-x-2",children:[e.jsx(Ge,{className:`h-4 w-4 ${S?"animate-pulse":""}`}),e.jsx("span",{children:S?"Saving...":"Save"})]})}),e.jsx(Ie,{children:e.jsx("p",{children:S?"Saving flow to database...":"Save flow configuration"})})]}),e.jsxs(_e,{children:[e.jsx(ze,{asChild:!0,children:e.jsxs(T,{variant:"outline",size:"sm",onClick:t,disabled:!h||k,className:"space-x-2",children:[e.jsx(Me,{className:`h-4 w-4 ${k?"animate-pulse":""}`}),e.jsx("span",{children:k?"Executing...":"Execute"})]})}),e.jsx(Ie,{children:e.jsx("p",{children:"Execute flow with current configuration"})})]}),e.jsx(hs,{orientation:"vertical",className:"h-6"})]}),e.jsxs(_e,{children:[e.jsx(ze,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"sm",onClick:o,children:d?e.jsx(bs,{className:"h-4 w-4"}):e.jsx(Se,{className:"h-4 w-4"})})}),e.jsx(Ie,{children:e.jsxs("p",{children:[d?"Hide":"Show"," node panel"]})})]}),!f&&e.jsxs(_e,{children:[e.jsx(ze,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"sm",onClick:j,children:e.jsx(Ya,{className:"h-4 w-4"})})}),e.jsx(Ie,{children:e.jsx("p",{children:"Auto-arrange flow layout"})})]}),e.jsx(hs,{orientation:"vertical",className:"h-6"}),e.jsxs(_e,{children:[e.jsx(ze,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(ke,{className:"h-4 w-4"})})}),e.jsx(Ie,{children:e.jsx("p",{children:"Export flow"})})]}),!f&&e.jsxs(_e,{children:[e.jsx(ze,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(ls,{className:"h-4 w-4"})})}),e.jsx(Ie,{children:e.jsx("p",{children:"Import flow"})})]}),e.jsx(hs,{orientation:"vertical",className:"h-6"}),!f&&e.jsxs(e.Fragment,{children:[e.jsxs(_e,{children:[e.jsx(ze,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(Ws,{className:"h-4 w-4"})})}),e.jsx(Ie,{children:e.jsx("p",{children:"Clear canvas"})})]}),e.jsxs(_e,{children:[e.jsx(ze,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"sm",onClick:r,disabled:!w,className:"text-destructive hover:text-destructive",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsx(Ie,{children:e.jsx("p",{children:"Delete flow"})})]})]})]})}),ti=Tr,ai=Fr,ri=Ar,ni=({onNodeAdd:s,className:t=""})=>{const[a,r]=N.useState(["adapters","gateways","utilities"]),n=[{id:"sender-adapter",type:"adapter",label:"Sender Adapter",icon:ke,category:"adapters",description:"Configure sender adapter type (File, SFTP)",data:{label:"Sender Adapter",adapterType:null,direction:"SENDER",availableTypes:["FILE","SFTP"]}},{id:"receiver-adapter",type:"adapter",label:"Receiver Adapter",icon:ls,category:"adapters",description:"Configure receiver adapter type (File, SFTP, Email)",data:{label:"Receiver Adapter",adapterType:null,direction:"RECEIVER",availableTypes:["FILE","SFTP","EMAIL"]}},{id:"start-node",type:"start",label:"Start Event",icon:Me,category:"events",description:"BPMN message start event",data:{label:"Start",eventType:"message"}},{id:"end-node",type:"end",label:"End Event",icon:te,category:"events",description:"BPMN message end event",data:{label:"End",eventType:"message"}},{id:"message-end-node",type:"messageEnd",label:"Message End",icon:is,category:"events",description:"Throw message end event",data:{label:"Message End",eventType:"MESSAGE_END",messagePayload:""}},{id:"decision-node",type:"decision",label:"Exclusive Gateway",icon:_s,category:"gateways",description:"BPMN XOR gateway - conditional branching",data:{label:"Gateway",conditionType:"ALWAYS_TRUE",condition:"true"}},{id:"parallel-split-node",type:"parallelSplit",label:"Parallel Gateway",icon:Qa,category:"gateways",description:"BPMN AND gateway - parallel execution",data:{label:"Parallel",parallelPaths:2}},{id:"pgp-encrypt",type:"utility",label:"PGP Encrypt",icon:Xe,category:"utilities",description:"Encrypt files with PGP",data:{label:"PGP Encrypt",utilityType:"PGP_ENCRYPT",configuration:{algorithm:"RSA-4096"}}},{id:"pgp-decrypt",type:"utility",label:"PGP Decrypt",icon:Ja,category:"utilities",description:"Decrypt files with PGP",data:{label:"PGP Decrypt",utilityType:"PGP_DECRYPT",configuration:{algorithm:"RSA-4096"}}},{id:"unzip-extract",type:"utility",label:"Unzip",icon:Xa,category:"utilities",description:"Extract files from ZIP archives",data:{label:"Unzip",utilityType:"ZIP_EXTRACT",configuration:{extractToDirectory:"",preserveStructure:!0}}}],i=[{id:"adapters",label:"Adapters",color:"bg-blue-500/20 text-blue-400"},{id:"events",label:"Events",color:"bg-green-500/20 text-green-400"},{id:"gateways",label:"Gateways",color:"bg-amber-500/20 text-amber-400"},{id:"utilities",label:"Service Tasks",color:"bg-purple-500/20 text-purple-400"}],o=f=>{r(h=>h.includes(f)?h.filter(E=>E!==f):[...h,f])},j=(f,h)=>{f.dataTransfer.setData("application/reactflow",JSON.stringify({nodeType:h.type,nodeData:h.data})),f.dataTransfer.effectAllowed="move"},d=f=>{s&&s(f.type,f.data)};return e.jsxs("div",{className:`w-80 bg-slate-900 border-r border-slate-700 flex flex-col ${t}`,children:[e.jsxs("div",{className:"p-4 border-b border-slate-700",children:[e.jsx("h3",{className:"font-semibold text-lg text-slate-100",children:"BPMN Elements"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Drag nodes to the canvas or click to add"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:i.map(f=>{const h=n.filter(w=>w.category===f.id),E=a.includes(f.id);return e.jsx(M,{className:"bg-slate-800 border-slate-700",children:e.jsxs(ti,{open:E,onOpenChange:()=>o(f.id),children:[e.jsx(ai,{asChild:!0,children:e.jsx(Y,{className:"py-2 px-3 cursor-pointer hover:bg-slate-700/50 transition-colors",children:e.jsxs(Q,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{variant:"secondary",className:f.color,children:h.length}),e.jsx("span",{className:"text-slate-200",children:f.label})]}),E?e.jsx(Hs,{className:"h-4 w-4 text-slate-400"}):e.jsx(js,{className:"h-4 w-4 text-slate-400"})]})})}),e.jsx(ri,{children:e.jsx(U,{className:"pt-0 px-2 pb-2 space-y-1",children:h.map(w=>{const k=w.icon;return e.jsx("div",{draggable:!0,onDragStart:S=>j(S,w),className:"group p-2 border border-slate-600 rounded-lg cursor-grab active:cursor-grabbing hover:bg-slate-700/50 hover:border-slate-500 transition-all",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-7 h-7 bg-slate-700 rounded flex items-center justify-center flex-shrink-0",children:e.jsx(k,{className:"h-4 w-4 text-slate-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-xs text-slate-200 truncate",children:w.label}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>d(w),className:"opacity-0 group-hover:opacity-100 transition-opacity h-5 w-5 p-0 text-slate-400 hover:text-slate-200",children:e.jsx(je,{className:"h-3 w-3"})})]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5 leading-tight",children:w.description})]})]})},w.id)})})})]})},f.id)})}),e.jsx("div",{className:"p-3 border-t border-slate-700 bg-slate-800/50",children:e.jsx("p",{className:"text-[10px] text-slate-500 text-center",children:"Drag nodes to canvas or click + to add"})})]})},ii=({selectedNode:s,onNodeUpdate:t,onClose:a,className:r=""})=>{const[n,i]=N.useState({}),{data:o}=ee({queryKey:["interfaces"],queryFn:qr.getAllInterfaces}),j=(o==null?void 0:o.data)||[];N.useEffect(()=>{s&&i({label:s.data.label||"",adapterType:s.data.adapterType||null,direction:s.data.direction||"",adapterId:s.data.adapterId||"",configuration:s.data.configuration||{},inboundAdapter:s.data.inboundAdapter||"",...s.data})},[s]);const d=()=>{s&&(t(s.id,n),a())},f=(S,g)=>{i(p=>({...p,[S]:g}))},h=()=>{if((s==null?void 0:s.type)==="start")return ae;if((s==null?void 0:s.type)==="end")return ae;if((s==null?void 0:s.type)==="messageEnd")return is;if((s==null?void 0:s.type)==="decision")return ae;if((s==null?void 0:s.type)==="utility")return ae;switch(n.adapterType){case"FILE":return n.direction==="SENDER"?Za:er;case"SFTP":return Ps;case"EMAIL":return is;default:return ae}},E=()=>n.direction?j.filter(S=>{const g=S.direction===n.direction;return n.adapterType&&n.adapterType!=="null"?g&&S.adapterType===n.adapterType:g}):[];if(!s)return e.jsx("div",{className:`w-80 bg-background border-l flex flex-col ${r}`,children:e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Properties"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a node to configure its properties"})]})});const w=h(),k=E();return e.jsxs("div",{className:`w-80 bg-background border-l flex flex-col ${r}`,children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-lg flex items-center justify-center",children:e.jsx(w,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Node Properties"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.type==="start"?"Start Process Configuration":s.type==="end"?"End Process Configuration":s.type==="messageEnd"?"Message End Configuration":s.type==="adapter"?"Adapter Configuration":"Node Configuration"})]})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(Pe,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs(M,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm",children:"Basic Properties"})}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"node-label",children:"Label"}),e.jsx(D,{id:"node-label",value:n.label||"",onChange:S=>f("label",S.target.value),placeholder:"Enter node label",className:"text-sm"})]}),s.type==="start"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Node Type"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-muted/20 p-2 rounded",children:"Start Event - System node that initiates the flow process"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a system node and cannot be configured. Use adapter nodes to connect external systems."})]}),s.type==="end"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Node Type"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-muted/20 p-2 rounded",children:"End Event - System node that terminates the flow process"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a system node and cannot be configured. Use adapter nodes to connect external systems."})]}),s.type==="messageEnd"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Node Type"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-muted/20 p-2 rounded",children:"Message End Event - System node for message-based flow termination"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a system node and cannot be configured. Use adapter nodes to connect external systems."})]}),s.type==="adapter"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Adapter Type"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-muted/20 p-2 rounded",children:n.adapterType&&n.adapterType!==null&&n.adapterType!==""?`${n.adapterType} ${n.direction}`:`${n.direction} (Select adapter instance to set type)`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"adapter-instance",children:"Adapter Instance"}),e.jsxs(K,{value:n.adapterId||"",onValueChange:S=>{const g=j.find(b=>b.id===S),p={adapterId:S,...g&&{label:g.name,adapterType:g.adapterType,configuration:g.configuration}};i(b=>({...b,...p})),s&&t(s.id,p)},children:[e.jsx($,{className:"w-full",children:e.jsx(_,{placeholder:"Select adapter instance"})}),e.jsx(V,{children:k.map(S=>e.jsxs(x,{value:S.id,children:[S.name," - ",S.adapterType," (",S.bank||"No Bank",")"]},S.id))})]}),k.length===0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["No ",n.direction," adapters available. Create one in Adapter Configuration first."]})]})]})]})]}),n.configuration&&Object.keys(n.configuration).length>0&&e.jsxs(M,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm",children:"Configuration Summary"})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-2 text-sm overflow-hidden",children:[n.adapterType==="FILE"&&e.jsxs(e.Fragment,{children:[n.configuration.sourceDirectory&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Source:"}),e.jsx("span",{className:"font-mono text-xs truncate",title:n.configuration.sourceDirectory,children:n.configuration.sourceDirectory})]}),n.configuration.targetDirectory&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Target:"}),e.jsx("span",{className:"font-mono text-xs truncate",title:n.configuration.targetDirectory,children:n.configuration.targetDirectory})]}),n.configuration.filePattern&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Pattern:"}),e.jsx("span",{className:"font-mono text-xs truncate",children:n.configuration.filePattern})]})]}),n.adapterType==="SFTP"&&e.jsxs(e.Fragment,{children:[n.configuration.host&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Host:"}),e.jsxs("span",{className:"font-mono text-xs truncate",children:[n.configuration.host,":",n.configuration.port]})]}),n.configuration.remoteDirectory&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remote Dir:"}),e.jsx("span",{className:"font-mono text-xs truncate",title:n.configuration.remoteDirectory,children:n.configuration.remoteDirectory})]})]}),n.adapterType==="EMAIL"&&e.jsxs(e.Fragment,{children:[n.configuration.smtpHost&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"SMTP:"}),e.jsxs("span",{className:"font-mono text-xs truncate",children:[n.configuration.smtpHost,":",n.configuration.smtpPort]})]}),n.configuration.recipients&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-muted-foreground",children:"Recipients:"}),e.jsx("span",{className:"font-mono text-xs truncate",title:Array.isArray(n.configuration.recipients)?n.configuration.recipients.join(", "):String(n.configuration.recipients),children:Array.isArray(n.configuration.recipients)?n.configuration.recipients.join(", "):String(n.configuration.recipients)})]})]})]})})]}),s.type==="decision"&&e.jsxs(M,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm",children:"Decision Logic"})}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"condition-type",children:"Condition Type"}),e.jsxs(K,{value:n.conditionType||"ALWAYS_TRUE",onValueChange:S=>f("conditionType",S),children:[e.jsx($,{className:"w-full",children:e.jsx(_,{placeholder:"Select condition type"})}),e.jsxs(V,{children:[e.jsx(x,{value:"ALWAYS_TRUE",children:"Always True"}),e.jsx(x,{value:"FILE_EXISTS",children:"File Exists"}),e.jsx(x,{value:"FILE_SIZE",children:"File Size Check"}),e.jsx(x,{value:"CUSTOM",children:"Custom Expression"})]})]})]}),n.conditionType==="CUSTOM"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"condition",children:"Condition Expression"}),e.jsx(D,{id:"condition",value:n.condition||"",onChange:S=>f("condition",S.target.value),placeholder:"Enter condition expression",className:"text-sm font-mono"})]})]})]}),s.type==="utility"&&e.jsxs(M,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(Q,{className:"text-sm",children:"Utility Configuration"})}),e.jsx(U,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Utility Type"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-muted/20 p-2 rounded",children:n.utilityType})]})})]})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{onClick:d,size:"sm",className:"flex-1",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Save Changes"]}),e.jsx(T,{variant:"outline",onClick:a,size:"sm",children:"Cancel"})]})})]})},li={direction:"LR",nodeWidth:180,nodeHeight:80,rankSeparation:120,nodeSeparation:80},ci={start:{width:120,height:60},end:{width:120,height:60},messageEnd:{width:140,height:60},adapter:{width:200,height:100},utility:{width:160,height:80},decision:{width:140,height:80},parallelSplit:{width:160,height:80}};function xa(s,t,a={}){const r={...li,...a},n=new tt.graphlib.Graph;return n.setDefaultEdgeLabel(()=>({})),n.setGraph({rankdir:r.direction,ranksep:r.rankSeparation,nodesep:r.nodeSeparation,marginx:40,marginy:40}),s.forEach(o=>{const j=ci[o.type||"default"]||{width:r.nodeWidth,height:r.nodeHeight};n.setNode(o.id,{width:j.width,height:j.height})}),t.forEach(o=>{n.setEdge(o.source,o.target)}),tt.layout(n),{nodes:s.map(o=>{const j=n.node(o.id);return{...o,position:{x:j.x-j.width/2,y:j.y-j.height/2},data:{...o.data,computedWidth:j.width,computedHeight:j.height}}}),edges:t}}function gt(s,t){return xa(s,t,{direction:"LR",rankSeparation:120,nodeSeparation:80})}function oi(s,t){return xa(s,t,{direction:"LR",nodeWidth:140,nodeHeight:60,rankSeparation:80,nodeSeparation:40})}function di(s,t){const a=s.length,r=t.length;return a<=6&&r<=a+2?gt(s,t):a>10?oi(s,t):gt(s,t)}const xi={start:Hn,end:Wn,messageEnd:Xn,adapter:$n,utility:_n,decision:qn,parallelSplit:Qn},mi={flow:Zn},jt=[{id:"start-event-1",type:"start",position:{x:100,y:120},data:{label:"Start",eventType:"message",inboundAdapter:"",showDeleteButton:!1}},{id:"end-event-1",type:"end",position:{x:400,y:120},data:{label:"End",eventType:"message",adapterType:"end-process",adapterId:"",showDeleteButton:!1}}],Qe="#3b82f6",ui="#60a5fa",ft=[{id:"flow-start-to-end",source:"start-event-1",target:"end-event-1",type:"flow",markerEnd:{type:"arrowclosed",color:Qe},style:{stroke:Qe,strokeWidth:1.5}}],hi=({flowData:s,onFlowChange:t,onSave:a,onExecute:r,readOnly:n=!1,className:i="",isSaving:o=!1})=>{var Xs,Zs;const[j,d,f]=ya((Xs=s==null?void 0:s.nodes)!=null&&Xs.length?s.nodes:jt),[h,E,w]=va((Zs=s==null?void 0:s.edges)!=null&&Zs.length?s.edges:ft),[k,S]=N.useState(null),[g,p]=N.useState(null),[b,v]=N.useState(!1),[L,u]=N.useState(!1),[I,c]=N.useState(null),l=N.useRef(null),[m,C]=N.useState(null),F=N.useCallback(q=>{var we,as,et,st;const H=j.find(Os=>Os.id===q.source),W=j.find(Os=>Os.id===q.target);return!H||!W||q.source===q.target?!1:H.type==="adapter"&&((we=H.data)==null?void 0:we.direction)==="SENDER"?W.type==="start":H.type==="start"?W.type==="utility"||W.type==="decision"||W.type==="parallelSplit"||W.type==="end"||W.type==="messageEnd":H.type==="end"?W.type==="adapter"&&((as=W.data)==null?void 0:as.direction)==="RECEIVER":H.type==="messageEnd"?W.type==="adapter"&&((et=W.data)==null?void 0:et.direction)==="RECEIVER":H.type==="utility"||H.type==="decision"||H.type==="parallelSplit"?W.type==="utility"||W.type==="decision"||W.type==="parallelSplit"||W.type==="end"||W.type==="messageEnd":!(H.type==="adapter"&&((st=H.data)==null?void 0:st.direction)==="RECEIVER")},[j]),R=N.useCallback(q=>{if(F(q)){const H={...q,type:"flow",markerEnd:{type:"arrowclosed",color:Qe},style:{stroke:Qe,strokeWidth:2,strokeDasharray:"none"}};E(W=>Na(H,W))}},[E,F]),z=N.useCallback((q,H)=>{F(H)&&E(W=>ba(q,H,W))},[E,F]),A=N.useCallback((q,H)=>{n||(["start","end","messageEnd"].includes(H.type||"")?(S(null),p(null),u(!1),c(null)):(S(H),p(null),u(!0),v(!1),c(H.id),setTimeout(()=>c(null),3e3)))},[n]),Z=N.useCallback((q,H)=>{n||(p(H),S(null),c(null),u(!1),v(!1))},[n]),fe=N.useCallback(()=>{n||(S(null),p(null),c(null),u(!1))},[n]),ye=N.useCallback(q=>{q.preventDefault(),q.dataTransfer.dropEffect="move"},[]),Ke=N.useCallback(q=>{if(q.preventDefault(),!!m)try{const H=JSON.parse(q.dataTransfer.getData("application/reactflow")),W=m.screenToFlowPosition({x:q.clientX,y:q.clientY}),we={id:`${H.nodeType}-${Date.now()}`,type:H.nodeType,position:W,data:H.nodeData};d(as=>as.concat(we))}catch(H){console.error("Error parsing dropped node data:",H)}},[d,m]),B=N.useCallback(()=>{if(k){if(["start","end","messageEnd"].includes(k.type||"")){console.warn("System nodes cannot be deleted");return}d(H=>H.filter(W=>W.id!==k.id)),E(H=>H.filter(W=>W.source!==k.id&&W.target!==k.id)),S(null)}else g&&(E(q=>q.filter(H=>H.id!==g.id)),p(null))},[k,g,d,E]),J=N.useCallback(()=>{d(jt),E(ft),S(null)},[d,E]),ne=N.useCallback(()=>{const q={id:(s==null?void 0:s.id)||`flow-${Date.now()}`,name:(s==null?void 0:s.name)||"Untitled Flow",description:(s==null?void 0:s.description)||"",nodes:j,edges:h,active:(s==null?void 0:s.active)||!0};a==null||a(q),t==null||t(q)},[s,j,h,a,t]),Ss=N.useCallback(()=>{const q={id:(s==null?void 0:s.id)||`flow-${Date.now()}`,name:(s==null?void 0:s.name)||"Untitled Flow",description:(s==null?void 0:s.description)||"",nodes:j,edges:h,active:(s==null?void 0:s.active)||!0};r==null||r(q)},[s,j,h,r]),Cs=N.useCallback((q,H)=>{const W={x:250,y:200},we={id:`${q}-${Date.now()}`,type:q,position:W,data:H};d(as=>as.concat(we))},[d]),Es=N.useCallback((q,H)=>{d(W=>W.map(we=>we.id===q?{...we,data:{...we.data,...H}}:we)),S(null),u(!1)},[d]),De=N.useCallback(()=>{const{nodes:q,edges:H}=di(j,h);d(q),E(H)},[j,h,d,E]),ua=N.useCallback(()=>{S(null),u(!1)},[]);return Ee.useEffect(()=>{const q=H=>{!n&&H.key==="Delete"&&(k||g)&&(H.preventDefault(),B())};return window.addEventListener("keydown",q),()=>{window.removeEventListener("keydown",q)}},[k,g,B,n]),Ee.useEffect(()=>{if(t){const q={id:(s==null?void 0:s.id)||`flow-${Date.now()}`,name:(s==null?void 0:s.name)||"Untitled Flow",description:(s==null?void 0:s.description)||"",nodes:j,edges:h,active:(s==null?void 0:s.active)||!0};t(q)}},[j,h,s,t]),e.jsxs("div",{className:`flex h-full ${i}`,children:[!n&&b&&e.jsx(ni,{onNodeAdd:Cs}),!n&&L&&e.jsx(ii,{selectedNode:k,onNodeUpdate:Es,onClose:ua}),e.jsx("div",{className:"flex-1 relative",ref:l,children:e.jsxs(wa,{nodes:j.map(q=>({...q,data:{...q.data,showDeleteButton:I===q.id}})),edges:h.map(q=>{var H,W;return{...q,style:{...q.style,stroke:(g==null?void 0:g.id)===q.id?ui:((H=q.style)==null?void 0:H.stroke)||Qe,strokeWidth:(g==null?void 0:g.id)===q.id?3:((W=q.style)==null?void 0:W.strokeWidth)||2}}}),onNodesChange:f,onEdgesChange:w,onConnect:R,onReconnect:z,isValidConnection:F,onNodeClick:A,onEdgeClick:Z,onPaneClick:fe,onDrop:Ke,onDragOver:ye,onInit:C,nodeTypes:xi,edgeTypes:mi,connectionMode:Sa.Strict,fitView:!0,fitViewOptions:{padding:.4,includeHiddenNodes:!1,minZoom:.8,maxZoom:1.5},defaultViewport:{x:0,y:0,zoom:1},className:"bg-slate-900",snapToGrid:!0,snapGrid:[20,20],deleteKeyCode:"Delete",multiSelectionKeyCode:"Control",defaultEdgeOptions:{type:"flow",markerEnd:{type:"arrowclosed",color:Qe},style:{stroke:Qe,strokeWidth:1.5,strokeDasharray:"none"}},children:[e.jsx(Ca,{color:"#334155",gap:20,size:1}),e.jsx(Ea,{className:"bg-slate-800 border border-slate-700 rounded shadow-lg [&>button]:bg-slate-800 [&>button]:border-slate-700 [&>button]:text-slate-300 [&>button:hover]:bg-slate-700"}),e.jsx(Ta,{className:"bg-slate-800 border border-slate-700 rounded shadow-lg",nodeColor:q=>{switch(q.type){case"start":return"#1e293b";case"end":return"#1e293b";case"messageEnd":return"#1e293b";case"adapter":return"#1e293b";case"utility":return"#1e293b";case"decision":return"#1e293b";case"parallelSplit":return"#1e293b";default:return"#1e293b"}}}),!n&&e.jsx(at,{position:"top-left",children:e.jsx(si,{onSave:ne,onExecute:Ss,onClear:J,onDelete:B,onAutoLayout:De,onToggleNodeSidebar:()=>{v(!b),b||(u(!1),S(null))},isNodeSidebarVisible:b,canSave:!0,canExecute:j.length>0,canDelete:!!k||!!g,isSaving:o})}),e.jsx(at,{position:"top-right",className:"bg-card border border-border rounded-md p-2",children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("div",{className:"font-medium text-foreground",children:(s==null?void 0:s.name)||"Untitled Flow"}),(s==null?void 0:s.description)&&e.jsx("div",{className:"text-muted-foreground text-xs",children:s.description}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.length," nodes, ",h.length," connections"]})]})})]})})]})},yt=()=>{const{id:s}=qs(),t=$e(),[a]=St(),r=a.get("mode")==="view",[n,i]=N.useState(null),[o,j]=N.useState(!1),[d,f]=N.useState(!1),[h,E]=N.useState(!1),[w,k]=N.useState(!1),[S,g]=N.useState(""),[p,b]=N.useState(""),[v,L]=N.useState("");wn(m=>{s&&m.flowId===s&&(m.validation.valid?m.validation.warnings.length>0?ge.warning(`Flow validation warnings: ${m.validation.warnings.join(", ")}`):ge.success("Flow validation passed"):ge.error(`Flow validation failed: ${m.validation.errors.join(", ")}`))}),N.useEffect(()=>{(async()=>{var C,F;if(s){j(!0);try{const z=(await ue.getFlowById(s)).data;i({id:z.id,name:z.name,description:z.description||"",nodes:((C=z.flowDefinition)==null?void 0:C.nodes)||[],edges:((F=z.flowDefinition)==null?void 0:F.edges)||[],active:z.active}),g(z.name),b(z.description||""),L(z.bankName||"")}catch(R){console.error("Failed to load flow:",R),ge.error("Failed to load flow"),t("/flows")}finally{j(!1)}}else i({id:`flow-${Date.now()}`,name:"",description:"",nodes:[],edges:[],active:!0}),g(""),b(""),L("")})()},[s,t]);const u=m=>{i(m)},I=async m=>{var C,F;if(!S.trim()){ge.error("Flow Name is required");return}if(!v.trim()){ge.error("Bank Name is required");return}f(!0);try{const R={name:S.trim(),description:p.trim(),bankName:v.trim(),flowDefinition:{nodes:m.nodes,edges:m.edges},active:m.active};if(s)await ue.updateFlow(s,R),ge.success("Flow updated successfully"),t("/flows");else{const A=(await ue.createFlow(R)).data;i(Z=>Z?{...Z,id:A.id}:null),ge.success("Flow created successfully"),t("/flows")}}catch(R){console.error("Failed to save flow:",R);const z=((F=(C=R.response)==null?void 0:C.data)==null?void 0:F.message)||R.message||"Failed to save flow";ge.error("Cannot Save Flow",{description:z})}finally{f(!1)}},c=async m=>{if(!s){ge.error("Please save the flow before executing");return}E(!0);try{await ue.executeFlow(s),ge.success("Flow execution started")}catch(C){console.error("Failed to execute flow:",C),ge.error("Failed to execute flow")}finally{E(!1)}},l=()=>{n&&(i({...n,name:S,description:p,bankName:v}),k(!1),ge.success("Flow settings updated"))};return o?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading flow..."})]})}):e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"border-b bg-background relative z-10 shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>t("/flows"),className:"space-x-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Flows"})]}),e.jsx("h1",{className:"text-xl font-semibold text-foreground",children:r?"View Visual Flow":s?"Edit Visual Flow":"Create Visual Flow"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Us,{size:"sm"}),!r&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>k(!0),className:"space-x-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>t("/flows"),className:"space-x-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Cancel"})]})]})]}),e.jsx("div",{className:"px-4 py-4 bg-muted/50 border-t border-border",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 max-w-4xl",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-foreground block mb-1",children:["Flow Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:S,onChange:m=>!r&&g(m.target.value),placeholder:"Enter flow name",readOnly:r,required:!0,className:`w-full px-3 py-2 border rounded-md text-foreground placeholder:text-muted-foreground ${!S.trim()&&!r?"border-red-500":"border-input"} ${r?"bg-muted/50 cursor-default":"bg-background focus:outline-none focus:ring-2 focus:ring-ring"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground block mb-1",children:"Description"}),e.jsx("input",{type:"text",value:p,onChange:m=>!r&&b(m.target.value),placeholder:"Enter description",readOnly:r,className:`w-full px-3 py-2 border border-input rounded-md text-foreground placeholder:text-muted-foreground ${r?"bg-muted/50 cursor-default":"bg-background focus:outline-none focus:ring-2 focus:ring-ring"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-foreground block mb-1",children:["Bank Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:v,onChange:m=>!r&&L(m.target.value),placeholder:"Enter bank name",readOnly:r,required:!0,className:`w-full px-3 py-2 border rounded-md text-foreground placeholder:text-muted-foreground ${!v.trim()&&!r?"border-red-500":"border-input"} ${r?"bg-muted/50 cursor-default":"bg-background focus:outline-none focus:ring-2 focus:ring-ring"}`})]})]})})]}),e.jsx("div",{className:"flex-1 min-h-0 relative",children:n&&e.jsx(hi,{flowData:n,onFlowChange:u,onSave:I,onExecute:c,readOnly:r,className:"h-full"})}),e.jsx(cs,{open:w,onOpenChange:k,children:e.jsxs(Ze,{children:[e.jsxs(es,{children:[e.jsx(ss,{children:"Flow Settings"}),e.jsx(vs,{children:"Configure the basic settings for your flow"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"flow-name",children:"Name"}),e.jsx(D,{id:"flow-name",value:S,onChange:m=>g(m.target.value),placeholder:"Enter flow name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"flow-description",children:"Description"}),e.jsx(D,{id:"flow-description",value:p,onChange:m=>b(m.target.value),placeholder:"Enter flow description (optional)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"bank-name",children:"Bank Name"}),e.jsx(D,{id:"bank-name",value:v,onChange:m=>L(m.target.value),placeholder:"Enter bank name"})]})]}),e.jsxs(Ms,{children:[e.jsx(T,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(T,{onClick:l,children:"Save Settings"})]})]})}),(d||h)&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:d?"Saving flow...":"Executing flow..."})]})})]})},pi=()=>{const{success:s,error:t}=xe(),a=be(),r=$e(),[n,i]=N.useState("all"),[o,j]=N.useState("all"),[d,f]=N.useState(null),[h,E]=N.useState(new Set),[w,k]=N.useState(new Set),{data:S,isLoading:g}=ee({queryKey:["adapters-monitoring"],queryFn:()=>me.getAllAdapters(),refetchInterval:5e3}),{data:p}=ee({queryKey:["adapter-execution-history",d],queryFn:()=>d?me.getAdapterExecutionHistory(d,{limit:5}):null,enabled:!!d,refetchInterval:5e3}),b=(S==null?void 0:S.data)||[],v=p==null?void 0:p.data,L=X({mutationFn:l=>me.startAdapter(l),onMutate:async l=>{await a.cancelQueries({queryKey:["adapters-monitoring"]}),E(C=>new Set(C).add(l));const m=a.getQueryData(["adapters-monitoring"]);return a.setQueryData(["adapters-monitoring"],C=>{if(!C)return C;const F={...C},R=Array.isArray(C.data)?C.data:[];return F.data=R.map(z=>z.id===l?{...z,status:"STARTING"}:z),F}),{previous:m,adapterId:l}},onSuccess:()=>{s("Adapter Started","Adapter started successfully")},onError:(l,m,C)=>{var F,R;C!=null&&C.previous&&a.setQueryData(["adapters-monitoring"],C.previous),t("Start Failed",((R=(F=l.response)==null?void 0:F.data)==null?void 0:R.message)||"Failed to start adapter")},onSettled:(l,m,C)=>{E(F=>{const R=new Set(F);return R.delete(C),R}),a.invalidateQueries({queryKey:["adapters-monitoring"]})}}),u=X({mutationFn:l=>me.stopAdapter(l),onMutate:async l=>{await a.cancelQueries({queryKey:["adapters-monitoring"]}),k(C=>new Set(C).add(l));const m=a.getQueryData(["adapters-monitoring"]);return a.setQueryData(["adapters-monitoring"],C=>{if(!C)return C;const F={...C},R=Array.isArray(C.data)?C.data:[];return F.data=R.map(z=>z.id===l?{...z,status:"STOPPING"}:z),F}),{previous:m,adapterId:l}},onSuccess:()=>{s("Adapter Stopped","Adapter stopped successfully")},onError:(l,m,C)=>{var F,R;C!=null&&C.previous&&a.setQueryData(["adapters-monitoring"],C.previous),t("Stop Failed",((R=(F=l.response)==null?void 0:F.data)==null?void 0:R.message)||"Failed to stop adapter")},onSettled:(l,m,C)=>{k(F=>{const R=new Set(F);return R.delete(C),R}),a.invalidateQueries({queryKey:["adapters-monitoring"]})}}),I=(l,m)=>m>0?"bg-red-500":l==="STARTED"?"bg-green-500":"bg-gray-400",c=b.filter(l=>{const m=n==="all"||l.status===n,C=o==="all"||l.adapterType===o;return m&&C});return g?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading adapter monitoring..."})]})})}):e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Adapter Monitoring"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and control adapter status, performance, and logs"})]}),e.jsxs(T,{variant:"outline",onClick:()=>a.invalidateQueries({queryKey:["adapters-monitoring"]}),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ne,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Adapters"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:b.length})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Started"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:b.filter(l=>l.status==="STARTED").length})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ks,{className:"h-8 w-8 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stopped"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:b.filter(l=>l.status==="STOPPED").length})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Errors"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:b.filter(l=>{var m;return(((m=l.configuration)==null?void 0:m.errorCount)||0)>0}).length})]})]})})})]}),e.jsxs(M,{className:"app-card border mb-6",children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-foreground",children:"Adapter Filters"})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsxs(K,{value:n,onValueChange:i,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"all",children:"All Statuses"}),e.jsx(x,{value:"STARTED",children:"Started"}),e.jsx(x,{value:"STOPPED",children:"Stopped"}),e.jsx(x,{value:"STARTING",children:"Starting"}),e.jsx(x,{value:"STOPPING",children:"Stopping"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),e.jsxs(K,{value:o,onValueChange:j,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"all",children:"All Types"}),e.jsx(x,{value:"FILE",children:"File"}),e.jsx(x,{value:"SFTP",children:"SFTP"}),e.jsx(x,{value:"EMAIL",children:"Email"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Search"}),e.jsx(D,{placeholder:"Search adapters...",value:"",onChange:()=>{}})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8",children:c.map(l=>{var m,C,F,R;return e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-border"}),e.jsx("div",{className:O("h-3 w-3 rounded-full",I(l.status,((m=l.configuration)==null?void 0:m.errorCount)||0))}),e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg text-foreground",children:l.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.adapterType," • ",l.direction]})]})]})}),e.jsxs(U,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Executions:"}),e.jsx("span",{className:"ml-2 text-foreground",children:((C=l.configuration)==null?void 0:C.executionCount)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Run:"}),e.jsx("span",{className:"ml-2 text-foreground",children:(F=l.configuration)!=null&&F.lastExecution?new Date(l.configuration.lastExecution).toLocaleString():"Never"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Active:"}),e.jsx("span",{className:"ml-2 text-foreground",children:l.active?"Yes":"No"})]})]}),((R=l.configuration)==null?void 0:R.lastError)&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-700 mb-1",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Last Error"})]}),e.jsx("p",{className:"text-sm text-red-600",children:l.configuration.lastError})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-1",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>L.mutate(l.id),disabled:h.has(l.id)||l.status==="STARTED"||l.status==="STARTING",children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Start"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>u.mutate(l.id),disabled:w.has(l.id)||h.has(l.id)||l.status==="STOPPED"||l.status==="STOPPING",children:[e.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Stop"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>f(d===l.id?null:l.id),className:d===l.id?"bg-primary/10 border-primary":"",children:[e.jsx(Vs,{className:"h-4 w-4 mr-1"}),"Logs"]})]}),d===l.id&&v&&e.jsxs("div",{className:"mt-4 p-4 bg-secondary/20 border border-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Vs,{className:"h-4 w-4 text-primary"}),e.jsx("h4",{className:"font-medium text-foreground",children:"Recent Executions"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",v.recentExecutionsShown," of ",v.totalExecutions,")"]})]}),v.executions&&v.executions.length>0?e.jsx("div",{className:"space-y-2",children:v.executions.map(z=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded border hover:bg-secondary/30 transition-colors cursor-pointer",onClick:()=>r(`/execution-logs/${z.executionId}`),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:z.statusIcon}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-mono text-sm text-primary hover:underline",children:z.messageId}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[z.flowName," • ",z.startedAt?new Date(z.startedAt).toLocaleString():"Unknown"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:z.statusText}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-muted-foreground",children:z.duration}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-muted-foreground",children:z.filesText})]})]},z.executionId))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(re,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent executions found"})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>r(`/flow-monitoring?adapterId=${l.id}`),children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),"View All Executions"]})})]})]})]},l.id)})})]})},gi=()=>{var p;const s=$e(),{success:t,error:a}=xe(),r=be(),[n,i]=N.useState("all"),[o,j]=N.useState("all"),{data:d,isLoading:f}=ee({queryKey:["flow-executions",n,o],queryFn:()=>Is.getAllExecutions({status:n==="all"?void 0:n,flowId:o==="all"?void 0:o,size:50}),refetchInterval:5e3}),{data:h}=ee({queryKey:["flows-for-monitoring"],queryFn:()=>ue.getAllFlows()}),E=((p=d==null?void 0:d.data)==null?void 0:p.executions)||[],w=(h==null?void 0:h.data)||[],k=X({mutationFn:b=>Is.retryExecution(b),onSuccess:()=>{t("Execution Restarted","Flow execution has been restarted successfully"),r.invalidateQueries({queryKey:["flow-executions"]})},onError:b=>{var v,L;a("Restart Failed",((L=(v=b.response)==null?void 0:v.data)==null?void 0:L.message)||"Failed to restart execution")}}),S=b=>{switch(b){case"COMPLETED":return e.jsx(te,{className:"h-4 w-4 text-green-500"});case"FAILED":return e.jsx(ce,{className:"h-4 w-4 text-red-500"});case"RUNNING":case"RETRY_PENDING":return e.jsx(re,{className:"h-4 w-4 text-blue-500 animate-spin"});case"CANCELLED":return e.jsx(ce,{className:"h-4 w-4 text-gray-500"});case"TIMEOUT":return e.jsx(oe,{className:"h-4 w-4 text-red-500"});case"PENDING":return e.jsx(re,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(oe,{className:"h-4 w-4 text-yellow-500"})}},g=b=>{switch(b){case"COMPLETED":return"bg-green-100 text-green-700";case"FAILED":return"bg-red-100 text-red-700";case"RUNNING":case"RETRY_PENDING":return"bg-blue-100 text-blue-700";case"CANCELLED":return"bg-gray-100 text-gray-700";case"TIMEOUT":return"bg-red-100 text-red-700";case"PENDING":return"bg-yellow-100 text-yellow-700";default:return"bg-yellow-100 text-yellow-700"}};return f?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading flow monitoring..."})]})})}):e.jsxs("div",{className:"content-spacing h-screen flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Flow Monitoring"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor flow executions, logs, and restart failed flows"})]}),e.jsxs(T,{variant:"outline",onClick:()=>{r.invalidateQueries({queryKey:["flow-executions"]})},children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx("div",{className:"flex-1 flex flex-col space-y-6",children:e.jsxs("div",{className:"flex-1 flex flex-col space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 flex-shrink-0",children:[e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ne,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Executions"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:E.length})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce,{className:"h-6 w-6 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Failed"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:E.filter(b=>b.status==="FAILED"||b.status==="TIMEOUT").length})]})]})})})]}),e.jsxs(M,{className:"app-card border flex-shrink-0",children:[e.jsx(Y,{children:e.jsx(Q,{className:"text-sm text-foreground",children:"Filters"})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs(K,{value:n,onValueChange:i,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"all",children:"All Statuses"}),e.jsx(x,{value:"PENDING",children:"Pending"}),e.jsx(x,{value:"RUNNING",children:"Running"}),e.jsx(x,{value:"COMPLETED",children:"Completed"}),e.jsx(x,{value:"FAILED",children:"Failed"}),e.jsx(x,{value:"CANCELLED",children:"Cancelled"}),e.jsx(x,{value:"TIMEOUT",children:"Timeout"}),e.jsx(x,{value:"RETRY_PENDING",children:"Retry Pending"})]})]}),e.jsxs(K,{value:o,onValueChange:j,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"all",children:"All Flows"}),w.map(b=>e.jsx(x,{value:b.id,children:b.name},b.id))]})]})]})})]}),e.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto",children:E.map(b=>e.jsx(M,{className:"app-card border transition-all hover:shadow-md",children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[S(b.status),e.jsx("span",{className:"font-medium text-foreground",children:b.flowName})]}),e.jsx("span",{className:O("text-xs px-2 py-1 rounded",g(b.status)),children:b.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:["Started: ",new Date(b.startedAt).toLocaleString()]}),b.triggerType&&e.jsxs("span",{children:["• Trigger: ",b.triggerType]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Files: ",b.filesProcessed||0]}),e.jsxs("span",{children:["Size: ",b.bytesProcessed||"0 B"]}),b.duration&&e.jsxs("span",{children:["Duration: ",b.duration]}),b.isRetry&&e.jsx("span",{className:"text-orange-600",children:"• Retry"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:v=>{v.stopPropagation(),s(`/execution-logs/${b.id}`)},children:[e.jsx(Se,{className:"h-3 w-3 mr-1"}),"View Logs"]}),b.status==="FAILED"&&e.jsxs(T,{variant:"outline",size:"sm",onClick:v=>{v.stopPropagation(),k.mutate(b.id)},disabled:k.isPending,children:[e.jsx(Ws,{className:"h-3 w-3 mr-1"}),k.isPending?"Retrying...":"Retry"]})]})]})]})},b.id))})]})})]})},ji=()=>{const{executionId:s}=qs(),t=$e(),[a,r]=N.useState(""),[n,i]=N.useState("all"),[o,j]=N.useState(!0),{data:d}=ee({queryKey:["execution-details",s],queryFn:()=>s?Is.getExecutionById(s):null,enabled:!!s}),{data:f,isLoading:h,refetch:E}=ee({queryKey:["execution-logs",s,a,n],queryFn:()=>s?Is.getExecutionLogs(s,{filter:a||void 0,level:n!=="all"?n:void 0}):null,enabled:!!s,refetchInterval:o?3e3:!1}),w=d==null?void 0:d.data,S=((f==null?void 0:f.data)||[]).filter(u=>["INFO","WARN","ERROR"].includes(u.level)),g=u=>{switch(u){case"ERROR":return e.jsx(ce,{className:"h-4 w-4 text-red-500"});case"WARN":return e.jsx(oe,{className:"h-4 w-4 text-yellow-500"});case"INFO":return e.jsx(Oe,{className:"h-4 w-4 text-blue-500"});case"DEBUG":return e.jsx(Se,{className:"h-4 w-4 text-gray-500"});default:return e.jsx(ns,{className:"h-4 w-4 text-gray-500"})}},p=u=>"bg-slate-950/50 text-slate-400 border-slate-800/50",b=u=>{const I=new Date(u);return I.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})+"."+I.getMilliseconds().toString().padStart(3,"0")},v=()=>{const u=S.map(C=>`"${b(C.timestamp)}","${C.level}","${C.category}","${C.message.replace(/"/g,'""')}"`).join(`
`),I=`Timestamp,Level,Category,Message
`,c=new Blob([I+u],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),m=URL.createObjectURL(c);l.setAttribute("href",m),l.setAttribute("download",`execution-logs-${s}-${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},L=()=>{r(""),i("all")};return s?e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>t("/flow-monitoring"),children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Back to Flow Monitoring"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Execution Logs"}),e.jsxs("p",{className:"text-muted-foreground",children:["Detailed step-by-step logs for execution: ",s==null?void 0:s.substring(0,8)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>j(!o),className:o?"bg-primary/10 border-primary":"",children:[e.jsx(he,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Auto Refresh"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>E(),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:v,disabled:S.length===0,children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),w&&e.jsxs(M,{className:"app-card border mb-6",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-5 w-5"}),e.jsx("span",{children:"Execution Summary"})]})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Flow:"}),e.jsx("span",{className:"ml-2 text-foreground font-medium",children:w.flowName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:"ml-2",children:e.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded text-xs ${w.status==="COMPLETED"?"bg-green-100 text-green-700":w.status==="FAILED"?"bg-red-100 text-red-700":w.status==="RUNNING"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:[w.status==="COMPLETED"&&e.jsx(te,{className:"h-3 w-3"}),w.status==="FAILED"&&e.jsx(ce,{className:"h-3 w-3"}),w.status==="RUNNING"&&e.jsx(re,{className:"h-3 w-3"}),e.jsx("span",{children:w.status})]})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsx("span",{className:"ml-2 text-foreground",children:w.duration||"In progress"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Started:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(w.startedAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Trigger:"}),e.jsx("span",{className:"ml-2 text-foreground",children:w.triggerType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Files Processed:"}),e.jsx("span",{className:"ml-2 text-foreground",children:w.filesProcessed||0})]})]})})]}),e.jsxs(M,{className:"app-card border mb-6",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(sr,{className:"h-5 w-5"}),e.jsx("span",{children:"Log Filters"})]})}),e.jsxs(U,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Search Message"}),e.jsxs("div",{className:"relative",children:[e.jsx(Rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search log messages...",value:a,onChange:u=>r(u.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Log Level"}),e.jsxs(K,{value:n,onValueChange:i,children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"all",children:"All Levels"}),e.jsx(x,{value:"ERROR",children:"Error"}),e.jsx(x,{value:"WARN",children:"Warning"}),e.jsx(x,{value:"INFO",children:"Information"}),e.jsx(x,{value:"DEBUG",children:"Debug"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(T,{variant:"outline",onClick:L,className:"w-full",children:"Clear Filters"})})]}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:["Showing ",S.length," log entries (INFO, WARN, ERROR only)",a&&e.jsxs("span",{children:[' • Filtered by: "',a,'"']}),n!=="all"&&e.jsxs("span",{children:[" • Level: ",n]})]})]})]}),e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-5 w-5"}),e.jsx("span",{children:"Detailed Execution Logs"})]}),e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:o&&"Auto-refreshing every 3 seconds"})]})}),e.jsx(U,{children:h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading logs..."})]})}):S.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Se,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Logs Found"}),e.jsx("p",{className:"text-muted-foreground",children:a||n!=="all"?"No logs match your current filters":"No detailed logs available for this execution"})]})}):e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:S.map((u,I)=>e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-lg border ${p(u.level)}`,children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:g(u.level)}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx("span",{className:"font-mono text-foreground",children:b(u.timestamp)}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p(u.level)}`,children:u.level}),e.jsx("span",{className:"text-muted-foreground",children:u.category})]}),u.executionTimeMs&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[u.executionTimeMs,"ms"]})]}),e.jsx("div",{className:"text-sm text-foreground",children:e.jsx("p",{className:"whitespace-pre-wrap break-words",children:u.message})}),(u.adapterName||u.flowName||u.loggerName||u.threadName)&&e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground",children:[u.adapterName&&e.jsxs("span",{children:["Adapter: ",u.adapterName]}),u.flowName&&e.jsxs("span",{children:["Flow: ",u.flowName]}),u.loggerName&&e.jsxs("span",{children:["Logger: ",u.loggerName.split(".").pop()]}),u.threadName&&e.jsxs("span",{children:["Thread: ",u.threadName]})]}),u.exceptionClass&&e.jsxs("div",{className:"mt-2 p-3 bg-red-950/30 border border-red-800/50 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-400 mb-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:u.exceptionClass})]}),u.exceptionMessage&&e.jsx("p",{className:"text-sm text-red-300 mb-2",children:u.exceptionMessage}),u.stackTrace&&e.jsxs("details",{className:"text-xs",children:[e.jsx("summary",{className:"cursor-pointer text-red-400 hover:text-red-300",children:"Show Stack Trace"}),e.jsx("pre",{className:"mt-2 text-red-300 whitespace-pre-wrap overflow-x-auto",children:u.stackTrace})]})]}),u.mdcData&&Object.keys(u.mdcData).length>0&&e.jsxs("details",{className:"text-xs",children:[e.jsxs("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:["Context Data (",Object.keys(u.mdcData).length," items)"]}),e.jsx("div",{className:"mt-2 p-2 bg-secondary/20 rounded",children:Object.entries(u.mdcData).map(([c,l])=>e.jsxs("div",{className:"flex",children:[e.jsxs("span",{className:"font-medium text-muted-foreground w-24",children:[c,":"]}),e.jsx("span",{className:"text-foreground",children:l})]},c))})]}),(u.requestMethod||u.requestUri)&&e.jsx("div",{className:"text-xs text-muted-foreground",children:u.requestMethod&&u.requestUri&&e.jsxs("span",{children:[u.requestMethod," ",u.requestUri]})})]})]},`${u.id}-${I}`))})})]})]}):e.jsx("div",{className:"content-spacing",children:e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:"h-16 w-16 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Invalid Execution"}),e.jsx("p",{className:"text-muted-foreground",children:"No execution ID provided"})]})})})})},vt=()=>{const{isAdmin:s}=os(),{success:t,error:a}=xe(),r=be(),{user:n}=Ve(),[i,o]=N.useState(!1),[j,d]=N.useState(0),[f,h]=N.useState({}),[E,w]=N.useState(null),{data:k,isLoading:S}=ee({queryKey:["users"],queryFn:Je.getAllUsers}),g=(k||[]).filter(c=>c.role!=="INTEGRATOR"),p=X({mutationFn:Je.createUser,onSuccess:()=>{t("User Created","User account created successfully"),r.invalidateQueries({queryKey:["users"]}),o(!1)},onError:c=>{var l,m;a("Creation Failed",((m=(l=c.response)==null?void 0:l.data)==null?void 0:m.message)||"Failed to create user")}}),b=X({mutationFn:({id:c,data:l})=>Je.updateUser(c,l),onSuccess:()=>{t("User Updated","User account updated successfully"),r.invalidateQueries({queryKey:["users"]}),w(null)},onError:c=>{var l,m;a("Update Failed",((m=(l=c.response)==null?void 0:l.data)==null?void 0:m.message)||"Failed to update user")}}),v=X({mutationFn:Je.deleteUser,onSuccess:()=>{t("User Deleted","User account deleted successfully"),r.invalidateQueries({queryKey:["users"]})},onError:c=>{var l,m;a("Deletion Failed",((m=(l=c.response)==null?void 0:l.data)==null?void 0:m.message)||"Failed to delete user")}}),L=c=>c==="ADMINISTRATOR"?e.jsx(lt,{className:"h-4 w-4 text-warning"}):e.jsx(Ue,{className:"h-4 w-4 text-info"}),u=c=>c==="ADMINISTRATOR"?"bg-warning/20 text-warning":"bg-info/20 text-info",I=()=>s;return s?S?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading users..."})]})})}):e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"User Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage system users, roles, and permissions"})]}),e.jsxs(T,{className:"btn-primary",onClick:()=>{d(c=>c+1),o(!0)},children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create User"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Fs,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:g.length||0})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(lt,{className:"h-8 w-8 text-warning"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Administrators"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:g.filter(c=>c.role==="ADMINISTRATOR").length||0})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"h-8 w-8 text-success"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:g.filter(c=>c.enabled).length||0})]})]})})})]}),i&&e.jsxs(M,{className:"app-card border mb-6",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-foreground flex items-center space-x-2",children:[e.jsx(Fs,{className:"h-5 w-5"}),e.jsx("span",{children:"Create New User"})]})}),e.jsx(U,{children:e.jsx(fi,{onSubmit:c=>p.mutate(c),onCancel:()=>o(!1),isLoading:p.isPending},j)})]}),g&&g.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6",children:g.map(c=>e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[L(c.role),(n==null?void 0:n.id)===c.id&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-primary rounded-full border-2 border-background"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"text-lg text-foreground",children:c.username}),(n==null?void 0:n.id)===c.id&&e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-primary/20 text-primary",children:"You"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${u(c.role)}`,children:c.role}),e.jsx("div",{className:`w-3 h-3 rounded-full ${c.enabled?"bg-success animate-glow":"bg-muted-foreground"}`}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${c.enabled?"bg-success/20 text-success":"bg-muted/20 text-muted-foreground"}`,children:c.enabled?"Active":"Inactive"})]})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(c.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Login:"}),e.jsx("span",{className:"ml-2 text-foreground",children:c.lastLogin?new Date(c.lastLogin).toLocaleDateString():"Never"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Failed Attempts:"}),e.jsx("span",{className:"ml-2 text-foreground",children:c.failedLoginAttempts})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:`ml-2 ${c.enabled?"text-success":"text-muted-foreground"}`,children:c.enabled?"Active":"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"User ID:"}),e.jsx("div",{className:"mt-1 font-mono text-xs bg-secondary p-2 rounded",children:c.id})]}),e.jsx("div",{className:"flex items-center space-x-2 pt-4 border-t border-border",children:I()&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>w(c.id),children:[e.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Edit User"]}),(n==null?void 0:n.id)!==c.id&&e.jsx(T,{variant:"outline",size:"sm",onClick:()=>b.mutate({id:c.id,data:{...c,enabled:!c.enabled}}),disabled:b.isPending,children:c.enabled?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Activate"]})}),(n==null?void 0:n.id)!==c.id&&e.jsxs(T,{variant:"outline",size:"sm",className:"text-destructive",onClick:()=>v.mutate(c.id),disabled:v.isPending,children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Delete"]}),(n==null?void 0:n.id)===c.id&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"You cannot deactivate or delete your own account"})]})})]})})]},c.id))}):e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fs,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Users Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first user account to get started"}),e.jsxs(T,{className:"btn-primary",onClick:()=>{d(c=>c+1),o(!0)},children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create First User"]})]})})})]}):e.jsx("div",{className:"content-spacing",children:e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ue,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:"Administrator privileges required to manage users"})]})})})})},fi=({onSubmit:s,onCancel:t,isLoading:a})=>{const[r,n]=N.useState({username:"",email:"",password:"",role:"VIEWER",enabled:!0}),[i,o]=N.useState(!1),j=d=>{d.preventDefault(),s(r)};return e.jsxs("form",{onSubmit:j,className:"space-y-4",autoComplete:"off",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"username",children:"Username"}),e.jsx(D,{id:"username",value:r.username,onChange:d=>n(f=>({...f,username:d.target.value})),placeholder:"e.g., john.doe",className:"bg-input border-border text-foreground",autoComplete:"off",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"email",children:"Email"}),e.jsx(D,{id:"email",type:"email",value:r.email,onChange:d=>n(f=>({...f,email:d.target.value})),placeholder:"e.g., john.doe@company.com",className:"bg-input border-border text-foreground",autoComplete:"off",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{id:"password",type:i?"text":"password",value:r.password,onChange:d=>n(f=>({...f,password:d.target.value})),placeholder:"Enter password",className:"bg-input border-border text-foreground pr-10",autoComplete:"new-password",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-3 text-muted-foreground",children:i?e.jsx(bs,{className:"h-4 w-4"}):e.jsx(Se,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"role",children:"Role"}),e.jsxs(K,{value:r.role,onValueChange:d=>n(f=>({...f,role:d})),children:[e.jsx($,{className:"w-full",children:e.jsx(_,{placeholder:"Select role"})}),e.jsxs(V,{children:[e.jsx(x,{value:"VIEWER",children:"Viewer (Read-only access)"}),e.jsx(x,{value:"ADMINISTRATOR",children:"Administrator (Full access)"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"enabled",checked:r.enabled,onChange:d=>n(f=>({...f,enabled:d.target.checked})),className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary"}),e.jsx(y,{htmlFor:"enabled",children:"Enable user account"})]}),e.jsxs("div",{className:"flex items-center space-x-4 pt-4",children:[e.jsx(T,{type:"submit",className:"btn-primary",disabled:a,children:a?"Creating...":"Create User"}),e.jsx(T,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})},yi=()=>{const s=$e(),{isAdmin:t}=os(),{success:a,error:r}=xe(),n=be(),[i,o]=N.useState({}),{data:j,isLoading:d}=ee({queryKey:["ssh-keys"],queryFn:Be.getAllKeys}),f=X({mutationFn:({id:g,enabled:p})=>Be.toggleKeyStatus(g,p),onSuccess:()=>{a("Status Updated","SSH key status changed successfully"),n.invalidateQueries({queryKey:["ssh-keys"]})},onError:g=>{var p,b;r("Status Change Failed",((b=(p=g.response)==null?void 0:p.data)==null?void 0:b.message)||"Failed to change key status")}}),h=X({mutationFn:Be.deleteKey,onSuccess:()=>{a("Key Deleted","SSH key deleted successfully"),n.invalidateQueries({queryKey:["ssh-keys"]})},onError:g=>{var p,b;r("Deletion Failed",((b=(p=g.response)==null?void 0:p.data)==null?void 0:b.message)||"Failed to delete SSH key")}}),E=async(g,p)=>{var b,v;try{const L=await Be.downloadPrivateKey(g),u=window.URL.createObjectURL(L),I=document.createElement("a");I.href=u,I.download=`${p}_private_key`,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(u),a("Download Complete","Private key downloaded successfully")}catch(L){r("Download Failed",((v=(b=L.response)==null?void 0:b.data)==null?void 0:v.message)||"Failed to download private key")}},w=async(g,p)=>{var b,v;try{const L=await Be.downloadPublicKey(g),u=window.URL.createObjectURL(L),I=document.createElement("a");I.href=u,I.download=`${p}_public_key.pub`,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(u),a("Download Complete","Public key downloaded successfully")}catch(L){r("Download Failed",((v=(b=L.response)==null?void 0:b.data)==null?void 0:v.message)||"Failed to download public key")}},k=g=>{navigator.clipboard.writeText(g).then(()=>{a("Copied","Public key copied to clipboard")}).catch(()=>{r("Copy Failed","Failed to copy public key to clipboard")})},S=g=>{o(p=>({...p,[g]:!p[g]}))};return d?e.jsx("div",{className:"content-spacing",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading SSH keys..."})]})})}):e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"SSH Key Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate and manage SSH keys for secure SFTP connections"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[j&&j.length>0&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.filter(g=>g.enabled).length," of ",j.length," keys active"]}),t()&&e.jsxs(T,{className:"btn-primary",onClick:()=>s("/ssh-keys/create"),children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Generate New Key"]})]})]}),j&&j.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Keys"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:j.length})]}),e.jsx(Le,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Valid & Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-500",children:j.filter(g=>g.enabled).length})]}),e.jsx(ct,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Disabled"}),e.jsx("p",{className:"text-2xl font-bold text-muted-foreground",children:j.filter(g=>!g.enabled).length})]}),e.jsx(ot,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:j.map(g=>e.jsxs(M,{className:`app-card border ${g.enabled?"border-l-4 border-l-green-500":"border-l-4 border-l-muted-foreground"}`,children:[e.jsx(Y,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${g.enabled?"bg-green-500/10":"bg-muted/20"}`,children:e.jsx(Le,{className:`h-5 w-5 ${g.enabled?"text-green-500":"text-muted-foreground"}`})}),e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg text-foreground",children:g.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.description})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("div",{className:`flex items-center space-x-2 px-3 py-1.5 rounded-full ${g.enabled?"bg-green-500/10 border border-green-500/20":"bg-muted/20 border border-border"}`,children:g.enabled?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-green-500",children:"Valid"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Disabled"})]})})})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsxs("span",{className:"ml-2 text-foreground font-medium",children:[g.keyType," ",g.keySize]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(g.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Expires:"}),e.jsx("span",{className:`ml-2 font-medium ${new Date(g.expiresAt)<new Date?"text-red-500":new Date(g.expiresAt)<new Date(Date.now()+30*24*60*60*1e3)?"text-yellow-500":"text-foreground"}`,children:new Date(g.expiresAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:`ml-2 font-medium ${new Date(g.expiresAt)<new Date?"text-red-500":"text-green-500"}`,children:new Date(g.expiresAt)<new Date?"Expired":"Valid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Fingerprint:"}),e.jsx("div",{className:"mt-1 font-mono text-xs bg-secondary p-2 rounded",children:g.fingerprint})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Public Key:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>k(g.publicKey),children:e.jsx(tr,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>S(g.id),children:i[g.id]?e.jsx(bs,{className:"h-4 w-4"}):e.jsx(Se,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"mt-1 font-mono text-xs bg-secondary p-2 rounded break-all",children:i[g.id]?g.publicKey:`${g.publicKey.substring(0,50)}...`})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2 pt-4 border-t border-border",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>w(g.id,g.name),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Download Public"]}),t()&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>E(g.id,g.name),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Download Private"]}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>f.mutate({id:g.id,enabled:!g.enabled}),disabled:f.isPending,className:g.enabled?"":"text-green-500 hover:text-green-600",children:g.enabled?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Disable"]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Enable"]})}),e.jsxs(T,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>h.mutate(g.id),disabled:h.isPending,children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})]},g.id))})]}):e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Le,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No SSH Keys"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Generate your first SSH key pair for secure SFTP connections"}),t()&&e.jsxs(T,{className:"btn-primary",onClick:()=>s("/ssh-keys/create"),children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Generate SSH Key"]})]})})})]})},vi=Ls("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ps=N.forwardRef(({className:s,variant:t,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:O(vi({variant:t}),s),...a}));ps.displayName="Alert";const Ni=N.forwardRef(({className:s,...t},a)=>e.jsx("h5",{ref:a,className:O("mb-1 font-medium leading-none tracking-tight",s),...t}));Ni.displayName="AlertTitle";const gs=N.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:O("text-sm [&_p]:leading-relaxed",s),...t}));gs.displayName="AlertDescription";const Nt=s=>{switch(s){case"DEVELOPMENT":return{color:"text-info",bgColor:"bg-blue-100 border-blue-200",badgeClass:"bg-blue-600 text-white border-blue-600",label:"Development"};case"QUALITY_ASSURANCE":return{color:"text-warning",bgColor:"bg-yellow-100 border-yellow-200",badgeClass:"bg-purple-600 text-white border-purple-600",label:"Quality Assurance"};case"PRODUCTION":return{color:"text-destructive",bgColor:"bg-red-100 border-red-200",badgeClass:"bg-red-600 text-white border-red-600",label:"Production"};default:return{color:"text-muted-foreground",bgColor:"bg-gray-100 border-gray-200",badgeClass:"bg-gray-600 text-white border-gray-600",label:"Unknown"}}},bi=()=>{const{success:s,error:t}=xe(),a=be(),[r,n]=N.useState(""),[i,o]=N.useState(!0),[j,d]=N.useState(""),[f,h]=N.useState(!1),{data:E,isLoading:w}=ee({queryKey:["environment-config"],queryFn:()=>(console.log("🔧 Fetching current environment..."),As.getCurrentEnvironment())}),{data:k,isLoading:S}=ee({queryKey:["environment-types"],queryFn:()=>(console.log("🔧 Fetching environment types..."),As.getEnvironmentTypes())}),g=E==null?void 0:E.data,p=(k==null?void 0:k.data)||[],b=X({mutationFn:As.updateEnvironment,onSuccess:()=>{s("Environment Updated","Environment configuration updated successfully"),a.invalidateQueries({queryKey:["environment-config"]}),h(!1)},onError:c=>{var l,m;t("Update Failed",((m=(l=c.response)==null?void 0:l.data)==null?void 0:m.message)||"Failed to update environment configuration")}});N.useEffect(()=>{g&&(n(g.type),o(g.enforceRestrictions),d(g.restrictionMessage),h(!1))},[g]),N.useEffect(()=>{if(!g)return;const c=r!==g.type,l=i!==g.enforceRestrictions,m=j!==g.restrictionMessage;h(c||l||m)},[r,i,j,g]);const v=()=>{b.mutate({type:r,enforceRestrictions:i,restrictionMessage:j})},L=()=>{g&&(n(g.type),o(g.enforceRestrictions),d(g.restrictionMessage),h(!1))};if(w||S)return e.jsxs(M,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),e.jsx(Q,{children:"Environment Configuration"})]})}),e.jsx(U,{children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(he,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]});const u=Nt(r),I=i?r==="DEVELOPMENT"?[]:["Flow Creation","Adapter Creation"]:[];return e.jsxs(M,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Environment Configuration"]}),e.jsx(He,{children:"Configure the system environment type and restrictions"})]}),e.jsx(We,{className:u.badgeClass,children:u.label})]})}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"environment-type",children:"Environment Type"}),e.jsxs(K,{value:r,onValueChange:n,children:[e.jsx($,{id:"environment-type",children:e.jsx(_,{placeholder:"Select environment type"})}),e.jsx(V,{children:p.map(c=>e.jsx(x,{value:c.name,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Nt(c.name).bgColor}`}),c.displayName]})},c.name))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{htmlFor:"enforce-restrictions",children:"Enforce Environment Restrictions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable environment-based feature restrictions"})]}),e.jsx(Ce,{id:"enforce-restrictions",checked:i,onCheckedChange:o})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"restriction-message",children:"Custom Restriction Message"}),e.jsx(D,{id:"restriction-message",value:j,onChange:c=>d(c.target.value),placeholder:"This action is not allowed in %s environment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use %s as placeholder for environment name"})]}),i&&I.length>0&&e.jsxs(ps,{className:u.bgColor,children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsxs(gs,{children:[e.jsx("strong",{children:"Environment Restrictions Active:"})," The following features are restricted in ",u.label," environment: ",I.join(", ")]})]}),g&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{children:"Current Environment Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(g.permissions).map(([c,l])=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l?e.jsx(ar,{className:"h-4 w-4 text-green-600"}):e.jsx(ns,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:l?"text-green-700":"text-red-700",children:c.replace(/([A-Z])/g," $1").replace(/^./,m=>m.toUpperCase())})]},c))})]}),f&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"You have unsaved changes"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"outline",onClick:L,disabled:b.isPending,children:"Cancel"}),e.jsx(T,{onClick:v,disabled:b.isPending,children:b.isPending?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})]})]})},wi={DASHBOARD:rr,SECURITY:Ue,NOTIFICATIONS:ns,FILE_PROCESSING:pe,SYSTEM:ae,LOGGING:Ne,ADAPTER:Re,GENERAL:ae},Si={DASHBOARD:"text-blue-500",SECURITY:"text-red-500",NOTIFICATIONS:"text-yellow-500",FILE_PROCESSING:"text-green-500",SYSTEM:"text-purple-500",LOGGING:"text-orange-500",ADAPTER:"text-cyan-500",GENERAL:"text-gray-500"},Ci=()=>{const{success:s,error:t}=xe(),a=be(),[r,n]=N.useState(""),[i,o]=N.useState("ALL"),[j,d]=N.useState(null),[f,h]=N.useState({}),{data:E,isLoading:w}=ee({queryKey:["system-configurations"],queryFn:Ds.getAllConfigurations}),k=(E==null?void 0:E.configurations)||[],S=X({mutationFn:({id:l,data:m})=>Ds.updateConfigurationValue(l,m.configValue),onSuccess:()=>{s("Configuration Updated","System configuration updated successfully"),a.invalidateQueries({queryKey:["system-configurations"]}),d(null),h({})},onError:l=>{var m,C;t("Update Failed",((C=(m=l.response)==null?void 0:m.data)==null?void 0:C.message)||"Failed to update configuration")}}),g=l=>{l.readonly||(d(l.id),h({[l.id]:l.configValue}))},p=l=>{const m=f[l];m!==void 0&&S.mutate({id:l,data:{configValue:m}})},b=()=>{d(null),h({})},v=l=>{l.defaultValue&&!l.readonly&&S.mutate({id:l.id,data:{configValue:l.defaultValue}})},L=k.filter(l=>{var F;const m=l.configKey.toLowerCase().includes(r.toLowerCase())||((F=l.description)==null?void 0:F.toLowerCase().includes(r.toLowerCase())),C=i==="ALL"||l.category===i;return m&&C}),u=["ALL",...Array.from(new Set(k.map(l=>l.category)))],I=l=>L.filter(m=>l==="ALL"||m.category===l),c=l=>{const m=j===l.id,C=m?f[l.id]:l.configValue;return l.encrypted&&!m?e.jsx("span",{className:"text-muted-foreground",children:"••••••••"}):m?l.configType==="BOOLEAN"?e.jsxs(K,{value:C,onValueChange:F=>h(R=>({...R,[l.id]:F})),children:[e.jsx($,{className:"w-full",children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"true",children:"True"}),e.jsx(x,{value:"false",children:"False"})]})]}):l.configKey==="system.timezone.default"?e.jsxs(K,{value:C,onValueChange:F=>h(R=>({...R,[l.id]:F})),children:[e.jsx($,{className:"w-full",children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"UTC-12:00",children:"UTC-12:00 (Baker Island)"}),e.jsx(x,{value:"UTC-11:00",children:"UTC-11:00 (Samoa)"}),e.jsx(x,{value:"UTC-10:00",children:"UTC-10:00 (Hawaii)"}),e.jsx(x,{value:"UTC-09:00",children:"UTC-09:00 (Alaska)"}),e.jsx(x,{value:"UTC-08:00",children:"UTC-08:00 (Pacific Time)"}),e.jsx(x,{value:"UTC-07:00",children:"UTC-07:00 (Mountain Time)"}),e.jsx(x,{value:"UTC-06:00",children:"UTC-06:00 (Central Time)"}),e.jsx(x,{value:"UTC-05:00",children:"UTC-05:00 (Eastern Time)"}),e.jsx(x,{value:"UTC-04:00",children:"UTC-04:00 (Atlantic Time)"}),e.jsx(x,{value:"UTC-03:30",children:"UTC-03:30 (Newfoundland)"}),e.jsx(x,{value:"UTC-03:00",children:"UTC-03:00 (Brazil, Argentina)"}),e.jsx(x,{value:"UTC-02:00",children:"UTC-02:00 (Mid-Atlantic)"}),e.jsx(x,{value:"UTC-01:00",children:"UTC-01:00 (Azores)"}),e.jsx(x,{value:"UTC+00:00",children:"UTC+00:00 (Greenwich Mean Time)"}),e.jsx(x,{value:"UTC+01:00",children:"UTC+01:00 (Central European Time)"}),e.jsx(x,{value:"UTC+02:00",children:"UTC+02:00 (South Africa, Eastern Europe)"}),e.jsx(x,{value:"UTC+03:00",children:"UTC+03:00 (Russia, East Africa)"}),e.jsx(x,{value:"UTC+03:30",children:"UTC+03:30 (Iran)"}),e.jsx(x,{value:"UTC+04:00",children:"UTC+04:00 (Gulf States, Russia)"}),e.jsx(x,{value:"UTC+04:30",children:"UTC+04:30 (Afghanistan)"}),e.jsx(x,{value:"UTC+05:00",children:"UTC+05:00 (Pakistan, Kazakhstan)"}),e.jsx(x,{value:"UTC+05:30",children:"UTC+05:30 (India, Sri Lanka)"}),e.jsx(x,{value:"UTC+05:45",children:"UTC+05:45 (Nepal)"}),e.jsx(x,{value:"UTC+06:00",children:"UTC+06:00 (Bangladesh, Central Asia)"}),e.jsx(x,{value:"UTC+06:30",children:"UTC+06:30 (Myanmar)"}),e.jsx(x,{value:"UTC+07:00",children:"UTC+07:00 (Thailand, Vietnam)"}),e.jsx(x,{value:"UTC+08:00",children:"UTC+08:00 (China, Singapore)"}),e.jsx(x,{value:"UTC+08:30",children:"UTC+08:30 (North Korea)"}),e.jsx(x,{value:"UTC+09:00",children:"UTC+09:00 (Japan, Korea)"}),e.jsx(x,{value:"UTC+09:30",children:"UTC+09:30 (Australia Central)"}),e.jsx(x,{value:"UTC+10:00",children:"UTC+10:00 (Australia Eastern)"}),e.jsx(x,{value:"UTC+10:30",children:"UTC+10:30 (Lord Howe Island)"}),e.jsx(x,{value:"UTC+11:00",children:"UTC+11:00 (Solomon Islands)"}),e.jsx(x,{value:"UTC+12:00",children:"UTC+12:00 (New Zealand)"}),e.jsx(x,{value:"UTC+12:45",children:"UTC+12:45 (Chatham Islands)"}),e.jsx(x,{value:"UTC+13:00",children:"UTC+13:00 (Samoa, Tonga)"}),e.jsx(x,{value:"UTC+14:00",children:"UTC+14:00 (Line Islands)"})]})]}):e.jsx(D,{type:l.configType==="INTEGER"?"number":"text",value:C,onChange:F=>h(R=>({...R,[l.id]:F.target.value})),className:"font-mono text-sm",onKeyDown:F=>{F.key==="Enter"?p(l.id):F.key==="Escape"&&b()}}):l.configType==="BOOLEAN"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:O("w-3 h-3 rounded-full",C==="true"?"bg-success":"bg-muted-foreground")}),e.jsx("span",{className:O("font-mono text-sm",C==="true"?"text-success":"text-muted-foreground"),children:C==="true"?"Enabled":"Disabled"})]}):e.jsx("div",{className:"font-mono text-sm bg-secondary/50 px-2 py-1 rounded",children:C})};return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading configurations..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"System Configuration"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage runtime system settings and parameters"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"h-5 w-5 text-primary"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[k.length," configurations"]})]})]}),e.jsx(bi,{}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Rs,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),e.jsx(D,{placeholder:"Search configurations...",value:r,onChange:l=>n(l.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(K,{value:i,onValueChange:o,children:[e.jsx($,{children:e.jsx(_,{placeholder:"All Categories"})}),e.jsx(V,{children:u.map(l=>e.jsx(x,{value:l,children:l==="ALL"?"All Categories":l.replace("_"," ")},l))})]})})]})})}),u.filter(l=>l!=="ALL").map(l=>{const m=I(l);if(m.length===0)return null;const C=wi[l]||ae,F=Si[l]||"text-muted-foreground";return e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(C,{className:O("h-5 w-5",F)}),e.jsx("span",{children:l.replace("_"," ")}),e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",m.length," settings)"]})]})}),e.jsx(U,{className:"space-y-4",children:m.map(R=>e.jsxs("div",{className:"border border-border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"font-mono text-sm text-primary",children:R.configKey}),R.readonly&&e.jsx("span",{className:"text-xs px-2 py-1 bg-muted/50 text-muted-foreground rounded",children:"Read Only"}),R.encrypted&&e.jsx("span",{className:"text-xs px-2 py-1 bg-warning/20 text-warning rounded",children:"Encrypted"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:R.description}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Type: ",R.configType]}),R.defaultValue&&e.jsxs("span",{children:["• Default: ",R.defaultValue]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:j===R.id?e.jsxs(e.Fragment,{children:[e.jsx(T,{size:"sm",onClick:()=>p(R.id),disabled:S.isPending,children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx(T,{size:"sm",variant:"outline",onClick:b,children:e.jsx(Pe,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[!R.readonly&&e.jsx(T,{size:"sm",variant:"outline",onClick:()=>g(R),children:e.jsx(Ys,{className:"h-4 w-4"})}),R.defaultValue&&R.configValue!==R.defaultValue&&!R.readonly&&e.jsx(T,{size:"sm",variant:"outline",onClick:()=>v(R),title:"Reset to default",children:e.jsx(Ws,{className:"h-4 w-4"})})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm",children:"Current Value:"}),c(R)]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last updated: ",new Date(R.updatedAt).toLocaleString()]})]},R.id))})]},l)}),L.length===0&&e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ae,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Configurations Found"}),e.jsx("p",{className:"text-muted-foreground",children:"No system configurations match your search criteria"})]})})})]})},Ei={TRACE:Tt,DEBUG:Oe,INFO:Oe,WARN:oe,ERROR:ce},Ti={TRACE:"text-slate-500",DEBUG:"text-blue-500",INFO:"text-green-500",WARN:"text-yellow-500",ERROR:"text-red-500"},Fi={SYSTEM:ae,ADAPTER_EXECUTION:Ne,FLOW_EXECUTION:Ne,AUTHENTICATION:Ue,DATABASE:Re,SCHEDULER:re,API:Ne},Ai={SYSTEM:"text-purple-500",ADAPTER_EXECUTION:"text-blue-500",FLOW_EXECUTION:"text-green-500",AUTHENTICATION:"text-red-500",DATABASE:"text-yellow-500",SCHEDULER:"text-orange-500",API:"text-indigo-500"},bt=()=>{const[s,t]=N.useState(""),[a,r]=N.useState("ALL"),[n,i]=N.useState("ALL"),[o,j]=N.useState(0),[d,f]=N.useState(50),[h,E]=N.useState(null),{data:w,isLoading:k,refetch:S}=ee({queryKey:["system-logs",a,n,s,o,d],queryFn:()=>Br.getRecentLogs({level:n!=="ALL"?n:void 0,search:s||void 0,limit:d}),refetchInterval:3e4}),g=w||[],p=Math.ceil(g.length/d)||0,b=g.length||0,v=async()=>{try{console.log("Export functionality would be implemented here")}catch(c){console.error("Export failed:",c)}},L=c=>new Date(c).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),u=c=>{const l=Ei[c]||Oe,m=Ti[c]||"text-muted-foreground";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(l,{className:O("h-4 w-4",m)}),e.jsx("span",{className:O("text-xs font-medium px-2 py-1 rounded",c==="ERROR"&&"bg-red-100 text-red-700",c==="WARN"&&"bg-yellow-100 text-yellow-700",c==="INFO"&&"bg-green-100 text-green-700",c==="DEBUG"&&"bg-blue-100 text-blue-700",c==="TRACE"&&"bg-slate-100 text-slate-700"),children:c})]})},I=c=>{const l=Fi[c]||ae,m=Ai[c]||"text-muted-foreground";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(l,{className:O("h-4 w-4",m)}),e.jsx("span",{className:"text-xs px-2 py-1 bg-secondary rounded",children:c.replace("_"," ")})]})};return k?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading logs..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"System Logs"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor application logs with category filtering"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{variant:"outline",onClick:()=>S(),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(T,{variant:"outline",onClick:v,children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Rs,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),e.jsx(D,{placeholder:"Search logs by message, logger name, or correlation ID...",value:s,onChange:c=>t(c.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full lg:w-48",children:e.jsxs(K,{value:a,onValueChange:r,children:[e.jsx($,{children:e.jsx(_,{placeholder:"All Categories"})}),e.jsxs(V,{children:[e.jsx(x,{value:"ALL",children:"All Categories"}),e.jsx(x,{value:"ADAPTER_EXECUTION",children:"Adapter Execution"}),e.jsx(x,{value:"FLOW_EXECUTION",children:"Flow Execution"}),e.jsx(x,{value:"AUTHENTICATION",children:"Authentication"}),e.jsx(x,{value:"DATABASE",children:"Database"}),e.jsx(x,{value:"API",children:"API"}),e.jsx(x,{value:"SCHEDULER",children:"Scheduler"}),e.jsx(x,{value:"SYSTEM",children:"System"})]})]})}),e.jsx("div",{className:"w-full lg:w-36",children:e.jsxs(K,{value:n,onValueChange:i,children:[e.jsx($,{children:e.jsx(_,{placeholder:"All Levels"})}),e.jsxs(V,{children:[e.jsx(x,{value:"ALL",children:"All Levels"}),e.jsx(x,{value:"ERROR",children:"Error"}),e.jsx(x,{value:"WARN",children:"Warning"}),e.jsx(x,{value:"INFO",children:"Info"}),e.jsx(x,{value:"DEBUG",children:"Debug"}),e.jsx(x,{value:"TRACE",children:"Trace"})]})]})}),e.jsx("div",{className:"w-full lg:w-24",children:e.jsxs(K,{value:d.toString(),onValueChange:c=>f(parseInt(c)),children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"25",children:"25"}),e.jsx(x,{value:"50",children:"50"}),e.jsx(x,{value:"100",children:"100"}),e.jsx(x,{value:"200",children:"200"})]})]})})]})})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Showing ",g.length," of ",b," logs",a!=="ALL"&&` in ${a} category`,n!=="ALL"&&` at ${n} level`]}),e.jsxs("span",{children:["Page ",o+1," of ",p]})]}),g.length>0?e.jsx("div",{className:"space-y-2",children:g.map(c=>e.jsx(M,{className:"app-card border hover:border-primary/30 transition-all duration-200",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2 min-w-0",children:[e.jsx("div",{className:"text-xs font-mono text-muted-foreground",children:L(c.timestamp)}),u(c.logLevel)]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[I(c.logCategory),e.jsx("span",{className:"text-xs font-mono text-muted-foreground truncate",children:c.loggerName}),c.threadName&&e.jsx("span",{className:"text-xs px-2 py-1 bg-muted rounded",children:c.threadName})]}),(c.stackTrace||c.correlationId||c.adapterId||c.flowId)&&e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>E(h===c.id?null:c.id),children:h===c.id?"Less":"More"})]}),e.jsx("div",{className:"text-sm text-foreground",children:c.formattedMessage||c.message}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[c.correlationId&&e.jsxs("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded",children:["ID: ",c.correlationId]}),c.adapterName&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:["Adapter: ",c.adapterName]}),c.flowName&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:["Flow: ",c.flowName]}),c.requestMethod&&c.requestUri&&e.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded",children:[c.requestMethod," ",c.requestUri]}),c.remoteAddress&&e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded",children:["IP: ",c.remoteAddress]})]}),h===c.id&&e.jsxs("div",{className:"mt-4 space-y-3 border-t border-border pt-3",children:[c.exceptionClass&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Exception:"}),e.jsxs("div",{className:"mt-1 font-mono text-sm bg-red-50 text-red-800 p-2 rounded",children:[c.exceptionClass,": ",c.exceptionMessage]})]}),c.stackTrace&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Stack Trace:"}),e.jsx("pre",{className:"mt-1 font-mono text-xs bg-secondary/50 p-3 rounded overflow-x-auto max-h-48",children:c.stackTrace})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Application:"}),e.jsx("span",{className:"ml-2 text-foreground",children:c.applicationName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Environment:"}),e.jsx("span",{className:"ml-2 text-foreground",children:c.environment})]}),c.userId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"User ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:c.userId})]}),c.executionId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Execution ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:c.executionId})]})]})]})]})]})})},c.id))}):e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pe,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Logs Found"}),e.jsx("p",{className:"text-muted-foreground",children:"No system logs match your current filter criteria"})]})})}),p>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{variant:"outline",onClick:()=>j(Math.max(0,o-1)),disabled:o===0,children:"Previous"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",o+1," of ",p]}),e.jsx(T,{variant:"outline",onClick:()=>j(Math.min(p-1,o+1)),disabled:o===p-1,children:"Next"})]})]})},ki={TRACE:Tt,DEBUG:Oe,INFO:Oe,WARN:oe,ERROR:ce,FATAL:ce},Pi={TRACE:"text-slate-500",DEBUG:"text-blue-500",INFO:"text-green-500",WARN:"text-yellow-500",ERROR:"text-red-500",FATAL:"text-red-700"},Di={AUTHENTICATION:Ue,FILE_PROCESSING:pe,ADAPTER_EXECUTION:Ne,FLOW_EXECUTION:Ne,SYSTEM_OPERATION:ae,USER_MANAGEMENT:fs,CONFIGURATION_CHANGE:ae,SECURITY:Ue},Ii={AUTHENTICATION:"text-red-500",FILE_PROCESSING:"text-blue-500",ADAPTER_EXECUTION:"text-green-500",FLOW_EXECUTION:"text-purple-500",SYSTEM_OPERATION:"text-orange-500",USER_MANAGEMENT:"text-indigo-500",CONFIGURATION_CHANGE:"text-yellow-600",SECURITY:"text-red-600"},Li=()=>{const[s,t]=N.useState(""),[a,r]=N.useState("ALL"),[n,i]=N.useState("ALL"),[o,j]=N.useState(50),[d,f]=N.useState(null),{data:h,isLoading:E,refetch:w}=ee({queryKey:["transaction-logs",a,n,s,o],queryFn:()=>ut.getRecentLogs({level:n!=="ALL"?n:void 0,category:a!=="ALL"?a:void 0,search:s||void 0,limit:o}),refetchInterval:3e4}),k=h||[],S=async()=>{try{await ut.exportLogs({level:n!=="ALL"?n:void 0,category:a!=="ALL"?a:void 0,limit:1e3,format:"csv"})}catch(v){console.error("Export failed:",v)}},g=v=>new Date(v).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),p=v=>{const L=ki[v]||Oe,u=Pi[v]||"text-muted-foreground";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(L,{className:O("h-4 w-4",u)}),e.jsx("span",{className:O("text-xs font-medium px-2 py-1 rounded",v==="ERROR"&&"bg-red-100 text-red-700",v==="FATAL"&&"bg-red-100 text-red-700",v==="WARN"&&"bg-yellow-100 text-yellow-700",v==="INFO"&&"bg-green-100 text-green-700",v==="DEBUG"&&"bg-blue-100 text-blue-700",v==="TRACE"&&"bg-slate-100 text-slate-700"),children:v})]})},b=v=>{const L=Di[v]||ae,u=Ii[v]||"text-muted-foreground";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(L,{className:O("h-4 w-4",u)}),e.jsx("span",{className:"text-xs px-2 py-1 bg-secondary rounded",children:v.replace(/_/g," ")})]})};return E?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading transaction logs..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Transactional Logs"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor business transactions, authentication, and file processing events"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{variant:"outline",onClick:()=>w(),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(T,{variant:"outline",onClick:S,children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Rs,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),e.jsx(D,{placeholder:"Search logs by message, username, or correlation ID...",value:s,onChange:v=>t(v.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full lg:w-48",children:e.jsxs(K,{value:a,onValueChange:r,children:[e.jsx($,{children:e.jsx(_,{placeholder:"All Categories"})}),e.jsxs(V,{children:[e.jsx(x,{value:"ALL",children:"All Categories"}),e.jsx(x,{value:"AUTHENTICATION",children:"Authentication"}),e.jsx(x,{value:"FILE_PROCESSING",children:"File Processing"}),e.jsx(x,{value:"ADAPTER_EXECUTION",children:"Adapter Execution"}),e.jsx(x,{value:"FLOW_EXECUTION",children:"Flow Execution"}),e.jsx(x,{value:"SYSTEM_OPERATION",children:"System Operation"}),e.jsx(x,{value:"USER_MANAGEMENT",children:"User Management"}),e.jsx(x,{value:"CONFIGURATION_CHANGE",children:"Configuration Change"}),e.jsx(x,{value:"SECURITY",children:"Security"})]})]})}),e.jsx("div",{className:"w-full lg:w-36",children:e.jsxs(K,{value:n,onValueChange:i,children:[e.jsx($,{children:e.jsx(_,{placeholder:"All Levels"})}),e.jsxs(V,{children:[e.jsx(x,{value:"ALL",children:"All Levels"}),e.jsx(x,{value:"ERROR",children:"Error"}),e.jsx(x,{value:"WARN",children:"Warning"}),e.jsx(x,{value:"INFO",children:"Info"}),e.jsx(x,{value:"DEBUG",children:"Debug"}),e.jsx(x,{value:"TRACE",children:"Trace"})]})]})}),e.jsx("div",{className:"w-full lg:w-24",children:e.jsxs(K,{value:o.toString(),onValueChange:v=>j(parseInt(v)),children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"25",children:"25"}),e.jsx(x,{value:"50",children:"50"}),e.jsx(x,{value:"100",children:"100"}),e.jsx(x,{value:"200",children:"200"})]})]})})]})})}),e.jsx("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:e.jsxs("span",{children:["Showing ",k.length," transaction logs",a!=="ALL"&&` in ${a} category`,n!=="ALL"&&` at ${n} level`]})}),k.length>0?e.jsx("div",{className:"space-y-2",children:k.map(v=>e.jsx(M,{className:"app-card border hover:border-primary/30 transition-all duration-200",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2 min-w-0",children:[e.jsx("div",{className:"text-xs font-mono text-muted-foreground",children:g(v.timestamp)}),p(v.level)]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[b(v.category),e.jsx("span",{className:"text-xs font-mono text-muted-foreground truncate",children:v.component}),e.jsx("span",{className:"text-xs px-2 py-1 bg-muted rounded",children:v.source})]}),(v.details||v.correlationId||v.adapterId||v.executionId||v.fileName)&&e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>f(d===v.id?null:v.id),children:d===v.id?"Less":"More"})]}),e.jsx("div",{className:"text-sm text-foreground",children:v.message}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[v.username&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:["User: ",v.username]}),v.correlationId&&e.jsxs("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded",children:["ID: ",v.correlationId]}),v.fileName&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:["File: ",v.fileName]}),v.ipAddress&&e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded",children:["IP: ",v.ipAddress]}),v.executionTimeMs&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded",children:[v.executionTimeMs,"ms"]})]}),d===v.id&&e.jsxs("div",{className:"mt-4 space-y-3 border-t border-border pt-3",children:[v.details&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Additional Details:"}),e.jsx("pre",{className:"mt-1 font-mono text-xs bg-secondary/50 p-3 rounded overflow-x-auto max-h-48",children:v.details})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[v.sessionId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Session ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:v.sessionId})]}),v.adapterId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Adapter ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:v.adapterId})]}),v.executionId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Execution ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:v.executionId})]}),v.userAgent&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"User Agent:"}),e.jsx("span",{className:"ml-2 text-foreground",children:v.userAgent})]})]})]})]})]})})},v.id))}):e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Re,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Transaction Logs Found"}),e.jsx("p",{className:"text-muted-foreground",children:"No transaction logs match your current filter criteria"})]})})})]})},Ri=[{id:"system",label:"System Logs",icon:Ne,description:"Application logs, errors, and system events",adminOnly:!0},{id:"transactional",label:"Transactional Logs",icon:Re,description:"Transaction audit trails and business process logs"}],Mi=()=>{var o;const{isAdmin:s}=os(),t=Ri.filter(j=>!j.adminOnly||s()),a=s()?"system":"transactional",[r,n]=N.useState(a),i=()=>{switch(r){case"system":return e.jsx(bt,{});case"transactional":return e.jsx(Li,{});default:return e.jsx(bt,{})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(pe,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Logs"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor system and transactional logs for application insights and debugging"})]}),t.length>1&&e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex space-x-4 border-b border-border",children:t.map(j=>{const d=j.icon,f=r===j.id;return e.jsxs("button",{onClick:()=>n(j.id),className:O("flex items-center space-x-2 px-4 py-3 text-sm font-medium transition-colors border-b-2 -mb-px",f?"text-primary border-primary bg-primary/5":"text-muted-foreground border-transparent hover:text-foreground hover:border-border"),children:[e.jsx(d,{className:"h-4 w-4"}),e.jsx("span",{children:j.label})]},j.id)})}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:(o=t.find(j=>j.id===r))==null?void 0:o.description})})]}),e.jsx("div",{className:"transition-all duration-300",children:i()})]})},Ui=()=>{const{success:s,error:t}=xe(),a=be(),[r,n]=N.useState(!1),[i,o]=N.useState(!1),{data:j,isLoading:d}=ee({queryKey:["pgp-keys"],queryFn:Ye.getAllKeys}),f=(j==null?void 0:j.data)||[],h=X({mutationFn:Ye.generateKey,onSuccess:()=>{s("PGP Key Generated","PGP key pair generated successfully"),a.invalidateQueries({queryKey:["pgp-keys"]}),n(!1)},onError:u=>{var I,c;t("Generation Failed",((c=(I=u.response)==null?void 0:I.data)==null?void 0:c.message)||"Failed to generate PGP key")}}),E=X({mutationFn:Ye.importKey,onSuccess:()=>{s("PGP Key Imported","PGP key imported successfully"),a.invalidateQueries({queryKey:["pgp-keys"]}),o(!1)},onError:u=>{var I,c;t("Import Failed",((c=(I=u.response)==null?void 0:I.data)==null?void 0:c.message)||"Failed to import PGP key")}}),w=X({mutationFn:Ye.deleteKey,onSuccess:()=>{s("PGP Key Deleted","PGP key deleted successfully"),a.invalidateQueries({queryKey:["pgp-keys"]})},onError:u=>{var I,c;t("Deletion Failed",((c=(I=u.response)==null?void 0:I.data)==null?void 0:c.message)||"Failed to delete PGP key")}}),k=X({mutationFn:({id:u,reason:I})=>Ye.revokeKey(u,I),onSuccess:()=>{s("PGP Key Revoked","PGP key revoked successfully"),a.invalidateQueries({queryKey:["pgp-keys"]})},onError:u=>{var I,c;t("Revocation Failed",((c=(I=u.response)==null?void 0:I.data)==null?void 0:c.message)||"Failed to revoke PGP key")}}),S=async(u,I)=>{try{const c=await Ye.exportPublicKey(u),l=new Blob([c],{type:"text/plain"}),m=window.URL.createObjectURL(l),C=document.createElement("a");C.href=m,C.download=`${I}-public.asc`,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(m),s("Export Complete","Public key exported successfully")}catch{t("Export Failed","Failed to export public key")}},g=async(u,I)=>{try{const c=await Ye.exportPrivateKey(u),l=new Blob([c],{type:"text/plain"}),m=window.URL.createObjectURL(l),C=document.createElement("a");C.href=m,C.download=`${I}-private.asc`,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(m),s("Export Complete","Private key exported successfully")}catch{t("Export Failed","Failed to export private key")}},p=u=>u.revokedAt?e.jsx(ce,{className:"h-4 w-4 text-red-500"}):u.expiresAt&&new Date(u.expiresAt)<new Date?e.jsx(oe,{className:"h-4 w-4 text-yellow-500"}):e.jsx(te,{className:"h-4 w-4 text-green-500"}),b=u=>u.revokedAt?"Revoked":u.expiresAt&&new Date(u.expiresAt)<new Date?"Expired":"Valid",v=u=>{switch(u){case"RSA":return e.jsx(Le,{className:"h-4 w-4 text-blue-500"});case"ECC":return e.jsx(Ue,{className:"h-4 w-4 text-green-500"});case"DSA":return e.jsx(Xe,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(Le,{className:"h-4 w-4 text-gray-500"})}},L=u=>!u||u.length!==40?u:u.replace(/(.{4})/g,"$1 ").trim();return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading PGP keys..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"PGP Key Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage PGP encryption keys for secure file transfers"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{variant:"outline",onClick:()=>o(!0),children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Import Key"]}),e.jsxs(T,{className:"btn-primary",onClick:()=>n(!0),children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Generate Key"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Le,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Keys"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:f.length})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valid Keys"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:f.filter(u=>!u.revokedAt&&(!u.expiresAt||new Date(u.expiresAt)>new Date)).length})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(oe,{className:"h-8 w-8 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expired"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:f.filter(u=>!u.revokedAt&&u.expiresAt&&new Date(u.expiresAt)<new Date).length})]})]})})}),e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Revoked"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:f.filter(u=>u.revokedAt).length})]})]})})})]}),r&&e.jsx(Oi,{onSubmit:u=>h.mutate(u),onCancel:()=>n(!1),isLoading:h.isPending}),i&&e.jsx($i,{onSubmit:u=>E.mutate(u),onCancel:()=>o(!1),isLoading:E.isPending}),f.length>0?e.jsx("div",{className:"space-y-4",children:f.map(u=>e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[v(u.keyType),e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg text-foreground",children:u.keyName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.userId})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[p(u),e.jsx("span",{className:O("text-sm px-2 py-1 rounded",u.revokedAt&&"bg-red-100 text-red-700",!u.revokedAt&&u.expiresAt&&new Date(u.expiresAt)<new Date&&"bg-yellow-100 text-yellow-700",!u.revokedAt&&(!u.expiresAt||new Date(u.expiresAt)>new Date)&&"bg-green-100 text-green-700"),children:b(u)})]})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsxs("span",{className:"ml-2 text-foreground",children:[u.keyType," ",u.keySize]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Algorithm:"}),e.jsx("span",{className:"ml-2 text-foreground",children:u.algorithm})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Key ID:"}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:u.keyId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Exports:"}),e.jsx("span",{className:"ml-2 text-foreground",children:u.exportedCount})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Usage:"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[u.canEncrypt&&e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:"Encrypt"}),u.canSign&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:"Sign"}),u.canCertify&&e.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded",children:"Certify"}),u.canAuthenticate&&e.jsx("span",{className:"text-xs px-2 py-1 bg-orange-100 text-orange-700 rounded",children:"Authenticate"})]})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-sm text-muted-foreground",children:"Fingerprint:"}),e.jsx("div",{className:"mt-1 font-mono text-sm bg-secondary/50 px-3 py-2 rounded",children:L(u.fingerprint)})]}),u.description&&e.jsxs("div",{children:[e.jsx(y,{className:"text-sm text-muted-foreground",children:"Description:"}),e.jsx("p",{className:"mt-1 text-sm text-foreground",children:u.description})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(u.createdAt).toLocaleDateString()})]}),u.expiresAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Expires:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(u.expiresAt).toLocaleDateString()})]}),u.lastUsedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Used:"}),e.jsx("span",{className:"ml-2 text-foreground",children:new Date(u.lastUsedAt).toLocaleDateString()})]})]}),u.importedFrom&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Imported from:"}),e.jsx("span",{className:"ml-2 text-foreground",children:u.importedFrom})]}),u.revokedAt&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-700 mb-1",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Key Revoked"})]}),e.jsxs("div",{className:"text-sm text-red-600",children:[e.jsxs("p",{children:["Revoked on: ",new Date(u.revokedAt).toLocaleString()]}),u.revocationReason&&e.jsxs("p",{children:["Reason: ",u.revocationReason]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4 border-t border-border",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>S(u.id,u.keyName),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Export Public"]}),u.privateKey&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>g(u.id,u.keyName),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Export Private"]}),!u.revokedAt&&e.jsxs(T,{variant:"outline",size:"sm",className:"text-yellow-600",onClick:()=>{const I=prompt("Enter revocation reason:");I&&k.mutate({id:u.id,reason:I})},children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Revoke"]}),e.jsxs(T,{variant:"outline",size:"sm",className:"text-red-600",onClick:()=>{window.confirm("Are you sure you want to delete this PGP key?")&&w.mutate(u.id)},children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},u.id))}):e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xe,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No PGP Keys Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Generate or import your first PGP key to get started"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs(T,{variant:"outline",onClick:()=>o(!0),children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Import Key"]}),e.jsxs(T,{className:"btn-primary",onClick:()=>n(!0),children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Generate Key"]})]})]})})})]})},Oi=({onSubmit:s,onCancel:t,isLoading:a})=>{const[r,n]=N.useState({keyName:"",userId:"",passphrase:"",keyType:"RSA",keySize:2048,expiresAt:"",description:""}),[i,o]=N.useState(!1),j=d=>{d.preventDefault(),s(r)};return e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-foreground flex items-center space-x-2",children:[e.jsx(Le,{className:"h-5 w-5"}),e.jsx("span",{children:"Generate PGP Key Pair"})]})}),e.jsx(U,{children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"keyName",children:"Key Name"}),e.jsx(D,{id:"keyName",value:r.keyName,onChange:d=>n(f=>({...f,keyName:d.target.value})),placeholder:"e.g., Production Encryption Key",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"userId",children:"User ID (Email)"}),e.jsx(D,{id:"userId",type:"email",value:r.userId,onChange:d=>n(f=>({...f,userId:d.target.value})),placeholder:"e.g., admin@company.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"keyType",children:"Key Type"}),e.jsxs(K,{value:r.keyType,onValueChange:d=>n(f=>({...f,keyType:d})),children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"RSA",children:"RSA (Recommended)"}),e.jsx(x,{value:"ECC",disabled:!0,children:"ECC (Coming Soon)"}),e.jsx(x,{value:"DSA",disabled:!0,children:"DSA (Coming Soon)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"keySize",children:"Key Size (bits)"}),e.jsxs(K,{value:r.keySize.toString(),onValueChange:d=>n(f=>({...f,keySize:parseInt(d)})),children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"2048",children:"2048 (Standard)"}),e.jsx(x,{value:"3072",children:"3072 (High Security)"}),e.jsx(x,{value:"4096",children:"4096 (Maximum Security)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"passphrase",children:"Passphrase"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{id:"passphrase",type:i?"text":"password",value:r.passphrase,onChange:d=>n(f=>({...f,passphrase:d.target.value})),placeholder:"Enter secure passphrase",className:"pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-3 text-muted-foreground",children:i?e.jsx(bs,{className:"h-4 w-4"}):e.jsx(Se,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"expiresAt",children:"Expiry Date (Optional)"}),e.jsx(D,{id:"expiresAt",type:"datetime-local",value:r.expiresAt,onChange:d=>n(f=>({...f,expiresAt:d.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(D,{id:"description",value:r.description,onChange:d=>n(f=>({...f,description:d.target.value})),placeholder:"e.g., Used for encrypting payment files"})]}),e.jsxs("div",{className:"flex items-center space-x-4 pt-4",children:[e.jsx(T,{type:"submit",className:"btn-primary",disabled:a,children:a?"Generating...":"Generate Key Pair"}),e.jsx(T,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},$i=({onSubmit:s,onCancel:t,isLoading:a})=>{const[r,n]=N.useState({keyName:"",armoredKey:"",description:""}),i=j=>{j.preventDefault(),s(r)},o=j=>{var f;const d=(f=j.target.files)==null?void 0:f[0];if(d){const h=new FileReader;h.onload=E=>{var k;const w=(k=E.target)==null?void 0:k.result;n(S=>({...S,armoredKey:w}))},h.readAsText(d)}};return e.jsxs(M,{className:"app-card border",children:[e.jsx(Y,{children:e.jsxs(Q,{className:"text-foreground flex items-center space-x-2",children:[e.jsx(ls,{className:"h-5 w-5"}),e.jsx("span",{children:"Import PGP Key"})]})}),e.jsx(U,{children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"importKeyName",children:"Key Name"}),e.jsx(D,{id:"importKeyName",value:r.keyName,onChange:j=>n(d=>({...d,keyName:j.target.value})),placeholder:"e.g., Customer Public Key",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"keyFile",children:"Import from File (Optional)"}),e.jsx(D,{id:"keyFile",type:"file",accept:".asc,.gpg,.pgp",onChange:o})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"armoredKey",children:"ASCII Armored Key"}),e.jsx("textarea",{id:"armoredKey",value:r.armoredKey,onChange:j=>n(d=>({...d,armoredKey:j.target.value})),placeholder:"Paste ASCII armored PGP key here...",className:"w-full h-32 px-3 py-2 border border-border rounded-md bg-background text-foreground font-mono text-sm",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"importDescription",children:"Description (Optional)"}),e.jsx(D,{id:"importDescription",value:r.description,onChange:j=>n(d=>({...d,description:j.target.value})),placeholder:"e.g., Customer XYZ public key for file encryption"})]}),e.jsxs("div",{className:"flex items-center space-x-4 pt-4",children:[e.jsx(T,{type:"submit",className:"btn-primary",disabled:a,children:a?"Importing...":"Import Key"}),e.jsx(T,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},Vi=()=>({toast:({title:t,description:a,variant:r})=>{console.log(`[${(r==="destructive"?"error":"info").toUpperCase()}] ${t}: ${a}`),alert(`${t}: ${a}`)}}),wt=[{value:"LOG_FILES",label:"Log Files",description:"Manages log file archiving and deletion",icon:pe},{value:"SYSTEM_LOGS",label:"System Logs",description:"Manages system_logs table cleanup",icon:Re},{value:"TRANSACTION_LOGS",label:"Transaction Logs",description:"Manages transaction_logs table cleanup",icon:Re},{value:"SCHEDULE",label:"Schedule",description:"Defines when retention cleanup should run",icon:re}];function Ki(){const[s,t]=N.useState([]),[a,r]=N.useState(null),[n,i]=N.useState(!0),[o,j]=N.useState(!1),[d,f]=N.useState(null),[h,E]=N.useState({dataType:"",name:"",description:"",retentionDays:30,archiveDays:90,scheduleCron:"0 0 2 * * ?",executorClass:"",enabled:!0}),[w,k]=N.useState([]),[S,g]=N.useState([]),{toast:p}=Vi();N.useEffect(()=>{b(),v(),L(),u()},[]);const b=async()=>{var A,Z,fe;try{const Ke=((fe=(Z=(A=(await P.get("/api/admin/data-retention")).data)==null?void 0:A.data)==null?void 0:Z.statistics)==null?void 0:fe.configurations)||[];t(Ke)}catch(ye){console.error("Error loading configurations:",ye),p({variant:"destructive",title:"Error",description:"Failed to load retention configurations"})}finally{i(!1)}},v=async()=>{try{const A=await P.get("/api/admin/data-retention/status");r(A.data)}catch(A){console.error("Error loading status:",A)}},L=async()=>{try{const A=await P.get("/api/admin/data-retention/defaults");k(A.data)}catch(A){console.error("Error loading default configurations:",A)}},u=async()=>{var A,Z,fe;try{const Ke=((fe=(Z=(A=(await P.get("/api/admin/data-retention/available-jobs")).data)==null?void 0:A.data)==null?void 0:Z.statistics)==null?void 0:fe.availableJobs)||[];g(Ke)}catch(ye){console.error("Error loading available jobs:",ye)}},I=()=>{const A=w.find(Z=>Z.dataType==="SCHEDULE");E({dataType:"",name:"",description:"",retentionDays:(A==null?void 0:A.retentionDays)||30,archiveDays:(A==null?void 0:A.archiveDays)||90,scheduleCron:(A==null?void 0:A.scheduleCron)||"0 0 2 * * ?",executorClass:"",enabled:!0})},c=async()=>{try{await P.post("/api/admin/data-retention",h),await b(),j(!1),I(),p({title:"Success",description:"Retention configuration created successfully"})}catch{p({variant:"destructive",title:"Error",description:"Failed to create configuration"})}},l=async()=>{if(d)try{await P.put(`/api/admin/data-retention/${d.id}`,d),await b(),f(null),p({title:"Success",description:"Configuration updated successfully"})}catch{p({variant:"destructive",title:"Error",description:"Failed to update configuration"})}},m=async A=>{try{await P.delete(`/api/admin/data-retention/${A}`),await b(),p({title:"Success",description:"Configuration deleted successfully"})}catch{p({variant:"destructive",title:"Error",description:"Failed to delete configuration"})}},C=async A=>{try{await P.patch(`/api/admin/data-retention/${A}/toggle`),await b(),p({title:"Success",description:"Configuration toggled successfully"})}catch{p({variant:"destructive",title:"Error",description:"Failed to toggle configuration"})}},F=async()=>{try{await P.post("/api/admin/data-retention/execute"),p({title:"Success",description:"Data retention execution started"}),setTimeout(v,2e3)}catch{p({variant:"destructive",title:"Error",description:"Failed to execute retention"})}},R=A=>typeof A!="string"?e.jsx(re,{className:"h-4 w-4 text-gray-500"}):A.includes("Completed")?e.jsx(te,{className:"h-4 w-4 text-green-500"}):A.includes("Failed")?e.jsx(ce,{className:"h-4 w-4 text-red-500"}):A.includes("Progress")?e.jsx(oe,{className:"h-4 w-4 text-yellow-500"}):e.jsx(re,{className:"h-4 w-4 text-gray-500"}),z=A=>A?new Date(A).toLocaleString():"Never";return n?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Data Retention Management"}),e.jsx("p",{className:"text-gray-600",children:"Configure automated cleanup policies for log files and database tables"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{onClick:F,variant:"outline",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Execute Now"]}),e.jsxs(cs,{open:o,onOpenChange:j,children:[e.jsx(gn,{asChild:!0,children:e.jsxs(T,{children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Add Configuration"]})}),e.jsxs(Ze,{className:"max-w-md",children:[e.jsxs(es,{children:[e.jsx(ss,{children:"Create Retention Configuration"}),e.jsx(vs,{children:"Add a new data retention policy"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Data Type"}),e.jsxs(K,{value:h.dataType,onValueChange:A=>E({...h,dataType:A}),children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select data type"})}),e.jsx(V,{children:wt.map(A=>e.jsx(x,{value:A.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A.icon,{className:"h-4 w-4"}),e.jsx("span",{children:A.label})]})},A.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Name"}),e.jsx(D,{value:h.name,onChange:A=>E({...h,name:A.target.value}),placeholder:"Configuration name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Description"}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:h.description,onChange:A=>E({...h,description:A.target.value}),placeholder:"Description",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Executor Job"}),e.jsxs(K,{value:h.executorClass,onValueChange:A=>E({...h,executorClass:A}),children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select which job will execute this policy"})}),e.jsx(V,{children:Array.isArray(S)&&S.map(A=>e.jsx(x,{value:A.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:A.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:A.description})]})},A.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Retention Days"}),e.jsx(D,{type:"number",value:h.retentionDays,onChange:A=>E({...h,retentionDays:parseInt(A.target.value)}),min:"1"})]}),h.dataType==="LOG_FILES"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Archive Days"}),e.jsx(D,{type:"number",value:h.archiveDays,onChange:A=>E({...h,archiveDays:parseInt(A.target.value)}),min:"1"})]}),h.dataType==="SCHEDULE"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Cron Expression"}),e.jsx(D,{value:h.scheduleCron,onChange:A=>E({...h,scheduleCron:A.target.value}),placeholder:"0 0 2 * * ?"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{checked:h.enabled,onCheckedChange:A=>E({...h,enabled:A})}),e.jsx(y,{children:"Enabled"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(T,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(T,{onClick:c,children:"Create"})]})]})]})]})]}),a&&e.jsxs(M,{children:[e.jsx(Y,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[R((a==null?void 0:a.status)||"Unknown"),"Execution Status"]})}),e.jsxs(U,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Last Execution"}),e.jsx("div",{className:"font-medium",children:z(a.lastExecution)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("div",{className:"font-medium",children:a.status})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Files Processed"}),e.jsx("div",{className:"font-medium",children:a.filesProcessed})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"DB Records Deleted"}),e.jsx("div",{className:"font-medium",children:a.databaseRecordsDeleted})]})]}),a.nextExecution&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Next Scheduled Execution"}),e.jsx("div",{className:"font-medium",children:z(a.nextExecution)})]})]})]}),e.jsx("div",{className:"grid gap-4",children:Array.isArray(s)&&s.map(A=>{const Z=wt.find(ye=>ye.value===A.dataType),fe=(Z==null?void 0:Z.icon)||pe;return e.jsx(M,{className:A.enabled?"":"opacity-50",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fe,{className:"h-5 w-5 mt-1 text-gray-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:A.name}),e.jsx(We,{variant:A.enabled?"default":"secondary",children:A.enabled?"Enabled":"Disabled"}),e.jsx(We,{variant:"outline",children:Z==null?void 0:Z.label})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:A.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Retention:"})," ",A.retentionDays," days"]}),A.archiveDays&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Archive:"})," ",A.archiveDays," days"]}),A.scheduleCron&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Schedule:"})," ",A.scheduleCron]})]}),A.lastExecution&&e.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Last run: ",z(A.lastExecution)," - ",A.lastExecutionStatus,A.lastItemsProcessed!==void 0&&e.jsxs("span",{children:[" (",A.lastItemsProcessed," items)"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{checked:A.enabled,onCheckedChange:()=>C(A.id)}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>f(A),children:e.jsx(Ys,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this retention configuration? This action cannot be undone.")&&m(A.id)},children:e.jsx(ts,{className:"h-4 w-4"})})]})]})})},A.id)})}),(!Array.isArray(s)||s.length===0)&&e.jsx(M,{children:e.jsxs(U,{className:"text-center py-8",children:[e.jsx(pe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Retention Configurations"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first data retention policy"}),e.jsxs(T,{onClick:()=>j(!0),children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Create Configuration"]})]})}),d&&e.jsx(cs,{open:!!d,onOpenChange:()=>f(null),children:e.jsxs(Ze,{className:"max-w-md",children:[e.jsxs(es,{children:[e.jsx(ss,{children:"Edit Configuration"}),e.jsx(vs,{children:"Update the retention configuration settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Name"}),e.jsx(D,{value:d.name,onChange:A=>f({...d,name:A.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Description"}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:d.description,onChange:A=>f({...d,description:A.target.value}),rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Executor Job"}),e.jsxs(K,{value:d.executorClass,onValueChange:A=>f({...d,executorClass:A}),children:[e.jsx($,{children:e.jsx(_,{placeholder:"Select which job will execute this policy"})}),e.jsx(V,{children:Array.isArray(S)&&S.map(A=>e.jsx(x,{value:A.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:A.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:A.description})]})},A.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Retention Days"}),e.jsx(D,{type:"number",value:d.retentionDays,onChange:A=>f({...d,retentionDays:parseInt(A.target.value)}),min:"1"})]}),d.dataType==="LOG_FILES"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Archive Days"}),e.jsx(D,{type:"number",value:d.archiveDays||0,onChange:A=>f({...d,archiveDays:parseInt(A.target.value)}),min:"1"})]}),d.dataType==="SCHEDULE"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Cron Expression"}),e.jsx(D,{value:d.scheduleCron||"",onChange:A=>f({...d,scheduleCron:A.target.value}),placeholder:"0 0 2 * * ?"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{checked:d.enabled,onCheckedChange:A=>f({...d,enabled:A})}),e.jsx(y,{children:"Enabled"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(T,{variant:"outline",onClick:()=>f(null),children:"Cancel"}),e.jsx(T,{onClick:l,children:"Save Changes"})]})]})})]})}const _i=[{id:"users",label:"Users",icon:Fs,description:"Manage user accounts, roles, and permissions",adminOnly:!0},{id:"ssh-keys",label:"SSH Keys",icon:Le,description:"Generate and manage SSH key pairs for SFTP adapters",adminOnly:!0},{id:"pgp-keys",label:"PGP Keys",icon:Xe,description:"Manage PGP encryption keys for secure file transfers",adminOnly:!0},{id:"system-config",label:"System Configuration",icon:ae,description:"Configure system settings, logging, and performance parameters",adminOnly:!0},{id:"logs",label:"Logs",icon:pe,description:"View and manage system and transactional logs"},{id:"data-retention",label:"Data Retention",icon:re,description:"Configure automated cleanup policies for logs and database tables",adminOnly:!0}],zi=()=>{const{isAdmin:s}=os(),{user:t}=Ve(),[a,r]=St(),n=_i.filter(h=>!h.adminOnly||s()),i=s()?"users":"logs",[o,j]=N.useState(i);N.useEffect(()=>{const h=a.get("tab");h&&n.some(E=>E.id===h)?j(h):s()||(j("logs"),r({tab:"logs"}))},[a,n,s]);const d=h=>{j(h),r({tab:h})};if(!t)return e.jsx("div",{className:"content-spacing",children:e.jsx(M,{className:"app-card border",children:e.jsx(U,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ue,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:"Authentication required to access this section"})]})})})});const f=()=>{switch(o){case"users":return e.jsx(vt,{});case"ssh-keys":return e.jsx(yi,{});case"pgp-keys":return e.jsx(Ui,{});case"system-config":return e.jsx(Ci,{});case"logs":return e.jsx(Mi,{});case"data-retention":return e.jsx(Ki,{});default:return e.jsx(vt,{})}};return e.jsxs("div",{className:"content-spacing",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Re,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:s()?"System Administration":"System Logs"})]}),e.jsx("p",{className:"text-muted-foreground",children:s()?"Centralized administration for users, security, configuration, and monitoring":"Monitor system and transactional logs for application insights and debugging"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:`grid gap-4 ${n.length===1?"grid-cols-1 max-w-md":n.length<=3?"grid-cols-1 md:grid-cols-3":"grid-cols-2 md:grid-cols-6"}`,children:n.map(h=>{const E=h.icon,w=o===h.id;return e.jsxs("button",{onClick:()=>d(h.id),className:O("text-left p-4 rounded-lg border transition-all duration-300 hover:scale-[1.02]","flex flex-col space-y-2 min-h-[120px]",w?"bg-primary/10 border-primary text-primary shadow-elegant":"bg-card border-border hover:bg-accent/50 hover:border-primary/30"),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:O("h-5 w-5 transition-colors",w?"text-primary":"text-muted-foreground")}),e.jsx("span",{className:O("font-medium transition-colors",w?"text-primary":"text-foreground"),children:h.label})]}),e.jsx("p",{className:O("text-xs leading-relaxed transition-colors",w?"text-primary/80":"text-muted-foreground"),children:h.description})]},h.id)})})}),e.jsx("div",{className:"transition-all duration-300",children:f()})]})},qi=kr,ma=N.forwardRef(({className:s,...t},a)=>e.jsx(sa,{ref:a,className:O("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));ma.displayName=sa.displayName;const xs=N.forwardRef(({className:s,...t},a)=>e.jsx(ta,{ref:a,className:O("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));xs.displayName=ta.displayName;const ms=N.forwardRef(({className:s,...t},a)=>e.jsx(aa,{ref:a,className:O("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));ms.displayName=aa.displayName;const Bi=()=>{const[s,t]=N.useState("profile"),[a,r]=N.useState(!1),[n,i]=N.useState(null),[o,j]=N.useState(!0),[d,f]=N.useState(null),[h,E]=N.useState({theme:"light",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY",timeFormat:"12h",emailNotifications:!0,soundAlerts:!0,compactMode:!1}),[w,k]=N.useState({fullName:"",email:""}),[S,g]=N.useState({currentPassword:"",newPassword:"",confirmPassword:""});N.useEffect(()=>{p(),b()},[]);const p=async()=>{try{const l=await Je.getCurrentUser();l!=null&&l.user&&(i(l.user),k({fullName:l.user.fullName||"",email:l.user.email||""}))}catch{L("error","Failed to load user profile")}finally{j(!1)}},b=()=>{const l=localStorage.getItem("h2h_user_preferences");if(l)try{const m=JSON.parse(l);E(C=>({...C,...m})),v(m.theme||"light")}catch{console.warn("Failed to parse saved preferences")}else v("light")},v=l=>{const m=document.documentElement;if(l==="system"){const C=window.matchMedia("(prefers-color-scheme: dark)").matches;m.classList.toggle("dark",C)}else l==="dark"?m.classList.add("dark"):m.classList.remove("dark")},L=(l,m)=>{f({type:l,message:m}),setTimeout(()=>f(null),5e3)},u=async()=>{var l,m;if(n!=null&&n.id)try{r(!0),await Je.updateUser(n.id,{fullName:w.fullName,email:w.email}),L("success","Profile updated successfully"),await p()}catch(C){const F=((m=(l=C==null?void 0:C.response)==null?void 0:l.data)==null?void 0:m.error)||"Failed to update profile";L("error",F)}finally{r(!1)}},I=async()=>{try{r(!0),localStorage.setItem("h2h_user_preferences",JSON.stringify(h)),v(h.theme),L("success","Preferences saved successfully")}catch{L("error","Failed to save preferences")}finally{r(!1)}},c=async()=>{var l,m;if(n!=null&&n.id){if(S.newPassword!==S.confirmPassword){L("error","New passwords do not match");return}if(S.newPassword.length<8){L("error","Password must be at least 8 characters long");return}try{r(!0),await Je.changePassword(n.id,S.currentPassword,S.newPassword),L("success","Password changed successfully"),g({currentPassword:"",newPassword:"",confirmPassword:""})}catch(C){const F=((m=(l=C==null?void 0:C.response)==null?void 0:l.data)==null?void 0:m.error)||"Failed to change password";L("error",F)}finally{r(!1)}}};return o?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(he,{className:"h-8 w-8 animate-spin"})})}):e.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ae,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"User Settings"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your profile and personal preferences"})]}),d&&e.jsxs(ps,{className:`mb-6 ${d.type==="error"?"border-red-500 bg-red-50":"border-green-500 bg-green-50"}`,children:[d.type==="success"?e.jsx(Bs,{className:"h-4 w-4 text-green-600"}):e.jsx(Pe,{className:"h-4 w-4 text-red-600"}),e.jsx(gs,{className:d.type==="error"?"text-red-700":"text-green-700",children:d.message})]}),e.jsxs(qi,{value:s,onValueChange:t,className:"space-y-6",children:[e.jsxs(ma,{className:"grid grid-cols-4 w-full max-w-2xl",children:[e.jsxs(xs,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Profile"]}),e.jsxs(xs,{value:"preferences",className:"flex items-center gap-2",children:[e.jsx(nr,{className:"h-4 w-4"}),"Preferences"]}),e.jsxs(xs,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4"}),"Notifications"]}),e.jsxs(xs,{value:"security",className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Security"]})]}),e.jsx(ms,{value:"profile",className:"space-y-6",children:e.jsxs(M,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Profile Information"}),e.jsx(He,{children:"Update your personal information and contact details"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs(ps,{children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsxs(gs,{children:["Username: ",e.jsx("strong",{children:n==null?void 0:n.username})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"fullName",children:"Full Name"}),e.jsx(D,{id:"fullName",value:w.fullName,onChange:l=>k({...w,fullName:l.target.value}),placeholder:"Enter full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"email",children:"Email"}),e.jsx(D,{id:"email",type:"email",value:w.email,onChange:l=>k({...w,email:l.target.value}),placeholder:"Enter email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"role",children:"Role"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{variant:(n==null?void 0:n.role)==="ADMINISTRATOR"?"default":"secondary",children:n==null?void 0:n.role}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"(role cannot be changed)"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(T,{onClick:u,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Save Profile"]})})})]})]})}),e.jsx(ms,{value:"preferences",className:"space-y-6",children:e.jsxs(M,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Display Preferences"}),e.jsx(He,{children:"Customize how the application looks and behaves for you"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"theme",children:"Theme"}),e.jsxs(K,{value:h.theme,onValueChange:l=>{E({...h,theme:l}),v(l)},children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"light",children:"Light"}),e.jsx(x,{value:"dark",children:"Dark"}),e.jsx(x,{value:"system",children:"System"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"language",children:"Language"}),e.jsxs(K,{value:h.language,onValueChange:l=>E({...h,language:l}),children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"en",children:"English"}),e.jsx(x,{value:"es",children:"Spanish"}),e.jsx(x,{value:"fr",children:"French"}),e.jsx(x,{value:"de",children:"German"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"dateFormat",children:"Date Format"}),e.jsxs(K,{value:h.dateFormat,onValueChange:l=>E({...h,dateFormat:l}),children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx(x,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx(x,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"timeFormat",children:"Time Format"}),e.jsxs(K,{value:h.timeFormat,onValueChange:l=>E({...h,timeFormat:l}),children:[e.jsx($,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(x,{value:"12h",children:"12 Hour"}),e.jsx(x,{value:"24h",children:"24 Hour"})]})]})]})]}),e.jsx(hs,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Interface Options"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{htmlFor:"compactMode",children:"Compact View"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use a more condensed layout"})]}),e.jsx(Ce,{id:"compactMode",checked:h.compactMode,onCheckedChange:l=>E({...h,compactMode:l})})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(T,{onClick:I,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})})]})]})}),e.jsx(ms,{value:"notifications",className:"space-y-6",children:e.jsxs(M,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Notification Preferences"}),e.jsx(He,{children:"Choose how you want to be notified about important events"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs(ps,{children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(gs,{children:"These settings control personal notifications for file transfer operations and system events."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{htmlFor:"emailNotifications",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),e.jsx(Ce,{id:"emailNotifications",checked:h.emailNotifications,onCheckedChange:l=>E({...h,emailNotifications:l})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{htmlFor:"soundAlerts",children:"Sound Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Play sounds for important events"})]}),e.jsx(Ce,{id:"soundAlerts",checked:h.soundAlerts,onCheckedChange:l=>E({...h,soundAlerts:l})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(T,{onClick:I,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})})]})]})}),e.jsxs(ms,{value:"security",className:"space-y-6",children:[e.jsxs(M,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Change Password"}),e.jsx(He,{children:"Update your account password"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(D,{id:"currentPassword",type:"password",value:S.currentPassword,onChange:l=>g({...S,currentPassword:l.target.value}),placeholder:"Enter current password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"newPassword",children:"New Password"}),e.jsx(D,{id:"newPassword",type:"password",value:S.newPassword,onChange:l=>g({...S,newPassword:l.target.value}),placeholder:"Enter new password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(D,{id:"confirmPassword",type:"password",value:S.confirmPassword,onChange:l=>g({...S,confirmPassword:l.target.value}),placeholder:"Confirm new password"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(T,{onClick:c,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}),"Changing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Change Password"]})})})]})]}),e.jsxs(M,{children:[e.jsxs(Y,{children:[e.jsx(Q,{children:"Active Sessions"}),e.jsx(He,{children:"Manage your active login sessions"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Current Session"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx(re,{className:"h-3 w-3 inline mr-1"}),"Last active: Just now"]})]}),e.jsx(We,{variant:"secondary",children:"Active"})]})})})]})]})]})]})},Hi=()=>{const s=localStorage.getItem("h2h_user_preferences");let t="light";if(s)try{t=JSON.parse(s).theme||"light"}catch{console.warn("Failed to parse saved preferences for theme")}const a=document.documentElement;if(t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches;a.classList.toggle("dark",r)}else t==="dark"?a.classList.add("dark"):a.classList.remove("dark")};function Gi(){return Gr(),N.useEffect(()=>{Hi()},[]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs(ka,{children:[e.jsx(se,{path:"/login",element:e.jsx(pn,{})}),e.jsxs(se,{path:"/",element:e.jsx(mn,{children:e.jsx(xn,{})}),children:[e.jsx(se,{index:!0,element:e.jsx(Te,{to:"/dashboard",replace:!0})}),e.jsx(se,{path:"dashboard",element:e.jsx(Nn,{})}),e.jsx(se,{path:"adapters",element:e.jsx(In,{})}),e.jsx(se,{path:"adapters/create",element:e.jsx(pt,{})}),e.jsx(se,{path:"adapters/:id/edit",element:e.jsx(pt,{})}),e.jsx(se,{path:"admin",element:e.jsx(zi,{})}),e.jsx(se,{path:"ssh-keys",element:e.jsx(Te,{to:"/admin",replace:!0})}),e.jsx(se,{path:"ssh-keys/create",element:e.jsx(Ln,{})}),e.jsx(se,{path:"users",element:e.jsx(Te,{to:"/admin",replace:!0})}),e.jsx(se,{path:"flows",element:e.jsx(Rn,{})}),e.jsx(se,{path:"flows/create",element:e.jsx(yt,{})}),e.jsx(se,{path:"flows/:id/visual",element:e.jsx(yt,{})}),e.jsx(se,{path:"adapter-monitoring",element:e.jsx(pi,{})}),e.jsx(se,{path:"flow-monitoring",element:e.jsx(gi,{})}),e.jsx(se,{path:"execution-logs/:executionId",element:e.jsx(ji,{})}),e.jsx(se,{path:"settings",element:e.jsx(Bi,{})}),e.jsx(se,{path:"monitoring",element:e.jsx(Te,{to:"/adapter-monitoring",replace:!0})}),e.jsx(se,{path:"executions",element:e.jsx(Te,{to:"/flow-monitoring",replace:!0})}),e.jsx(se,{path:"execution-monitoring",element:e.jsx(Te,{to:"/flow-monitoring",replace:!0})}),e.jsx(se,{path:"performance",element:e.jsx(Te,{to:"/dashboard",replace:!0})}),e.jsx(se,{path:"logs",element:e.jsx(Te,{to:"/admin",replace:!0})})]}),e.jsx(se,{path:"*",element:e.jsx(Te,{to:"/dashboard",replace:!0})})]}),e.jsx(Ft,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(215, 25%, 10%)",color:"hsl(210, 40%, 98%)"},success:{style:{background:"hsl(142, 76%, 36%)",color:"hsl(210, 40%, 98%)"}},error:{style:{background:"hsl(0, 84%, 60%)",color:"hsl(210, 40%, 98%)"}}}}),!1]})}const Wi=new Ia({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e4}}});zs.createRoot(document.getElementById("root")).render(e.jsx(Ee.StrictMode,{children:e.jsx(La,{client:Wi,children:e.jsxs(Pa,{children:[e.jsx(Gi,{}),e.jsx(Ft,{position:"top-right"})]})})}));
//# sourceMappingURL=index-BKQB6YVf.js.map
