import{c as Ct,u as Rt}from"./reactflow-DSe82xZ2.js";import{a as v}from"./vendor-CkebN-nG.js";const ut={},{useDebugValue:Ot}=v,{useSyncExternalStoreWithSelector:Tt}=Rt;let Ge=!1;const Lt=e=>e;function pt(e,s=Lt,t){(ut?"production":void 0)!=="production"&&t&&!Ge&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ge=!0);const i=Tt(e.subscribe,e.getState,e.getServerState||e.getInitialState,s,t);return Ot(i),i}const Ye=e=>{(ut?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof e=="function"?Ct(e):e,t=(i,l)=>pt(s,i,l);return Object.assign(t,s),t},ir=e=>e?Ye(e):Ye;var ge=e=>e.type==="checkbox",ae=e=>e instanceof Date,z=e=>e==null;const lt=e=>typeof e=="object";var T=e=>!z(e)&&!Array.isArray(e)&&lt(e)&&!ae(e),ot=e=>T(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,Ut=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,dt=(e,s)=>e.has(Ut(s)),Mt=e=>{const s=e.constructor&&e.constructor.prototype;return T(s)&&s.hasOwnProperty("isPrototypeOf")},Re=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function M(e){if(e instanceof Date)return new Date(e);const s=typeof FileList<"u"&&e instanceof FileList;if(Re&&(e instanceof Blob||s))return e;const t=Array.isArray(e);if(!t&&!(T(e)&&Mt(e)))return e;const i=t?[]:Object.create(Object.getPrototypeOf(e));for(const l in e)Object.prototype.hasOwnProperty.call(e,l)&&(i[l]=M(e[l]));return i}var Ve=e=>/^\w*$/.test(e),R=e=>e===void 0,Oe=e=>Array.isArray(e)?e.filter(Boolean):[],Te=e=>Oe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!T(e))return t;const i=(Ve(s)?[s]:Te(s)).reduce((l,n)=>z(l)?l:l[n],e);return R(i)||i===e?R(e[s])?t:e[s]:i},$=e=>typeof e=="boolean",q=e=>typeof e=="function",k=(e,s,t)=>{let i=-1;const l=Ve(s)?[s]:Te(s),n=l.length,d=n-1;for(;++i<n;){const f=l[i];let D=t;if(i!==d){const C=e[f];D=T(C)||Array.isArray(C)?C:isNaN(+l[i+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;e[f]=D,e=e[f]}};const _e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},X={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},se={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ct=v.createContext(null);ct.displayName="HookFormContext";const Le=()=>v.useContext(ct);var ft=(e,s,t,i=!0)=>{const l={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(l,n,{get:()=>{const d=n;return s._proxyFormState[d]!==X.all&&(s._proxyFormState[d]=!i||X.all),t&&(t[d]=!0),e[d]}});return l};const pe=typeof window<"u"?v.useLayoutEffect:v.useEffect;function It(e){const s=Le(),{control:t=s.control,disabled:i,name:l,exact:n}=e||{},[d,f]=v.useState(t._formState),D=v.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return pe(()=>t._subscribe({name:l,formState:D.current,exact:n,callback:C=>{!i&&f({...t._formState,...C})}}),[l,i,n]),v.useEffect(()=>{D.current.isValid&&t._setValid(!0)},[t]),v.useMemo(()=>ft(d,t,D.current,!1),[d,t])}var K=e=>typeof e=="string",Se=(e,s,t,i,l)=>K(e)?(i&&s.watch.add(e),y(t,e,l)):Array.isArray(e)?e.map(n=>(i&&s.watch.add(n),y(t,n))):(i&&(s.watchAll=!0),t),ke=e=>z(e)||!lt(e);function Z(e,s,t=new WeakSet){if(ke(e)||ke(s))return Object.is(e,s);if(ae(e)&&ae(s))return e.getTime()===s.getTime();const i=Object.keys(e),l=Object.keys(s);if(i.length!==l.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const n of i){const d=e[n];if(!l.includes(n))return!1;if(n!=="ref"){const f=s[n];if(ae(d)&&ae(f)||T(d)&&T(f)||Array.isArray(d)&&Array.isArray(f)?!Z(d,f,t):!Object.is(d,f))return!1}}return!0}function Nt(e){const s=Le(),{control:t=s.control,name:i,defaultValue:l,disabled:n,exact:d,compute:f}=e||{},D=v.useRef(l),C=v.useRef(f),G=v.useRef(void 0),_=v.useRef(t),w=v.useRef(i);C.current=f;const[b,P]=v.useState(()=>{const V=t._getWatch(i,D.current);return C.current?C.current(V):V}),L=v.useCallback(V=>{const A=Se(i,t._names,V||t._formValues,!1,D.current);return C.current?C.current(A):A},[t._formValues,t._names,i]),I=v.useCallback(V=>{if(!n){const A=Se(i,t._names,V||t._formValues,!1,D.current);if(C.current){const H=C.current(A);Z(H,G.current)||(P(H),G.current=H)}else P(A)}},[t._formValues,t._names,n,i]);pe(()=>((_.current!==t||!Z(w.current,i))&&(_.current=t,w.current=i,I()),t._subscribe({name:i,formState:{values:!0},exact:d,callback:V=>{I(V.values)}})),[t,d,i,I]),v.useEffect(()=>t._removeUnmounted());const p=_.current!==t,m=w.current,B=v.useMemo(()=>{if(n)return null;const V=!p&&!Z(m,i);return p||V?L():null},[n,p,i,m,L]);return B!==null?B:b}function Pt(e){const s=Le(),{name:t,disabled:i,control:l=s.control,shouldUnregister:n,defaultValue:d,exact:f=!0}=e,D=dt(l._names.array,t),C=v.useMemo(()=>y(l._formValues,t,y(l._defaultValues,t,d)),[l,t,d]),G=Nt({control:l,name:t,defaultValue:C,exact:f}),_=It({control:l,name:t,exact:f}),w=v.useRef(e),b=v.useRef(void 0),P=v.useRef(l.register(t,{...e.rules,value:G,...$(e.disabled)?{disabled:e.disabled}:{}}));w.current=e;const L=v.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(_.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(_.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(_.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(_.validatingFields,t)},error:{enumerable:!0,get:()=>y(_.errors,t)}}),[_,t]),I=v.useCallback(V=>P.current.onChange({target:{value:ot(V),name:t},type:_e.CHANGE}),[t]),p=v.useCallback(()=>P.current.onBlur({target:{value:y(l._formValues,t),name:t},type:_e.BLUR}),[t,l._formValues]),m=v.useCallback(V=>{const A=y(l._fields,t);A&&A._f&&V&&(A._f.ref={focus:()=>q(V.focus)&&V.focus(),select:()=>q(V.select)&&V.select(),setCustomValidity:H=>q(V.setCustomValidity)&&V.setCustomValidity(H),reportValidity:()=>q(V.reportValidity)&&V.reportValidity()})},[l._fields,t]),B=v.useMemo(()=>({name:t,value:G,...$(i)||_.disabled?{disabled:_.disabled||i}:{},onChange:I,onBlur:p,ref:m}),[t,i,_.disabled,I,p,m,G]);return v.useEffect(()=>{const V=l._options.shouldUnregister||n,A=b.current;A&&A!==t&&!D&&l.unregister(A),l.register(t,{...w.current.rules,...$(w.current.disabled)?{disabled:w.current.disabled}:{}});const H=(te,re)=>{const ee=y(l._fields,te);ee&&ee._f&&(ee._f.mount=re)};if(H(t,!0),V){const te=M(y(l._options.defaultValues,t,w.current.defaultValue));k(l._defaultValues,t,te),R(y(l._formValues,t))&&k(l._formValues,t,te)}return!D&&l.register(t),b.current=t,()=>{(D?V&&!l._state.action:V)?l.unregister(t):H(t,!1)}},[t,l,D,n]),v.useEffect(()=>{l._setDisabledField({disabled:i,name:t})},[i,t,l]),v.useMemo(()=>({field:B,formState:_,fieldState:L}),[B,_,L])}const ar=e=>e.render(Pt(e));var Bt=(e,s,t,i,l)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:l||!0}}:{},fe=e=>Array.isArray(e)?e:[e],Je=()=>{let e=[];return{get observers(){return e},next:l=>{for(const n of e)n.next&&n.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(n=>n!==l)}}),unsubscribe:()=>{e=[]}}};function yt(e,s){const t={};for(const i in e)if(e.hasOwnProperty(i)){const l=e[i],n=s[i];if(l&&T(l)&&n){const d=yt(l,n);T(d)&&(t[i]=d)}else e[i]&&(t[i]=n)}return t}var W=e=>T(e)&&!Object.keys(e).length,Ue=e=>e.type==="file",be=e=>{if(!Re)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},gt=e=>e.type==="select-multiple",Me=e=>e.type==="radio",Wt=e=>Me(e)||ge(e),De=e=>be(e)&&e.isConnected;function qt(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=R(e)?i++:e[s[i++]];return e}function Ht(e){for(const s in e)if(e.hasOwnProperty(s)&&!R(e[s]))return!1;return!0}function O(e,s){const t=Array.isArray(s)?s:Ve(s)?[s]:Te(s),i=t.length===1?e:qt(e,t),l=t.length-1,n=t[l];return i&&delete i[n],l!==0&&(T(i)&&W(i)||Array.isArray(i)&&Ht(i))&&O(e,t.slice(0,-1)),e}var zt=e=>{for(const s in e)if(q(e[s]))return!0;return!1};function ht(e){return Array.isArray(e)||T(e)&&!zt(e)}function Ce(e,s={}){for(const t in e){const i=e[t];ht(i)?(s[t]=Array.isArray(i)?[]:{},Ce(i,s[t])):R(i)||(s[t]=!0)}return s}function ue(e,s,t){t||(t=Ce(s));for(const i in e){const l=e[i];if(ht(l))R(s)||ke(t[i])?t[i]=Ce(l,Array.isArray(l)?[]:{}):ue(l,z(s)?{}:s[i],t[i]);else{const n=s[i];t[i]=!Z(l,n)}}return t}const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var vt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!R(e[0].attributes.value)?R(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe},_t=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>R(e)?e:s?e===""?NaN:e&&+e:t&&K(e)?new Date(e):i?i(e):e;const Ze={isValid:!1,value:null};var bt=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Ze):Ze;function et(e){const s=e.ref;return Ue(s)?s.files:Me(s)?bt(e.refs).value:gt(s)?[...s.selectedOptions].map(({value:t})=>t):ge(s)?vt(e.refs).value:_t(R(s.value)?e.ref.value:s.value,e)}var jt=(e,s,t,i)=>{const l={};for(const n of e){const d=y(s,n);d&&k(l,n,d._f)}return{criteriaMode:t,names:[...e],fields:l,shouldUseNativeValidation:i}},me=e=>e instanceof RegExp,ce=e=>R(e)?e:me(e)?e.source:T(e)?me(e.value)?e.value.source:e.value:e,tt=e=>({isOnSubmit:!e||e===X.onSubmit,isOnBlur:e===X.onBlur,isOnChange:e===X.onChange,isOnAll:e===X.all,isOnTouch:e===X.onTouched});const rt="AsyncFunction";var $t=e=>!!e&&!!e.validate&&!!(q(e.validate)&&e.validate.constructor.name===rt||T(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===rt)),Kt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),st=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ye=(e,s,t,i)=>{for(const l of t||Object.keys(e)){const n=y(e,l);if(n){const{_f:d,...f}=n;if(d){if(d.refs&&d.refs[0]&&s(d.refs[0],l)&&!i)return!0;if(d.ref&&s(d.ref,d.name)&&!i)return!0;if(ye(f,s))break}else if(T(f)&&ye(f,s))break}}};function it(e,s,t){const i=y(e,t);if(i||Ve(t))return{error:i,name:t};const l=t.split(".");for(;l.length;){const n=l.join("."),d=y(s,n),f=y(e,n);if(d&&!Array.isArray(d)&&t!==n)return{name:t};if(f&&f.type)return{name:n,error:f};if(f&&f.root&&f.root.type)return{name:`${n}.root`,error:f.root};l.pop()}return{name:t}}var Gt=(e,s,t,i)=>{t(e);const{name:l,...n}=e;return W(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(d=>s[d]===(!i||X.all))},Yt=(e,s,t)=>!e||!s||e===s||fe(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i))),Jt=(e,s,t,i,l)=>l.isOnAll?!1:!t&&l.isOnTouch?!(s||e):(t?i.isOnBlur:l.isOnBlur)?!e:(t?i.isOnChange:l.isOnChange)?e:!0,Qt=(e,s)=>!Oe(y(e,s)).length&&O(e,s),Xt=(e,s,t)=>{const i=fe(y(e,t));return k(i,"root",s[t]),k(e,t,i),e};function at(e,s,t="validate"){if(K(e)||Array.isArray(e)&&e.every(K)||$(e)&&!e)return{type:t,message:K(e)?e:"",ref:s}}var ne=e=>T(e)&&!me(e)?e:{value:e,message:""},nt=async(e,s,t,i,l,n)=>{const{ref:d,refs:f,required:D,maxLength:C,minLength:G,min:_,max:w,pattern:b,validate:P,name:L,valueAsNumber:I,mount:p}=e._f,m=y(t,L);if(!p||s.has(L))return{};const B=f?f[0]:d,V=F=>{l&&B.reportValidity&&(B.setCustomValidity($(F)?"":F||""),B.reportValidity())},A={},H=Me(d),te=ge(d),re=H||te,ee=(I||Ue(d))&&R(d.value)&&R(m)||be(d)&&d.value===""||m===""||Array.isArray(m)&&!m.length,Y=Bt.bind(null,L,i,A),he=(F,x,U,N=se.maxLength,Q=se.minLength)=>{const j=F?x:U;A[L]={type:F?N:Q,message:j,ref:d,...Y(F?N:Q,j)}};if(n?!Array.isArray(m)||!m.length:D&&(!re&&(ee||z(m))||$(m)&&!m||te&&!vt(f).isValid||H&&!bt(f).isValid)){const{value:F,message:x}=K(D)?{value:!!D,message:D}:ne(D);if(F&&(A[L]={type:se.required,message:x,ref:B,...Y(se.required,x)},!i))return V(x),A}if(!ee&&(!z(_)||!z(w))){let F,x;const U=ne(w),N=ne(_);if(!z(m)&&!isNaN(m)){const Q=d.valueAsNumber||m&&+m;z(U.value)||(F=Q>U.value),z(N.value)||(x=Q<N.value)}else{const Q=d.valueAsDate||new Date(m),j=de=>new Date(new Date().toDateString()+" "+de),le=d.type=="time",oe=d.type=="week";K(U.value)&&m&&(F=le?j(m)>j(U.value):oe?m>U.value:Q>new Date(U.value)),K(N.value)&&m&&(x=le?j(m)<j(N.value):oe?m<N.value:Q<new Date(N.value))}if((F||x)&&(he(!!F,U.message,N.message,se.max,se.min),!i))return V(A[L].message),A}if((C||G)&&!ee&&(K(m)||n&&Array.isArray(m))){const F=ne(C),x=ne(G),U=!z(F.value)&&m.length>+F.value,N=!z(x.value)&&m.length<+x.value;if((U||N)&&(he(U,F.message,x.message),!i))return V(A[L].message),A}if(b&&!ee&&K(m)){const{value:F,message:x}=ne(b);if(me(F)&&!m.match(F)&&(A[L]={type:se.pattern,message:x,ref:d,...Y(se.pattern,x)},!i))return V(x),A}if(P){if(q(P)){const F=await P(m,t),x=at(F,B);if(x&&(A[L]={...x,...Y(se.validate,x.message)},!i))return V(x.message),A}else if(T(P)){let F={};for(const x in P){if(!W(F)&&!i)break;const U=at(await P[x](m,t),B,x);U&&(F={...U,...Y(x,U.message)},V(U.message),i&&(A[L]=F))}if(!W(F)&&(A[L]={ref:B,...F},!i))return A}}return V(!0),A};const Zt={mode:X.onSubmit,reValidateMode:X.onChange,shouldFocusError:!0};function er(e={}){let s={...Zt,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:q(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},l=T(s.defaultValues)||T(s.values)?M(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:M(l),d={action:!1,mount:!1,watch:!1,keepIsValid:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},D,C=0;const G={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={...G};let w={..._};const b={array:Je(),state:Je()},P=s.criteriaMode===X.all,L=r=>a=>{clearTimeout(C),C=setTimeout(r,a)},I=async r=>{if(!d.keepIsValid&&!s.disabled&&(_.isValid||w.isValid||r)){let a;s.resolver?(a=W((await re()).errors),p()):a=await Y(i,!0),a!==t.isValid&&b.state.next({isValid:a})}},p=(r,a)=>{!s.disabled&&(_.isValidating||_.validatingFields||w.isValidating||w.validatingFields)&&((r||Array.from(f.mount)).forEach(u=>{u&&(a?k(t.validatingFields,u,a):O(t.validatingFields,u))}),b.state.next({validatingFields:t.validatingFields,isValidating:!W(t.validatingFields)}))},m=(r,a=[],u,g,c=!0,o=!0)=>{if(g&&u&&!s.disabled){if(d.action=!0,o&&Array.isArray(y(i,r))){const h=u(y(i,r),g.argA,g.argB);c&&k(i,r,h)}if(o&&Array.isArray(y(t.errors,r))){const h=u(y(t.errors,r),g.argA,g.argB);c&&k(t.errors,r,h),Qt(t.errors,r)}if((_.touchedFields||w.touchedFields)&&o&&Array.isArray(y(t.touchedFields,r))){const h=u(y(t.touchedFields,r),g.argA,g.argB);c&&k(t.touchedFields,r,h)}(_.dirtyFields||w.dirtyFields)&&(t.dirtyFields=ue(l,n)),b.state.next({name:r,isDirty:F(r,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else k(n,r,a)},B=(r,a)=>{k(t.errors,r,a),b.state.next({errors:t.errors})},V=r=>{t.errors=r,b.state.next({errors:t.errors,isValid:!1})},A=(r,a,u,g)=>{const c=y(i,r);if(c){const o=y(n,r,R(u)?y(l,r):u);R(o)||g&&g.defaultChecked||a?k(n,r,a?o:et(c._f)):N(r,o),d.mount&&!d.action&&I()}},H=(r,a,u,g,c)=>{let o=!1,h=!1;const E={name:r};if(!s.disabled){if(!u||g){(_.isDirty||w.isDirty)&&(h=t.isDirty,t.isDirty=E.isDirty=F(),o=h!==E.isDirty);const S=Z(y(l,r),a);h=!!y(t.dirtyFields,r),S?O(t.dirtyFields,r):k(t.dirtyFields,r,!0),E.dirtyFields=t.dirtyFields,o=o||(_.dirtyFields||w.dirtyFields)&&h!==!S}if(u){const S=y(t.touchedFields,r);S||(k(t.touchedFields,r,u),E.touchedFields=t.touchedFields,o=o||(_.touchedFields||w.touchedFields)&&S!==u)}o&&c&&b.state.next(E)}return o?E:{}},te=(r,a,u,g)=>{const c=y(t.errors,r),o=(_.isValid||w.isValid)&&$(a)&&t.isValid!==a;if(s.delayError&&u?(D=L(()=>B(r,u)),D(s.delayError)):(clearTimeout(C),D=null,u?k(t.errors,r,u):O(t.errors,r)),(u?!Z(c,u):c)||!W(g)||o){const h={...g,...o&&$(a)?{isValid:a}:{},errors:t.errors,name:r};t={...t,...h},b.state.next(h)}},re=async r=>(p(r,!0),await s.resolver(n,s.context,jt(r||f.mount,i,s.criteriaMode,s.shouldUseNativeValidation))),ee=async r=>{const{errors:a}=await re(r);if(p(r),r)for(const u of r){const g=y(a,u);g?k(t.errors,u,g):O(t.errors,u)}else t.errors=a;return a},Y=async(r,a,u={valid:!0})=>{for(const g in r){const c=r[g];if(c){const{_f:o,...h}=c;if(o){const E=f.array.has(o.name),S=c._f&&$t(c._f);S&&_.validatingFields&&p([o.name],!0);const J=await nt(c,f.disabled,n,P,s.shouldUseNativeValidation&&!a,E);if(S&&_.validatingFields&&p([o.name]),J[o.name]&&(u.valid=!1,a))break;!a&&(y(J,o.name)?E?Xt(t.errors,J,o.name):k(t.errors,o.name,J[o.name]):O(t.errors,o.name))}!W(h)&&await Y(h,a,u)}}return u.valid},he=()=>{for(const r of f.unMount){const a=y(i,r);a&&(a._f.refs?a._f.refs.every(u=>!De(u)):!De(a._f.ref))&&Fe(r)}f.unMount=new Set},F=(r,a)=>!s.disabled&&(r&&a&&k(n,r,a),!Z(Ie(),l)),x=(r,a,u)=>Se(r,f,{...d.mount?n:R(a)?l:K(r)?{[r]:a}:a},u,a),U=r=>Oe(y(d.mount?n:l,r,s.shouldUnregister?y(l,r,[]):[])),N=(r,a,u={})=>{const g=y(i,r);let c=a;if(g){const o=g._f;o&&(!o.disabled&&k(n,r,_t(a,o)),c=be(o.ref)&&z(a)?"":a,gt(o.ref)?[...o.ref.options].forEach(h=>h.selected=c.includes(h.value)):o.refs?ge(o.ref)?o.refs.forEach(h=>{(!h.defaultChecked||!h.disabled)&&(Array.isArray(c)?h.checked=!!c.find(E=>E===h.value):h.checked=c===h.value||!!c)}):o.refs.forEach(h=>h.checked=h.value===c):Ue(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||b.state.next({name:r,values:M(n)})))}(u.shouldDirty||u.shouldTouch)&&H(r,c,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&de(r)},Q=(r,a,u)=>{for(const g in a){if(!a.hasOwnProperty(g))return;const c=a[g],o=r+"."+g,h=y(i,o);(f.array.has(r)||T(c)||h&&!h._f)&&!ae(c)?Q(o,c,u):N(o,c,u)}},j=(r,a,u={})=>{const g=y(i,r),c=f.array.has(r),o=M(a);k(n,r,o),c?(b.array.next({name:r,values:M(n)}),(_.isDirty||_.dirtyFields||w.isDirty||w.dirtyFields)&&u.shouldDirty&&b.state.next({name:r,dirtyFields:ue(l,n),isDirty:F(r,o)})):g&&!g._f&&!z(o)?Q(r,o,u):N(r,o,u),st(r,f)&&b.state.next({...t,name:r}),b.state.next({name:d.mount?r:void 0,values:M(n)})},le=async r=>{d.mount=!0;const a=r.target;let u=a.name,g=!0;const c=y(i,u),o=S=>{g=Number.isNaN(S)||ae(S)&&isNaN(S.getTime())||Z(S,y(n,u,S))},h=tt(s.mode),E=tt(s.reValidateMode);if(c){let S,J;const ve=a.type?et(c._f):ot(r),ie=r.type===_e.BLUR||r.type===_e.FOCUS_OUT,Dt=!Kt(c._f)&&!s.resolver&&!y(t.errors,u)&&!c._f.deps||Jt(ie,y(t.touchedFields,u),t.isSubmitted,E,h),we=st(u,f,ie);k(n,u,ve),ie?(!a||!a.readOnly)&&(c._f.onBlur&&c._f.onBlur(r),D&&D(0)):c._f.onChange&&c._f.onChange(r);const Ee=H(u,ve,ie),St=!W(Ee)||we;if(!ie&&b.state.next({name:u,type:r.type,values:M(n)}),Dt)return(_.isValid||w.isValid)&&(s.mode==="onBlur"?ie&&I():ie||I()),St&&b.state.next({name:u,...we?{}:Ee});if(!ie&&we&&b.state.next({...t}),s.resolver){const{errors:$e}=await re([u]);if(p([u]),o(ve),g){const kt=it(t.errors,i,u),Ke=it($e,i,kt.name||u);S=Ke.error,u=Ke.name,J=W($e)}}else p([u],!0),S=(await nt(c,f.disabled,n,P,s.shouldUseNativeValidation))[u],p([u]),o(ve),g&&(S?J=!1:(_.isValid||w.isValid)&&(J=await Y(i,!0)));g&&(c._f.deps&&(!Array.isArray(c._f.deps)||c._f.deps.length>0)&&de(c._f.deps),te(u,J,S,Ee))}},oe=(r,a)=>{if(y(t.errors,a)&&r.focus)return r.focus(),1},de=async(r,a={})=>{let u,g;const c=fe(r);if(s.resolver){const o=await ee(R(r)?r:c);u=W(o),g=r?!c.some(h=>y(o,h)):u}else r?(g=(await Promise.all(c.map(async o=>{const h=y(i,o);return await Y(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!g&&!t.isValid)&&I()):g=u=await Y(i);return b.state.next({...!K(r)||(_.isValid||w.isValid)&&u!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:u}:{},errors:t.errors}),a.shouldFocus&&!g&&ye(i,oe,r?c:f.mount),g},Ie=(r,a)=>{let u={...d.mount?n:l};return a&&(u=yt(a.dirtyFields?t.dirtyFields:t.touchedFields,u)),R(r)?u:K(r)?y(u,r):r.map(g=>y(u,g))},Ne=(r,a)=>({invalid:!!y((a||t).errors,r),isDirty:!!y((a||t).dirtyFields,r),error:y((a||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((a||t).touchedFields,r)}),mt=r=>{r&&fe(r).forEach(a=>O(t.errors,a)),b.state.next({errors:r?t.errors:{}})},Pe=(r,a,u)=>{const g=(y(i,r,{_f:{}})._f||{}).ref,c=y(t.errors,r)||{},{ref:o,message:h,type:E,...S}=c;k(t.errors,r,{...S,...a,ref:g}),b.state.next({name:r,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&g&&g.focus&&g.focus()},Vt=(r,a)=>q(r)?b.state.subscribe({next:u=>"values"in u&&r(x(void 0,a),u)}):x(r,a,!0),Be=r=>b.state.subscribe({next:a=>{Yt(r.name,a.name,r.exact)&&Gt(a,r.formState||_,Et,r.reRenderRoot)&&r.callback({values:{...n},...t,...a,defaultValues:l})}}).unsubscribe,Ft=r=>(d.mount=!0,w={...w,...r.formState},Be({...r,formState:{...G,...r.formState}})),Fe=(r,a={})=>{for(const u of r?fe(r):f.mount)f.mount.delete(u),f.array.delete(u),a.keepValue||(O(i,u),O(n,u)),!a.keepError&&O(t.errors,u),!a.keepDirty&&O(t.dirtyFields,u),!a.keepTouched&&O(t.touchedFields,u),!a.keepIsValidating&&O(t.validatingFields,u),!s.shouldUnregister&&!a.keepDefaultValue&&O(l,u);b.state.next({values:M(n)}),b.state.next({...t,...a.keepDirty?{isDirty:F()}:{}}),!a.keepIsValid&&I()},We=({disabled:r,name:a})=>{($(r)&&d.mount||r||f.disabled.has(a))&&(r?f.disabled.add(a):f.disabled.delete(a))},Ae=(r,a={})=>{let u=y(i,r);const g=$(a.disabled)||$(s.disabled);return k(i,r,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:r}},name:r,mount:!0,...a}}),f.mount.add(r),u?We({disabled:$(a.disabled)?a.disabled:s.disabled,name:r}):A(r,!0,a.value),{...g?{disabled:a.disabled||s.disabled}:{},...s.progressive?{required:!!a.required,min:ce(a.min),max:ce(a.max),minLength:ce(a.minLength),maxLength:ce(a.maxLength),pattern:ce(a.pattern)}:{},name:r,onChange:le,onBlur:le,ref:c=>{if(c){Ae(r,a),u=y(i,r);const o=R(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,h=Wt(o),E=u._f.refs||[];if(h?E.find(S=>S===o):o===u._f.ref)return;k(i,r,{_f:{...u._f,...h?{refs:[...E.filter(De),o,...Array.isArray(y(l,r))?[{}]:[]],ref:{type:o.type,name:r}}:{ref:o}}}),A(r,!1,void 0,o)}else u=y(i,r,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(dt(f.array,r)&&d.action)&&f.unMount.add(r)}}},xe=()=>s.shouldFocusError&&ye(i,oe,f.mount),At=r=>{$(r)&&(b.state.next({disabled:r}),ye(i,(a,u)=>{const g=y(i,u);g&&(a.disabled=g._f.disabled||r,Array.isArray(g._f.refs)&&g._f.refs.forEach(c=>{c.disabled=g._f.disabled||r}))},0,!1))},qe=(r,a)=>async u=>{let g;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let c=M(n);if(b.state.next({isSubmitting:!0}),s.resolver){const{errors:o,values:h}=await re();p(),t.errors=o,c=M(h)}else await Y(i);if(f.disabled.size)for(const o of f.disabled)O(c,o);if(O(t.errors,"root"),W(t.errors)){b.state.next({errors:{}});try{await r(c,u)}catch(o){g=o}}else a&&await a({...t.errors},u),xe(),setTimeout(xe);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:W(t.errors)&&!g,submitCount:t.submitCount+1,errors:t.errors}),g)throw g},xt=(r,a={})=>{y(i,r)&&(R(a.defaultValue)?j(r,M(y(l,r))):(j(r,a.defaultValue),k(l,r,M(a.defaultValue))),a.keepTouched||O(t.touchedFields,r),a.keepDirty||(O(t.dirtyFields,r),t.isDirty=a.defaultValue?F(r,M(y(l,r))):F()),a.keepError||(O(t.errors,r),_.isValid&&I()),b.state.next({...t}))},He=(r,a={})=>{const u=r?M(r):l,g=M(u),c=W(r),o=c?l:g;if(a.keepDefaultValues||(l=u),!a.keepValues){if(a.keepDirtyValues){const h=new Set([...f.mount,...Object.keys(ue(l,n))]);for(const E of Array.from(h))y(t.dirtyFields,E)?k(o,E,y(n,E)):j(E,y(o,E))}else{if(Re&&R(r))for(const h of f.mount){const E=y(i,h);if(E&&E._f){const S=Array.isArray(E._f.refs)?E._f.refs[0]:E._f.ref;if(be(S)){const J=S.closest("form");if(J){J.reset();break}}}}if(a.keepFieldsRef)for(const h of f.mount)j(h,y(o,h));else i={}}n=s.shouldUnregister?a.keepDefaultValues?M(l):{}:M(o),b.array.next({values:{...o}}),b.state.next({values:{...o}})}f={mount:a.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!_.isValid||!!a.keepIsValid||!!a.keepDirtyValues||!s.shouldUnregister&&!W(o),d.watch=!!s.shouldUnregister,d.keepIsValid=!!a.keepIsValid,d.action=!1,a.keepErrors||(t.errors={}),b.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:c?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!Z(r,l)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?{}:a.keepDirtyValues?a.keepDefaultValues&&n?ue(l,n):t.dirtyFields:a.keepDefaultValues&&r?ue(l,r):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},ze=(r,a)=>He(q(r)?r(n):r,{...s.resetOptions,...a}),wt=(r,a={})=>{const u=y(i,r),g=u&&u._f;if(g){const c=g.refs?g.refs[0]:g.ref;c.focus&&setTimeout(()=>{c.focus(),a.shouldSelect&&q(c.select)&&c.select()})}},Et=r=>{t={...t,...r}},je={control:{register:Ae,unregister:Fe,getFieldState:Ne,handleSubmit:qe,setError:Pe,_subscribe:Be,_runSchema:re,_updateIsValidating:p,_focusError:xe,_getWatch:x,_getDirty:F,_setValid:I,_setFieldArray:m,_setDisabledField:We,_setErrors:V,_getFieldArray:U,_reset:He,_resetDefaultValues:()=>q(s.defaultValues)&&s.defaultValues().then(r=>{ze(r,s.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:he,_disableForm:At,_subjects:b,_proxyFormState:_,get _fields(){return i},get _formValues(){return n},get _state(){return d},set _state(r){d=r},get _defaultValues(){return l},get _names(){return f},set _names(r){f=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:Ft,trigger:de,register:Ae,handleSubmit:qe,watch:Vt,setValue:j,getValues:Ie,reset:ze,resetField:xt,clearErrors:mt,unregister:Fe,setError:Pe,setFocus:wt,getFieldState:Ne};return{...je,formControl:je}}function nr(e={}){const s=v.useRef(void 0),t=v.useRef(void 0),[i,l]=v.useState({isDirty:!1,isValidating:!1,isLoading:q(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:q(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:i},e.defaultValues&&!q(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...f}=er(e);s.current={...f,formState:i}}const n=s.current.control;return n._options=e,pe(()=>{const d=n._subscribe({formState:n._proxyFormState,callback:()=>l({...n._formState}),reRenderRoot:!0});return l(f=>({...f,isReady:!0})),n._formState.isReady=!0,d},[n]),v.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),v.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),v.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),v.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),v.useEffect(()=>{if(n._proxyFormState.isDirty){const d=n._getDirty();d!==i.isDirty&&n._subjects.state.next({isDirty:d})}},[n,i.isDirty]),v.useEffect(()=>{var d;e.values&&!Z(e.values,t.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),!((d=n._options.resetOptions)===null||d===void 0)&&d.keepIsValid||n._setValid(),t.current=e.values,l(f=>({...f}))):n._resetDefaultValues()},[n,e.values]),v.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=ft(i,n),s.current}export{ar as C,Nt as a,ir as c,nr as u};
//# sourceMappingURL=forms-BWU-AKHq.js.map
